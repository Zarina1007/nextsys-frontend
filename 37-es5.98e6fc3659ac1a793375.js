!function(){function t(t,a){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,a){if(!t)return;if("string"==typeof t)return e(t,a);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e(t,a)}(t))||a&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,u=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return u=t.done,t},e:function(t){c=!0,s=t},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw s}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e,a){return e&&r(t.prototype,e),a&&r(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{Ntm9:function(e,r,i){"use strict";i.r(r),i.d(r,"PublisherReportingModule",(function(){return G}));var s,u=i("ofXK"),c=i("tyNb"),l=i("fXoL"),o=((s=function(){function t(){a(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||s)},s.\u0275cmp=l.Kb({type:s,selectors:[["app-publisher-reporting"]],decls:1,vars:0,template:function(t,e){1&t&&l.Rb(0,"router-outlet")},directives:[c.l],styles:[""]}),s),h=i("mrSG"),d=i("3awX"),f=i("oabR"),b=i("0TA1"),p=i("d9f2"),g=i("uJD8"),v=i("2Q/2"),m=i("Wxo5"),y=i("mPAa"),D=i("m5p0"),S=i("aNep"),x=i("SHm6"),C=i("/X+5"),A=i("lDzL"),P=i("PTT0"),T=["expandableTable"];function W(t,e){if(1&t&&l.Rb(0,"app-reporting-publisher-revenue-chart",18),2&t){var a=l.lc();l.rc("chartData",a.chartData)}}function R(t,e){1&t&&(l.Wb(0,"div",19),l.Wb(1,"div"),l.Wb(2,"strong"),l.Oc(3,"Address"),l.Vb(),l.Vb(),l.Wb(4,"div"),l.Oc(5,"Test"),l.Vb(),l.Vb())}function w(t,e){if(1&t){var a=l.Xb();l.Wb(0,"a",20),l.hc("click",(function(){l.Dc(a);var t=e.row;return l.lc().toggleExpandRow(t)})),l.Vb()}if(2&t){var r=e.expanded;l.Ib("datatable-icon-right",!r)("datatable-icon-down",r)}}function V(t,e){1&t&&l.Oc(0," Date ")}function k(t,e){if(1&t&&(l.Wb(0,"strong"),l.Oc(1),l.mc(2,"date"),l.Vb()),2&t){var a=e.value;l.Db(1),l.Pc(l.nc(2,1,a))}}function z(t,e){1&t&&l.Oc(0," Subid ")}function M(t,e){if(1&t&&(l.Wb(0,"strong"),l.Oc(1),l.Vb()),2&t){var a=e.value;l.Db(1),l.Pc(a)}}function I(t,e){1&t&&l.Oc(0," Searches ")}function O(t,e){if(1&t&&(l.Wb(0,"strong"),l.Oc(1),l.Vb()),2&t){var a=e.value;l.Db(1),l.Pc(a)}}function E(t,e){1&t&&l.Oc(0," CPC ")}function B(t,e){if(1&t&&(l.Wb(0,"strong"),l.Oc(1),l.mc(2,"currency"),l.mc(3,"currency"),l.Vb()),2&t){var a=e.value;l.Db(1),l.Pc(l.oc(2,1,a,"USD")||l.oc(3,4,0,"USD"))}}function j(t,e){1&t&&l.Oc(0," CTR ")}function Q(t,e){if(1&t&&(l.Wb(0,"strong"),l.Oc(1),l.mc(2,"percent"),l.mc(3,"percent"),l.Vb()),2&t){var a=e.value;l.Db(1),l.Pc(l.oc(2,1,a,"1.2-2")||l.oc(3,4,0,"1.2-2"))}}function L(t,e){1&t&&l.Oc(0," Revenue ")}function H(t,e){if(1&t&&(l.Wb(0,"strong"),l.Oc(1),l.mc(2,"currency"),l.Vb()),2&t){var a=e.value;l.Db(1),l.Pc(l.oc(2,1,a,"USD"))}}var N,F,U,X=[{path:"",component:o,children:[{path:":tagId",component:(N=function(){function e(t,r,n,i,s,u,c,l,o,h,d,f,b,p,g,v){a(this,e),this.route=t,this.tagManagementService=r,this.cdr=n,this.userService=i,this.perionService=s,this.lyonService=u,this.verizonService=c,this.verizonArbService=l,this.rubiService=o,this.solexbcService=h,this.system1Service=d,this.apptitudeService=f,this.exportDataService=b,this.datePipe=p,this.currencyPipe=g,this.percentPipe=v,this.loadingIndicator=!0,this.range={startDate:"",endDate:""},this.selectedCompany=this.getSelectedCompanyFromLocalStorage()}return n(e,[{key:"ngAfterViewInit",value:function(){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.route.params.subscribe((function(t){return Object(h.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingIndicator=!0,this.paramTagId=t.tagId,this.statData=[],e.next=5,this.getTagInformation(t.tagId);case 5:if(this.tagRows=e.sent,this.selectedAdvertiser=this.tagRows.advertiser,this.selectedCompany=this.tagRows.company,"lyons"!=this.selectedAdvertiser){e.next=17;break}return e.next=11,this.getLyonChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 11:return this.chartData=e.sent,e.next=14,this.getAllLyonStats(this.range.startDate,this.range.endDate,this.tagRows);case 14:this.statData=e.sent,e.next=79;break;case 17:if("perion"!=this.selectedAdvertiser){e.next=26;break}return e.next=20,this.getPerionChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 20:return this.chartData=e.sent,e.next=23,this.getAllPerionStats(this.range.startDate,this.range.endDate,this.tagRows);case 23:this.statData=e.sent,e.next=79;break;case 26:if("verizon-direct"!=this.selectedAdvertiser){e.next=35;break}return e.next=29,this.getVerizonChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 29:return this.chartData=e.sent,e.next=32,this.getAllVerizonStats(this.range.startDate,this.range.endDate,this.tagRows);case 32:this.statData=e.sent,e.next=79;break;case 35:if("verizon-direct-arb"!=this.selectedAdvertiser){e.next=44;break}return e.next=38,this.getVerizonArbChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 38:return this.chartData=e.sent,e.next=41,this.getAllVerizonArbStats(this.range.startDate,this.range.endDate,this.tagRows);case 41:this.statData=e.sent,e.next=79;break;case 44:if("rubi"!=this.selectedAdvertiser){e.next=53;break}return e.next=47,this.getRubiChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 47:return this.chartData=e.sent,e.next=50,this.getRubiAllStats(this.range.startDate,this.range.endDate,this.tagRows);case 50:this.statData=e.sent,e.next=79;break;case 53:if("solex-bc"!=this.selectedAdvertiser){e.next=62;break}return e.next=56,this.getSolexBCChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 56:return this.chartData=e.sent,e.next=59,this.getSolexBCAllStats(this.range.startDate,this.range.endDate,this.tagRows);case 59:this.statData=e.sent,e.next=79;break;case 62:if("system1"!=this.selectedAdvertiser){e.next=71;break}return e.next=65,this.getSystem1ChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 65:return this.chartData=e.sent,e.next=68,this.getSystem1AllStats(this.range.startDate,this.range.endDate,this.tagRows);case 68:this.statData=e.sent,e.next=79;break;case 71:if(e.t0="apptitude"==this.selectedAdvertiser,!e.t0){e.next=79;break}return e.next=75,this.getApptitudeChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 75:return this.chartData=e.sent,e.next=78,this.getApptitudePublisherStats(this.range.startDate,this.range.endDate,this.tagRows);case 78:this.statData=e.sent;case 79:this.loadingIndicator=!1,this.refreshTable();case 81:case"end":return e.stop()}}),e,this)})))}));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"getSelectedCompanyFromLocalStorage",value:function(){return this.userService.getSelectedCompanyFromLocalStorage()}},{key:"toggleExpandRow",value:function(t){this.table.rowDetail.toggleExpandRow(t)}},{key:"onDetailToggle",value:function(t){}},{key:"getTagInformation",value:function(t){return this.tagManagementService.getOneTag(t).toPromise().then((function(t){return t})).catch((function(t){return t}))}},{key:"updateReportingFiltering",value:function(t){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.range=t,this.loadingIndicator=!0,this.statData=[],"lyons"!=this.selectedAdvertiser){e.next=12;break}return e.next=6,this.getLyonChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 6:return this.chartData=e.sent,e.next=9,this.getAllLyonStats(this.range.startDate,this.range.endDate,this.tagRows);case 9:this.statData=e.sent,e.next=74;break;case 12:if("perion"!=this.selectedAdvertiser){e.next=21;break}return e.next=15,this.getPerionChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 15:return this.chartData=e.sent,e.next=18,this.getAllPerionStats(this.range.startDate,this.range.endDate,this.tagRows);case 18:this.statData=e.sent,e.next=74;break;case 21:if("verizon-direct"!=this.selectedAdvertiser){e.next=30;break}return e.next=24,this.getVerizonChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 24:return this.chartData=e.sent,e.next=27,this.getAllVerizonStats(this.range.startDate,this.range.endDate,this.tagRows);case 27:this.statData=e.sent,e.next=74;break;case 30:if("verizon-direct-arb"!=this.selectedAdvertiser){e.next=39;break}return e.next=33,this.getVerizonArbChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 33:return this.chartData=e.sent,e.next=36,this.getAllVerizonArbStats(this.range.startDate,this.range.endDate,this.tagRows);case 36:this.statData=e.sent,e.next=74;break;case 39:if("rubi"!=this.selectedAdvertiser){e.next=48;break}return e.next=42,this.getRubiChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 42:return this.chartData=e.sent,e.next=45,this.getRubiAllStats(this.range.startDate,this.range.endDate,this.tagRows);case 45:this.statData=e.sent,e.next=74;break;case 48:if("solex-bc"!=this.selectedAdvertiser){e.next=57;break}return e.next=51,this.getSolexBCChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 51:return this.chartData=e.sent,e.next=54,this.getSolexBCAllStats(this.range.startDate,this.range.endDate,this.tagRows);case 54:this.statData=e.sent,e.next=74;break;case 57:if("system1"!=this.selectedAdvertiser){e.next=66;break}return e.next=60,this.getSystem1ChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 60:return this.chartData=e.sent,e.next=63,this.getSystem1AllStats(this.range.startDate,this.range.endDate,this.tagRows);case 63:this.statData=e.sent,e.next=74;break;case 66:if(e.t0="apptitude"==this.selectedAdvertiser,!e.t0){e.next=74;break}return e.next=70,this.getApptitudeChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 70:return this.chartData=e.sent,e.next=73,this.getApptitudePublisherStats(this.range.startDate,this.range.endDate,this.tagRows);case 73:this.statData=e.sent;case 74:this.loadingIndicator=!1,this.refreshTable();case 76:case"end":return e.stop()}}),e,this)})))}},{key:"getLyonChartMetrics",value:function(e,a,r){var n=this;return this.lyonService.getAllPublisherStats(a,r).toPromise().then((function(e){n.allChart=e;var a,r=[],i=t(n.tagRows.subids);try{for(i.s();!(a=i.n()).done;){var s=a.value;"Contains"==s.filterTag?r=r.concat(n.allChart.filter((function(t){return t.subid.includes(s.subid)}))):"StartsWith"==s.filterTag?r=r.concat(n.allChart.filter((function(t){return t.subid.startsWith(s.subid)}))):"EndsWith"==s.filterTag?r=r.concat(n.allChart.filter((function(t){return t.subid.endsWith(s.subid)}))):"ExactValue"==s.filterTag&&(r=r.concat(n.allChart.filter((function(t){return t.subid==s.subid}))))}}catch(v){i.e(v)}finally{i.f()}var u=r.filter((function(t,e,a){return e===a.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))}));u=u.slice().sort((function(t,e){return t.date-e.date}));var c,l={},o=[],h=[],d=[],f=[],b={},p=t(u.reduce((function(t,e){var a=e.date;return l[a]?(l[a].searches+=parseInt(e.searches),e.revenue&&(l[a].revenue+=e.revenue)):(l[a]=Object.assign({},e),t.push(l[a])),t}),[]));try{for(p.s();!(c=p.n()).done;){var g=c.value;o.push(0),h.push(g.revenue),d.push(g.date),f.push(g.searches)}}catch(v){p.e(v)}finally{p.f()}return b.revenuePerDay=o,b.publisherRevenuePerDay=h,b.datesOfRevenue=d,b.searchesPerDay=f,b})).catch((function(t){return t}))}},{key:"refreshTable",value:function(){this.cdr.detectChanges()}},{key:"exportToCsv",value:function(){var e,a=[],r=t(this.statData);try{for(r.s();!(e=r.n()).done;){var n=e.value,i={date:this.datePipe.transform(n.date,"dd MMM yyyy"),subid:n.subid,searches:n.searches,cpc:this.currencyPipe.transform(n.cpc?n.cpc:0),ctr:this.percentPipe.transform(n.ctr,"1.2-2"),revenue:n.revenue};a.push(i)}}catch(s){r.e(s)}finally{r.f()}this.exportDataService.exportToCsv(a,this.tagRows.nickName?this.tagRows.nickName:this.tagRows.name,["date","subid","searches","cpc","ctr","revenue"])}},{key:"getPerionChartMetrics",value:function(e,a,r){var n=this;return this.perionService.getPerTagPerionStats(this.selectedCompany,a,r).toPromise().then((function(e){n.allPerionChart=e;var a,r=[],i=t(n.tagRows.subids);try{for(i.s();!(a=i.n()).done;){var s=a.value;"Contains"==s.filterTag?r=r.concat(n.allPerionChart.filter((function(t){return t.subid.includes(s.subid)}))):"StartsWith"==s.filterTag?r=r.concat(n.allPerionChart.filter((function(t){return t.subid.startsWith(s.subid)}))):"EndsWith"==s.filterTag?r=r.concat(n.allPerionChart.filter((function(t){return t.subid.endsWith(s.subid)}))):"ExactValue"==s.filterTag&&(r=r.concat(n.allPerionChart.filter((function(t){return t.subid==s.subid}))))}}catch(v){i.e(v)}finally{i.f()}var u=r.filter((function(t,e,a){return e===a.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))}));u=u.slice().sort((function(t,e){return t.date-e.date}));var c,l={},o=[],h=[],d=[],f=[],b={},p=t(u.reduce((function(t,e){var a=e.date;return l[a]?(l[a].searches+=parseInt(e.impressions),e.revenue&&(l[a].revenue+=e.revenue)):(l[a]=Object.assign({},e),t.push(l[a])),t}),[]));try{for(p.s();!(c=p.n()).done;){var g=c.value;o.push(0),h.push(g.revenue),d.push(g.date),f.push(g.impressions)}}catch(v){p.e(v)}finally{p.f()}return b.revenuePerDay=o,b.publisherRevenuePerDay=h,b.datesOfRevenue=d,b.searchesPerDay=f,b})).catch((function(t){return t}))}},{key:"getAllPerionStats",value:function(e,a,r){var n=this;return this.perionService.getPerTagPerionStats(this.selectedCompany,e,a).toPromise().then((function(e){n.allPerionStatData=e;var a,i=[],s=t(r.subids);try{for(s.s();!(a=s.n()).done;){var u=a.value;"Contains"==u.filterTag?(i=i.concat(n.allPerionStatData.filter((function(t){return t.subid.includes(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:"No Publisher"})):"StartsWith"==u.filterTag?(i=i.concat(n.allPerionStatData.filter((function(t){return t.subid.startsWith(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:"No Publisher"})):"EndsWith"==u.filterTag?(i=i.concat(n.allPerionStatData.filter((function(t){return t.subid.endsWith(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:"No Publisher"})):"ExactValue"==u.filterTag&&(i=i.concat(n.allPerionStatData.filter((function(t){return t.subid==u.subid})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:"No Publisher"}))}}catch(c){s.e(c)}finally{s.f()}return i.filter((function(t,e,a){return e===a.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))})).slice().sort((function(t,e){return e.date-t.date}))})).catch((function(t){return t}))}},{key:"getAllLyonStats",value:function(e,a,r){var n=this;return this.lyonService.getAllPublisherStats(e,a).toPromise().then((function(e){n.allLyonStatData=e;var a,i=[],s=t(r.subids);try{for(s.s();!(a=s.n()).done;){var u=a.value;"Contains"==u.filterTag?(i=i.concat(n.allLyonStatData.filter((function(t){return t.subid.includes(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:""})):"StartsWith"==u.filterTag?(i=i.concat(n.allLyonStatData.filter((function(t){return t.subid.startsWith(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:""})):"EndsWith"==u.filterTag?(i=i.concat(n.allLyonStatData.filter((function(t){return t.subid.endsWith(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:""})):"ExactValue"==u.filterTag&&(i=i.concat(n.allLyonStatData.filter((function(t){return t.subid==u.subid})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:""}))}}catch(c){s.e(c)}finally{s.f()}return i.filter((function(t,e,a){return e===a.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))})).slice().sort((function(t,e){return e.date-t.date}))})).catch((function(t){return t}))}},{key:"getAllVerizonStats",value:function(e,a,r){var n=this;return this.verizonService.getAllPublisherVerizonStats(this.selectedCompany,e,a).toPromise().then((function(e){n.allVerizonStatData=e.stats;var a,i=[],s=t(r.subids);try{for(s.s();!(a=s.n()).done;){var u=a.value;"Contains"==u.filterTag?(i=i.concat(n.allVerizonStatData.filter((function(t){return t.subid.includes(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:"",t.tagname=r.name})):"StartsWith"==u.filterTag?(i=i.concat(n.allVerizonStatData.filter((function(t){return t.subid.startsWith(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:"",t.tagname=r.name})):"EndsWith"==u.filterTag?(i=i.concat(n.allVerizonStatData.filter((function(t){return t.subid.endsWith(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:"",t.tagname=r.name})):"ExactValue"==u.filterTag&&(i=i.concat(n.allVerizonStatData.filter((function(t){return t.subid==u.subid})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:"",t.tagname=r.name}))}}catch(c){s.e(c)}finally{s.f()}return i.filter((function(t,e,a){return e===a.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))})).slice().sort((function(t,e){return e.date-t.date}))})).catch((function(t){return t}))}},{key:"getAllVerizonArbStats",value:function(e,a,r){var n=this;return this.verizonArbService.getAllPublisherVerizonArbStats(this.selectedCompany,e,a).toPromise().then((function(e){n.allVerizonArbStatData=e.stats;var a,i=[],s=t(r.subids);try{for(s.s();!(a=s.n()).done;){var u=a.value;"Contains"==u.filterTag?(i=i.concat(n.allVerizonArbStatData.filter((function(t){return t.subid.includes(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:"",t.tagname=r.name})):"StartsWith"==u.filterTag?(i=i.concat(n.allVerizonArbStatData.filter((function(t){return t.subid.startsWith(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:"",t.tagname=r.name})):"EndsWith"==u.filterTag?(i=i.concat(n.allVerizonArbStatData.filter((function(t){return t.subid.endsWith(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:"",t.tagname=r.name})):"ExactValue"==u.filterTag&&(i=i.concat(n.allVerizonArbStatData.filter((function(t){return t.subid==u.subid})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:"",t.tagname=r.name}))}}catch(c){s.e(c)}finally{s.f()}return i.filter((function(t,e,a){return e===a.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))})).slice().sort((function(t,e){return e.date-t.date}))})).catch((function(t){return t}))}},{key:"getVerizonChartMetrics",value:function(e,a,r){var n=this;return this.verizonService.getAllPublisherVerizonStats(this.selectedCompany,a,r).toPromise().then((function(e){n.allVerizonChart=e.stats;var a,r=[],i=t(n.tagRows.subids);try{for(i.s();!(a=i.n()).done;){var s=a.value;"Contains"==s.filterTag?r=r.concat(n.allVerizonChart.filter((function(t){return t.subid.includes(s.subid)}))):"StartsWith"==s.filterTag?r=r.concat(n.allVerizonChart.filter((function(t){return t.subid.startsWith(s.subid)}))):"EndsWith"==s.filterTag?r=r.concat(n.allVerizonChart.filter((function(t){return t.subid.endsWith(s.subid)}))):"ExactValue"==s.filterTag&&(r=r.concat(n.allVerizonChart.filter((function(t){return t.subid==s.subid}))))}}catch(v){i.e(v)}finally{i.f()}var u=r.filter((function(t,e,a){return e===a.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))}));u=u.slice().sort((function(t,e){return t.date-e.date}));var c,l={},o=[],h=[],d=[],f=[],b={},p=t(u.reduce((function(t,e){var a=e.date;return l[a]?(l[a].searches+=parseInt(e.searches),e.revenue&&(l[a].revenue+=e.revenue)):(l[a]=Object.assign({},e),t.push(l[a])),t}),[]));try{for(p.s();!(c=p.n()).done;){var g=c.value;o.push(0),h.push(g.revenue),d.push(g.date),f.push(g.searches)}}catch(v){p.e(v)}finally{p.f()}return b.revenuePerDay=o,b.publisherRevenuePerDay=h,b.datesOfRevenue=d,b.searchesPerDay=f,b})).catch((function(t){return t}))}},{key:"getVerizonArbChartMetrics",value:function(e,a,r){var n=this;return this.verizonArbService.getAllPublisherVerizonArbStats(this.selectedCompany,a,r).toPromise().then((function(e){n.allVerizonArbChart=e.stats;var a,r=[],i=t(n.tagRows.subids);try{for(i.s();!(a=i.n()).done;){var s=a.value;"Contains"==s.filterTag?r=r.concat(n.allVerizonArbChart.filter((function(t){return t.subid.includes(s.subid)}))):"StartsWith"==s.filterTag?r=r.concat(n.allVerizonArbChart.filter((function(t){return t.subid.startsWith(s.subid)}))):"EndsWith"==s.filterTag?r=r.concat(n.allVerizonArbChart.filter((function(t){return t.subid.endsWith(s.subid)}))):"ExactValue"==s.filterTag&&(r=r.concat(n.allVerizonArbChart.filter((function(t){return t.subid==s.subid}))))}}catch(v){i.e(v)}finally{i.f()}var u=r.filter((function(t,e,a){return e===a.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))}));u=u.slice().sort((function(t,e){return t.date-e.date}));var c,l={},o=[],h=[],d=[],f=[],b={},p=t(u.reduce((function(t,e){var a=e.date;return l[a]?(l[a].searches+=parseInt(e.searches),e.revenue&&(l[a].revenue+=e.revenue)):(l[a]=Object.assign({},e),t.push(l[a])),t}),[]));try{for(p.s();!(c=p.n()).done;){var g=c.value;o.push(0),h.push(g.revenue),d.push(g.date),f.push(g.searches)}}catch(v){p.e(v)}finally{p.f()}return b.revenuePerDay=o,b.publisherRevenuePerDay=h,b.datesOfRevenue=d,b.searchesPerDay=f,b})).catch((function(t){return t}))}},{key:"getRubiAllStats",value:function(e,a,r){var n=this;return this.rubiService.getAllRubiStats(this.selectedCompany,e,a).toPromise().then((function(e){n.allRubiStatData=e.stats;var a,i=[],s=t(r.subids);try{for(s.s();!(a=s.n()).done;){var u=a.value;"Contains"==u.filterTag?(i=i.concat(n.allRubiStatData.filter((function(t){return t.subid.includes(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:""})):"StartsWith"==u.filterTag?(i=i.concat(n.allRubiStatData.filter((function(t){return t.subid.startsWith(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:""})):"EndsWith"==u.filterTag?(i=i.concat(n.allRubiStatData.filter((function(t){return t.subid.endsWith(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:""})):"ExactValue"==u.filterTag&&(i=i.concat(n.allRubiStatData.filter((function(t){return t.subid==u.subid})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:""}))}}catch(c){s.e(c)}finally{s.f()}return i.filter((function(t,e,a){return e===a.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))})).slice().sort((function(t,e){return e.date-t.date}))})).catch((function(t){return t}))}},{key:"getRubiChartMetrics",value:function(e,a,r){var n=this;return this.rubiService.getAllRubiStats(this.selectedCompany,a,r).toPromise().then((function(e){n.allRubiChart=e.stats;var a,r=[],i=t(n.tagRows.subids);try{for(i.s();!(a=i.n()).done;){var s=a.value;"Contains"==s.filterTag?r=r.concat(n.allRubiChart.filter((function(t){return t.subid.includes(s.subid)}))):"StartsWith"==s.filterTag?r=r.concat(n.allRubiChart.filter((function(t){return t.subid.startsWith(s.subid)}))):"EndsWith"==s.filterTag?r=r.concat(n.allRubiChart.filter((function(t){return t.subid.endsWith(s.subid)}))):"ExactValue"==s.filterTag&&(r=r.concat(n.allRubiChart.filter((function(t){return t.subid==s.subid}))))}}catch(v){i.e(v)}finally{i.f()}var u=r.filter((function(t,e,a){return e===a.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))}));u=u.slice().sort((function(t,e){return t.date-e.date}));var c,l={},o=[],h=[],d=[],f=[],b={},p=t(u.reduce((function(t,e){var a=e.date;return l[a]?(l[a].searches+=parseInt(e.searches),e.revenue&&(l[a].revenue+=e.revenue)):(l[a]=Object.assign({},e),t.push(l[a])),t}),[]));try{for(p.s();!(c=p.n()).done;){var g=c.value;o.push(0),h.push(g.revenue),d.push(g.date),f.push(g.searches)}}catch(v){p.e(v)}finally{p.f()}return b.revenuePerDay=o,b.publisherRevenuePerDay=h,b.datesOfRevenue=d,b.searchesPerDay=f,b})).catch((function(t){return t}))}},{key:"getSolexBCAllStats",value:function(e,a,r){var n=this;return this.solexbcService.getAllSolexBCStats(this.selectedCompany,e,a).toPromise().then((function(e){n.allSolexBCStatData=e.stats;var a,i=[],s=t(r.subids);try{for(s.s();!(a=s.n()).done;){var u=a.value;"Contains"==u.filterTag?(i=i.concat(n.allSolexBCStatData.filter((function(t){return t.subid.includes(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:""})):"StartsWith"==u.filterTag?(i=i.concat(n.allSolexBCStatData.filter((function(t){return t.subid.startsWith(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:""})):"EndsWith"==u.filterTag?(i=i.concat(n.allSolexBCStatData.filter((function(t){return t.subid.endsWith(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:""})):"ExactValue"==u.filterTag&&(i=i.concat(n.allSolexBCStatData.filter((function(t){return t.subid==u.subid})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:""}))}}catch(c){s.e(c)}finally{s.f()}return i.filter((function(t,e,a){return e===a.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))})).slice().sort((function(t,e){return e.date-t.date}))})).catch((function(t){return t}))}},{key:"getSolexBCChartMetrics",value:function(e,a,r){var n=this;return this.solexbcService.getAllSolexBCStats(this.selectedCompany,a,r).toPromise().then((function(e){n.allSolexBCChart=e.stats;var a,r=[],i=t(n.tagRows.subids);try{for(i.s();!(a=i.n()).done;){var s=a.value;"Contains"==s.filterTag?r=r.concat(n.allSolexBCChart.filter((function(t){return t.subid.includes(s.subid)}))):"StartsWith"==s.filterTag?r=r.concat(n.allSolexBCChart.filter((function(t){return t.subid.startsWith(s.subid)}))):"EndsWith"==s.filterTag?r=r.concat(n.allSolexBCChart.filter((function(t){return t.subid.endsWith(s.subid)}))):"ExactValue"==s.filterTag&&(r=r.concat(n.allSolexBCChart.filter((function(t){return t.subid==s.subid}))))}}catch(v){i.e(v)}finally{i.f()}var u=r.filter((function(t,e,a){return e===a.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))}));u=u.slice().sort((function(t,e){return t.date-e.date}));var c,l={},o=[],h=[],d=[],f=[],b={},p=t(u.reduce((function(t,e){var a=e.date;return l[a]?(l[a].searches+=parseInt(e.searches),e.revenue&&(l[a].revenue+=e.revenue)):(l[a]=Object.assign({},e),t.push(l[a])),t}),[]));try{for(p.s();!(c=p.n()).done;){var g=c.value;o.push(0),h.push(g.revenue),d.push(g.date),f.push(g.searches)}}catch(v){p.e(v)}finally{p.f()}return b.revenuePerDay=o,b.publisherRevenuePerDay=h,b.datesOfRevenue=d,b.searchesPerDay=f,b})).catch((function(t){return t}))}},{key:"getSystem1AllStats",value:function(e,a,r){var n=this;return this.system1Service.getSystem1PublisherStats(this.selectedCompany,e,a).toPromise().then((function(e){n.allSolexBCStatData=e.stats;var a,i=[],s=t(r.subids);try{for(s.s();!(a=s.n()).done;){var u=a.value;"Contains"==u.filterTag?(i=i.concat(n.allSolexBCStatData.filter((function(t){return t.subid.includes(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:""})):"StartsWith"==u.filterTag?(i=i.concat(n.allSolexBCStatData.filter((function(t){return t.subid.startsWith(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:""})):"EndsWith"==u.filterTag?(i=i.concat(n.allSolexBCStatData.filter((function(t){return t.subid.endsWith(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:""})):"ExactValue"==u.filterTag&&(i=i.concat(n.allSolexBCStatData.filter((function(t){return t.subid==u.subid})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:""}))}}catch(c){s.e(c)}finally{s.f()}return i.filter((function(t,e,a){return e===a.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))})).slice().sort((function(t,e){return e.date-t.date}))})).catch((function(t){return t}))}},{key:"getSystem1ChartMetrics",value:function(e,a,r){var n=this;return this.system1Service.getSystem1PublisherStats(this.selectedCompany,a,r).toPromise().then((function(e){n.allSolexBCChart=e.stats;var a,r=[],i=t(n.tagRows.subids);try{for(i.s();!(a=i.n()).done;){var s=a.value;"Contains"==s.filterTag?r=r.concat(n.allSolexBCChart.filter((function(t){return t.subid.includes(s.subid)}))):"StartsWith"==s.filterTag?r=r.concat(n.allSolexBCChart.filter((function(t){return t.subid.startsWith(s.subid)}))):"EndsWith"==s.filterTag?r=r.concat(n.allSolexBCChart.filter((function(t){return t.subid.endsWith(s.subid)}))):"ExactValue"==s.filterTag&&(r=r.concat(n.allSolexBCChart.filter((function(t){return t.subid==s.subid}))))}}catch(v){i.e(v)}finally{i.f()}var u=r.filter((function(t,e,a){return e===a.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))}));u=u.slice().sort((function(t,e){return t.date-e.date}));var c,l={},o=[],h=[],d=[],f=[],b={},p=t(u.reduce((function(t,e){var a=e.date;return l[a]?(l[a].searches+=parseInt(e.searches),e.revenue&&(l[a].revenue+=e.revenue)):(l[a]=Object.assign({},e),t.push(l[a])),t}),[]));try{for(p.s();!(c=p.n()).done;){var g=c.value;o.push(0),h.push(g.revenue),d.push(g.date),f.push(g.searches)}}catch(v){p.e(v)}finally{p.f()}return b.revenuePerDay=o,b.publisherRevenuePerDay=h,b.datesOfRevenue=d,b.searchesPerDay=f,b})).catch((function(t){return t}))}},{key:"getApptitudePublisherStats",value:function(e,a,r){var n=this;return this.apptitudeService.getPublisherApptitudeStats(this.selectedCompany,e,a).toPromise().then((function(e){n.allApptitudeStatData=e.stats;var a,i=[],s=t(r.subids);try{for(s.s();!(a=s.n()).done;){var u=a.value;"Contains"==u.filterTag?(i=i.concat(n.allApptitudeStatData.filter((function(t){return t.subid.includes(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:""})):"StartsWith"==u.filterTag?(i=i.concat(n.allApptitudeStatData.filter((function(t){return t.subid.startsWith(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:""})):"EndsWith"==u.filterTag?(i=i.concat(n.allApptitudeStatData.filter((function(t){return t.subid.endsWith(u.subid)})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:""})):"ExactValue"==u.filterTag&&(i=i.concat(n.allApptitudeStatData.filter((function(t){return t.subid==u.subid})))).map((function(t){t.publisher=r.publisher?r.publisher.fullname:""}))}}catch(c){s.e(c)}finally{s.f()}return i.filter((function(t,e,a){return e===a.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))})).slice().sort((function(t,e){return e.date-t.date}))})).catch((function(t){return t}))}},{key:"getApptitudeChartMetrics",value:function(e,a,r){var n=this;return this.apptitudeService.getPublisherApptitudeStats(this.selectedCompany,a,r).toPromise().then((function(e){n.allApptitudeChart=e.stats;var a,r=[],i=t(n.tagRows.subids);try{for(i.s();!(a=i.n()).done;){var s=a.value;"Contains"==s.filterTag?r=r.concat(n.allApptitudeChart.filter((function(t){return t.subid.includes(s.subid)}))):"StartsWith"==s.filterTag?r=r.concat(n.allApptitudeChart.filter((function(t){return t.subid.startsWith(s.subid)}))):"EndsWith"==s.filterTag?r=r.concat(n.allApptitudeChart.filter((function(t){return t.subid.endsWith(s.subid)}))):"ExactValue"==s.filterTag&&(r=r.concat(n.allApptitudeChart.filter((function(t){return t.subid==s.subid}))))}}catch(v){i.e(v)}finally{i.f()}var u=r.filter((function(t,e,a){return e===a.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))}));u=u.slice().sort((function(t,e){return t.date-e.date}));var c,l={},o=[],h=[],d=[],f=[],b={},p=t(u.reduce((function(t,e){var a=e.date;return l[a]?(l[a].searches+=parseInt(e.searches),e.revenue&&(l[a].revenue+=e.revenue)):(l[a]=Object.assign({},e),t.push(l[a])),t}),[]));try{for(p.s();!(c=p.n()).done;){var g=c.value;o.push(0),h.push(g.revenue),d.push(g.date),f.push(g.searches)}}catch(v){p.e(v)}finally{p.f()}return b.revenuePerDay=o,b.publisherRevenuePerDay=h,b.datesOfRevenue=d,b.searchesPerDay=f,b})).catch((function(t){return t}))}}]),e}(),N.\u0275fac=function(t){return new(t||N)(l.Qb(c.a),l.Qb(d.a),l.Qb(l.i),l.Qb(f.a),l.Qb(b.a),l.Qb(p.a),l.Qb(g.a),l.Qb(v.a),l.Qb(m.a),l.Qb(y.a),l.Qb(D.a),l.Qb(S.a),l.Qb(x.a),l.Qb(u.f),l.Qb(u.d),l.Qb(u.w))},N.\u0275cmp=l.Kb({type:N,selectors:[["app-publisher"]],viewQuery:function(t,e){var a;1&t&&l.Tc(T,!0),2&t&&l.zc(a=l.ic())&&(e.table=a.first)},decls:30,vars:15,consts:[[3,"onDatesPicked"],[3,"chartData",4,"ngIf"],[1,"row","py-6"],[1,"btn","btn-sm","btn-primary","mx-3",3,"click"],[1,"material","fullscreen","expandable",2,"top","10px","height","500px",3,"loadingIndicator","columnMode","headerHeight","footerHeight","rowHeight","scrollbarV","scrollbarH","rows"],["expandableTable",""],[3,"rowHeight","toggle"],["myDetailRow",""],["ngx-datatable-row-detail-template",""],[3,"width","resizeable","sortable","draggable","canAutoResize"],["ngx-datatable-cell-template",""],["name","date"],["ngx-datatable-header-template",""],["name","subid"],["name","searches"],["name","cpc"],["name","ctr"],["name","revenue"],[3,"chartData"],[2,"padding-left","35px"],["href","javascript:void(0)","title","Expand/Collapse Row",3,"click"]],template:function(t,e){1&t&&(l.Wb(0,"app-reporting-filtering",0),l.hc("onDatesPicked",(function(t){return e.updateReportingFiltering(t)})),l.Vb(),l.Mc(1,W,1,1,"app-reporting-publisher-revenue-chart",1),l.Wb(2,"div",2),l.Wb(3,"button",3),l.hc("click",(function(){return e.exportToCsv()})),l.Oc(4," Export Stats "),l.Vb(),l.Vb(),l.Wb(5,"ngx-datatable",4,5),l.Wb(7,"ngx-datatable-row-detail",6,7),l.hc("toggle",(function(t){return e.onDetailToggle(t)})),l.Mc(9,R,6,0,"ng-template",8),l.Vb(),l.Wb(10,"ngx-datatable-column",9),l.Mc(11,w,1,4,"ng-template",10),l.Vb(),l.Wb(12,"ngx-datatable-column",11),l.Mc(13,V,1,0,"ng-template",12),l.Mc(14,k,3,3,"ng-template",10),l.Vb(),l.Wb(15,"ngx-datatable-column",13),l.Mc(16,z,1,0,"ng-template",12),l.Mc(17,M,2,1,"ng-template",10),l.Vb(),l.Wb(18,"ngx-datatable-column",14),l.Mc(19,I,1,0,"ng-template",12),l.Mc(20,O,2,1,"ng-template",10),l.Vb(),l.Wb(21,"ngx-datatable-column",15),l.Mc(22,E,1,0,"ng-template",12),l.Mc(23,B,4,7,"ng-template",10),l.Vb(),l.Wb(24,"ngx-datatable-column",16),l.Mc(25,j,1,0,"ng-template",12),l.Mc(26,Q,4,7,"ng-template",10),l.Vb(),l.Wb(27,"ngx-datatable-column",17),l.Mc(28,L,1,0,"ng-template",12),l.Mc(29,H,3,4,"ng-template",10),l.Vb(),l.Vb()),2&t&&(l.Db(1),l.rc("ngIf",e.chartData),l.Db(4),l.rc("loadingIndicator",e.loadingIndicator)("columnMode","force")("headerHeight",50)("footerHeight",0)("rowHeight",50)("scrollbarV",!0)("scrollbarH",!0)("rows",e.statData),l.Db(2),l.rc("rowHeight",100),l.Db(3),l.rc("width",50)("resizeable",!1)("sortable",!1)("draggable",!1)("canAutoResize",!1))},directives:[C.a,u.p,A.d,A.e,A.f,A.b,A.a,A.c,P.a],pipes:[u.f,u.d,u.w],styles:[""]}),N),pathMatch:"full"},{path:"",redirectTo:"",pathMatch:"full"},{path:"**",redirectTo:"",pathMatch:"full"}]}],K=((F=function t(){a(this,t)}).\u0275mod=l.Ob({type:F}),F.\u0275inj=l.Nb({factory:function(t){return new(t||F)},imports:[[c.k.forChild(X)],c.k]}),F),J=i("UKGz"),G=((U=function t(){a(this,t)}).\u0275mod=l.Ob({type:U}),U.\u0275inj=l.Nb({factory:function(t){return new(t||U)},providers:[u.f,u.w,u.d],imports:[[c.k,u.c,K,J.a,A.g]]}),U)}}])}();