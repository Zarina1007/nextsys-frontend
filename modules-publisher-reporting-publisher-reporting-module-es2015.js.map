{"version":3,"sources":["./src/app/modules/publisher-reporting/publisher-reporting-routing.module.ts","./src/app/modules/publisher-reporting/publisher-reporting.component.ts","./src/app/modules/publisher-reporting/publisher-reporting.component.html","./src/app/modules/publisher-reporting/publisher-reporting.module.ts","./src/app/modules/publisher-reporting/publisher/publisher.component.ts","./src/app/modules/publisher-reporting/publisher/publisher.component.html"],"names":[],"mappings":"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","file":"modules-publisher-reporting-publisher-reporting-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { PublisherReportingComponent } from './publisher-reporting.component';\r\nimport { PublisherComponent } from './publisher/publisher.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PublisherReportingComponent,\r\n    children: [\r\n      {\r\n        path: ':tagId',\r\n        component: PublisherComponent,\r\n        pathMatch: 'full',\r\n      },\r\n      \r\n      { path: '', redirectTo: '', pathMatch: 'full' },\r\n      { path: '**', redirectTo: '', pathMatch: 'full' },\r\n    ]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  exports: [RouterModule]\r\n})\r\nexport class PublisherReportingRoutingModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-publisher-reporting',\r\n  templateUrl: './publisher-reporting.component.html',\r\n  styleUrls: ['./publisher-reporting.component.scss']\r\n})\r\nexport class PublisherReportingComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<router-outlet></router-outlet>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\nimport { PublisherReportingRoutingModule } from './publisher-reporting-routing.module';\r\nimport { PublisherComponent } from './publisher/publisher.component';\r\nimport { PublisherReportingComponent } from './publisher-reporting.component';\r\nimport { SharedModule } from 'src/app/shared/modules/shared.module';\r\nimport { NgxDatatableModule } from '@swimlane/ngx-datatable';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PublisherComponent, \r\n    PublisherReportingComponent\r\n  ],\r\n  imports: [\r\n    RouterModule,\r\n    CommonModule,\r\n    PublisherReportingRoutingModule,\r\n    SharedModule,\r\n    NgxDatatableModule\r\n  ],\r\n  entryComponents: [],\r\n})\r\nexport class PublisherReportingModule { }\r\n","import { Component, AfterViewInit, ChangeDetectorRef, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { TagInterface } from 'src/app/shared/models/tag.interface';\r\nimport { TagManagementService } from '../../tag-management/tag-management.service';\r\nimport { UsersService } from '../../../shared/service/users.service'\r\nimport { ChartDataInterface } from 'src/app/shared/models/chartData.interface';\r\nimport { PerionService } from 'src/app/shared/service/admin-stats/perion.service';\r\nimport { LyonService } from 'src/app/shared/service/admin-stats/lyon.service';\r\n\r\n@Component({\r\n  selector: 'app-publisher',\r\n  templateUrl: './publisher.component.html',\r\n  styleUrls: ['./publisher.component.scss']\r\n})\r\nexport class PublisherComponent implements AfterViewInit  {\r\n  @ViewChild('expandableTable') table: any;\r\n  loadingIndicator = true;\r\n  tagRows: TagInterface;\r\n  //Sends chartData to ReportingRevenueChartComponent\r\n  chartData: ChartDataInterface;\r\n  selectedCompany: any;\r\n  selectedAdvertiser: any;\r\n  allChart: any;\r\n  range = {\r\n    startDate: '',\r\n    endDate: '',\r\n  };\r\n  statData: any[];\r\n  allLyonStatData: any;\r\n  allPerionStatData: any;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private tagManagementService: TagManagementService,\r\n    private cdr: ChangeDetectorRef,\r\n    private userService: UsersService,\r\n    private perionService: PerionService,\r\n    private lyonService: LyonService,\r\n  ) {\r\n    this.selectedCompany = this.getSelectedCompanyFromLocalStorage();\r\n  }\r\n  \r\n  async ngAfterViewInit(){\r\n    this.route.params.subscribe(async routeParams => {\r\n      //console.log(\"routeParams===>\", routeParams)\r\n      this.statData = [];\r\n      this.tagRows = await this.getTagInformation(routeParams.tagId);\r\n      this.selectedAdvertiser = this.tagRows.advertiser;\r\n      this.selectedCompany = this.tagRows.company;\r\n     \r\n      if(this.selectedAdvertiser == \"lyons\") {\r\n        this.chartData = await this.getLyonChartMetrics(\r\n          this.selectedCompany,\r\n          this.range.startDate,\r\n          this.range.endDate\r\n        );\r\n        this.statData = await this.getAllLyonStats(this.range.startDate,this.range.endDate, this.tagRows)\r\n        \r\n      } else if (this.selectedAdvertiser == \"perion\") {\r\n        this.chartData = await this.getPerionChartMetrics(\r\n          this.selectedCompany,\r\n          this.range.startDate,\r\n          this.range.endDate\r\n        );\r\n        this.statData = await this.getAllPerionStats(this.range.startDate,this.range.endDate, this.tagRows)\r\n      }\r\n      this.refreshTable();\r\n    });\r\n    \r\n  }\r\n  //Gets the Selected Company from Local Storage\r\n  getSelectedCompanyFromLocalStorage() {\r\n    return this.userService.getSelectedCompanyFromLocalStorage();\r\n  }\r\n  toggleExpandRow(row) {\r\n    console.log('Toggled Expand Row!', row);\r\n    this.table.rowDetail.toggleExpandRow(row);\r\n  }\r\n\r\n  onDetailToggle(event) {\r\n    console.log('Detail Toggled', event);\r\n  }\r\n\r\n  getTagInformation(id: any) {\r\n    return this.tagManagementService.getOneTag(id).toPromise().then((response) => {\r\n      return response;\r\n    }).catch((error) => {\r\n      return error;\r\n    })\r\n  }\r\n\r\n  public async updateReportingFiltering(range) {\r\n    // console.log('Update report filtering....');\r\n    this.range = range;\r\n    if(this.selectedAdvertiser == \"lyons\") {\r\n      this.chartData = await this.getLyonChartMetrics(\r\n        this.selectedCompany,\r\n        this.range.startDate,\r\n        this.range.endDate\r\n      );\r\n      this.statData = await this.getAllLyonStats(this.range.startDate,this.range.endDate, this.tagRows)\r\n    } else if (this.selectedAdvertiser == \"perion\") {\r\n      this.chartData = await this.getPerionChartMetrics(\r\n        this.selectedCompany,\r\n        this.range.startDate,\r\n        this.range.endDate\r\n      );\r\n      this.statData = await this.getAllPerionStats(this.range.startDate,this.range.endDate, this.tagRows)\r\n    }\r\n    \r\n    this.refreshTable();\r\n  }\r\n\r\n  getLyonChartMetrics(company, startDate, endDate) {\r\n    return this.lyonService.getAllStats(startDate, endDate).toPromise().then((response) => {\r\n      this.allChart = response;\r\n      var chartAllLyonStat = [];\r\n      for(var tagSub of this.tagRows.subids) {\r\n        if(tagSub['filterTag'] ==\"Contains\") {    \r\n          chartAllLyonStat = chartAllLyonStat.concat(this.allChart.filter(stat => stat.subid.includes(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] ==\"StartsWith\") {\r\n          chartAllLyonStat = chartAllLyonStat.concat(this.allChart.filter(stat => stat.subid.startsWith(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] ==\"EndsWith\") {\r\n          chartAllLyonStat = chartAllLyonStat.concat(this.allChart.filter(stat => stat.subid.endsWith(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] ==\"ExactValue\") {\r\n          chartAllLyonStat = chartAllLyonStat.concat(this.allChart.filter(stat => stat.subid == tagSub['subid'] ))\r\n        }\r\n      }\r\n\r\n      //duplicated remove\r\n      let filter_data = chartAllLyonStat.filter((obj, pos, arr) => {\r\n        return arr\r\n          .map(mapObj => mapObj._id)\r\n          .indexOf(obj._id) == pos;\r\n      });\r\n      var helperChart = {};\r\n      filter_data.map(f =>{\r\n        f.revenue = parseFloat(f.revenue);\r\n        f.ctr = parseFloat(f.ctr);\r\n        f.biddedCtr = parseFloat(f.biddedCTR);\r\n      })\r\n      var resultChart = filter_data.reduce(function(r, o) {\r\n        var key = o.rptDate;\r\n        if(!helperChart[key]) {\r\n          helperChart[key] = Object.assign({}, o); // create a copy of o\r\n          r.push(helperChart[key]);\r\n        } else {\r\n          helperChart[key].searches += parseInt(o.searches);\r\n          if(o.revenue) {\r\n            helperChart[key].revenue += o.revenue;\r\n          }\r\n        } \r\n        return r;\r\n      }, []);\r\n      var revenuePerDayVal = [];\r\n      var datesOfRevenueVal = [];\r\n      var searchesPerDayVal = [];\r\n      var chartDataValue = {};\r\n      for(var resVal of resultChart) {\r\n        revenuePerDayVal.push(resVal.revenue);\r\n        datesOfRevenueVal.push(resVal.rptDate);\r\n        searchesPerDayVal.push(resVal.searches);\r\n      }\r\n      chartDataValue['revenuePerDay'] = revenuePerDayVal;\r\n      chartDataValue['datesOfRevenue'] = datesOfRevenueVal;\r\n      chartDataValue['searchesPerDay'] = searchesPerDayVal;\r\n      return chartDataValue;\r\n    })\r\n    .catch((error) => {\r\n      return error;\r\n    });\r\n\r\n  }\r\n  refreshTable() {\r\n    this.cdr.markForCheck();\r\n  }\r\n\r\n  getPerionChartMetrics(company, startDate, endDate) {\r\n    return this.perionService\r\n      .getChartMetrics(company, startDate, endDate)\r\n      .toPromise()\r\n      .then((response) => {\r\n        return response;\r\n      })\r\n      .catch((error) => {\r\n        return error;\r\n      });\r\n  }\r\n\r\n  getAllPerionStats(startDate, endDate, tag) {\r\n    return this.perionService.getPerTagPerionStats(this.selectedCompany, startDate, endDate).toPromise().then((response) => {\r\n      this.allPerionStatData = response;\r\n      var allPerionStat = [];\r\n      for (var tagSub of tag.subids) {\r\n        if(tagSub.filterTag ==\"Contains\") {\r\n          allPerionStat = allPerionStat.concat(this.allPerionStatData.filter(stat => stat.subid.includes(tagSub.subid)))\r\n          allPerionStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher[0].fullname : \"No Publisher\"\r\n            stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag ==\"StartsWith\") {\r\n          allPerionStat = allPerionStat.concat(this.allPerionStatData.filter(stat => stat.subid.startsWith(tagSub.subid)))\r\n          allPerionStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher[0].fullname : \"No Publisher\"\r\n            stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag ==\"EndsWith\") {\r\n          allPerionStat = allPerionStat.concat(this.allPerionStatData.filter(stat => stat.subid.endsWith(tagSub.subid)))\r\n          allPerionStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher[0].fullname : \"No Publisher\"\r\n            stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag ==\"ExactValue\") {\r\n          allPerionStat = allPerionStat.concat(this.allPerionStatData.filter(stat => stat.subid == tagSub.subid ))\r\n          allPerionStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher[0].fullname : \"No Publisher\"\r\n            stat.tagname = tag.name\r\n          })\r\n        }\r\n      }\r\n      //duplicated remove\r\n      let filtered_data = allPerionStat.filter((obj, pos, arr) => {\r\n        return arr\r\n          .map(mapObj => mapObj._id)\r\n          .indexOf(obj._id) == pos;\r\n      });\r\n      var helper = {};\r\n      filtered_data.map(f =>{\r\n        f.revenue = parseFloat(f.revenue);\r\n        f.rptDate = f.date;\r\n      });\r\n      var resultAll = filtered_data.reduce(function(prev, current) {\r\n        var key = (current.date).toString() + '-' + current.subid;\r\n        if(!helper[key]) {\r\n          helper[key] = Object.assign({}, current); // create a copy of o\r\n          prev.push(helper[key]);\r\n        } else {\r\n          helper[key].clicks += parseInt(current.clicks);\r\n          if(current.revenue) {\r\n            helper[key].revenue += current.revenue;\r\n          }\r\n          \r\n          helper[key].split += parseInt(current.split);\r\n        }\r\n  \r\n        return prev;\r\n      }, []);\r\n      return resultAll.slice().sort((a, b) => b.date - a.date);\r\n    })\r\n    .catch((error) => {\r\n      return error;\r\n    });\r\n  }\r\n  getAllLyonStats(startDate, endDate, tag) {\r\n    return this.lyonService.getAllStats(startDate, endDate).toPromise().then((response) => {    \r\n      this.allLyonStatData = response;\r\n      var allLyonStat = [];\r\n      for (var tagSub of tag.subids) {\r\n        if(tagSub.filterTag ==\"Contains\") {\r\n          allLyonStat = allLyonStat.concat(this.allLyonStatData.filter(stat => stat.subid.includes(tagSub.subid)))\r\n          allLyonStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher[0].fullname : \"\"\r\n            stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag ==\"StartsWith\") {\r\n          allLyonStat = allLyonStat.concat(this.allLyonStatData.filter(stat => stat.subid.startsWith(tagSub.subid)))\r\n          allLyonStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher[0].fullname : \"\"\r\n            stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag ==\"EndsWith\") {\r\n          allLyonStat = allLyonStat.concat(this.allLyonStatData.filter(stat => stat.subid.endsWith(tagSub.subid)))\r\n          allLyonStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher[0].fullname : \"\"\r\n            stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag ==\"ExactValue\") {\r\n          allLyonStat = allLyonStat.concat(this.allLyonStatData.filter(stat => stat.subid == tagSub.subid ))\r\n          allLyonStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher[0].fullname : \"\"\r\n            stat.tagname = tag.name\r\n          })\r\n        }\r\n      }\r\n      \r\n      //duplicated remove\r\n      let filtered_data = allLyonStat.filter((obj, pos, arr) => {\r\n        return arr\r\n          .map(mapObj => mapObj._id)\r\n          .indexOf(obj._id) == pos;\r\n      });\r\n      var helper = {};\r\n      filtered_data.map(f =>{\r\n        f.revenue = parseFloat(f.revenue);\r\n        f.ctr = parseFloat(f.ctr);\r\n        f.biddedCtr = parseFloat(f.biddedCTR);\r\n      })\r\n      \r\n      var resultAll = filtered_data.reduce(function(prev, current) {\r\n        var key = (current.rptDate).toString() + '-' + current.subid;\r\n        if(!helper[key]) {\r\n          helper[key] = Object.assign({}, current); // create a copy of o\r\n          prev.push(helper[key]);\r\n        } else {\r\n          helper[key].clicks += parseInt(current.clicks);\r\n          helper[key].searches += parseInt(current.searches);\r\n          if(current.biddedCtr) {\r\n            helper[key].biddedCtr += current.biddedCtr;\r\n          }\r\n          if(current.ctr) {\r\n            helper[key].ctr += current.ctr;\r\n          }\r\n          if(current.revenue) {\r\n            helper[key].revenue += current.revenue;\r\n          }\r\n          \r\n          helper[key].biddedSearches += parseInt(current.biddedSearches);\r\n          helper[key].split += parseInt(current.split);\r\n        }\r\n  \r\n        return prev;\r\n      }, []);\r\n      \r\n      return resultAll.slice().sort((a, b) => b.rptDate - a.rptDate);\r\n    })\r\n    .catch((error) => {\r\n      return error;\r\n    });\r\n  }\r\n}\r\n","<app-reporting-filtering (onDatesPicked)=\"updateReportingFiltering($event)\"></app-reporting-filtering>\r\n<!-- Chart Part-->\r\n<app-reporting-revenue-chart *ngIf=\"chartData\"\r\n  [chartData]=\"chartData\"></app-reporting-revenue-chart>\r\n\r\n  <ngx-datatable\r\n  #expandableTable\r\n  class=\"material fullscreen expandable\"\r\n  style=\"top: 30px; height: 500px\"\r\n  [columnMode]=\"'force'\"\r\n  [headerHeight]=\"50\"\r\n  [footerHeight]=\"0\"\r\n  [rowHeight]=\"50\"\r\n  [scrollbarV]=\"true\"\r\n  [scrollbarH]=\"true\"\r\n  [rows]=\"statData\"\r\n>\r\n  <!-- Row Detail Template -->\r\n  <ngx-datatable-row-detail\r\n    [rowHeight]=\"100\"\r\n    #myDetailRow\r\n    (toggle)=\"onDetailToggle($event)\"\r\n  >\r\n    <ng-template\r\n      let-row=\"row\"\r\n      let-expanded=\"expanded\"\r\n      ngx-datatable-row-detail-template\r\n    >\r\n      <div style=\"padding-left: 35px\">\r\n        <div><strong>Address</strong></div>\r\n        <div>Test</div>\r\n      </div>\r\n    </ng-template>\r\n  </ngx-datatable-row-detail>\r\n\r\n  <!-- Column Templates -->\r\n  <ngx-datatable-column\r\n    [width]=\"50\"\r\n    [resizeable]=\"false\"\r\n    [sortable]=\"false\"\r\n    [draggable]=\"false\"\r\n    [canAutoResize]=\"false\"\r\n  >\r\n    <ng-template\r\n      let-row=\"row\"\r\n      let-expanded=\"expanded\"\r\n      ngx-datatable-cell-template\r\n    >\r\n      <a\r\n        href=\"javascript:void(0)\"\r\n        [class.datatable-icon-right]=\"!expanded\"\r\n        [class.datatable-icon-down]=\"expanded\"\r\n        title=\"Expand/Collapse Row\"\r\n        (click)=\"toggleExpandRow(row)\"\r\n      >\r\n      </a>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n\r\n  <!-- Date -->\r\n  <ngx-datatable-column name=\"rptDate\">\r\n    <ng-template let-column=\"column\" ngx-datatable-header-template>\r\n      Date\r\n    </ng-template>\r\n    <ng-template let-value=\"value\" ngx-datatable-cell-template>\r\n      <strong>{{ value | date }}</strong>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n\r\n  <!-- SUBID -->\r\n  <ngx-datatable-column name=\"subid\">\r\n    <ng-template let-column=\"column\" ngx-datatable-header-template>\r\n      Subid\r\n    </ng-template>\r\n    <ng-template let-value=\"value\" ngx-datatable-cell-template>\r\n      <strong>{{ value }}</strong>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n\r\n  <!-- Tag -->\r\n  <ngx-datatable-column name=\"tagname\">\r\n    <ng-template let-column=\"column\" ngx-datatable-header-template>\r\n      Tag\r\n    </ng-template>\r\n    <ng-template let-value=\"value\" ngx-datatable-cell-template>\r\n      <strong>{{ value }}</strong>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n\r\n  <!-- Publisher -->\r\n  <ngx-datatable-column name=\"publisher\">\r\n    <ng-template let-column=\"column\" ngx-datatable-header-template>\r\n      Publisher\r\n    </ng-template>\r\n    <ng-template let-value=\"value\" ngx-datatable-cell-template>\r\n      <strong>{{ value }}</strong>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n\r\n  <!-- Split -->\r\n  <ngx-datatable-column name=\"spilt\">\r\n    <ng-template let-column=\"column\" ngx-datatable-header-template>\r\n      Spilt\r\n    </ng-template>\r\n    <ng-template let-value=\"value\" ngx-datatable-cell-template>\r\n        <strong>{{ (value | number) || (0 | number: '1.0-0') }}</strong>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n\r\n  <!-- REVENUE -->\r\n  <ngx-datatable-column name=\"revenue\">\r\n    <ng-template let-column=\"column\" ngx-datatable-header-template>\r\n      Revenue\r\n    </ng-template>\r\n    <ng-template let-value=\"value\" ngx-datatable-cell-template>\r\n      <strong>{{ value | currency: 'USD' }}</strong>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n</ngx-datatable>"],"sourceRoot":"webpack:///"}