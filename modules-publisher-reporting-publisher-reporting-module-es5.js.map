{"version":3,"sources":["webpack:///src/app/modules/publisher-reporting/publisher-reporting-routing.module.ts","webpack:///src/app/modules/publisher-reporting/publisher-reporting.component.ts","webpack:///src/app/modules/publisher-reporting/publisher-reporting.component.html","webpack:///src/app/modules/publisher-reporting/publisher-reporting.module.ts","webpack:///src/app/modules/publisher-reporting/publisher/publisher.component.html","webpack:///src/app/modules/publisher-reporting/publisher/publisher.component.ts"],"names":["routes","path","component","children","pathMatch","redirectTo","PublisherReportingRoutingModule","forChild","imports","exports","PublisherReportingComponent","selector","templateUrl","styleUrls","PublisherReportingModule","declarations","entryComponents","PublisherComponent","route","tagManagementService","cdr","userService","perionService","lyonService","loadingIndicator","range","startDate","endDate","selectedCompany","getSelectedCompanyFromLocalStorage","params","subscribe","routeParams","statData","getTagInformation","tagId","tagRows","selectedAdvertiser","advertiser","company","getLyonChartMetrics","chartData","getAllLyonStats","getPerionChartMetrics","getAllPerionStats","refreshTable","row","console","log","table","rowDetail","toggleExpandRow","event","id","getOneTag","toPromise","then","response","error","getAllStats","allChart","chartAllLyonStat","subids","tagSub","concat","filter","stat","subid","includes","startsWith","endsWith","filter_data","obj","pos","arr","map","mapObj","_id","indexOf","helperChart","f","revenue","parseFloat","ctr","biddedCtr","biddedCTR","resultChart","reduce","r","o","key","rptDate","Object","assign","push","searches","parseInt","revenuePerDayVal","datesOfRevenueVal","searchesPerDayVal","chartDataValue","resVal","markForCheck","getChartMetrics","tag","getPerTagPerionStats","allPerionStatData","allPerionStat","filterTag","publisher","fullname","tagname","name","filtered_data","helper","date","resultAll","prev","current","toString","clicks","split","slice","sort","a","b","allLyonStatData","allLyonStat","biddedSearches","updateReportingFiltering","onDetailToggle"],"mappings":"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","file":"modules-publisher-reporting-publisher-reporting-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { PublisherReportingComponent } from './publisher-reporting.component';\r\nimport { PublisherComponent } from './publisher/publisher.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PublisherReportingComponent,\r\n    children: [\r\n      {\r\n        path: ':tagId',\r\n        component: PublisherComponent,\r\n        pathMatch: 'full',\r\n      },\r\n      \r\n      { path: '', redirectTo: '', pathMatch: 'full' },\r\n      { path: '**', redirectTo: '', pathMatch: 'full' },\r\n    ]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  exports: [RouterModule]\r\n})\r\nexport class PublisherReportingRoutingModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-publisher-reporting',\r\n  templateUrl: './publisher-reporting.component.html',\r\n  styleUrls: ['./publisher-reporting.component.scss']\r\n})\r\nexport class PublisherReportingComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<router-outlet></router-outlet>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\nimport { PublisherReportingRoutingModule } from './publisher-reporting-routing.module';\r\nimport { PublisherComponent } from './publisher/publisher.component';\r\nimport { PublisherReportingComponent } from './publisher-reporting.component';\r\nimport { SharedModule } from 'src/app/shared/modules/shared.module';\r\nimport { NgxDatatableModule } from '@swimlane/ngx-datatable';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PublisherComponent, \r\n    PublisherReportingComponent\r\n  ],\r\n  imports: [\r\n    RouterModule,\r\n    CommonModule,\r\n    PublisherReportingRoutingModule,\r\n    SharedModule,\r\n    NgxDatatableModule\r\n  ],\r\n  entryComponents: [],\r\n})\r\nexport class PublisherReportingModule { }\r\n","<app-reporting-filtering (onDatesPicked)=\"updateReportingFiltering($event)\"></app-reporting-filtering>\r\n<!-- Chart Part-->\r\n<app-reporting-revenue-chart *ngIf=\"chartData\"\r\n  [chartData]=\"chartData\"></app-reporting-revenue-chart>\r\n\r\n  <ngx-datatable\r\n  #expandableTable\r\n  class=\"material fullscreen expandable\"\r\n  style=\"top: 30px; height: 500px\"\r\n  [columnMode]=\"'force'\"\r\n  [headerHeight]=\"50\"\r\n  [footerHeight]=\"0\"\r\n  [rowHeight]=\"50\"\r\n  [scrollbarV]=\"true\"\r\n  [scrollbarH]=\"true\"\r\n  [rows]=\"statData\"\r\n>\r\n  <!-- Row Detail Template -->\r\n  <ngx-datatable-row-detail\r\n    [rowHeight]=\"100\"\r\n    #myDetailRow\r\n    (toggle)=\"onDetailToggle($event)\"\r\n  >\r\n    <ng-template\r\n      let-row=\"row\"\r\n      let-expanded=\"expanded\"\r\n      ngx-datatable-row-detail-template\r\n    >\r\n      <div style=\"padding-left: 35px\">\r\n        <div><strong>Address</strong></div>\r\n        <div>Test</div>\r\n      </div>\r\n    </ng-template>\r\n  </ngx-datatable-row-detail>\r\n\r\n  <!-- Column Templates -->\r\n  <ngx-datatable-column\r\n    [width]=\"50\"\r\n    [resizeable]=\"false\"\r\n    [sortable]=\"false\"\r\n    [draggable]=\"false\"\r\n    [canAutoResize]=\"false\"\r\n  >\r\n    <ng-template\r\n      let-row=\"row\"\r\n      let-expanded=\"expanded\"\r\n      ngx-datatable-cell-template\r\n    >\r\n      <a\r\n        href=\"javascript:void(0)\"\r\n        [class.datatable-icon-right]=\"!expanded\"\r\n        [class.datatable-icon-down]=\"expanded\"\r\n        title=\"Expand/Collapse Row\"\r\n        (click)=\"toggleExpandRow(row)\"\r\n      >\r\n      </a>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n\r\n  <!-- Date -->\r\n  <ngx-datatable-column name=\"rptDate\">\r\n    <ng-template let-column=\"column\" ngx-datatable-header-template>\r\n      Date\r\n    </ng-template>\r\n    <ng-template let-value=\"value\" ngx-datatable-cell-template>\r\n      <strong>{{ value | date }}</strong>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n\r\n  <!-- SUBID -->\r\n  <ngx-datatable-column name=\"subid\">\r\n    <ng-template let-column=\"column\" ngx-datatable-header-template>\r\n      Subid\r\n    </ng-template>\r\n    <ng-template let-value=\"value\" ngx-datatable-cell-template>\r\n      <strong>{{ value }}</strong>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n\r\n  <!-- Tag -->\r\n  <ngx-datatable-column name=\"tagname\">\r\n    <ng-template let-column=\"column\" ngx-datatable-header-template>\r\n      Tag\r\n    </ng-template>\r\n    <ng-template let-value=\"value\" ngx-datatable-cell-template>\r\n      <strong>{{ value }}</strong>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n\r\n  <!-- Publisher -->\r\n  <ngx-datatable-column name=\"publisher\">\r\n    <ng-template let-column=\"column\" ngx-datatable-header-template>\r\n      Publisher\r\n    </ng-template>\r\n    <ng-template let-value=\"value\" ngx-datatable-cell-template>\r\n      <strong>{{ value }}</strong>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n\r\n  <!-- Split -->\r\n  <ngx-datatable-column name=\"spilt\">\r\n    <ng-template let-column=\"column\" ngx-datatable-header-template>\r\n      Spilt\r\n    </ng-template>\r\n    <ng-template let-value=\"value\" ngx-datatable-cell-template>\r\n        <strong>{{ (value | number) || (0 | number: '1.0-0') }}</strong>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n\r\n  <!-- REVENUE -->\r\n  <ngx-datatable-column name=\"revenue\">\r\n    <ng-template let-column=\"column\" ngx-datatable-header-template>\r\n      Revenue\r\n    </ng-template>\r\n    <ng-template let-value=\"value\" ngx-datatable-cell-template>\r\n      <strong>{{ value | currency: 'USD' }}</strong>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n</ngx-datatable>","import { Component, AfterViewInit, ChangeDetectorRef, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { TagInterface } from 'src/app/shared/models/tag.interface';\r\nimport { TagManagementService } from '../../tag-management/tag-management.service';\r\nimport { UsersService } from '../../../shared/service/users.service'\r\nimport { ChartDataInterface } from 'src/app/shared/models/chartData.interface';\r\nimport { PerionService } from 'src/app/shared/service/admin-stats/perion.service';\r\nimport { LyonService } from 'src/app/shared/service/admin-stats/lyon.service';\r\n\r\n@Component({\r\n  selector: 'app-publisher',\r\n  templateUrl: './publisher.component.html',\r\n  styleUrls: ['./publisher.component.scss']\r\n})\r\nexport class PublisherComponent implements AfterViewInit  {\r\n  @ViewChild('expandableTable') table: any;\r\n  loadingIndicator = true;\r\n  tagRows: TagInterface;\r\n  //Sends chartData to ReportingRevenueChartComponent\r\n  chartData: ChartDataInterface;\r\n  selectedCompany: any;\r\n  selectedAdvertiser: any;\r\n  allChart: any;\r\n  range = {\r\n    startDate: '',\r\n    endDate: '',\r\n  };\r\n  statData: any[];\r\n  allLyonStatData: any;\r\n  allPerionStatData: any;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private tagManagementService: TagManagementService,\r\n    private cdr: ChangeDetectorRef,\r\n    private userService: UsersService,\r\n    private perionService: PerionService,\r\n    private lyonService: LyonService,\r\n  ) {\r\n    this.selectedCompany = this.getSelectedCompanyFromLocalStorage();\r\n  }\r\n  \r\n  async ngAfterViewInit(){\r\n    this.route.params.subscribe(async routeParams => {\r\n      //console.log(\"routeParams===>\", routeParams)\r\n      this.statData = [];\r\n      this.tagRows = await this.getTagInformation(routeParams.tagId);\r\n      this.selectedAdvertiser = this.tagRows.advertiser;\r\n      this.selectedCompany = this.tagRows.company;\r\n     \r\n      if(this.selectedAdvertiser == \"lyons\") {\r\n        this.chartData = await this.getLyonChartMetrics(\r\n          this.selectedCompany,\r\n          this.range.startDate,\r\n          this.range.endDate\r\n        );\r\n        this.statData = await this.getAllLyonStats(this.range.startDate,this.range.endDate, this.tagRows)\r\n        \r\n      } else if (this.selectedAdvertiser == \"perion\") {\r\n        this.chartData = await this.getPerionChartMetrics(\r\n          this.selectedCompany,\r\n          this.range.startDate,\r\n          this.range.endDate\r\n        );\r\n        this.statData = await this.getAllPerionStats(this.range.startDate,this.range.endDate, this.tagRows)\r\n      }\r\n      this.refreshTable();\r\n    });\r\n    \r\n  }\r\n  //Gets the Selected Company from Local Storage\r\n  getSelectedCompanyFromLocalStorage() {\r\n    return this.userService.getSelectedCompanyFromLocalStorage();\r\n  }\r\n  toggleExpandRow(row) {\r\n    console.log('Toggled Expand Row!', row);\r\n    this.table.rowDetail.toggleExpandRow(row);\r\n  }\r\n\r\n  onDetailToggle(event) {\r\n    console.log('Detail Toggled', event);\r\n  }\r\n\r\n  getTagInformation(id: any) {\r\n    return this.tagManagementService.getOneTag(id).toPromise().then((response) => {\r\n      return response;\r\n    }).catch((error) => {\r\n      return error;\r\n    })\r\n  }\r\n\r\n  public async updateReportingFiltering(range) {\r\n    // console.log('Update report filtering....');\r\n    this.range = range;\r\n    if(this.selectedAdvertiser == \"lyons\") {\r\n      this.chartData = await this.getLyonChartMetrics(\r\n        this.selectedCompany,\r\n        this.range.startDate,\r\n        this.range.endDate\r\n      );\r\n      this.statData = await this.getAllLyonStats(this.range.startDate,this.range.endDate, this.tagRows)\r\n    } else if (this.selectedAdvertiser == \"perion\") {\r\n      this.chartData = await this.getPerionChartMetrics(\r\n        this.selectedCompany,\r\n        this.range.startDate,\r\n        this.range.endDate\r\n      );\r\n      this.statData = await this.getAllPerionStats(this.range.startDate,this.range.endDate, this.tagRows)\r\n    }\r\n    \r\n    this.refreshTable();\r\n  }\r\n\r\n  getLyonChartMetrics(company, startDate, endDate) {\r\n    return this.lyonService.getAllStats(startDate, endDate).toPromise().then((response) => {\r\n      this.allChart = response;\r\n      var chartAllLyonStat = [];\r\n      for(var tagSub of this.tagRows.subids) {\r\n        if(tagSub['filterTag'] ==\"Contains\") {    \r\n          chartAllLyonStat = chartAllLyonStat.concat(this.allChart.filter(stat => stat.subid.includes(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] ==\"StartsWith\") {\r\n          chartAllLyonStat = chartAllLyonStat.concat(this.allChart.filter(stat => stat.subid.startsWith(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] ==\"EndsWith\") {\r\n          chartAllLyonStat = chartAllLyonStat.concat(this.allChart.filter(stat => stat.subid.endsWith(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] ==\"ExactValue\") {\r\n          chartAllLyonStat = chartAllLyonStat.concat(this.allChart.filter(stat => stat.subid == tagSub['subid'] ))\r\n        }\r\n      }\r\n\r\n      //duplicated remove\r\n      let filter_data = chartAllLyonStat.filter((obj, pos, arr) => {\r\n        return arr\r\n          .map(mapObj => mapObj._id)\r\n          .indexOf(obj._id) == pos;\r\n      });\r\n      var helperChart = {};\r\n      filter_data.map(f =>{\r\n        f.revenue = parseFloat(f.revenue);\r\n        f.ctr = parseFloat(f.ctr);\r\n        f.biddedCtr = parseFloat(f.biddedCTR);\r\n      })\r\n      var resultChart = filter_data.reduce(function(r, o) {\r\n        var key = o.rptDate;\r\n        if(!helperChart[key]) {\r\n          helperChart[key] = Object.assign({}, o); // create a copy of o\r\n          r.push(helperChart[key]);\r\n        } else {\r\n          helperChart[key].searches += parseInt(o.searches);\r\n          if(o.revenue) {\r\n            helperChart[key].revenue += o.revenue;\r\n          }\r\n        } \r\n        return r;\r\n      }, []);\r\n      var revenuePerDayVal = [];\r\n      var datesOfRevenueVal = [];\r\n      var searchesPerDayVal = [];\r\n      var chartDataValue = {};\r\n      for(var resVal of resultChart) {\r\n        revenuePerDayVal.push(resVal.revenue);\r\n        datesOfRevenueVal.push(resVal.rptDate);\r\n        searchesPerDayVal.push(resVal.searches);\r\n      }\r\n      chartDataValue['revenuePerDay'] = revenuePerDayVal;\r\n      chartDataValue['datesOfRevenue'] = datesOfRevenueVal;\r\n      chartDataValue['searchesPerDay'] = searchesPerDayVal;\r\n      return chartDataValue;\r\n    })\r\n    .catch((error) => {\r\n      return error;\r\n    });\r\n\r\n  }\r\n  refreshTable() {\r\n    this.cdr.markForCheck();\r\n  }\r\n\r\n  getPerionChartMetrics(company, startDate, endDate) {\r\n    return this.perionService\r\n      .getChartMetrics(company, startDate, endDate)\r\n      .toPromise()\r\n      .then((response) => {\r\n        return response;\r\n      })\r\n      .catch((error) => {\r\n        return error;\r\n      });\r\n  }\r\n\r\n  getAllPerionStats(startDate, endDate, tag) {\r\n    return this.perionService.getPerTagPerionStats(this.selectedCompany, startDate, endDate).toPromise().then((response) => {\r\n      this.allPerionStatData = response;\r\n      var allPerionStat = [];\r\n      for (var tagSub of tag.subids) {\r\n        if(tagSub.filterTag ==\"Contains\") {\r\n          allPerionStat = allPerionStat.concat(this.allPerionStatData.filter(stat => stat.subid.includes(tagSub.subid)))\r\n          allPerionStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher[0].fullname : \"No Publisher\"\r\n            stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag ==\"StartsWith\") {\r\n          allPerionStat = allPerionStat.concat(this.allPerionStatData.filter(stat => stat.subid.startsWith(tagSub.subid)))\r\n          allPerionStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher[0].fullname : \"No Publisher\"\r\n            stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag ==\"EndsWith\") {\r\n          allPerionStat = allPerionStat.concat(this.allPerionStatData.filter(stat => stat.subid.endsWith(tagSub.subid)))\r\n          allPerionStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher[0].fullname : \"No Publisher\"\r\n            stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag ==\"ExactValue\") {\r\n          allPerionStat = allPerionStat.concat(this.allPerionStatData.filter(stat => stat.subid == tagSub.subid ))\r\n          allPerionStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher[0].fullname : \"No Publisher\"\r\n            stat.tagname = tag.name\r\n          })\r\n        }\r\n      }\r\n      //duplicated remove\r\n      let filtered_data = allPerionStat.filter((obj, pos, arr) => {\r\n        return arr\r\n          .map(mapObj => mapObj._id)\r\n          .indexOf(obj._id) == pos;\r\n      });\r\n      var helper = {};\r\n      filtered_data.map(f =>{\r\n        f.revenue = parseFloat(f.revenue);\r\n        f.rptDate = f.date;\r\n      });\r\n      var resultAll = filtered_data.reduce(function(prev, current) {\r\n        var key = (current.date).toString() + '-' + current.subid;\r\n        if(!helper[key]) {\r\n          helper[key] = Object.assign({}, current); // create a copy of o\r\n          prev.push(helper[key]);\r\n        } else {\r\n          helper[key].clicks += parseInt(current.clicks);\r\n          if(current.revenue) {\r\n            helper[key].revenue += current.revenue;\r\n          }\r\n          \r\n          helper[key].split += parseInt(current.split);\r\n        }\r\n  \r\n        return prev;\r\n      }, []);\r\n      return resultAll.slice().sort((a, b) => b.date - a.date);\r\n    })\r\n    .catch((error) => {\r\n      return error;\r\n    });\r\n  }\r\n  getAllLyonStats(startDate, endDate, tag) {\r\n    return this.lyonService.getAllStats(startDate, endDate).toPromise().then((response) => {    \r\n      this.allLyonStatData = response;\r\n      var allLyonStat = [];\r\n      for (var tagSub of tag.subids) {\r\n        if(tagSub.filterTag ==\"Contains\") {\r\n          allLyonStat = allLyonStat.concat(this.allLyonStatData.filter(stat => stat.subid.includes(tagSub.subid)))\r\n          allLyonStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher[0].fullname : \"\"\r\n            stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag ==\"StartsWith\") {\r\n          allLyonStat = allLyonStat.concat(this.allLyonStatData.filter(stat => stat.subid.startsWith(tagSub.subid)))\r\n          allLyonStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher[0].fullname : \"\"\r\n            stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag ==\"EndsWith\") {\r\n          allLyonStat = allLyonStat.concat(this.allLyonStatData.filter(stat => stat.subid.endsWith(tagSub.subid)))\r\n          allLyonStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher[0].fullname : \"\"\r\n            stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag ==\"ExactValue\") {\r\n          allLyonStat = allLyonStat.concat(this.allLyonStatData.filter(stat => stat.subid == tagSub.subid ))\r\n          allLyonStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher[0].fullname : \"\"\r\n            stat.tagname = tag.name\r\n          })\r\n        }\r\n      }\r\n      \r\n      //duplicated remove\r\n      let filtered_data = allLyonStat.filter((obj, pos, arr) => {\r\n        return arr\r\n          .map(mapObj => mapObj._id)\r\n          .indexOf(obj._id) == pos;\r\n      });\r\n      var helper = {};\r\n      filtered_data.map(f =>{\r\n        f.revenue = parseFloat(f.revenue);\r\n        f.ctr = parseFloat(f.ctr);\r\n        f.biddedCtr = parseFloat(f.biddedCTR);\r\n      })\r\n      \r\n      var resultAll = filtered_data.reduce(function(prev, current) {\r\n        var key = (current.rptDate).toString() + '-' + current.subid;\r\n        if(!helper[key]) {\r\n          helper[key] = Object.assign({}, current); // create a copy of o\r\n          prev.push(helper[key]);\r\n        } else {\r\n          helper[key].clicks += parseInt(current.clicks);\r\n          helper[key].searches += parseInt(current.searches);\r\n          if(current.biddedCtr) {\r\n            helper[key].biddedCtr += current.biddedCtr;\r\n          }\r\n          if(current.ctr) {\r\n            helper[key].ctr += current.ctr;\r\n          }\r\n          if(current.revenue) {\r\n            helper[key].revenue += current.revenue;\r\n          }\r\n          \r\n          helper[key].biddedSearches += parseInt(current.biddedSearches);\r\n          helper[key].split += parseInt(current.split);\r\n        }\r\n  \r\n        return prev;\r\n      }, []);\r\n      \r\n      return resultAll.slice().sort((a, b) => b.rptDate - a.rptDate);\r\n    })\r\n    .catch((error) => {\r\n      return error;\r\n    });\r\n  }\r\n}\r\n"]}