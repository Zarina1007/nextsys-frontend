{"version":3,"sources":["webpack:///node_modules/file-saver/dist/FileSaver.min.js","webpack:///src/app/modules/publisher-reporting/publisher-reporting-routing.module.ts","webpack:///src/app/modules/publisher-reporting/publisher-reporting.component.ts","webpack:///src/app/modules/publisher-reporting/publisher-reporting.component.html","webpack:///src/app/modules/publisher-reporting/publisher-reporting.module.ts","webpack:///src/app/modules/publisher-reporting/publisher/publisher.component.html","webpack:///src/app/modules/publisher-reporting/publisher/publisher.component.ts","webpack:///src/app/shared/service/export-data.service.ts"],"names":["b","a","autoBom","console","warn","test","type","Blob","c","d","XMLHttpRequest","open","responseType","onload","g","response","onerror","error","send","status","e","dispatchEvent","MouseEvent","document","createEvent","initMouseEvent","window","f","self","global","navigator","userAgent","saveAs","HTMLAnchorElement","prototype","h","i","URL","webkitURL","j","createElement","name","download","rel","href","origin","location","target","createObjectURL","setTimeout","revokeObjectURL","msSaveOrOpenBlob","title","body","innerText","HTMLElement","safari","FileReader","k","onloadend","result","replace","readAsDataURL","l","m","module","exports","routes","path","component","children","pathMatch","redirectTo","PublisherReportingRoutingModule","forChild","imports","PublisherReportingComponent","selector","templateUrl","styleUrls","PublisherReportingModule","declarations","providers","entryComponents","PublisherComponent","route","tagManagementService","cdr","userService","perionService","lyonService","verizonService","rubiService","solexbcService","system1Service","apptitudeService","exportDataService","datePipe","currencyPipe","percentPipe","loadingIndicator","range","startDate","endDate","selectedCompany","getSelectedCompanyFromLocalStorage","users","id","firstName","lastName","handle","params","subscribe","routeParams","statData","getTagInformation","tagId","tagRows","selectedAdvertiser","advertiser","company","getLyonChartMetrics","chartData","getAllLyonStats","getPerionChartMetrics","getAllPerionStats","getVerizonChartMetrics","getAllVerizonStats","getRubiChartMetrics","getRubiAllStats","getSolexBCChartMetrics","getSolexBCAllStats","getSystem1ChartMetrics","getSystem1AllStats","getApptitudeChartMetrics","getApptitudePublisherStats","refreshTable","row","log","table","rowDetail","toggleExpandRow","event","getOneTag","toPromise","then","getAllPublisherStats","allChart","chartAllLyonStat","subids","tagSub","concat","filter","stat","subid","includes","startsWith","endsWith","filter_data","thing","index","findIndex","t","date","slice","sort","helperChart","resultChart","reduce","r","o","key","Object","assign","push","searches","parseInt","revenue","revenuePerDayVal","publisherRevenuePerDayVal","datesOfRevenueVal","searchesPerDayVal","chartDataValue","resVal","markForCheck","exportCov","statOne","transform","cpc","ctr","exportToCsv","nickName","getPerTagPerionStats","allPerionChart","chartAllPerionStat","impressions","tag","allPerionStatData","allPerionStat","filterTag","map","publisher","fullname","allLyonStatData","allLyonStat","filtered_data","getAllPublisherVerizonStats","allVerizonStatData","stats","allVerizonStat","tagname","allVerizonChart","chartAllVerizonStat","getAllRubiStats","res","allRubiStatData","allRubiStat","allRubiChart","chartAllRubiStat","getAllSolexBCStats","allSolexBCStatData","allSolexBCStat","allSolexBCChart","chartAllSolexbcStat","getSystem1PublisherStats","getPublisherApptitudeStats","allApptitudeStatData","allApptitudeStat","allApptitudeChart","chatAllApptitudeStat","updateReportingFiltering","onDetailToggle","CSV_EXTENSION","CSV_TYPE","ExportDataService","buffer","fileName","fileType","data","rows","columns","length","separator","keys","csvContent","join","cell","undefined","Date","toLocaleString","toString","search","saveAsFile","providedIn"],"mappings":"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","file":"modules-publisher-reporting-publisher-reporting-module-es5.js","sourcesContent":["(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open(\"GET\",a),d.responseType=\"blob\",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error(\"could not download file\")},d.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open(\"\",\"_blank\"),g&&(g.document.title=g.document.body.innerText=\"downloading...\"),\"string\"==typeof b)return c(b,d,e);var h=\"application/octet-stream\"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&\"undefined\"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,\"undefined\"!=typeof module&&(module.exports=g)});\n\n//# sourceMappingURL=FileSaver.min.js.map","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { PublisherReportingComponent } from './publisher-reporting.component';\r\nimport { PublisherComponent } from './publisher/publisher.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PublisherReportingComponent,\r\n    children: [\r\n      {\r\n        path: ':tagId',\r\n        component: PublisherComponent,\r\n        pathMatch: 'full',\r\n      },\r\n\r\n      { path: '', redirectTo: '', pathMatch: 'full' },\r\n      { path: '**', redirectTo: '', pathMatch: 'full' },\r\n    ]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  exports: [RouterModule]\r\n})\r\nexport class PublisherReportingRoutingModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-publisher-reporting',\r\n  templateUrl: './publisher-reporting.component.html',\r\n  styleUrls: ['./publisher-reporting.component.scss']\r\n})\r\nexport class PublisherReportingComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<router-outlet></router-outlet>","import { NgModule } from '@angular/core';\r\nimport { CommonModule, CurrencyPipe, DatePipe, PercentPipe } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\nimport { PublisherReportingRoutingModule } from './publisher-reporting-routing.module';\r\nimport { PublisherComponent } from './publisher/publisher.component';\r\nimport { PublisherReportingComponent } from './publisher-reporting.component';\r\nimport { SharedModule } from 'src/app/shared/modules/shared.module';\r\nimport { NgxDatatableModule } from '@swimlane/ngx-datatable';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PublisherComponent, \r\n    PublisherReportingComponent\r\n  ],\r\n  imports: [\r\n    RouterModule,\r\n    CommonModule,\r\n    PublisherReportingRoutingModule,\r\n    SharedModule,\r\n    NgxDatatableModule\r\n  ],\r\n  providers: [DatePipe, PercentPipe, CurrencyPipe],\r\n  entryComponents: [],\r\n})\r\nexport class PublisherReportingModule { }\r\n","<app-reporting-filtering (onDatesPicked)=\"updateReportingFiltering($event)\"></app-reporting-filtering>\r\n<!-- Chart Part-->\r\n<app-reporting-publisher-revenue-chart *ngIf=\"chartData\" [chartData]=\"chartData\"></app-reporting-publisher-revenue-chart>\r\n\r\n<div class=\"row py-6\">\r\n  <button class=\"btn btn-sm btn-primary mx-3\"\r\n    (click)=\"exportToCsv()\"\r\n  >\r\n    Export Stats\r\n  </button>\r\n</div>\r\n\r\n<ngx-datatable #expandableTable class=\"material fullscreen expandable\" style=\"top: 10px; height: 500px\" [loadingIndicator]=\"loadingIndicator\"\r\n  [columnMode]=\"'force'\" [headerHeight]=\"50\" [footerHeight]=\"0\" [rowHeight]=\"50\" [scrollbarV]=\"true\" [scrollbarH]=\"true\"\r\n  [rows]=\"statData\">\r\n  <!-- Row Detail Template -->\r\n  <ngx-datatable-row-detail [rowHeight]=\"100\" #myDetailRow (toggle)=\"onDetailToggle($event)\">\r\n    <ng-template let-row=\"row\" let-expanded=\"expanded\" ngx-datatable-row-detail-template>\r\n      <div style=\"padding-left: 35px\">\r\n        <div><strong>Address</strong></div>\r\n        <div>Test</div>\r\n      </div>\r\n    </ng-template>\r\n  </ngx-datatable-row-detail>\r\n\r\n  <!-- Column Templates -->\r\n  <ngx-datatable-column [width]=\"50\" [resizeable]=\"false\" [sortable]=\"false\" [draggable]=\"false\"\r\n    [canAutoResize]=\"false\">\r\n    <ng-template let-row=\"row\" let-expanded=\"expanded\" ngx-datatable-cell-template>\r\n      <a href=\"javascript:void(0)\" [class.datatable-icon-right]=\"!expanded\" [class.datatable-icon-down]=\"expanded\"\r\n        title=\"Expand/Collapse Row\" (click)=\"toggleExpandRow(row)\">\r\n      </a>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n\r\n  <!-- Date -->\r\n  <ngx-datatable-column name=\"date\">\r\n    <ng-template let-column=\"column\" ngx-datatable-header-template>\r\n      Date\r\n    </ng-template>\r\n    <ng-template let-value=\"value\" ngx-datatable-cell-template>\r\n      <strong>{{ value | date }}</strong>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n\r\n  <!-- SUBID -->\r\n  <!-- <ngx-datatable-column name=\"subid\">\r\n    <ng-template let-column=\"column\" ngx-datatable-header-template>\r\n      Subid\r\n    </ng-template>\r\n    <ng-template let-value=\"value\" ngx-datatable-cell-template>\r\n      <strong>{{ value }}</strong>\r\n    </ng-template>\r\n  </ngx-datatable-column> -->\r\n\r\n  <!-- Tag -->\r\n  <!-- <ngx-datatable-column name=\"tagname\">\r\n    <ng-template let-column=\"column\" ngx-datatable-header-template>\r\n      Tag\r\n    </ng-template>\r\n    <ng-template let-value=\"value\" ngx-datatable-cell-template>\r\n      <strong>{{ value }}</strong>\r\n    </ng-template>\r\n  </ngx-datatable-column> -->\r\n\r\n  <!-- Publisher -->\r\n  <!-- <ngx-datatable-column name=\"publisher\">\r\n    <ng-template let-column=\"column\" ngx-datatable-header-template>\r\n      Publisher\r\n    </ng-template>\r\n    <ng-template let-value=\"value\" ngx-datatable-cell-template>\r\n      <strong>{{ value }}</strong>\r\n    </ng-template>\r\n  </ngx-datatable-column> -->\r\n\r\n  <!-- Searches -->\r\n  <ngx-datatable-column name=\"searches\">\r\n    <ng-template let-column=\"column\" ngx-datatable-header-template>\r\n      Searches\r\n    </ng-template>\r\n    <ng-template let-value=\"value\" ngx-datatable-cell-template>\r\n      <strong>{{ value }}</strong>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n\r\n  <!-- CPC -->\r\n  <ngx-datatable-column name=\"cpc\">\r\n    <ng-template let-column=\"column\" ngx-datatable-header-template>\r\n      CPC\r\n    </ng-template>\r\n    <ng-template let-value=\"value\" ngx-datatable-cell-template>\r\n      <strong>{{ (value | currency: 'USD') || (0 | currency: 'USD') }}</strong>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n\r\n  <!-- CTR -->\r\n  <ngx-datatable-column name=\"ctr\">\r\n    <ng-template let-column=\"column\" ngx-datatable-header-template>\r\n      CTR\r\n    </ng-template>\r\n    <ng-template let-value=\"value\" ngx-datatable-cell-template>\r\n      <strong>{{ (value | percent:'1.2-2') || (0 | percent:'1.2-2') }}</strong>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n\r\n  <!-- REVENUE -->\r\n  <ngx-datatable-column name=\"revenue\">\r\n    <ng-template let-column=\"column\" ngx-datatable-header-template>\r\n      Revenue\r\n    </ng-template>\r\n    <ng-template let-value=\"value\" ngx-datatable-cell-template>\r\n      <strong>{{ value | currency: 'USD' }}</strong>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n</ngx-datatable>","import { Component, AfterViewInit, ChangeDetectorRef, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { TagInterface } from 'src/app/shared/models/tag.interface';\r\nimport { TagManagementService } from '../../tag-management/tag-management.service';\r\nimport { UsersService } from '../../../shared/service/users.service'\r\nimport { ChartDataInterface } from 'src/app/shared/models/chartData.interface';\r\nimport { PerionService } from 'src/app/shared/service/admin-stats/perion.service';\r\nimport { LyonService } from 'src/app/shared/service/admin-stats/lyon.service';\r\nimport { VerizonService } from 'src/app/shared/service/admin-stats/verizon.service';\r\nimport { RubiService } from 'src/app/shared/service/admin-stats/rubi.service';\r\nimport { SolexBCService } from 'src/app/shared/service/admin-stats/solexbc.service';\r\nimport { System1Service } from 'src/app/shared/service/admin-stats/system1.service';\r\nimport { ApptitudeService } from 'src/app/shared/service/admin-stats/apptitude.service';\r\nimport { ExportDataService } from 'src/app/shared/service/export-data.service';\r\nimport { CurrencyPipe, DatePipe, PercentPipe } from '@angular/common';\r\n\r\n@Component({\r\n  selector: 'app-publisher',\r\n  templateUrl: './publisher.component.html',\r\n  styleUrls: ['./publisher.component.scss']\r\n})\r\nexport class PublisherComponent implements AfterViewInit {\r\n  @ViewChild('expandableTable') table: any;\r\n  loadingIndicator = true;\r\n  tagRows: any;\r\n  //Sends chartData to ReportingRevenueChartComponent\r\n  chartData: ChartDataInterface;\r\n  selectedCompany: any;\r\n  selectedAdvertiser: any;\r\n  allChart: any;\r\n  allPerionChart: any;\r\n  allVerizonChart: any;\r\n  allRubiChart: any;\r\n  allSolexBCChart: any;\r\n  allApptitudeChart: any;\r\n  range = {\r\n    startDate: '',\r\n    endDate: '',\r\n  };\r\n  statData: any;\r\n  allLyonStatData: any;\r\n  allPerionStatData: any;\r\n  allVerizonStatData: any;\r\n  allRubiStatData: any;\r\n  allSolexBCStatData: any;\r\n  allApptitudeStatData: any;\r\n  users: any;\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private tagManagementService: TagManagementService,\r\n    private cdr: ChangeDetectorRef,\r\n    private userService: UsersService,\r\n    private perionService: PerionService,\r\n    private lyonService: LyonService,\r\n    private verizonService: VerizonService,\r\n    private rubiService: RubiService,\r\n    private solexbcService: SolexBCService,\r\n    private system1Service: System1Service,\r\n    private apptitudeService: ApptitudeService,\r\n    private exportDataService: ExportDataService,\r\n    private datePipe: DatePipe,\r\n    private currencyPipe: CurrencyPipe,\r\n    private percentPipe: PercentPipe,\r\n  ) {\r\n    this.selectedCompany = this.getSelectedCompanyFromLocalStorage();\r\n  }\r\n\r\n  async ngAfterViewInit() {\r\n    this.users = [\r\n      {\r\n        id: 1,\r\n        firstName: 'Mark',\r\n        lastName: 'Otto',\r\n        handle: '@mdo'\r\n      },\r\n      {\r\n        id: 2,\r\n        firstName: 'Jacob',\r\n        lastName: 'Thornton',\r\n        handle: '@fat'\r\n      },\r\n      {\r\n        id: 3,\r\n        firstName: 'Larry',\r\n        lastName: 'the Bird',\r\n        handle: '@twitter'\r\n      },\r\n    ];\r\n    this.route.params.subscribe(async routeParams => {\r\n      this.statData = [];\r\n      this.tagRows = await this.getTagInformation(routeParams.tagId);\r\n      this.selectedAdvertiser = this.tagRows.advertiser;\r\n      this.selectedCompany = this.tagRows.company;\r\n      \r\n      if (this.selectedAdvertiser == \"lyons\") {\r\n        this.chartData = await this.getLyonChartMetrics(\r\n          this.selectedCompany,\r\n          this.range.startDate,\r\n          this.range.endDate\r\n        );\r\n        this.statData = await this.getAllLyonStats(this.range.startDate, this.range.endDate, this.tagRows)\r\n\r\n      } else if (this.selectedAdvertiser == \"perion\") {\r\n        this.chartData = await this.getPerionChartMetrics(\r\n          this.selectedCompany,\r\n          this.range.startDate,\r\n          this.range.endDate\r\n        );\r\n        this.statData = await this.getAllPerionStats(this.range.startDate, this.range.endDate, this.tagRows)\r\n      } else if (this.selectedAdvertiser == \"verizon-direct\") {\r\n        this.chartData = await this.getVerizonChartMetrics(\r\n          this.selectedCompany,\r\n          this.range.startDate,\r\n          this.range.endDate\r\n        );\r\n        this.statData = await this.getAllVerizonStats(this.range.startDate, this.range.endDate, this.tagRows)\r\n      } else if (this.selectedAdvertiser == \"rubi\") {\r\n        this.chartData = await this.getRubiChartMetrics(\r\n          this.selectedCompany,\r\n          this.range.startDate,\r\n          this.range.endDate\r\n        );\r\n        this.statData = await this.getRubiAllStats(this.range.startDate, this.range.endDate, this.tagRows)\r\n      } else if (this.selectedAdvertiser == \"solex-bc\") {\r\n        this.chartData = await this.getSolexBCChartMetrics(\r\n          this.selectedCompany,\r\n          this.range.startDate,\r\n          this.range.endDate\r\n        );\r\n        this.statData = await this.getSolexBCAllStats(this.range.startDate, this.range.endDate, this.tagRows)\r\n      } else if (this.selectedAdvertiser == \"system1\") {\r\n        this.chartData = await this.getSystem1ChartMetrics(\r\n          this.selectedCompany,\r\n          this.range.startDate,\r\n          this.range.endDate\r\n        );\r\n        this.statData = await this.getSystem1AllStats(this.range.startDate, this.range.endDate, this.tagRows)\r\n      } else if (this.selectedAdvertiser == \"apptitude\") {\r\n        this.chartData = await this.getApptitudeChartMetrics(\r\n          this.selectedCompany,\r\n          this.range.startDate,\r\n          this.range.endDate\r\n        );\r\n        this.statData = await this.getApptitudePublisherStats(this.range.startDate, this.range.endDate, this.tagRows)\r\n      }\r\n      this.loadingIndicator = false;\r\n      this.refreshTable();\r\n    });\r\n\r\n  }\r\n  //Gets the Selected Company from Local Storage\r\n  getSelectedCompanyFromLocalStorage() {\r\n    return this.userService.getSelectedCompanyFromLocalStorage();\r\n  }\r\n  toggleExpandRow(row) {\r\n    console.log('Toggled Expand Row!', row);\r\n    this.table.rowDetail.toggleExpandRow(row);\r\n  }\r\n\r\n  onDetailToggle(event) {\r\n    console.log('Detail Toggled', event);\r\n  }\r\n\r\n  getTagInformation(id: any) {\r\n    return this.tagManagementService.getOneTag(id).toPromise().then((response) => {\r\n      return response;\r\n    }).catch((error) => {\r\n      return error;\r\n    })\r\n  }\r\n\r\n  public async updateReportingFiltering(range) {\r\n    // console.log('Update report filtering....');\r\n    this.range = range;\r\n    if (this.selectedAdvertiser == \"lyons\") {\r\n      this.chartData = await this.getLyonChartMetrics(\r\n        this.selectedCompany,\r\n        this.range.startDate,\r\n        this.range.endDate\r\n      );\r\n      this.statData = await this.getAllLyonStats(this.range.startDate, this.range.endDate, this.tagRows)\r\n    } else if (this.selectedAdvertiser == \"perion\") {\r\n      this.chartData = await this.getPerionChartMetrics(\r\n        this.selectedCompany,\r\n        this.range.startDate,\r\n        this.range.endDate\r\n      );\r\n      this.statData = await this.getAllPerionStats(this.range.startDate, this.range.endDate, this.tagRows)\r\n    } else if (this.selectedAdvertiser == \"verizon-direct\") {\r\n      this.chartData = await this.getVerizonChartMetrics(\r\n        this.selectedCompany,\r\n        this.range.startDate,\r\n        this.range.endDate\r\n      );\r\n      this.statData = await this.getAllVerizonStats(this.range.startDate, this.range.endDate, this.tagRows)\r\n    } else if (this.selectedAdvertiser == \"rubi\") {\r\n      this.chartData = await this.getRubiChartMetrics(\r\n        this.selectedCompany,\r\n        this.range.startDate,\r\n        this.range.endDate\r\n      );\r\n      this.statData = await this.getRubiAllStats(this.range.startDate, this.range.endDate, this.tagRows);\r\n    } else if (this.selectedAdvertiser == \"solex-bc\") {\r\n      this.chartData = await this.getSolexBCChartMetrics(\r\n        this.selectedCompany,\r\n        this.range.startDate,\r\n        this.range.endDate\r\n      );\r\n      this.statData = await this.getSolexBCAllStats(this.range.startDate, this.range.endDate, this.tagRows)\r\n    } else if (this.selectedAdvertiser == \"system1\") {\r\n      this.chartData = await this.getSystem1ChartMetrics(\r\n        this.selectedCompany,\r\n        this.range.startDate,\r\n        this.range.endDate\r\n      );\r\n      this.statData = await this.getSystem1AllStats(this.range.startDate, this.range.endDate, this.tagRows)\r\n    } else if (this.selectedAdvertiser == \"apptitude\") {\r\n      this.chartData = await this.getApptitudeChartMetrics(\r\n        this.selectedCompany,\r\n        this.range.startDate,\r\n        this.range.endDate\r\n      );\r\n      this.statData = await this.getApptitudePublisherStats(this.range.startDate, this.range.endDate, this.tagRows)\r\n    }\r\n    this.loadingIndicator = false;\r\n    this.refreshTable();\r\n  }\r\n\r\n  getLyonChartMetrics(company, startDate, endDate) {\r\n    return this.lyonService.getAllPublisherStats(startDate, endDate).toPromise().then((response) => {\r\n      this.allChart = response;\r\n      var chartAllLyonStat = [];\r\n      for (var tagSub of this.tagRows.subids) {\r\n        if (tagSub['filterTag'] == \"Contains\") {\r\n          chartAllLyonStat = chartAllLyonStat.concat(this.allChart.filter(stat => stat.subid.includes(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] == \"StartsWith\") {\r\n          chartAllLyonStat = chartAllLyonStat.concat(this.allChart.filter(stat => stat.subid.startsWith(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] == \"EndsWith\") {\r\n          chartAllLyonStat = chartAllLyonStat.concat(this.allChart.filter(stat => stat.subid.endsWith(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] == \"ExactValue\") {\r\n          chartAllLyonStat = chartAllLyonStat.concat(this.allChart.filter(stat => stat.subid == tagSub['subid']))\r\n        }\r\n      }\r\n\r\n      //duplicated remove\r\n      let filter_data = chartAllLyonStat.filter((thing, index, self) =>\r\n        index === self.findIndex((t) => (\r\n          t.date === thing.date && t.subid === thing.subid\r\n        ))\r\n      )\r\n      // filter_data.map(f =>{\r\n      //   f.revenue = parseFloat(f.revenue) * parseFloat(f.split)/100;\r\n      // })\r\n      filter_data = filter_data.slice().sort((a, b) => a.date - b.date);\r\n\r\n      var helperChart = {};\r\n      var resultChart = filter_data.reduce(function (r, o) {\r\n        var key = o.date;\r\n        if (!helperChart[key]) {\r\n          helperChart[key] = Object.assign({}, o); // create a copy of o\r\n          r.push(helperChart[key]);\r\n        } else {\r\n          helperChart[key].searches += parseInt(o.searches);\r\n          if (o.revenue) {\r\n            helperChart[key].revenue += o.revenue;\r\n          }\r\n        }\r\n        return r;\r\n      }, []);\r\n\r\n      var revenuePerDayVal = [];\r\n      var publisherRevenuePerDayVal = [];\r\n      var datesOfRevenueVal = [];\r\n      var searchesPerDayVal = [];\r\n      var chartDataValue = {};\r\n      for (var resVal of resultChart) {\r\n        revenuePerDayVal.push(0);\r\n        publisherRevenuePerDayVal.push(resVal.revenue);\r\n        datesOfRevenueVal.push(resVal.date);\r\n        searchesPerDayVal.push(resVal.searches);\r\n      }\r\n      chartDataValue['revenuePerDay'] = revenuePerDayVal;\r\n      chartDataValue['publisherRevenuePerDay'] = publisherRevenuePerDayVal;\r\n      chartDataValue['datesOfRevenue'] = datesOfRevenueVal;\r\n      chartDataValue['searchesPerDay'] = searchesPerDayVal;\r\n      return chartDataValue;\r\n    })\r\n      .catch((error) => {\r\n        return error;\r\n      });\r\n\r\n  }\r\n  refreshTable() {\r\n    this.cdr.markForCheck();\r\n  }\r\n\r\n  exportToCsv(): void {\r\n    let exportCov = [];\r\n    for (var statOne of this.statData) {\r\n      let stat = {\r\n        date: this.datePipe.transform(statOne.date, \"dd MMM yyyy\"),\r\n        searches: statOne.searches,\r\n        cpc: this.currencyPipe.transform(statOne.cpc ? statOne.cpc : 0),\r\n        ctr: this.percentPipe.transform(statOne.ctr, \"1.2-2\"),\r\n        revenue: statOne.revenue,\r\n      };\r\n      exportCov.push(stat);\r\n    }\r\n    this.exportDataService.exportToCsv(exportCov, this.tagRows.nickName ? this.tagRows.nickName : this.tagRows.name, ['date', 'searches', 'cpc', 'ctr', 'revenue']);\r\n  }\r\n\r\n  getPerionChartMetrics(company, startDate, endDate) {\r\n    return this.perionService.getPerTagPerionStats(this.selectedCompany, startDate, endDate).toPromise().then((response) => {\r\n      this.allPerionChart = response;\r\n      var chartAllPerionStat = [];\r\n      for (var tagSub of this.tagRows.subids) {\r\n        if (tagSub['filterTag'] == \"Contains\") {\r\n          chartAllPerionStat = chartAllPerionStat.concat(this.allPerionChart.filter(stat => stat.subid.includes(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] == \"StartsWith\") {\r\n          chartAllPerionStat = chartAllPerionStat.concat(this.allPerionChart.filter(stat => stat.subid.startsWith(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] == \"EndsWith\") {\r\n          chartAllPerionStat = chartAllPerionStat.concat(this.allPerionChart.filter(stat => stat.subid.endsWith(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] == \"ExactValue\") {\r\n          chartAllPerionStat = chartAllPerionStat.concat(this.allPerionChart.filter(stat => stat.subid == tagSub['subid']))\r\n        }\r\n      }\r\n\r\n      //duplicated remove\r\n      let filter_data = chartAllPerionStat.filter((thing, index, self) =>\r\n        index === self.findIndex((t) => (\r\n          t.date === thing.date && t.subid === thing.subid\r\n        ))\r\n      )\r\n      filter_data = filter_data.slice().sort((a, b) => a.date - b.date);\r\n      var helperChart = {};\r\n      var resultChart = filter_data.reduce(function (r, o) {\r\n        var key = o.date;\r\n        if (!helperChart[key]) {\r\n          helperChart[key] = Object.assign({}, o); // create a copy of o\r\n          r.push(helperChart[key]);\r\n        } else {\r\n          helperChart[key].searches += parseInt(o.impressions);\r\n          if (o.revenue) {\r\n            helperChart[key].revenue += o.revenue;\r\n          }\r\n        }\r\n        return r;\r\n      }, []);\r\n\r\n      var revenuePerDayVal = [];\r\n      var publisherRevenuePerDayVal = [];\r\n      var datesOfRevenueVal = [];\r\n      var searchesPerDayVal = [];\r\n      var chartDataValue = {};\r\n      for (var resVal of resultChart) {\r\n        revenuePerDayVal.push(0);\r\n        publisherRevenuePerDayVal.push(resVal.revenue);\r\n        datesOfRevenueVal.push(resVal.date);\r\n        searchesPerDayVal.push(resVal.impressions);\r\n      }\r\n      chartDataValue['revenuePerDay'] = revenuePerDayVal;\r\n      chartDataValue['publisherRevenuePerDay'] = publisherRevenuePerDayVal;\r\n      chartDataValue['datesOfRevenue'] = datesOfRevenueVal;\r\n      chartDataValue['searchesPerDay'] = searchesPerDayVal;\r\n      return chartDataValue;\r\n    })\r\n      .catch((error) => {\r\n        return error;\r\n      });\r\n  }\r\n\r\n  getAllPerionStats(startDate, endDate, tag) {\r\n    return this.perionService.getPerTagPerionStats(this.selectedCompany, startDate, endDate).toPromise().then((response) => {\r\n      this.allPerionStatData = response;\r\n      var allPerionStat = [];\r\n      for (var tagSub of tag.subids) {\r\n        if (tagSub.filterTag == \"Contains\") {\r\n          allPerionStat = allPerionStat.concat(this.allPerionStatData.filter(stat => stat.subid.includes(tagSub.subid)))\r\n          allPerionStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"No Publisher\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag == \"StartsWith\") {\r\n          allPerionStat = allPerionStat.concat(this.allPerionStatData.filter(stat => stat.subid.startsWith(tagSub.subid)))\r\n          allPerionStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"No Publisher\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag == \"EndsWith\") {\r\n          allPerionStat = allPerionStat.concat(this.allPerionStatData.filter(stat => stat.subid.endsWith(tagSub.subid)))\r\n          allPerionStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"No Publisher\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag == \"ExactValue\") {\r\n          allPerionStat = allPerionStat.concat(this.allPerionStatData.filter(stat => stat.subid == tagSub.subid))\r\n          allPerionStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"No Publisher\"\r\n            //stat.tagname = tag.name\r\n          })\r\n        }\r\n      }\r\n\r\n      //duplicated remove\r\n      let filter_data = allPerionStat.filter((thing, index, self) =>\r\n        index === self.findIndex((t) => (\r\n          t.date === thing.date && t.subid === thing.subid\r\n        ))\r\n      )\r\n      // let filtered_data = allPerionStat.filter((obj, pos, arr) => {\r\n      //   return arr\r\n      //     .map(mapObj => mapObj._id)\r\n      //     .indexOf(obj._id) == pos;\r\n      // });\r\n      // var helper = {};\r\n      // var resultAll = filtered_data.reduce(function(prev, current) {\r\n      //   var key = (current.date).toString() + '-' + current.subid;\r\n      //   if(!helper[key]) {\r\n      //     helper[key] = Object.assign({}, current); // create a copy of o\r\n      //     prev.push(helper[key]);\r\n      //   } else {\r\n      //     helper[key].clicks += parseInt(current.clicks);\r\n      //     if(current.revenue) {\r\n      //       helper[key].revenue += current.revenue;\r\n      //     }\r\n\r\n      //     helper[key].split += parseInt(current.split);\r\n      //   }\r\n\r\n      //   return prev;\r\n      // }, []);\r\n      // return resultAll.slice().sort((a, b) => b.date - a.date);\r\n      return filter_data.slice().sort((a, b) => b.date - a.date);\r\n    })\r\n      .catch((error) => {\r\n        return error;\r\n      });\r\n  }\r\n  getAllLyonStats(startDate, endDate, tag) {\r\n    return this.lyonService.getAllPublisherStats(startDate, endDate).toPromise().then((response) => {\r\n      this.allLyonStatData = response;\r\n      var allLyonStat = [];\r\n      for (var tagSub of tag.subids) {\r\n        if (tagSub.filterTag == \"Contains\") {\r\n          allLyonStat = allLyonStat.concat(this.allLyonStatData.filter(stat => stat.subid.includes(tagSub.subid)))\r\n          allLyonStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag == \"StartsWith\") {\r\n          allLyonStat = allLyonStat.concat(this.allLyonStatData.filter(stat => stat.subid.startsWith(tagSub.subid)))\r\n          allLyonStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag == \"EndsWith\") {\r\n          allLyonStat = allLyonStat.concat(this.allLyonStatData.filter(stat => stat.subid.endsWith(tagSub.subid)))\r\n          allLyonStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag == \"ExactValue\") {\r\n          allLyonStat = allLyonStat.concat(this.allLyonStatData.filter(stat => stat.subid == tagSub.subid))\r\n          allLyonStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        }\r\n      }\r\n\r\n      //duplicated remove\r\n      let filtered_data = allLyonStat.filter((thing, index, self) =>\r\n        index === self.findIndex((t) => (\r\n          t.date === thing.date && t.subid === thing.subid\r\n        ))\r\n      )\r\n      // var helper = {};\r\n      // filtered_data.map(f =>{\r\n      //   f.revenue = parseFloat(f.revenue) * parseFloat(f.split)/100;\r\n      // })\r\n\r\n      // var resultAll = filtered_data.reduce(function(prev, current) {\r\n      //   var key = (current.rptDate).toString() + '-' + current.subid;\r\n      //   if(!helper[key]) {\r\n      //     helper[key] = Object.assign({}, current); // create a copy of o\r\n      //     prev.push(helper[key]);\r\n      //   } else {\r\n      //     helper[key].clicks += parseInt(current.clicks);\r\n      //     helper[key].searches += parseInt(current.searches);\r\n      //     if(current.biddedCtr) {\r\n      //       helper[key].biddedCtr += current.biddedCtr;\r\n      //     }\r\n      //     if(current.ctr) {\r\n      //       helper[key].ctr += current.ctr;\r\n      //     }\r\n      //     if(current.revenue) {\r\n      //       helper[key].revenue += current.revenue;\r\n      //     }\r\n\r\n      //     helper[key].biddedSearches += parseInt(current.biddedSearches);\r\n      //     helper[key].split += parseInt(current.split);\r\n      //   }\r\n\r\n      //   return prev;\r\n      // }, []);\r\n\r\n      //return resultAll.slice().sort((a, b) => b.rptDate - a.rptDate);\r\n      return filtered_data.slice().sort((a, b) => b.date - a.date);\r\n    })\r\n      .catch((error) => {\r\n        return error;\r\n      });\r\n  }\r\n\r\n  getAllVerizonStats(startDate, endDate, tag) {\r\n    return this.verizonService.getAllPublisherVerizonStats(this.selectedCompany, startDate, endDate).toPromise().then((response) => {\r\n      this.allVerizonStatData = response.stats;\r\n      var allVerizonStat = [];\r\n      for (var tagSub of tag.subids) {\r\n        if (tagSub.filterTag == \"Contains\") {\r\n          allVerizonStat = allVerizonStat.concat(this.allVerizonStatData.filter(stat => stat.subid.includes(tagSub.subid)))\r\n          allVerizonStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag == \"StartsWith\") {\r\n          allVerizonStat = allVerizonStat.concat(this.allVerizonStatData.filter(stat => stat.subid.startsWith(tagSub.subid)))\r\n          allVerizonStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag == \"EndsWith\") {\r\n          allVerizonStat = allVerizonStat.concat(this.allVerizonStatData.filter(stat => stat.subid.endsWith(tagSub.subid)))\r\n          allVerizonStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag == \"ExactValue\") {\r\n          allVerizonStat = allVerizonStat.concat(this.allVerizonStatData.filter(stat => stat.subid == tagSub.subid))\r\n          allVerizonStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            stat.tagname = tag.name\r\n          })\r\n        }\r\n      }\r\n      //duplicated remove\r\n      let filtered_data = allVerizonStat.filter((thing, index, self) =>\r\n        index === self.findIndex((t) => (\r\n          t.date === thing.date && t.subid === thing.subid\r\n        ))\r\n      )\r\n\r\n      // var helper = {};\r\n      // filtered_data.map(f =>{\r\n      //   f.revenue = parseFloat(f.revenue) * parseFloat(f.split)/100;\r\n      // })\r\n\r\n\r\n      return filtered_data.slice().sort((a, b) => b.date - a.date);\r\n    })\r\n      .catch((error) => {\r\n        return error;\r\n      });\r\n  }\r\n  getVerizonChartMetrics(company, startDate, endDate) {\r\n    return this.verizonService.getAllPublisherVerizonStats(this.selectedCompany, startDate, endDate).toPromise().then((response) => {\r\n      this.allVerizonChart = response.stats;\r\n      var chartAllVerizonStat = [];\r\n      for (var tagSub of this.tagRows.subids) {\r\n        if (tagSub['filterTag'] == \"Contains\") {\r\n          chartAllVerizonStat = chartAllVerizonStat.concat(this.allVerizonChart.filter(stat => stat.subid.includes(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] == \"StartsWith\") {\r\n          chartAllVerizonStat = chartAllVerizonStat.concat(this.allVerizonChart.filter(stat => stat.subid.startsWith(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] == \"EndsWith\") {\r\n          chartAllVerizonStat = chartAllVerizonStat.concat(this.allVerizonChart.filter(stat => stat.subid.endsWith(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] == \"ExactValue\") {\r\n          chartAllVerizonStat = chartAllVerizonStat.concat(this.allVerizonChart.filter(stat => stat.subid == tagSub['subid']))\r\n        }\r\n      }\r\n\r\n      //duplicated remove\r\n      let filter_data = chartAllVerizonStat.filter((thing, index, self) =>\r\n        index === self.findIndex((t) => (\r\n          t.date === thing.date && t.subid === thing.subid\r\n        ))\r\n      )\r\n      // filter_data.map(f =>{\r\n      //   f.revenue = parseFloat(f.revenue) * parseFloat(f.split)/100;\r\n      // })\r\n      filter_data = filter_data.slice().sort((a, b) => a.date - b.date);\r\n\r\n      var helperChart = {};\r\n      var resultChart = filter_data.reduce(function (r, o) {\r\n        var key = o.date;\r\n        if (!helperChart[key]) {\r\n          helperChart[key] = Object.assign({}, o); // create a copy of o\r\n          r.push(helperChart[key]);\r\n        } else {\r\n          helperChart[key].searches += parseInt(o.searches);\r\n          if (o.revenue) {\r\n            helperChart[key].revenue += o.revenue;\r\n          }\r\n        }\r\n        return r;\r\n      }, []);\r\n\r\n      var revenuePerDayVal = [];\r\n      var publisherRevenuePerDayVal = [];\r\n      var datesOfRevenueVal = [];\r\n      var searchesPerDayVal = [];\r\n      var chartDataValue = {};\r\n      for (var resVal of resultChart) {\r\n        revenuePerDayVal.push(0);\r\n        publisherRevenuePerDayVal.push(resVal.revenue);\r\n        datesOfRevenueVal.push(resVal.date);\r\n        searchesPerDayVal.push(resVal.searches);\r\n      }\r\n      chartDataValue['revenuePerDay'] = revenuePerDayVal;\r\n      chartDataValue['publisherRevenuePerDay'] = publisherRevenuePerDayVal;\r\n      chartDataValue['datesOfRevenue'] = datesOfRevenueVal;\r\n      chartDataValue['searchesPerDay'] = searchesPerDayVal;\r\n      return chartDataValue;\r\n    })\r\n      .catch((error) => {\r\n        return error;\r\n      });\r\n\r\n  }\r\n  getRubiAllStats(startDate, endDate, tag) {\r\n    return this.rubiService.getAllRubiStats(this.selectedCompany, startDate, endDate).toPromise().then((res) => {\r\n      this.allRubiStatData = res.stats;\r\n      var allRubiStat = [];\r\n      for (var tagSub of tag.subids) {\r\n        if (tagSub.filterTag == \"Contains\") {\r\n          allRubiStat = allRubiStat.concat(this.allRubiStatData.filter(stat => stat.subid.includes(tagSub.subid)))\r\n          allRubiStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag == \"StartsWith\") {\r\n          allRubiStat = allRubiStat.concat(this.allRubiStatData.filter(stat => stat.subid.startsWith(tagSub.subid)))\r\n          allRubiStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag == \"EndsWith\") {\r\n          allRubiStat = allRubiStat.concat(this.allRubiStatData.filter(stat => stat.subid.endsWith(tagSub.subid)))\r\n          allRubiStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag == \"ExactValue\") {\r\n          allRubiStat = allRubiStat.concat(this.allRubiStatData.filter(stat => stat.subid == tagSub.subid))\r\n          allRubiStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        }\r\n      }\r\n      //duplicated remove\r\n      let filtered_data = allRubiStat.filter((thing, index, self) =>\r\n        index === self.findIndex((t) => (\r\n          t.date === thing.date && t.subid === thing.subid\r\n        ))\r\n      )\r\n\r\n      // // var helper = {};\r\n      // filtered_data.map(f =>{\r\n      //   f.revenue = parseFloat(f.revenue) * parseFloat(f.split)/100;\r\n      //   f.cpc = parseFloat(f.revenue)/parseFloat(f.clicks);\r\n      // })\r\n\r\n\r\n      return filtered_data.slice().sort((a, b) => b.date - a.date);\r\n    })\r\n      .catch((error) => {\r\n        return error;\r\n      });\r\n  }\r\n  getRubiChartMetrics(company, startDate, endDate) {\r\n    return this.rubiService.getAllRubiStats(this.selectedCompany, startDate, endDate).toPromise().then((response) => {\r\n      this.allRubiChart = response.stats;\r\n      var chartAllRubiStat = [];\r\n      for (var tagSub of this.tagRows.subids) {\r\n        if (tagSub['filterTag'] == \"Contains\") {\r\n          chartAllRubiStat = chartAllRubiStat.concat(this.allRubiChart.filter(stat => stat.subid.includes(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] == \"StartsWith\") {\r\n          chartAllRubiStat = chartAllRubiStat.concat(this.allRubiChart.filter(stat => stat.subid.startsWith(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] == \"EndsWith\") {\r\n          chartAllRubiStat = chartAllRubiStat.concat(this.allRubiChart.filter(stat => stat.subid.endsWith(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] == \"ExactValue\") {\r\n          chartAllRubiStat = chartAllRubiStat.concat(this.allRubiChart.filter(stat => stat.subid == tagSub['subid']))\r\n        }\r\n      }\r\n\r\n      //duplicated remove\r\n      let filter_data = chartAllRubiStat.filter((thing, index, self) =>\r\n        index === self.findIndex((t) => (\r\n          t.date === thing.date && t.subid === thing.subid\r\n        ))\r\n      )\r\n      // filter_data.map(f =>{\r\n      //   f.revenue = parseFloat(f.revenue) * parseFloat(f.split)/100;\r\n      // })\r\n      filter_data = filter_data.slice().sort((a, b) => a.date - b.date);\r\n\r\n      var helperChart = {};\r\n      var resultChart = filter_data.reduce(function (r, o) {\r\n        var key = o.date;\r\n        if (!helperChart[key]) {\r\n          helperChart[key] = Object.assign({}, o); // create a copy of o\r\n          r.push(helperChart[key]);\r\n        } else {\r\n          helperChart[key].searches += parseInt(o.searches);\r\n          if (o.revenue) {\r\n            helperChart[key].revenue += o.revenue;\r\n          }\r\n        }\r\n        return r;\r\n      }, []);\r\n\r\n      var revenuePerDayVal = [];\r\n      var publisherRevenuePerDayVal = [];\r\n      var datesOfRevenueVal = [];\r\n      var searchesPerDayVal = [];\r\n      var chartDataValue = {};\r\n      for (var resVal of resultChart) {\r\n        revenuePerDayVal.push(0);\r\n        publisherRevenuePerDayVal.push(resVal.revenue);\r\n        datesOfRevenueVal.push(resVal.date);\r\n        searchesPerDayVal.push(resVal.searches);\r\n      }\r\n      chartDataValue['revenuePerDay'] = revenuePerDayVal;\r\n      chartDataValue['publisherRevenuePerDay'] = publisherRevenuePerDayVal;\r\n      chartDataValue['datesOfRevenue'] = datesOfRevenueVal;\r\n      chartDataValue['searchesPerDay'] = searchesPerDayVal;\r\n      return chartDataValue;\r\n    })\r\n      .catch((error) => {\r\n        return error;\r\n      });\r\n\r\n  }\r\n  getSolexBCAllStats(startDate, endDate, tag) {\r\n    return this.solexbcService.getAllSolexBCStats(this.selectedCompany, startDate, endDate).toPromise().then((res) => {\r\n      this.allSolexBCStatData = res.stats;\r\n      var allSolexBCStat = [];\r\n      for (var tagSub of tag.subids) {\r\n        if (tagSub.filterTag == \"Contains\") {\r\n          allSolexBCStat = allSolexBCStat.concat(this.allSolexBCStatData.filter(stat => stat.subid.includes(tagSub.subid)))\r\n          allSolexBCStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag == \"StartsWith\") {\r\n          allSolexBCStat = allSolexBCStat.concat(this.allSolexBCStatData.filter(stat => stat.subid.startsWith(tagSub.subid)))\r\n          allSolexBCStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag == \"EndsWith\") {\r\n          allSolexBCStat = allSolexBCStat.concat(this.allSolexBCStatData.filter(stat => stat.subid.endsWith(tagSub.subid)))\r\n          allSolexBCStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag == \"ExactValue\") {\r\n          allSolexBCStat = allSolexBCStat.concat(this.allSolexBCStatData.filter(stat => stat.subid == tagSub.subid))\r\n          allSolexBCStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        }\r\n      }\r\n      //duplicated remove\r\n      let filtered_data = allSolexBCStat.filter((thing, index, self) =>\r\n        index === self.findIndex((t) => (\r\n          t.date === thing.date && t.subid === thing.subid\r\n        ))\r\n      )\r\n\r\n      // // var helper = {};\r\n      // filtered_data.map(f =>{\r\n      //   f.revenue = parseFloat(f.revenue) * parseFloat(f.split)/100;\r\n      //   f.cpc = parseFloat(f.revenue)/parseFloat(f.clicks);\r\n      // })\r\n\r\n\r\n      return filtered_data.slice().sort((a, b) => b.date - a.date);\r\n    })\r\n      .catch((error) => {\r\n        return error;\r\n      });\r\n  }\r\n  getSolexBCChartMetrics(company, startDate, endDate) {\r\n    return this.solexbcService.getAllSolexBCStats(this.selectedCompany, startDate, endDate).toPromise().then((response) => {\r\n      this.allSolexBCChart = response.stats;\r\n      var chartAllSolexbcStat = [];\r\n      for (var tagSub of this.tagRows.subids) {\r\n        if (tagSub['filterTag'] == \"Contains\") {\r\n          chartAllSolexbcStat = chartAllSolexbcStat.concat(this.allSolexBCChart.filter(stat => stat.subid.includes(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] == \"StartsWith\") {\r\n          chartAllSolexbcStat = chartAllSolexbcStat.concat(this.allSolexBCChart.filter(stat => stat.subid.startsWith(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] == \"EndsWith\") {\r\n          chartAllSolexbcStat = chartAllSolexbcStat.concat(this.allSolexBCChart.filter(stat => stat.subid.endsWith(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] == \"ExactValue\") {\r\n          chartAllSolexbcStat = chartAllSolexbcStat.concat(this.allSolexBCChart.filter(stat => stat.subid == tagSub['subid']))\r\n        }\r\n      }\r\n\r\n      //duplicated remove\r\n      let filter_data = chartAllSolexbcStat.filter((thing, index, self) =>\r\n        index === self.findIndex((t) => (\r\n          t.date === thing.date && t.subid === thing.subid\r\n        ))\r\n      )\r\n      // filter_data.map(f =>{\r\n      //   f.revenue = parseFloat(f.revenue) * parseFloat(f.split)/100;\r\n      // })\r\n      filter_data = filter_data.slice().sort((a, b) => a.date - b.date);\r\n\r\n      var helperChart = {};\r\n      var resultChart = filter_data.reduce(function (r, o) {\r\n        var key = o.date;\r\n        if (!helperChart[key]) {\r\n          helperChart[key] = Object.assign({}, o); // create a copy of o\r\n          r.push(helperChart[key]);\r\n        } else {\r\n          helperChart[key].searches += parseInt(o.searches);\r\n          if (o.revenue) {\r\n            helperChart[key].revenue += o.revenue;\r\n          }\r\n        }\r\n        return r;\r\n      }, []);\r\n\r\n      var revenuePerDayVal = [];\r\n      var publisherRevenuePerDayVal = [];\r\n      var datesOfRevenueVal = [];\r\n      var searchesPerDayVal = [];\r\n      var chartDataValue = {};\r\n      for (var resVal of resultChart) {\r\n        revenuePerDayVal.push(0);\r\n        publisherRevenuePerDayVal.push(resVal.revenue);\r\n        datesOfRevenueVal.push(resVal.date);\r\n        searchesPerDayVal.push(resVal.searches);\r\n      }\r\n      chartDataValue['revenuePerDay'] = revenuePerDayVal;\r\n      chartDataValue['publisherRevenuePerDay'] = publisherRevenuePerDayVal;\r\n      chartDataValue['datesOfRevenue'] = datesOfRevenueVal;\r\n      chartDataValue['searchesPerDay'] = searchesPerDayVal;\r\n      return chartDataValue;\r\n    })\r\n      .catch((error) => {\r\n        return error;\r\n      });\r\n\r\n  }\r\n\r\n  getSystem1AllStats(startDate, endDate, tag) {\r\n    return this.system1Service.getSystem1PublisherStats(this.selectedCompany, startDate, endDate).toPromise().then((res) => {\r\n      this.allSolexBCStatData = res.stats;\r\n      var allSolexBCStat = [];\r\n      for (var tagSub of tag.subids) {\r\n        if (tagSub.filterTag == \"Contains\") {\r\n          allSolexBCStat = allSolexBCStat.concat(this.allSolexBCStatData.filter(stat => stat.subid.includes(tagSub.subid)))\r\n          allSolexBCStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag == \"StartsWith\") {\r\n          allSolexBCStat = allSolexBCStat.concat(this.allSolexBCStatData.filter(stat => stat.subid.startsWith(tagSub.subid)))\r\n          allSolexBCStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag == \"EndsWith\") {\r\n          allSolexBCStat = allSolexBCStat.concat(this.allSolexBCStatData.filter(stat => stat.subid.endsWith(tagSub.subid)))\r\n          allSolexBCStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag == \"ExactValue\") {\r\n          allSolexBCStat = allSolexBCStat.concat(this.allSolexBCStatData.filter(stat => stat.subid == tagSub.subid))\r\n          allSolexBCStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        }\r\n      }\r\n      //duplicated remove\r\n      let filtered_data = allSolexBCStat.filter((thing, index, self) =>\r\n        index === self.findIndex((t) => (\r\n          t.date === thing.date && t.subid === thing.subid\r\n        ))\r\n      )\r\n\r\n      // // var helper = {};\r\n      // filtered_data.map(f =>{\r\n      //   f.revenue = parseFloat(f.revenue) * parseFloat(f.split)/100;\r\n      //   f.cpc = parseFloat(f.revenue)/parseFloat(f.clicks);\r\n      // })\r\n\r\n\r\n      return filtered_data.slice().sort((a, b) => b.date - a.date);\r\n    })\r\n      .catch((error) => {\r\n        return error;\r\n      });\r\n  }\r\n  getSystem1ChartMetrics(company, startDate, endDate) {\r\n    return this.system1Service.getSystem1PublisherStats(this.selectedCompany, startDate, endDate).toPromise().then((response) => {\r\n      this.allSolexBCChart = response.stats;\r\n      var chartAllSolexbcStat = [];\r\n      for (var tagSub of this.tagRows.subids) {\r\n        if (tagSub['filterTag'] == \"Contains\") {\r\n          chartAllSolexbcStat = chartAllSolexbcStat.concat(this.allSolexBCChart.filter(stat => stat.subid.includes(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] == \"StartsWith\") {\r\n          chartAllSolexbcStat = chartAllSolexbcStat.concat(this.allSolexBCChart.filter(stat => stat.subid.startsWith(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] == \"EndsWith\") {\r\n          chartAllSolexbcStat = chartAllSolexbcStat.concat(this.allSolexBCChart.filter(stat => stat.subid.endsWith(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] == \"ExactValue\") {\r\n          chartAllSolexbcStat = chartAllSolexbcStat.concat(this.allSolexBCChart.filter(stat => stat.subid == tagSub['subid']))\r\n        }\r\n      }\r\n\r\n      //duplicated remove\r\n      let filter_data = chartAllSolexbcStat.filter((thing, index, self) =>\r\n        index === self.findIndex((t) => (\r\n          t.date === thing.date && t.subid === thing.subid\r\n        ))\r\n      )\r\n      // filter_data.map(f =>{\r\n      //   f.revenue = parseFloat(f.revenue) * parseFloat(f.split)/100;\r\n      // })\r\n      filter_data = filter_data.slice().sort((a, b) => a.date - b.date);\r\n\r\n      var helperChart = {};\r\n      var resultChart = filter_data.reduce(function (r, o) {\r\n        var key = o.date;\r\n        if (!helperChart[key]) {\r\n          helperChart[key] = Object.assign({}, o); // create a copy of o\r\n          r.push(helperChart[key]);\r\n        } else {\r\n          helperChart[key].searches += parseInt(o.searches);\r\n          if (o.revenue) {\r\n            helperChart[key].revenue += o.revenue;\r\n          }\r\n        }\r\n        return r;\r\n      }, []);\r\n\r\n      var revenuePerDayVal = [];\r\n      var publisherRevenuePerDayVal = [];\r\n      var datesOfRevenueVal = [];\r\n      var searchesPerDayVal = [];\r\n      var chartDataValue = {};\r\n      for (var resVal of resultChart) {\r\n        revenuePerDayVal.push(0);\r\n        publisherRevenuePerDayVal.push(resVal.revenue);\r\n        datesOfRevenueVal.push(resVal.date);\r\n        searchesPerDayVal.push(resVal.searches);\r\n      }\r\n      chartDataValue['revenuePerDay'] = revenuePerDayVal;\r\n      chartDataValue['publisherRevenuePerDay'] = publisherRevenuePerDayVal;\r\n      chartDataValue['datesOfRevenue'] = datesOfRevenueVal;\r\n      chartDataValue['searchesPerDay'] = searchesPerDayVal;\r\n      return chartDataValue;\r\n    })\r\n      .catch((error) => {\r\n        return error;\r\n      });\r\n\r\n  }\r\n\r\n  getApptitudePublisherStats(startDate, endDate, tag) {\r\n    return this.apptitudeService.getPublisherApptitudeStats(this.selectedCompany, startDate, endDate).toPromise().then((res) => {\r\n      this.allApptitudeStatData = res.stats;\r\n      var allApptitudeStat = [];\r\n      for (var tagSub of tag.subids) {\r\n        if (tagSub.filterTag == \"Contains\") {\r\n          allApptitudeStat = allApptitudeStat.concat(this.allApptitudeStatData.filter(stat => stat.subid.includes(tagSub.subid)))\r\n          allApptitudeStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag == \"StartsWith\") {\r\n          allApptitudeStat = allApptitudeStat.concat(this.allApptitudeStatData.filter(stat => stat.subid.startsWith(tagSub.subid)))\r\n          allApptitudeStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag == \"EndsWith\") {\r\n          allApptitudeStat = allApptitudeStat.concat(this.allApptitudeStatData.filter(stat => stat.subid.endsWith(tagSub.subid)))\r\n          allApptitudeStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        } else if (tagSub.filterTag == \"ExactValue\") {\r\n          allApptitudeStat = allApptitudeStat.concat(this.allApptitudeStatData.filter(stat => stat.subid == tagSub.subid))\r\n          allApptitudeStat.map(stat => {\r\n            stat.publisher = tag.publisher ? tag.publisher.fullname : \"\"\r\n            // stat.tagname = tag.name\r\n          })\r\n        }\r\n      }\r\n      //duplicated remove\r\n      let filtered_data = allApptitudeStat.filter((thing, index, self) =>\r\n        index === self.findIndex((t) => (\r\n          t.date === thing.date && t.subid === thing.subid\r\n        ))\r\n      )\r\n\r\n      return filtered_data.slice().sort((a, b) => b.date - a.date);\r\n    })\r\n      .catch((error) => {\r\n        return error;\r\n      });\r\n  }\r\n  getApptitudeChartMetrics(company, startDate, endDate) {\r\n    return this.apptitudeService.getPublisherApptitudeStats(this.selectedCompany, startDate, endDate).toPromise().then((response) => {\r\n      this.allApptitudeChart = response.stats;\r\n      var chatAllApptitudeStat = [];\r\n      for (var tagSub of this.tagRows.subids) {\r\n        if (tagSub['filterTag'] == \"Contains\") {\r\n          chatAllApptitudeStat = chatAllApptitudeStat.concat(this.allApptitudeChart.filter(stat => stat.subid.includes(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] == \"StartsWith\") {\r\n          chatAllApptitudeStat = chatAllApptitudeStat.concat(this.allApptitudeChart.filter(stat => stat.subid.startsWith(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] == \"EndsWith\") {\r\n          chatAllApptitudeStat = chatAllApptitudeStat.concat(this.allApptitudeChart.filter(stat => stat.subid.endsWith(tagSub['subid'])))\r\n        } else if (tagSub['filterTag'] == \"ExactValue\") {\r\n          chatAllApptitudeStat = chatAllApptitudeStat.concat(this.allApptitudeChart.filter(stat => stat.subid == tagSub['subid']))\r\n        }\r\n      }\r\n\r\n      //duplicated remove\r\n      let filter_data = chatAllApptitudeStat.filter((thing, index, self) =>\r\n        index === self.findIndex((t) => (\r\n          t.date === thing.date && t.subid === thing.subid\r\n        ))\r\n      )\r\n      filter_data = filter_data.slice().sort((a, b) => a.date - b.date);\r\n\r\n      var helperChart = {};\r\n      var resultChart = filter_data.reduce(function (r, o) {\r\n        var key = o.date;\r\n        if (!helperChart[key]) {\r\n          helperChart[key] = Object.assign({}, o); // create a copy of o\r\n          r.push(helperChart[key]);\r\n        } else {\r\n          helperChart[key].searches += parseInt(o.searches);\r\n          if (o.revenue) {\r\n            helperChart[key].revenue += o.revenue;\r\n          }\r\n        }\r\n        return r;\r\n      }, []);\r\n\r\n      var revenuePerDayVal = [];\r\n      var publisherRevenuePerDayVal = [];\r\n      var datesOfRevenueVal = [];\r\n      var searchesPerDayVal = [];\r\n      var chartDataValue = {};\r\n      for (var resVal of resultChart) {\r\n        revenuePerDayVal.push(0);\r\n        publisherRevenuePerDayVal.push(resVal.revenue);\r\n        datesOfRevenueVal.push(resVal.date);\r\n        searchesPerDayVal.push(resVal.searches);\r\n      }\r\n      chartDataValue['revenuePerDay'] = revenuePerDayVal;\r\n      chartDataValue['publisherRevenuePerDay'] = publisherRevenuePerDayVal;\r\n      chartDataValue['datesOfRevenue'] = datesOfRevenueVal;\r\n      chartDataValue['searchesPerDay'] = searchesPerDayVal;\r\n      return chartDataValue;\r\n    })\r\n      .catch((error) => {\r\n        return error;\r\n      });\r\n\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\nimport * as FileSaver from 'file-saver';\n\nconst CSV_EXTENSION = '.csv';\nconst CSV_TYPE = 'text/plain;charset=utf-8';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ExportDataService {\n\n  constructor() { }\n\n  private saveAsFile(buffer: any, fileName: string, fileType: string): void {\n    const data: Blob = new Blob([buffer], { type: fileType });\n    FileSaver.saveAs(data, fileName);\n  }\n\n  public exportToCsv(rows: object[], fileName: string, columns?: string[]): string {\n    if (!rows || !rows.length) {\n      return;\n    }\n    const separator = ',';\n    const keys = Object.keys(rows[0]).filter(k => {\n      if (columns?.length) {\n        return columns.includes(k);\n      } else {\n        return true;\n      }\n    });\n    const csvContent =\n      keys.join(separator) +\n      '\\n' +\n      rows.map(row => {\n        return keys.map(k => {\n          let cell = row[k] === null || row[k] === undefined ? '' : row[k];\n          cell = cell instanceof Date\n            ? cell.toLocaleString()\n            : cell.toString().replace(/\"/g, '\"\"');\n          if (cell.search(/(\"|,|\\n)/g) >= 0) {\n            cell = `\"${cell}\"`;\n          }\n          return cell;\n        }).join(separator);\n      }).join('\\n');\n    this.saveAsFile(csvContent, `${fileName}${CSV_EXTENSION}`, CSV_TYPE);\n  }\n}\n"]}