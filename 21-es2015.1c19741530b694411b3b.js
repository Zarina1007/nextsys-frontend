(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"/X+5":function(t,e,a){"use strict";a.d(e,"a",(function(){return h}));var n=a("fXoL"),r=a("3Pt+"),c=a("wd/R"),i=a("kmnG"),s=a("iadO"),o=a("ofXK"),l=a("d3UM"),d=a("FKr1");function u(t,e){1&t&&(n.Wb(0,"mat-error"),n.Oc(1,"Invalid start date"),n.Vb())}function b(t,e){1&t&&(n.Wb(0,"mat-error"),n.Oc(1,"Invalid end date"),n.Vb())}function g(t,e){if(1&t&&(n.Wb(0,"mat-option",15),n.Oc(1),n.Vb()),2&t){const t=e.$implicit;n.rc("value",t.value),n.Db(1),n.Qc(" ",t.viewValue," ")}}let h=(()=>{class t{constructor(){this.onDatesPicked=new n.p}ngOnInit(){this.preSetDateRanges=this.getDateRanges(),this.range=new r.j({startDate:new r.g,endDate:new r.g}),this.selectedRange={startDate:"",endDate:""},this.preSelectValue="last7days",this.preSelectDates=this.getPreSetDateRange(this.preSelectValue),this.updateDatePickerRange(this.preSelectDates.startDate,this.preSelectDates.endDate),this.emitSelectedRange()}getDateRanges(){return[{value:"today",viewValue:"Today"},{value:"yesterday",viewValue:"Yesterday"},{value:"last7days",viewValue:"Last 7 Days"},{value:"last30days",viewValue:"Last 30 Days"},{value:"monthToDate",viewValue:"Month to Date"},{value:"lastMonth",viewValue:"Last Month"},{value:"custom",viewValue:"Custom"}]}getPreSetDateRange(t){switch(t){case"today":return{startDate:c().utc().startOf("day").format("MM-DD-YYYY"),endDate:c().utc().endOf("day").format("MM-DD-YYYY")};case"yesterday":return{startDate:c().subtract(1,"days").utc().startOf("day").format("MM-DD-YYYY"),endDate:c().subtract(1,"days").utc().endOf("day").format("MM-DD-YYYY")};case"last7days":return{startDate:c().subtract(7,"days").utc().startOf("day").format("MM-DD-YYYY"),endDate:c().utc().endOf("day").format("MM-DD-YYYY")};case"last30days":return{startDate:c().subtract(30,"days").utc().startOf("day").format("MM-DD-YYYY"),endDate:c().utc().endOf("day").format("MM-DD-YYYY")};case"monthToDate":return{startDate:c().startOf("month").utc().startOf("day").format("MM-DD-YYYY"),endDate:c().utc().endOf("day").format("MM-DD-YYYY")};case"lastMonth":return{startDate:c().subtract(1,"months").startOf("month").utc().startOf("day").format("MM-DD-YYYY"),endDate:c().utc().subtract(1,"months").endOf("month").format("MM-DD-YYYY")}}}onPreSetRangeSelectChange(t){"custom"!==t.value&&(this.preSelectValue=t.value,this.preSelectDates=this.getPreSetDateRange(this.preSelectValue),this.updateDatePickerRange(this.preSelectDates.startDate,this.preSelectDates.endDate),this.emitSelectedRange())}updateDatePickerRange(t,e){this.range.patchValue({startDate:c(t,"MM-DD-YYYY").toDate(),endDate:c(e,"MM-DD-YYYY").toDate()})}changeDatePicker(){this.range.valid&&(this.selectedRange.startDate=this.range.value.startDate,this.selectedRange.endDate=this.range.value.endDate,this.preSelectValue="custom",this.emitSelectedRange())}emitSelectedRange(){if(this.range.valid){this.selectedRange.startDate=this.range.value.startDate,this.selectedRange.endDate=this.range.value.endDate;let t=this.selectedRange;t.startDate=c(this.selectedRange.startDate).startOf("day").format("MM-DD-YYYY"),t.endDate=c(this.selectedRange.endDate).endOf("day").format("MM-DD-YYYY"),this.onDatesPicked.emit(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Kb({type:t,selectors:[["app-reporting-filtering"]],outputs:{onDatesPicked:"onDatesPicked"},decls:24,vars:7,consts:[[1,"row"],[1,"col-xl-6"],[1,"card","card-custom","example","example-compact","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"card-body"],[3,"formGroup","rangePicker","dateChange"],["matStartDate","","formControlName","startDate","placeholder","Start date","required",""],["matEndDate","","formControlName","endDate","placeholder","End date","required","",3,"dateChange"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){if(1&t&&(n.Wb(0,"div",0),n.Wb(1,"div",1),n.Wb(2,"div",2),n.Wb(3,"div",3),n.Wb(4,"div",4),n.Wb(5,"h2",5),n.Oc(6,"Filter Date Range"),n.Vb(),n.Vb(),n.Vb(),n.Wb(7,"div",6),n.Wb(8,"mat-form-field"),n.Wb(9,"mat-label"),n.Oc(10,"Enter a custom date range"),n.Vb(),n.Wb(11,"mat-date-range-input",7),n.hc("dateChange",(function(){return e.changeDatePicker()})),n.Rb(12,"input",8),n.Wb(13,"input",9),n.hc("dateChange",(function(){return e.changeDatePicker()})),n.Vb(),n.Vb(),n.Rb(14,"mat-datepicker-toggle",10),n.Rb(15,"mat-date-range-picker",null,11),n.Mc(17,u,2,0,"mat-error",12),n.Mc(18,b,2,0,"mat-error",12),n.Vb(),n.Wb(19,"mat-form-field"),n.Wb(20,"mat-label"),n.Oc(21,"Preset Date Range"),n.Vb(),n.Wb(22,"mat-select",13),n.hc("ngModelChange",(function(t){return e.preSelectValue=t}))("selectionChange",(function(t){return e.onPreSetRangeSelectChange(t)})),n.Mc(23,g,2,2,"mat-option",14),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb()),2&t){const t=n.Ac(16);n.Db(11),n.rc("formGroup",e.range)("rangePicker",t),n.Db(3),n.rc("for",t),n.Db(3),n.rc("ngIf",e.range.controls.startDate.hasError("matStartDateInvalid")),n.Db(1),n.rc("ngIf",e.range.controls.endDate.hasError("matEndDateInvalid")),n.Db(4),n.rc("ngModel",e.preSelectValue),n.Db(1),n.rc("ngForOf",e.preSetDateRanges)}},directives:[i.c,i.g,s.a,r.r,r.k,s.h,r.d,r.q,r.i,r.x,s.g,s.f,i.j,s.b,o.p,l.a,r.t,o.o,i.b,d.p],styles:[""]}),t})()},UKGz:function(t,e,a){"use strict";a.d(e,"a",(function(){return b}));var n=a("ofXK"),r=a("3Pt+"),c=a("d3UM"),i=a("FKr1"),s=a("iadO"),o=a("MutI"),l=a("kmnG"),d=a("e8Ap"),u=a("fXoL");let b=(()=>{class t{}return t.\u0275mod=u.Ob({type:t}),t.\u0275inj=u.Nb({factory:function(e){return new(e||t)},imports:[[n.c,r.w,r.m,l.e,i.n,c.b,i.q,s.e,o.d,d.b]]}),t})()},zDcN:function(t,e,a){"use strict";a.r(e),a.d(e,"QualityReportModule",(function(){return I}));var n=a("ofXK"),r=a("tyNb"),c=a("fXoL");let i=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Kb({type:t,selectors:[["app-quality-report"]],decls:1,vars:0,template:function(t,e){1&t&&c.Rb(0,"router-outlet")},directives:[r.l],styles:[""]}),t})();var s=a("mrSG"),o=a("AytR"),l=a("tk/3");const d=o.a.apiUrl+"/latencyTrafik";let u=(()=>{class t{constructor(t){this.http=t}getLatency(t,e){return this.http.get(""+d,{params:{startDate:t,endDate:e}})}}return t.\u0275fac=function(e){return new(e||t)(c.ec(l.c))},t.\u0275prov=c.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var b=a("/X+5"),g=a("lDzL");const h=["expandableTable"];function f(t,e){if(1&t&&(c.Wb(0,"tr"),c.Wb(1,"td"),c.Oc(2),c.mc(3,"date"),c.Vb(),c.Wb(4,"td"),c.Oc(5),c.mc(6,"number"),c.Vb(),c.Wb(7,"td"),c.Oc(8),c.mc(9,"number"),c.Vb(),c.Wb(10,"td"),c.Oc(11),c.mc(12,"number"),c.Vb(),c.Vb()),2&t){const t=e.$implicit;c.Db(2),c.Pc(c.nc(3,4,t.date)),c.Db(3),c.Qc("",c.nc(6,6,t.latency)," s"),c.Db(3),c.Qc("",c.nc(9,8,t.averageLatency)," s"),c.Db(3),c.Pc(c.nc(12,10,t.queries))}}function D(t,e){if(1&t&&(c.Wb(0,"div",17),c.Wb(1,"table",18),c.Wb(2,"thead"),c.Wb(3,"tr"),c.Wb(4,"th"),c.Oc(5,"Date"),c.Vb(),c.Wb(6,"th"),c.Oc(7,"Latency"),c.Vb(),c.Wb(8,"th"),c.Oc(9,"Average Latency"),c.Vb(),c.Wb(10,"th"),c.Oc(11,"Queries"),c.Vb(),c.Vb(),c.Vb(),c.Wb(12,"tbody"),c.Mc(13,f,13,12,"tr",19),c.Vb(),c.Vb(),c.Vb()),2&t){const t=c.lc().row;c.Db(13),c.rc("ngForOf",t.subLatencyData)}}function m(t,e){if(1&t&&c.Mc(0,D,14,1,"div",16),2&t){const t=c.lc();c.rc("ngIf",t.refresh)}}function p(t,e){if(1&t){const t=c.Xb();c.Wb(0,"a",20),c.hc("click",(function(){c.Dc(t);const a=e.row;return c.lc().toggleExpandRow(a)})),c.Vb()}if(2&t){const t=e.expanded;c.Ib("datatable-icon-right",!t)("datatable-icon-down",t)}}function y(t,e){1&t&&c.Oc(0," Date ")}function v(t,e){if(1&t&&(c.Wb(0,"strong"),c.Oc(1),c.mc(2,"date"),c.Vb()),2&t){const t=e.value;c.Db(1),c.Pc(c.nc(2,1,t))}}function M(t,e){1&t&&(c.Wb(0,"ngx-datatable-column",21),c.Mc(1,y,1,0,"ng-template",12),c.Mc(2,v,3,3,"ng-template",9),c.Vb()),2&t&&c.rc("minWidth",100)}function V(t,e){1&t&&c.Oc(0," Subid ")}function Y(t,e){if(1&t&&(c.Wb(0,"strong"),c.Oc(1),c.Vb()),2&t){const t=e.value;c.Db(1),c.Pc(t)}}function w(t,e){1&t&&c.Oc(0," Latency ")}function O(t,e){if(1&t&&(c.Wb(0,"strong"),c.Oc(1),c.mc(2,"number"),c.Vb()),2&t){const t=e.value;c.Db(1),c.Qc("",c.nc(2,1,t)," s")}}function W(t,e){1&t&&c.Oc(0," Average Latency ")}function R(t,e){if(1&t&&(c.Wb(0,"strong"),c.Oc(1),c.mc(2,"number"),c.Vb()),2&t){const t=e.value;c.Db(1),c.Qc("",c.nc(2,1,t)," s")}}function S(t,e){1&t&&c.Oc(0," Queries ")}function k(t,e){if(1&t&&(c.Wb(0,"strong"),c.Oc(1),c.mc(2,"number"),c.Vb()),2&t){const t=e.value;c.Db(1),c.Pc(c.nc(2,1,t))}}const x=[{path:"",component:i,children:[{path:"latency",component:(()=>{class t{constructor(t,e){this.cdr=t,this.latencyTrafikService=e,this.loadingIndicator=!0,this.range={startDate:"",endDate:""},this.refresh=!1}ngAfterViewInit(){return Object(s.a)(this,void 0,void 0,(function*(){this.latencyData=yield this.getLatency(this.range.startDate,this.range.endDate),this.rows=this.latencyData,this.cdr.detectChanges()}))}getLatency(t,e){return Object(s.a)(this,void 0,void 0,(function*(){try{const a=yield this.latencyTrafikService.getLatency(t,e).toPromise();return this.loadingIndicator=!1,a}catch(a){return a}}))}updateReportingFiltering(t){return Object(s.a)(this,void 0,void 0,(function*(){this.loadingIndicator=!0,this.range=t,this.latencyData=yield this.getLatency(this.range.startDate,this.range.endDate),this.rows=this.latencyData,this.loadingIndicator=!1,this.cdr.detectChanges()}))}toggleExpandRow(t){console.log("Toggled Expand Row!",t),this.table.rowDetail.toggleExpandRow(t)}onDetailToggle(t){console.log("Detail Toggled",t)}getDetailRowHeight(t,e){let a;return t&&(a=t.detailHeight),a}refreshLatency(t){var e={},a=this.latencyData.reduce((function(t,a){var n=a.subid;return e[n]?(e[n].latency+=a.latency,e[n].queries+=a.queries):(e[n]=Object.assign({},a),t.push(e[n])),t}),[]);for(var n of a)n.averageLatency=n.latency/n.queries,n.subLatencyData=this.groupDateForSubid(n),n.detailHeight=50*(n.subLatencyData.length+1);this.rows=a,this.refresh=!0,this.cdr.detectChanges()}groupDateForSubid(t){var e={},a=this.latencyData.filter(e=>e.subid===t.subid).reduce((function(t,a){var n=a.date;return e[n]?(e[n].latency+=a.latency,e[n].queries+=a.queries):(e[n]=Object.assign({},a),t.push(e[n])),t}),[]);for(var t of a)t.averageLatency=t.latency/t.queries;return a}}return t.\u0275fac=function(e){return new(e||t)(c.Qb(c.i),c.Qb(u))},t.\u0275cmp=c.Kb({type:t,selectors:[["app-latency"]],viewQuery:function(t,e){var a;1&t&&c.Tc(h,!0),2&t&&c.zc(a=c.ic())&&(e.table=a.first)},decls:24,vars:17,consts:[[3,"onDatesPicked"],[1,"row"],[1,"col-xl-12"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"material","fullscreen","expandable",2,"top","30px","height","500px",3,"columnMode","headerHeight","footerHeight","rowHeight","scrollbarV","rows","loadingIndicator"],["expandableTable",""],[3,"rowHeight","toggle"],["ngx-datatable-row-detail-template",""],[3,"width","resizeable","sortable","draggable","canAutoResize"],["ngx-datatable-cell-template",""],["name","date",3,"minWidth",4,"ngIf"],["name","subid"],["ngx-datatable-header-template",""],["name","latency",3,"minWidth"],["name","averageLatency",3,"minWidth"],["name","queries",3,"minWidth"],["class","table-responsive","style","padding-left: 36px;",4,"ngIf"],[1,"table-responsive",2,"padding-left","36px"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],["href","javascript:void(0)","title","Expand/Collapse Row",3,"click"],["name","date",3,"minWidth"]],template:function(t,e){1&t&&(c.Wb(0,"app-reporting-filtering",0),c.hc("onDatesPicked",(function(t){return e.updateReportingFiltering(t)})),c.Vb(),c.Wb(1,"div",1),c.Wb(2,"div",2),c.Wb(3,"button",3),c.hc("click",(function(t){return e.refreshLatency(t)})),c.Oc(4," Refresh "),c.Vb(),c.Vb(),c.Vb(),c.Wb(5,"ngx-datatable",4,5),c.Wb(7,"ngx-datatable-row-detail",6),c.hc("toggle",(function(t){return e.onDetailToggle(t)})),c.Mc(8,m,1,1,"ng-template",7),c.Vb(),c.Wb(9,"ngx-datatable-column",8),c.Mc(10,p,1,4,"ng-template",9),c.Vb(),c.Mc(11,M,3,1,"ngx-datatable-column",10),c.Wb(12,"ngx-datatable-column",11),c.Mc(13,V,1,0,"ng-template",12),c.Mc(14,Y,2,1,"ng-template",9),c.Vb(),c.Wb(15,"ngx-datatable-column",13),c.Mc(16,w,1,0,"ng-template",12),c.Mc(17,O,3,3,"ng-template",9),c.Vb(),c.Wb(18,"ngx-datatable-column",14),c.Mc(19,W,1,0,"ng-template",12),c.Mc(20,R,3,3,"ng-template",9),c.Vb(),c.Wb(21,"ngx-datatable-column",15),c.Mc(22,S,1,0,"ng-template",12),c.Mc(23,k,3,3,"ng-template",9),c.Vb(),c.Vb()),2&t&&(c.Db(5),c.rc("columnMode","force")("headerHeight",50)("footerHeight",0)("rowHeight",50)("scrollbarV",!0)("rows",e.rows)("loadingIndicator",e.loadingIndicator),c.Db(2),c.rc("rowHeight",e.refresh?e.getDetailRowHeight:100),c.Db(2),c.rc("width",30)("resizeable",!1)("sortable",!1)("draggable",!1)("canAutoResize",!1),c.Db(2),c.rc("ngIf",!e.refresh),c.Db(4),c.rc("minWidth",35),c.Db(3),c.rc("minWidth",35),c.Db(3),c.rc("minWidth",35))},directives:[b.a,g.d,g.e,g.f,g.b,g.a,n.p,g.c,n.o],pipes:[n.f,n.g],styles:[".datatable-row-detail[_ngcontent-%COMP%]{padding:0!important}"]}),t})(),pathMatch:"full"},{path:"",redirectTo:"",pathMatch:"full"},{path:"**",redirectTo:"",pathMatch:"full"}]}];let P=(()=>{class t{}return t.\u0275mod=c.Ob({type:t}),t.\u0275inj=c.Nb({factory:function(e){return new(e||t)},imports:[[r.k.forChild(x)],r.k]}),t})();var L=a("UKGz");let I=(()=>{class t{}return t.\u0275mod=c.Ob({type:t}),t.\u0275inj=c.Nb({factory:function(e){return new(e||t)},imports:[[n.c,P,g.g,L.a]]}),t})()}}]);