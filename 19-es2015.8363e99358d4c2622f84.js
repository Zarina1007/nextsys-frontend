(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"/X+5":function(t,e,a){"use strict";a.d(e,"a",(function(){return f}));var n=a("fXoL"),r=a("3Pt+"),o=a("wd/R"),i=a("kmnG"),c=a("iadO"),s=a("ofXK"),l=a("d3UM"),d=a("FKr1");function u(t,e){1&t&&(n.Wb(0,"mat-error"),n.Oc(1,"Invalid start date"),n.Vb())}function b(t,e){1&t&&(n.Wb(0,"mat-error"),n.Oc(1,"Invalid end date"),n.Vb())}function g(t,e){if(1&t&&(n.Wb(0,"mat-option",15),n.Oc(1),n.Vb()),2&t){const t=e.$implicit;n.rc("value",t.value),n.Db(1),n.Qc(" ",t.viewValue," ")}}let f=(()=>{class t{constructor(){this.onDatesPicked=new n.p}ngOnInit(){this.preSetDateRanges=this.getDateRanges(),this.range=new r.j({startDate:new r.g,endDate:new r.g}),this.selectedRange={startDate:"",endDate:""},this.preSelectValue="last7days",this.preSelectDates=this.getPreSetDateRange(this.preSelectValue),this.updateDatePickerRange(this.preSelectDates.startDate,this.preSelectDates.endDate),this.emitSelectedRange()}getDateRanges(){return[{value:"today",viewValue:"Today"},{value:"yesterday",viewValue:"Yesterday"},{value:"last7days",viewValue:"Last 7 Days"},{value:"last30days",viewValue:"Last 30 Days"},{value:"monthToDate",viewValue:"Month to Date"},{value:"lastMonth",viewValue:"Last Month"},{value:"custom",viewValue:"Custom"}]}getPreSetDateRange(t){switch(t){case"today":return{startDate:o().utc().startOf("day").format("MM-DD-YYYY"),endDate:o().utc().endOf("day").format("MM-DD-YYYY")};case"yesterday":return{startDate:o().subtract(1,"days").utc().startOf("day").format("MM-DD-YYYY"),endDate:o().subtract(1,"days").utc().endOf("day").format("MM-DD-YYYY")};case"last7days":return{startDate:o().subtract(7,"days").utc().startOf("day").format("MM-DD-YYYY"),endDate:o().utc().endOf("day").format("MM-DD-YYYY")};case"last30days":return{startDate:o().subtract(30,"days").utc().startOf("day").format("MM-DD-YYYY"),endDate:o().utc().endOf("day").format("MM-DD-YYYY")};case"monthToDate":return{startDate:o().startOf("month").utc().startOf("day").format("MM-DD-YYYY"),endDate:o().utc().endOf("day").format("MM-DD-YYYY")};case"lastMonth":return{startDate:o().subtract(1,"months").startOf("month").utc().startOf("day").format("MM-DD-YYYY"),endDate:o().utc().subtract(1,"months").endOf("month").format("MM-DD-YYYY")}}}onPreSetRangeSelectChange(t){"custom"!==t.value&&(this.preSelectValue=t.value,this.preSelectDates=this.getPreSetDateRange(this.preSelectValue),this.updateDatePickerRange(this.preSelectDates.startDate,this.preSelectDates.endDate),this.emitSelectedRange())}updateDatePickerRange(t,e){this.range.patchValue({startDate:o(t,"MM-DD-YYYY").toDate(),endDate:o(e,"MM-DD-YYYY").toDate()})}changeDatePicker(){this.range.valid&&(this.selectedRange.startDate=this.range.value.startDate,this.selectedRange.endDate=this.range.value.endDate,this.preSelectValue="custom",this.emitSelectedRange())}emitSelectedRange(){if(this.range.valid){this.selectedRange.startDate=this.range.value.startDate,this.selectedRange.endDate=this.range.value.endDate;let t=this.selectedRange;t.startDate=o(this.selectedRange.startDate).startOf("day").format("MM-DD-YYYY"),t.endDate=o(this.selectedRange.endDate).endOf("day").format("MM-DD-YYYY"),this.onDatesPicked.emit(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Kb({type:t,selectors:[["app-reporting-filtering"]],outputs:{onDatesPicked:"onDatesPicked"},decls:24,vars:7,consts:[[1,"row"],[1,"col-xl-6"],[1,"card","card-custom","example","example-compact","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"card-body"],[3,"formGroup","rangePicker","dateChange"],["matStartDate","","formControlName","startDate","placeholder","Start date","required",""],["matEndDate","","formControlName","endDate","placeholder","End date","required","",3,"dateChange"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){if(1&t&&(n.Wb(0,"div",0),n.Wb(1,"div",1),n.Wb(2,"div",2),n.Wb(3,"div",3),n.Wb(4,"div",4),n.Wb(5,"h2",5),n.Oc(6,"Filter Date Range"),n.Vb(),n.Vb(),n.Vb(),n.Wb(7,"div",6),n.Wb(8,"mat-form-field"),n.Wb(9,"mat-label"),n.Oc(10,"Enter a custom date range"),n.Vb(),n.Wb(11,"mat-date-range-input",7),n.hc("dateChange",(function(){return e.changeDatePicker()})),n.Rb(12,"input",8),n.Wb(13,"input",9),n.hc("dateChange",(function(){return e.changeDatePicker()})),n.Vb(),n.Vb(),n.Rb(14,"mat-datepicker-toggle",10),n.Rb(15,"mat-date-range-picker",null,11),n.Mc(17,u,2,0,"mat-error",12),n.Mc(18,b,2,0,"mat-error",12),n.Vb(),n.Wb(19,"mat-form-field"),n.Wb(20,"mat-label"),n.Oc(21,"Preset Date Range"),n.Vb(),n.Wb(22,"mat-select",13),n.hc("ngModelChange",(function(t){return e.preSelectValue=t}))("selectionChange",(function(t){return e.onPreSetRangeSelectChange(t)})),n.Mc(23,g,2,2,"mat-option",14),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb()),2&t){const t=n.Ac(16);n.Db(11),n.rc("formGroup",e.range)("rangePicker",t),n.Db(3),n.rc("for",t),n.Db(3),n.rc("ngIf",e.range.controls.startDate.hasError("matStartDateInvalid")),n.Db(1),n.rc("ngIf",e.range.controls.endDate.hasError("matEndDateInvalid")),n.Db(4),n.rc("ngModel",e.preSelectValue),n.Db(1),n.rc("ngForOf",e.preSetDateRanges)}},directives:[i.c,i.g,c.a,r.r,r.k,c.h,r.d,r.q,r.i,r.x,c.g,c.f,i.j,c.b,s.p,l.a,r.t,s.o,i.b,d.p],styles:[""]}),t})()},Iab2:function(t,e,a){var n,r;void 0===(r="function"==typeof(n=function(){"use strict";function e(t,e,a){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){i(n.response,e,a)},n.onerror=function(){console.error("could not download file")},n.send()}function a(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function n(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(a)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,o=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),i=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(t,o,i){var c=r.URL||r.webkitURL,s=document.createElement("a");s.download=o=o||t.name||"download",s.rel="noopener","string"==typeof t?(s.href=t,s.origin===location.origin?n(s):a(s.href)?e(t,o,i):n(s,s.target="_blank")):(s.href=c.createObjectURL(t),setTimeout((function(){c.revokeObjectURL(s.href)}),4e4),setTimeout((function(){n(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,r,o){if(r=r||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),r);else if(a(t))e(t,r,o);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout((function(){n(i)}))}}:function(t,a,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return e(t,a,n);var c="application/octet-stream"===t.type,s=/constructor/i.test(r.HTMLElement)||r.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||c&&s||o)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var t=d.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},d.readAsDataURL(t)}else{var u=r.URL||r.webkitURL,b=u.createObjectURL(t);i?i.location=b:location.href=b,i=null,setTimeout((function(){u.revokeObjectURL(b)}),4e4)}});r.saveAs=i.saveAs=i,t.exports=i})?n.apply(e,[]):n)||(t.exports=r)},SHm6:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var n=a("Iab2"),r=a("fXoL");let o=(()=>{class t{constructor(){}saveAsFile(t,e,a){const r=new Blob([t],{type:a});n.saveAs(r,e)}exportToCsv(t,e,a){if(!t||!t.length)return;const n=Object.keys(t[0]).filter(t=>!(null==a?void 0:a.length)||a.includes(t)),r=n.join(",")+"\n"+t.map(t=>n.map(e=>{let a=null==t[e]?"":t[e];return a=a instanceof Date?a.toLocaleString():a.toString().replace(/"/g,'""'),a.search(/("|,|\n)/g)>=0&&(a=`"${a}"`),a}).join(",")).join("\n");this.saveAsFile(r,e+".csv","text/plain;charset=utf-8")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},UKGz:function(t,e,a){"use strict";a.d(e,"a",(function(){return b}));var n=a("ofXK"),r=a("3Pt+"),o=a("d3UM"),i=a("FKr1"),c=a("iadO"),s=a("MutI"),l=a("kmnG"),d=a("e8Ap"),u=a("fXoL");let b=(()=>{class t{}return t.\u0275mod=u.Ob({type:t}),t.\u0275inj=u.Nb({factory:function(e){return new(e||t)},imports:[[n.c,r.w,r.m,l.e,i.n,o.b,i.q,c.e,s.d,d.b]]}),t})()},zDcN:function(t,e,a){"use strict";a.r(e),a.d(e,"QualityReportModule",(function(){return I}));var n=a("ofXK"),r=a("tyNb"),o=a("fXoL");let i=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["app-quality-report"]],decls:1,vars:0,template:function(t,e){1&t&&o.Rb(0,"router-outlet")},directives:[r.l],styles:[""]}),t})();var c=a("mrSG"),s=a("AytR"),l=a("tk/3");const d=s.a.apiUrl+"/latencyTrafik";let u=(()=>{class t{constructor(t){this.http=t}getLatency(t,e){return this.http.get(""+d,{params:{startDate:t,endDate:e}})}}return t.\u0275fac=function(e){return new(e||t)(o.ec(l.c))},t.\u0275prov=o.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var b=a("SHm6"),g=a("/X+5"),f=a("lDzL");const h=["expandableTable"];function p(t,e){if(1&t&&(o.Wb(0,"tr"),o.Wb(1,"td"),o.Oc(2),o.mc(3,"date"),o.Vb(),o.Wb(4,"td"),o.Oc(5),o.mc(6,"number"),o.Vb(),o.Wb(7,"td"),o.Oc(8),o.mc(9,"number"),o.Vb(),o.Vb()),2&t){const t=e.$implicit;o.Db(2),o.Pc(o.nc(3,3,t.date)),o.Db(3),o.Qc("",o.nc(6,5,t.averageLatency)," s"),o.Db(3),o.Pc(o.nc(9,7,t.queries))}}function D(t,e){if(1&t&&(o.Wb(0,"div",18),o.Wb(1,"table",19),o.Wb(2,"thead"),o.Wb(3,"tr"),o.Wb(4,"th"),o.Oc(5,"Date"),o.Vb(),o.Wb(6,"th"),o.Oc(7,"Average Latency"),o.Vb(),o.Wb(8,"th"),o.Oc(9,"Queries"),o.Vb(),o.Vb(),o.Vb(),o.Wb(10,"tbody"),o.Mc(11,p,10,9,"tr",20),o.Vb(),o.Vb(),o.Vb()),2&t){const t=o.lc().row;o.Db(11),o.rc("ngForOf",t.subLatencyData)}}function m(t,e){if(1&t&&o.Mc(0,D,12,1,"div",17),2&t){const t=o.lc();o.rc("ngIf",t.groupbySubid)}}function y(t,e){if(1&t){const t=o.Xb();o.Wb(0,"a",22),o.hc("click",(function(){o.Dc(t);const a=e.row;return o.lc(2).toggleExpandRow(a)})),o.Vb()}if(2&t){const t=e.expanded;o.Ib("datatable-icon-right",!t)("datatable-icon-down",t)}}function v(t,e){1&t&&(o.Wb(0,"ngx-datatable-column",21),o.Mc(1,y,1,4,"ng-template",14),o.Vb()),2&t&&o.rc("width",30)("resizeable",!1)("sortable",!1)("draggable",!1)("canAutoResize",!1)}function w(t,e){1&t&&o.Oc(0," Date ")}function M(t,e){if(1&t&&(o.Wb(0,"strong"),o.Oc(1),o.mc(2,"date"),o.Vb()),2&t){const t=e.value;o.Db(1),o.Pc(o.nc(2,1,t))}}function O(t,e){1&t&&(o.Wb(0,"ngx-datatable-column",23),o.Mc(1,w,1,0,"ng-template",13),o.Mc(2,M,3,3,"ng-template",14),o.Vb()),2&t&&o.rc("minWidth",100)}function V(t,e){1&t&&o.Oc(0," Subid ")}function Y(t,e){if(1&t&&(o.Wb(0,"strong"),o.Oc(1),o.Vb()),2&t){const t=e.value;o.Db(1),o.Pc(t)}}function R(t,e){1&t&&o.Oc(0," Average Latency ")}function S(t,e){if(1&t&&(o.Wb(0,"strong"),o.Oc(1),o.mc(2,"number"),o.Vb()),2&t){const t=e.value;o.Db(1),o.Qc("",o.nc(2,1,t)," s")}}function W(t,e){1&t&&o.Oc(0," Queries ")}function x(t,e){if(1&t&&(o.Wb(0,"strong"),o.Oc(1),o.mc(2,"number"),o.Vb()),2&t){const t=e.value;o.Db(1),o.Pc(o.nc(2,1,t))}}const k=[{path:"",component:i,children:[{path:"latency",component:(()=>{class t{constructor(t,e,a,n){this.cdr=t,this.latencyTrafikService=e,this.exportDataService=a,this.datePipe=n,this.loadingIndicator=!0,this.latencyData=[],this.groupType="",this.rows=[],this.range={startDate:"",endDate:""},this.groupbySubid=!1}ngAfterViewInit(){return Object(c.a)(this,void 0,void 0,(function*(){this.latencyData=[],this.latencyData=yield this.getLatency(this.range.startDate,this.range.endDate),this.rows=this.latencyData,this.cdr.detectChanges()}))}getLatency(t,e){return Object(c.a)(this,void 0,void 0,(function*(){try{const a=yield this.latencyTrafikService.getLatency(t,e).toPromise();return this.loadingIndicator=!1,a}catch(a){return a}}))}updateReportingFiltering(t){return Object(c.a)(this,void 0,void 0,(function*(){this.loadingIndicator=!0,this.range=t,this.latencyData=[],this.latencyData=yield this.getLatency(this.range.startDate,this.range.endDate),this.rows=this.latencyData,this.groupbySubid=!1,this.loadingIndicator=!1,this.cdr.detectChanges()}))}toggleExpandRow(t){console.log("Toggled Expand Row!",t),this.table.rowDetail.toggleExpandRow(t)}onDetailToggle(t){console.log("Detail Toggled",t)}getDetailRowHeight(t,e){let a;return t&&(a=t.detailHeight),a}refreshLatency(t){return Object(c.a)(this,void 0,void 0,(function*(){this.loadingIndicator=!0,this.latencyData=[],this.latencyData=yield this.getLatency(this.range.startDate,this.range.endDate),this.rows=this.latencyData,this.groupbySubid=!1,this.loadingIndicator=!1,this.cdr.detectChanges()}))}groupSubid(t){var e={},a=this.latencyData.reduce((function(t,a){var n=a.subid;return e[n]?(e[n].latency+=a.latency,e[n].queries+=a.queries):(e[n]=Object.assign({},a),t.push(e[n])),t}),[]);for(var n of a)n.averageLatency=n.latency/n.queries,n.subLatencyData=this.groupDateForSubid(n),n.detailHeight=50*(n.subLatencyData.length+1);this.rows=a,this.groupbySubid=!0,this.groupType="subid",this.cdr.detectChanges()}groupDateForSubid(t){var e={},a=this.latencyData.filter(e=>e.subid===t.subid).reduce((function(t,a){var n=a.date;return e[n]?(e[n].latency+=a.latency,e[n].queries+=a.queries):(e[n]=Object.assign({},a),t.push(e[n])),t}),[]);for(var t of a)t.averageLatency=t.latency/t.queries;return a}exportToCsv(){let t=[];if(console.log(this.groupType),"subid"===this.groupType)for(let a of this.rows){let e={subid:a.subid,averageLatency:a.averageLatency.toFixed(2),queries:a.queries};t.push(e)}else for(let a of this.rows){let e={date:this.datePipe.transform(a.date,"dd MMM yyyy"),subid:a.subid,latency:a.latency,averageLatency:a.averageLatency.toFixed(2),queries:a.queries};t.push(e)}const e=t.length>0?Object.keys(t[0]):[];this.exportDataService.exportToCsv(t,`Latency-Report(${this.range.startDate}-${this.range.endDate})`,e)}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(o.i),o.Qb(u),o.Qb(b.a),o.Qb(n.f))},t.\u0275cmp=o.Kb({type:t,selectors:[["app-latency"]],viewQuery:function(t,e){var a;1&t&&o.Tc(h,!0),2&t&&o.zc(a=o.ic())&&(e.table=a.first)},decls:24,vars:12,consts:[[3,"onDatesPicked"],[1,"row"],[1,"col-xl-12"],["type","button",1,"btn","btn-sm","btn-info","mx-1",3,"click"],["type","button",1,"btn","btn-sm","btn-primary","mx-1",3,"click"],[1,"btn","btn-sm","btn-success","mx-1",3,"click"],[1,"material","fullscreen","expandable",2,"top","30px","height","500px",3,"columnMode","headerHeight","footerHeight","rowHeight","scrollbarV","rows","loadingIndicator"],["expandableTable",""],[3,"rowHeight","toggle"],["ngx-datatable-row-detail-template",""],[3,"width","resizeable","sortable","draggable","canAutoResize",4,"ngIf"],["name","date",3,"minWidth",4,"ngIf"],["name","subid"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["name","averageLatency",3,"minWidth"],["name","queries",3,"minWidth"],["class","table-responsive","style","padding-left: 36px;",4,"ngIf"],[1,"table-responsive",2,"padding-left","36px"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[3,"width","resizeable","sortable","draggable","canAutoResize"],["href","javascript:void(0)","title","Expand/Collapse Row",3,"click"],["name","date",3,"minWidth"]],template:function(t,e){1&t&&(o.Wb(0,"app-reporting-filtering",0),o.hc("onDatesPicked",(function(t){return e.updateReportingFiltering(t)})),o.Vb(),o.Wb(1,"div",1),o.Wb(2,"div",2),o.Wb(3,"button",3),o.hc("click",(function(t){return e.groupSubid(t)})),o.Oc(4," Group by Subid "),o.Vb(),o.Wb(5,"button",4),o.hc("click",(function(t){return e.refreshLatency(t)})),o.Oc(6," Refresh "),o.Vb(),o.Wb(7,"button",5),o.hc("click",(function(){return e.exportToCsv()})),o.Oc(8," Export "),o.Vb(),o.Vb(),o.Vb(),o.Wb(9,"ngx-datatable",6,7),o.Wb(11,"ngx-datatable-row-detail",8),o.hc("toggle",(function(t){return e.onDetailToggle(t)})),o.Mc(12,m,1,1,"ng-template",9),o.Vb(),o.Mc(13,v,2,5,"ngx-datatable-column",10),o.Mc(14,O,3,1,"ngx-datatable-column",11),o.Wb(15,"ngx-datatable-column",12),o.Mc(16,V,1,0,"ng-template",13),o.Mc(17,Y,2,1,"ng-template",14),o.Vb(),o.Wb(18,"ngx-datatable-column",15),o.Mc(19,R,1,0,"ng-template",13),o.Mc(20,S,3,3,"ng-template",14),o.Vb(),o.Wb(21,"ngx-datatable-column",16),o.Mc(22,W,1,0,"ng-template",13),o.Mc(23,x,3,3,"ng-template",14),o.Vb(),o.Vb()),2&t&&(o.Db(9),o.rc("columnMode","force")("headerHeight",50)("footerHeight",0)("rowHeight",50)("scrollbarV",!0)("rows",e.rows)("loadingIndicator",e.loadingIndicator),o.Db(2),o.rc("rowHeight",e.groupbySubid?e.getDetailRowHeight:100),o.Db(2),o.rc("ngIf",e.groupbySubid),o.Db(1),o.rc("ngIf",!e.groupbySubid),o.Db(4),o.rc("minWidth",35),o.Db(3),o.rc("minWidth",35))},directives:[g.a,f.d,f.e,f.f,n.p,f.b,f.c,f.a,n.o],pipes:[n.f,n.g],styles:[".datatable-row-detail[_ngcontent-%COMP%]{padding:0!important}"]}),t})(),pathMatch:"full"},{path:"",redirectTo:"",pathMatch:"full"},{path:"**",redirectTo:"",pathMatch:"full"}]}];let L=(()=>{class t{}return t.\u0275mod=o.Ob({type:t}),t.\u0275inj=o.Nb({factory:function(e){return new(e||t)},imports:[[r.k.forChild(k)],r.k]}),t})();var T=a("UKGz");let I=(()=>{class t{}return t.\u0275mod=o.Ob({type:t}),t.\u0275inj=o.Nb({factory:function(e){return new(e||t)},providers:[n.f],imports:[[n.c,L,f.g,T.a]]}),t})()}}]);