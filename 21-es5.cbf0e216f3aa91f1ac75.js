!function(){function t(t,a){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,a){if(!t)return;if("string"==typeof t)return e(t,a);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,a)}(t))||a&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,c=t},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw c}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,a){return e&&n(t.prototype,e),a&&n(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"/X+5":function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n("fXoL"),c=n("3Pt+"),o=n("wd/R"),u=n("kmnG"),s=n("iadO"),l=n("ofXK"),d=n("d3UM"),b=n("FKr1");function f(t,e){1&t&&(i.Wb(0,"mat-error"),i.Oc(1,"Invalid start date"),i.Vb())}function g(t,e){1&t&&(i.Wb(0,"mat-error"),i.Oc(1,"Invalid end date"),i.Vb())}function h(t,e){if(1&t&&(i.Wb(0,"mat-option",15),i.Oc(1),i.Vb()),2&t){var a=e.$implicit;i.rc("value",a.value),i.Db(1),i.Qc(" ",a.viewValue," ")}}var p=function(){var t=function(){function t(){a(this,t),this.onDatesPicked=new i.p}return r(t,[{key:"ngOnInit",value:function(){this.preSetDateRanges=this.getDateRanges(),this.range=new c.j({startDate:new c.g,endDate:new c.g}),this.selectedRange={startDate:"",endDate:""},this.preSelectValue="last7days",this.preSelectDates=this.getPreSetDateRange(this.preSelectValue),this.updateDatePickerRange(this.preSelectDates.startDate,this.preSelectDates.endDate),this.emitSelectedRange()}},{key:"getDateRanges",value:function(){return[{value:"today",viewValue:"Today"},{value:"yesterday",viewValue:"Yesterday"},{value:"last7days",viewValue:"Last 7 Days"},{value:"last30days",viewValue:"Last 30 Days"},{value:"monthToDate",viewValue:"Month to Date"},{value:"lastMonth",viewValue:"Last Month"},{value:"custom",viewValue:"Custom"}]}},{key:"getPreSetDateRange",value:function(t){switch(t){case"today":return{startDate:o().utc().startOf("day").format("MM-DD-YYYY"),endDate:o().utc().endOf("day").format("MM-DD-YYYY")};case"yesterday":return{startDate:o().subtract(1,"days").utc().startOf("day").format("MM-DD-YYYY"),endDate:o().subtract(1,"days").utc().endOf("day").format("MM-DD-YYYY")};case"last7days":return{startDate:o().subtract(7,"days").utc().startOf("day").format("MM-DD-YYYY"),endDate:o().utc().endOf("day").format("MM-DD-YYYY")};case"last30days":return{startDate:o().subtract(30,"days").utc().startOf("day").format("MM-DD-YYYY"),endDate:o().utc().endOf("day").format("MM-DD-YYYY")};case"monthToDate":return{startDate:o().startOf("month").utc().startOf("day").format("MM-DD-YYYY"),endDate:o().utc().endOf("day").format("MM-DD-YYYY")};case"lastMonth":return{startDate:o().subtract(1,"months").startOf("month").utc().startOf("day").format("MM-DD-YYYY"),endDate:o().utc().subtract(1,"months").endOf("month").format("MM-DD-YYYY")}}}},{key:"onPreSetRangeSelectChange",value:function(t){"custom"!==t.value&&(this.preSelectValue=t.value,this.preSelectDates=this.getPreSetDateRange(this.preSelectValue),this.updateDatePickerRange(this.preSelectDates.startDate,this.preSelectDates.endDate),this.emitSelectedRange())}},{key:"updateDatePickerRange",value:function(t,e){this.range.patchValue({startDate:o(t,"MM-DD-YYYY").toDate(),endDate:o(e,"MM-DD-YYYY").toDate()})}},{key:"changeDatePicker",value:function(){this.range.valid&&(this.selectedRange.startDate=this.range.value.startDate,this.selectedRange.endDate=this.range.value.endDate,this.preSelectValue="custom",this.emitSelectedRange())}},{key:"emitSelectedRange",value:function(){if(this.range.valid){this.selectedRange.startDate=this.range.value.startDate,this.selectedRange.endDate=this.range.value.endDate;var t=this.selectedRange;t.startDate=o(this.selectedRange.startDate).startOf("day").format("MM-DD-YYYY"),t.endDate=o(this.selectedRange.endDate).endOf("day").format("MM-DD-YYYY"),this.onDatesPicked.emit(t)}}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Kb({type:t,selectors:[["app-reporting-filtering"]],outputs:{onDatesPicked:"onDatesPicked"},decls:24,vars:7,consts:[[1,"row"],[1,"col-xl-6"],[1,"card","card-custom","example","example-compact","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"card-body"],[3,"formGroup","rangePicker","dateChange"],["matStartDate","","formControlName","startDate","placeholder","Start date","required",""],["matEndDate","","formControlName","endDate","placeholder","End date","required","",3,"dateChange"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){if(1&t&&(i.Wb(0,"div",0),i.Wb(1,"div",1),i.Wb(2,"div",2),i.Wb(3,"div",3),i.Wb(4,"div",4),i.Wb(5,"h2",5),i.Oc(6,"Filter Date Range"),i.Vb(),i.Vb(),i.Vb(),i.Wb(7,"div",6),i.Wb(8,"mat-form-field"),i.Wb(9,"mat-label"),i.Oc(10,"Enter a custom date range"),i.Vb(),i.Wb(11,"mat-date-range-input",7),i.hc("dateChange",(function(){return e.changeDatePicker()})),i.Rb(12,"input",8),i.Wb(13,"input",9),i.hc("dateChange",(function(){return e.changeDatePicker()})),i.Vb(),i.Vb(),i.Rb(14,"mat-datepicker-toggle",10),i.Rb(15,"mat-date-range-picker",null,11),i.Mc(17,f,2,0,"mat-error",12),i.Mc(18,g,2,0,"mat-error",12),i.Vb(),i.Wb(19,"mat-form-field"),i.Wb(20,"mat-label"),i.Oc(21,"Preset Date Range"),i.Vb(),i.Wb(22,"mat-select",13),i.hc("ngModelChange",(function(t){return e.preSelectValue=t}))("selectionChange",(function(t){return e.onPreSetRangeSelectChange(t)})),i.Mc(23,h,2,2,"mat-option",14),i.Vb(),i.Vb(),i.Vb(),i.Vb(),i.Vb(),i.Vb()),2&t){var a=i.Ac(16);i.Db(11),i.rc("formGroup",e.range)("rangePicker",a),i.Db(3),i.rc("for",a),i.Db(3),i.rc("ngIf",e.range.controls.startDate.hasError("matStartDateInvalid")),i.Db(1),i.rc("ngIf",e.range.controls.endDate.hasError("matEndDateInvalid")),i.Db(4),i.rc("ngModel",e.preSelectValue),i.Db(1),i.rc("ngForOf",e.preSetDateRanges)}},directives:[u.c,u.g,s.a,c.r,c.k,s.h,c.d,c.q,c.i,c.x,s.g,s.f,u.j,s.b,l.p,d.a,c.t,l.o,u.b,b.p],styles:[""]}),t}()},UKGz:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("ofXK"),i=n("3Pt+"),c=n("d3UM"),o=n("FKr1"),u=n("iadO"),s=n("MutI"),l=n("kmnG"),d=n("e8Ap"),b=n("fXoL"),f=function(){var t=function t(){a(this,t)};return t.\u0275mod=b.Ob({type:t}),t.\u0275inj=b.Nb({factory:function(e){return new(e||t)},imports:[[r.c,i.w,i.m,l.e,o.n,c.b,o.q,u.e,s.d,d.b]]}),t}()},zDcN:function(e,n,i){"use strict";i.r(n),i.d(n,"QualityReportModule",(function(){return F}));var c,o,u=i("ofXK"),s=i("tyNb"),l=i("fXoL"),d=((c=function(){function t(){a(this,t)}return r(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||c)},c.\u0275cmp=l.Kb({type:c,selectors:[["app-quality-report"]],decls:1,vars:0,template:function(t,e){1&t&&l.Rb(0,"router-outlet")},directives:[s.l],styles:[""]}),c),b=i("mrSG"),f=i("AytR"),g=i("tk/3"),h=f.a.apiUrl+"/latencyTrafik",p=((o=function(){function t(e){a(this,t),this.http=e}return r(t,[{key:"getLatency",value:function(t,e){return this.http.get(""+h,{params:{startDate:t,endDate:e}})}}]),t}()).\u0275fac=function(t){return new(t||o)(l.ec(g.c))},o.\u0275prov=l.Mb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),D=i("/X+5"),m=i("lDzL"),y=["expandableTable"];function v(t,e){if(1&t&&(l.Wb(0,"tr"),l.Wb(1,"td"),l.Oc(2),l.mc(3,"date"),l.Vb(),l.Wb(4,"td"),l.Oc(5),l.mc(6,"number"),l.Vb(),l.Wb(7,"td"),l.Oc(8),l.mc(9,"number"),l.Vb(),l.Vb()),2&t){var a=e.$implicit;l.Db(2),l.Pc(l.nc(3,3,a.date)),l.Db(3),l.Qc("",l.nc(6,5,a.averageLatency)," s"),l.Db(3),l.Pc(l.nc(9,7,a.queries))}}function w(t,e){if(1&t&&(l.Wb(0,"div",17),l.Wb(1,"table",18),l.Wb(2,"thead"),l.Wb(3,"tr"),l.Wb(4,"th"),l.Oc(5,"Date"),l.Vb(),l.Wb(6,"th"),l.Oc(7,"Average Latency"),l.Vb(),l.Wb(8,"th"),l.Oc(9,"Queries"),l.Vb(),l.Vb(),l.Vb(),l.Wb(10,"tbody"),l.Mc(11,v,10,9,"tr",19),l.Vb(),l.Vb(),l.Vb()),2&t){var a=l.lc().row;l.Db(11),l.rc("ngForOf",a.subLatencyData)}}function M(t,e){if(1&t&&l.Mc(0,w,12,1,"div",16),2&t){var a=l.lc();l.rc("ngIf",a.groupbySubid)}}function V(t,e){if(1&t){var a=l.Xb();l.Wb(0,"a",21),l.hc("click",(function(){l.Dc(a);var t=e.row;return l.lc(2).toggleExpandRow(t)})),l.Vb()}if(2&t){var n=e.expanded;l.Ib("datatable-icon-right",!n)("datatable-icon-down",n)}}function Y(t,e){1&t&&(l.Wb(0,"ngx-datatable-column",20),l.Mc(1,V,1,4,"ng-template",13),l.Vb()),2&t&&l.rc("width",30)("resizeable",!1)("sortable",!1)("draggable",!1)("canAutoResize",!1)}function O(t,e){1&t&&l.Oc(0," Date ")}function k(t,e){if(1&t&&(l.Wb(0,"strong"),l.Oc(1),l.mc(2,"date"),l.Vb()),2&t){var a=e.value;l.Db(1),l.Pc(l.nc(2,1,a))}}function R(t,e){1&t&&(l.Wb(0,"ngx-datatable-column",22),l.Mc(1,O,1,0,"ng-template",12),l.Mc(2,k,3,3,"ng-template",13),l.Vb()),2&t&&l.rc("minWidth",100)}function S(t,e){1&t&&l.Oc(0," Subid ")}function W(t,e){if(1&t&&(l.Wb(0,"strong"),l.Oc(1),l.Vb()),2&t){var a=e.value;l.Db(1),l.Pc(a)}}function x(t,e){1&t&&l.Oc(0," Average Latency ")}function I(t,e){if(1&t&&(l.Wb(0,"strong"),l.Oc(1),l.mc(2,"number"),l.Vb()),2&t){var a=e.value;l.Db(1),l.Qc("",l.nc(2,1,a)," s")}}function P(t,e){1&t&&l.Oc(0," Queries ")}function L(t,e){if(1&t&&(l.Wb(0,"strong"),l.Oc(1),l.mc(2,"number"),l.Vb()),2&t){var a=e.value;l.Db(1),l.Pc(l.nc(2,1,a))}}var C,T,j,A=[{path:"",component:d,children:[{path:"latency",component:(C=function(){function e(t,n){a(this,e),this.cdr=t,this.latencyTrafikService=n,this.loadingIndicator=!0,this.latencyData=[],this.rows=[],this.range={startDate:"",endDate:""},this.groupbySubid=!1}return r(e,[{key:"ngAfterViewInit",value:function(){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.latencyData=[],t.next=3,this.getLatency(this.range.startDate,this.range.endDate);case 3:this.latencyData=t.sent,this.rows=this.latencyData,this.cdr.detectChanges();case 6:case"end":return t.stop()}}),t,this)})))}},{key:"getLatency",value:function(t,e){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,this.latencyTrafikService.getLatency(t,e).toPromise();case 3:return n=a.sent,a.abrupt("return",(this.loadingIndicator=!1,n));case 7:return a.prev=7,a.t0=a.catch(0),a.abrupt("return",a.t0);case 10:case"end":return a.stop()}}),a,this,[[0,7]])})))}},{key:"updateReportingFiltering",value:function(t){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingIndicator=!0,this.range=t,this.latencyData=[],e.next=5,this.getLatency(this.range.startDate,this.range.endDate);case 5:this.latencyData=e.sent,this.rows=this.latencyData,this.groupbySubid=!1,this.loadingIndicator=!1,this.cdr.detectChanges();case 10:case"end":return e.stop()}}),e,this)})))}},{key:"toggleExpandRow",value:function(t){console.log("Toggled Expand Row!",t),this.table.rowDetail.toggleExpandRow(t)}},{key:"onDetailToggle",value:function(t){console.log("Detail Toggled",t)}},{key:"getDetailRowHeight",value:function(t,e){var a;return t&&(a=t.detailHeight),a}},{key:"refreshLatency",value:function(t){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loadingIndicator=!0,this.latencyData=[],t.next=4,this.getLatency(this.range.startDate,this.range.endDate);case 4:this.latencyData=t.sent,this.rows=this.latencyData,this.groupbySubid=!1,this.loadingIndicator=!1,this.cdr.detectChanges();case 9:case"end":return t.stop()}}),t,this)})))}},{key:"groupSubid",value:function(e){var a,n={},r=this.latencyData.reduce((function(t,e){var a=e.subid;return n[a]?(n[a].latency+=e.latency,n[a].queries+=e.queries):(n[a]=Object.assign({},e),t.push(n[a])),t}),[]),i=t(r);try{for(i.s();!(a=i.n()).done;){var c=a.value;c.averageLatency=c.latency/c.queries,c.subLatencyData=this.groupDateForSubid(c),c.detailHeight=50*(c.subLatencyData.length+1)}}catch(o){i.e(o)}finally{i.f()}this.rows=r,this.groupbySubid=!0,this.cdr.detectChanges()}},{key:"groupDateForSubid",value:function(e){var a,n={},r=this.latencyData.filter((function(t){return t.subid===e.subid})).reduce((function(t,e){var a=e.date;return n[a]?(n[a].latency+=e.latency,n[a].queries+=e.queries):(n[a]=Object.assign({},e),t.push(n[a])),t}),[]),i=t(r);try{for(i.s();!(a=i.n()).done;)(e=a.value).averageLatency=e.latency/e.queries}catch(c){i.e(c)}finally{i.f()}return r}}]),e}(),C.\u0275fac=function(t){return new(t||C)(l.Qb(l.i),l.Qb(p))},C.\u0275cmp=l.Kb({type:C,selectors:[["app-latency"]],viewQuery:function(t,e){var a;1&t&&l.Tc(y,!0),2&t&&l.zc(a=l.ic())&&(e.table=a.first)},decls:22,vars:12,consts:[[3,"onDatesPicked"],[1,"row"],[1,"col-xl-12"],["type","button",1,"btn","btn-sm","btn-info","mx-1",3,"click"],["type","button",1,"btn","btn-sm","btn-primary","mx-1",3,"click"],[1,"material","fullscreen","expandable",2,"top","30px","height","500px",3,"columnMode","headerHeight","footerHeight","rowHeight","scrollbarV","rows","loadingIndicator"],["expandableTable",""],[3,"rowHeight","toggle"],["ngx-datatable-row-detail-template",""],[3,"width","resizeable","sortable","draggable","canAutoResize",4,"ngIf"],["name","date",3,"minWidth",4,"ngIf"],["name","subid"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["name","averageLatency",3,"minWidth"],["name","queries",3,"minWidth"],["class","table-responsive","style","padding-left: 36px;",4,"ngIf"],[1,"table-responsive",2,"padding-left","36px"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[3,"width","resizeable","sortable","draggable","canAutoResize"],["href","javascript:void(0)","title","Expand/Collapse Row",3,"click"],["name","date",3,"minWidth"]],template:function(t,e){1&t&&(l.Wb(0,"app-reporting-filtering",0),l.hc("onDatesPicked",(function(t){return e.updateReportingFiltering(t)})),l.Vb(),l.Wb(1,"div",1),l.Wb(2,"div",2),l.Wb(3,"button",3),l.hc("click",(function(t){return e.groupSubid(t)})),l.Oc(4," Group by Subid "),l.Vb(),l.Wb(5,"button",4),l.hc("click",(function(t){return e.refreshLatency(t)})),l.Oc(6," Refresh "),l.Vb(),l.Vb(),l.Vb(),l.Wb(7,"ngx-datatable",5,6),l.Wb(9,"ngx-datatable-row-detail",7),l.hc("toggle",(function(t){return e.onDetailToggle(t)})),l.Mc(10,M,1,1,"ng-template",8),l.Vb(),l.Mc(11,Y,2,5,"ngx-datatable-column",9),l.Mc(12,R,3,1,"ngx-datatable-column",10),l.Wb(13,"ngx-datatable-column",11),l.Mc(14,S,1,0,"ng-template",12),l.Mc(15,W,2,1,"ng-template",13),l.Vb(),l.Wb(16,"ngx-datatable-column",14),l.Mc(17,x,1,0,"ng-template",12),l.Mc(18,I,3,3,"ng-template",13),l.Vb(),l.Wb(19,"ngx-datatable-column",15),l.Mc(20,P,1,0,"ng-template",12),l.Mc(21,L,3,3,"ng-template",13),l.Vb(),l.Vb()),2&t&&(l.Db(7),l.rc("columnMode","force")("headerHeight",50)("footerHeight",0)("rowHeight",50)("scrollbarV",!0)("rows",e.rows)("loadingIndicator",e.loadingIndicator),l.Db(2),l.rc("rowHeight",e.groupbySubid?e.getDetailRowHeight:100),l.Db(2),l.rc("ngIf",e.groupbySubid),l.Db(1),l.rc("ngIf",!e.groupbySubid),l.Db(4),l.rc("minWidth",35),l.Db(3),l.rc("minWidth",35))},directives:[D.a,m.d,m.e,m.f,u.p,m.b,m.c,m.a,u.o],pipes:[u.f,u.g],styles:[".datatable-row-detail[_ngcontent-%COMP%]{padding:0!important}"]}),C),pathMatch:"full"},{path:"",redirectTo:"",pathMatch:"full"},{path:"**",redirectTo:"",pathMatch:"full"}]}],q=((T=function t(){a(this,t)}).\u0275mod=l.Ob({type:T}),T.\u0275inj=l.Nb({factory:function(t){return new(t||T)},imports:[[s.k.forChild(A)],s.k]}),T),E=i("UKGz"),F=((j=function t(){a(this,t)}).\u0275mod=l.Ob({type:j}),j.\u0275inj=l.Nb({factory:function(t){return new(t||j)},imports:[[u.c,q,m.g,E.a]]}),j)}}])}();