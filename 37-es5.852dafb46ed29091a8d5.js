!function(){function t(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function(t,r){if(!t)return;if("string"==typeof t)return e(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return e(t,r)}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,u=!0,c=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return u=t.done,t},e:function(t){c=!0,s=t},f:function(){try{u||null==a.return||a.return()}finally{if(c)throw s}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{Ntm9:function(e,a,i){"use strict";i.r(a),i.d(a,"PublisherReportingModule",(function(){return Ct}));var s,u=i("ofXK"),c=i("tyNb"),l=i("fXoL"),o=((s=function(){function t(){r(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||s)},s.\u0275cmp=l.Kb({type:s,selectors:[["app-publisher-reporting"]],decls:1,vars:0,template:function(t,e){1&t&&l.Rb(0,"router-outlet")},directives:[c.l],styles:[""]}),s),h=i("mrSG"),d=i("3awX"),b=i("oabR"),f=i("0TA1"),g=i("d9f2"),p=i("uJD8"),m=i("2Q/2"),v=i("Wxo5"),y=i("mPAa"),D=i("m5p0"),S=i("aNep"),x=i("SHm6"),C=i("/X+5"),W=i("kmnG"),V=i("d3UM"),T=i("3Pt+"),M=i("lDzL"),P=i("bv9b"),k=i("PTT0"),w=i("MutI"),A=i("f0Cb");function R(t,e){if(1&t&&(l.Wb(0,"div",1),l.Wb(1,"div",2),l.Wb(2,"div",3),l.Wb(3,"div",4),l.Wb(4,"div",5),l.Wb(5,"h2",6),l.Oc(6,"Statistics"),l.Vb(),l.Vb(),l.Vb(),l.Wb(7,"div",7),l.Wb(8,"mat-list"),l.Wb(9,"mat-list-item"),l.Oc(10),l.mc(11,"number"),l.Vb(),l.Rb(12,"mat-divider"),l.Rb(13,"mat-divider"),l.Wb(14,"mat-list-item"),l.Oc(15),l.mc(16,"number"),l.Vb(),l.Rb(17,"mat-divider"),l.Wb(18,"mat-list-item"),l.Oc(19),l.Vb(),l.Rb(20,"mat-divider"),l.Wb(21,"mat-list-item"),l.Oc(22),l.Vb(),l.Rb(23,"mat-divider"),l.Rb(24,"mat-list-item"),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb()),2&t){var r=l.lc();l.Db(10),l.Qc("Revenue: $ ",r.summaryMetricsData.summary[0].selectedStat[0].revenue?l.oc(11,4,r.summaryMetricsData.summary[0].selectedStat[0].revenue,"1.2-2"):"0.00",""),l.Db(5),l.Qc("Month to Date Revenue: $ ",r.summaryMetricsData.summary[0].summaryMetrics[0].revenue?l.oc(16,7,r.summaryMetricsData.summary[0].summaryMetrics[0].revenue,"1.2-2"):"0.00",""),l.Db(4),l.Qc("Start Date: ",r.summaryMetricsData.summary[0].selectedStat[0].selectedStartDate,""),l.Db(3),l.Qc("End Date: ",r.summaryMetricsData.summary[0].selectedStat[0].selectedEndDate,"")}}var I,O=((I=function(){function t(){r(this,t)}return n(t,[{key:"ngOnInit",value:function(){this.summaryMetricsData=this.getSummaryData(this.summaryMetricsData)}},{key:"getSummaryData",value:function(t){if(t)return t}}]),t}()).\u0275fac=function(t){return new(t||I)},I.\u0275cmp=l.Kb({type:I,selectors:[["app-publisher-summary-metrics"]],inputs:{summaryMetricsData:"summaryMetricsData"},decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-xl-6"],[1,"card","card-custom","example","example-compact","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"card-body"]],template:function(t,e){1&t&&l.Mc(0,R,25,10,"div",0),2&t&&l.rc("ngIf",e.summaryMetricsData)},directives:[u.p,w.a,w.c,A.a],pipes:[u.g],styles:[""]}),I),z=i("FKr1"),E=["expandableTable"];function F(t,e){1&t&&(l.Wb(0,"div",28),l.Rb(1,"mat-progress-bar",29),l.Vb())}function B(t,e){if(1&t&&l.Rb(0,"app-reporting-publisher-revenue-chart",30),2&t){var r=l.lc();l.rc("chartData",r.chartData)}}function j(t,e){if(1&t&&l.Rb(0,"app-publisher-summary-metrics",31),2&t){var r=l.lc();l.rc("summaryMetricsData",r.summaryMetrics)}}function Q(t,e){if(1&t&&(l.Wb(0,"mat-option",32),l.Oc(1),l.Vb()),2&t){var r=e.$implicit;l.rc("value",r.value),l.Db(1),l.Qc(" ",r.label," ")}}function L(t,e){if(1&t&&(l.Wb(0,"tr"),l.Wb(1,"td"),l.Oc(2),l.mc(3,"date"),l.Vb(),l.Wb(4,"td"),l.Oc(5),l.mc(6,"number"),l.Vb(),l.Wb(7,"td"),l.Oc(8),l.mc(9,"number"),l.Vb(),l.Wb(10,"td"),l.Oc(11),l.mc(12,"percent"),l.mc(13,"percent"),l.Vb(),l.Wb(14,"td"),l.Oc(15),l.mc(16,"currency"),l.mc(17,"currency"),l.Vb(),l.Wb(18,"td"),l.Oc(19),l.mc(20,"currency"),l.Vb(),l.Vb()),2&t){var r=e.$implicit;l.Db(2),l.Pc(l.nc(3,6,r.date)),l.Db(3),l.Pc(l.nc(6,8,r.searches)),l.Db(3),l.Pc(l.nc(9,10,r.clicks)),l.Db(3),l.Pc(l.oc(12,12,r.ctr,"2.2-2")||l.oc(13,15,0,"2.2-2")),l.Db(4),l.Pc(l.oc(16,18,r.cpc,"USD")||l.oc(17,21,0,"USD")),l.Db(4),l.Pc(l.oc(20,24,r.revenue,"USD"))}}function H(t,e){if(1&t&&(l.Wb(0,"div",35),l.Wb(1,"table",36),l.Wb(2,"thead"),l.Wb(3,"tr"),l.Wb(4,"th"),l.Oc(5,"Date"),l.Vb(),l.Wb(6,"th"),l.Oc(7,"Searches"),l.Vb(),l.Wb(8,"th"),l.Oc(9,"Clicks"),l.Vb(),l.Wb(10,"th"),l.Oc(11,"CTR"),l.Vb(),l.Wb(12,"th"),l.Oc(13,"CPC"),l.Vb(),l.Wb(14,"th"),l.Oc(15,"Revenue"),l.Vb(),l.Vb(),l.Vb(),l.Wb(16,"tbody"),l.Mc(17,L,21,27,"tr",37),l.Vb(),l.Vb(),l.Vb()),2&t){var r=l.lc().row;l.Db(17),l.rc("ngForOf",r.subReportingForDate)}}function N(t,e){1&t&&(l.Wb(0,"div",38),l.Wb(1,"div"),l.Wb(2,"strong"),l.Oc(3,"Address"),l.Vb(),l.Vb(),l.Wb(4,"div"),l.Oc(5,"Test"),l.Vb(),l.Vb())}function U(t,e){if(1&t&&(l.Mc(0,H,18,1,"div",33),l.Mc(1,N,6,0,"div",34)),2&t){var r=l.lc();l.rc("ngIf","subid"===r.groupType),l.Db(1),l.rc("ngIf","subid"!==r.groupType)}}function G(t,e){if(1&t){var r=l.Xb();l.Wb(0,"a",39),l.hc("click",(function(){l.Dc(r);var t=e.row;return l.lc().toggleExpandRow(t)})),l.Vb()}if(2&t){var a=e.expanded;l.Ib("datatable-icon-right",!a)("datatable-icon-down",a)}}function K(t,e){1&t&&l.Oc(0," Date ")}function X(t,e){if(1&t&&(l.Wb(0,"strong"),l.Oc(1),l.mc(2,"date"),l.Vb()),2&t){var r=e.value;l.Db(1),l.Pc(l.nc(2,1,r))}}function $(t,e){1&t&&(l.Wb(0,"ngx-datatable-column",40),l.Mc(1,K,1,0,"ng-template",20),l.Mc(2,X,3,3,"ng-template",16),l.Vb())}function q(t,e){1&t&&l.Oc(0," Subid ")}function _(t,e){if(1&t&&(l.Wb(0,"strong"),l.Oc(1),l.Vb()),2&t){var r=e.value;l.Db(1),l.Pc(r)}}function J(t,e){1&t&&(l.Wb(0,"ngx-datatable-column",41),l.Mc(1,q,1,0,"ng-template",20),l.Mc(2,_,2,1,"ng-template",16),l.Vb())}function Y(t,e){1&t&&l.Oc(0," Searches ")}function Z(t,e){if(1&t&&(l.Wb(0,"strong"),l.Oc(1),l.Vb()),2&t){var r=e.value;l.Db(1),l.Pc(r)}}function tt(t,e){1&t&&l.Oc(0," Bidded Searches ")}function et(t,e){if(1&t&&(l.Wb(0,"strong"),l.Oc(1),l.Vb()),2&t){var r=e.value;l.Db(1),l.Pc(r)}}function rt(t,e){1&t&&(l.Wb(0,"ngx-datatable-column",42),l.Mc(1,tt,1,0,"ng-template",20),l.Mc(2,et,2,1,"ng-template",16),l.Vb())}function at(t,e){1&t&&l.Oc(0," Monetized Searches ")}function nt(t,e){if(1&t&&(l.Wb(0,"strong"),l.Oc(1),l.Vb()),2&t){var r=e.value;l.Db(1),l.Pc(r)}}function it(t,e){1&t&&(l.Wb(0,"ngx-datatable-column",43),l.Mc(1,at,1,0,"ng-template",20),l.Mc(2,nt,2,1,"ng-template",16),l.Vb())}function st(t,e){1&t&&l.Oc(0," Clicks ")}function ut(t,e){if(1&t&&(l.Wb(0,"strong"),l.Oc(1),l.Vb()),2&t){var r=e.value;l.Db(1),l.Pc(r)}}function ct(t,e){1&t&&l.Oc(0," CPC ")}function lt(t,e){if(1&t&&(l.Wb(0,"strong"),l.Oc(1),l.mc(2,"currency"),l.mc(3,"currency"),l.Vb()),2&t){var r=e.value;l.Db(1),l.Pc(l.oc(2,1,r,"USD")||l.oc(3,4,0,"USD"))}}function ot(t,e){1&t&&l.Oc(0," CTR ")}function ht(t,e){if(1&t&&(l.Wb(0,"strong"),l.Oc(1),l.mc(2,"percent"),l.mc(3,"percent"),l.Vb()),2&t){var r=e.value;l.Db(1),l.Pc(l.oc(2,1,r,"1.2-2")||l.oc(3,4,0,"1.2-2"))}}function dt(t,e){1&t&&l.Oc(0," Revenue ")}function bt(t,e){if(1&t&&(l.Wb(0,"strong"),l.Oc(1),l.mc(2,"currency"),l.Vb()),2&t){var r=e.value;l.Db(1),l.Pc(l.oc(2,1,r,"USD"))}}function ft(t,e){1&t&&l.Oc(0," TQ ")}function gt(t,e){if(1&t&&(l.Wb(0,"strong"),l.Oc(1),l.Vb()),2&t){var r=e.value;l.Db(1),l.Pc(r)}}function pt(t,e){1&t&&(l.Wb(0,"ngx-datatable-column",44),l.Mc(1,ft,1,0,"ng-template",20),l.Mc(2,gt,2,1,"ng-template",16),l.Vb())}var mt,vt,yt,Dt=[{path:"",component:o,children:[{path:":tagId",component:(mt=function(){function e(t,a,n,i,s,u,c,l,o,h,d,b,f,g,p,m){r(this,e),this.route=t,this.tagManagementService=a,this.cdr=n,this.userService=i,this.perionService=s,this.lyonService=u,this.verizonService=c,this.verizonArbService=l,this.rubiService=o,this.solexbcService=h,this.system1Service=d,this.apptitudeService=b,this.exportDataService=f,this.datePipe=g,this.currencyPipe=p,this.percentPipe=m,this.loadingIndicator=!0,this.range={startDate:"",endDate:""},this.groupType="",this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.groupbyList=[{value:"date",label:"Date"},{value:"subid",label:"Subid"}],this.selectedCompany=this.getSelectedCompanyFromLocalStorage()}return n(e,[{key:"ngAfterViewInit",value:function(){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.route.params.subscribe((function(t){return Object(h.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingIndicator=!0,this.paramTagId=t.tagId,this.statData=[],this.rows=[],e.next=6,this.getTagInformation(t.tagId);case 6:if(this.tagRows=e.sent,this.selectedAdvertiser=this.tagRows.advertiser,this.selectedCompany=this.tagRows.company,this.selectedTagId=this.tagRows._id,"lyons"!=this.selectedAdvertiser){e.next=19;break}return e.next=13,this.getLyonChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 13:return this.chartData=e.sent,e.next=16,this.getAllLyonStats(this.range.startDate,this.range.endDate,this.tagRows);case 16:this.statData=e.sent,e.next=93;break;case 19:if("perion"!=this.selectedAdvertiser){e.next=31;break}return e.next=22,this.getPerionChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 22:return this.chartData=e.sent,e.next=25,this.getAllPerionStats(this.range.startDate,this.range.endDate,this.tagRows);case 25:return this.statData=e.sent,e.next=28,this.getTagPerionSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 28:this.summaryMetrics=e.sent,e.next=93;break;case 31:if("verizon-direct"!=this.selectedAdvertiser){e.next=43;break}return e.next=34,this.getVerizonChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 34:return this.chartData=e.sent,e.next=37,this.getAllVerizonStats(this.range.startDate,this.range.endDate,this.tagRows);case 37:return this.statData=e.sent,e.next=40,this.getTagVerizonSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 40:this.summaryMetrics=e.sent,e.next=93;break;case 43:if("verizon-direct-arb"!=this.selectedAdvertiser){e.next=55;break}return e.next=46,this.getVerizonArbChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 46:return this.chartData=e.sent,e.next=49,this.getAllVerizonArbStats(this.range.startDate,this.range.endDate,this.tagRows);case 49:return this.statData=e.sent,e.next=52,this.getTagVerizonArbSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 52:this.summaryMetrics=e.sent,e.next=93;break;case 55:if("rubi"!=this.selectedAdvertiser){e.next=64;break}return e.next=58,this.getRubiChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 58:return this.chartData=e.sent,e.next=61,this.getRubiAllStats(this.range.startDate,this.range.endDate,this.tagRows);case 61:this.statData=e.sent,e.next=93;break;case 64:if("solex-bc"!=this.selectedAdvertiser){e.next=73;break}return e.next=67,this.getSolexBCChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 67:return this.chartData=e.sent,e.next=70,this.getSolexBCAllStats(this.range.startDate,this.range.endDate,this.tagRows);case 70:this.statData=e.sent,e.next=93;break;case 73:if("system1"!=this.selectedAdvertiser){e.next=85;break}return e.next=76,this.getSystem1ChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 76:return this.chartData=e.sent,e.next=79,this.getSystem1AllStats(this.range.startDate,this.range.endDate,this.tagRows);case 79:return this.statData=e.sent,e.next=82,this.getTagSystem1SummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 82:this.summaryMetrics=e.sent,e.next=93;break;case 85:if(e.t0="apptitude"==this.selectedAdvertiser,!e.t0){e.next=93;break}return e.next=89,this.getApptitudeChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 89:return this.chartData=e.sent,e.next=92,this.getApptitudePublisherStats(this.range.startDate,this.range.endDate,this.tagRows);case 92:this.statData=e.sent;case 93:this.rows=this.statData,this.loadingIndicator=!1,this.refreshTable();case 96:case"end":return e.stop()}}),e,this)})))}));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"groupHandle",value:function(t){this.groupType=t.value,"date"==t.value?this.groupDate():"subid"==t.value?this.groupSubid():this.backGroup(),this.cdr.markForCheck()}},{key:"getDetailRowHeight",value:function(t,e){var r;return t&&(r=t.detailHeight),r}},{key:"backGroup",value:function(){this.rows=this.statData,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.cdr.markForCheck()}},{key:"groupDate",value:function(){var e,r={},a=this.statData.reduce((function(t,e){var a=e.date;return r[a]?(r[a].clicks+=parseFloat(e.clicks),r[a].searches+=parseFloat(e.searches?e.searches:0),r[a].revenue+=parseFloat(e.revenue),r[a].counter++):(r[a]=Object.assign({},e),r[a].counter=1,t.push(r[a])),t}),[]),n=t(a);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.ctr=i.ctr/i.counter,i.cpc=i.revenue/i.clicks}}catch(s){n.e(s)}finally{n.f()}this.rows=a,this.groupDateShowFlag=!0,this.groupSubidShowFlag=!1,this.cdr.markForCheck()}},{key:"groupSubid",value:function(){var e,r={},a=this.statData.reduce((function(t,e){var a=e.subid;return r[a]?(r[a].clicks+=parseFloat(e.clicks),r[a].searches+=parseFloat(e.searches?e.searches:0),r[a].revenue+=parseFloat(e.revenue),r[a].counter++):(r[a]=Object.assign({},e),r[a].counter=1,t.push(r[a])),t}),[]),n=t(a);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.ctr=i.ctr/i.counter,i.cpc=i.revenue/i.clicks,i.subReportingForDate=this.groupDateForSubid(i),i.detailHeight=50*(i.subReportingForDate.length+1)}}catch(s){n.e(s)}finally{n.f()}this.rows=a,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!0,this.cdr.markForCheck()}},{key:"groupDateForSubid",value:function(e){var r,a={},n=this.statData.filter((function(t){return t.subid===e.subid})).reduce((function(t,e){var r=e.date;return a[r]?(a[r].clicks+=parseFloat(e.clicks),a[r].searches+=parseFloat(e.searches?e.searches:0),a[r].revenue+=parseFloat(e.revenue),a[r].counter++):(a[r]=Object.assign({},e),a[r].counter=1,t.push(a[r])),t}),[]),i=t(n);try{for(i.s();!(r=i.n()).done;)(e=r.value).ctr=e.ctr/e.counter,e.cpc=e.revenue/e.clicks}catch(s){i.e(s)}finally{i.f()}return n}},{key:"getTagPerionSummaryMetrics",value:function(t,e,r){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,this.perionService.getTagSummaryMetrics(t,this.selectedTagId,e,r).toPromise();case 3:return n=a.sent,i={},a.abrupt("return",(n.summary[0].selectedStat[0].selectedStartDate=e,n.summary[0].selectedStat[0].selectedEndDate=r,i.summary=n.summary,i));case 8:return a.prev=8,a.t0=a.catch(0),a.abrupt("return",a.t0);case 11:case"end":return a.stop()}}),a,this,[[0,8]])})))}},{key:"getTagVerizonSummaryMetrics",value:function(t,e,r){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,this.verizonService.getTagSummaryMetrics(t,this.selectedTagId,e,r).toPromise();case 3:return n=a.sent,i={},a.abrupt("return",(n.summary[0].selectedStat[0].selectedStartDate=e,n.summary[0].selectedStat[0].selectedEndDate=r,i.summary=n.summary,i));case 8:return a.prev=8,a.t0=a.catch(0),a.abrupt("return",a.t0);case 11:case"end":return a.stop()}}),a,this,[[0,8]])})))}},{key:"getTagVerizonArbSummaryMetrics",value:function(t,e,r){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,this.verizonArbService.getTagSummaryMetrics(t,this.selectedTagId,e,r).toPromise();case 3:return n=a.sent,i={},a.abrupt("return",(n.summary[0].selectedStat[0].selectedStartDate=e,n.summary[0].selectedStat[0].selectedEndDate=r,i.summary=n.summary,i));case 8:return a.prev=8,a.t0=a.catch(0),a.abrupt("return",a.t0);case 11:case"end":return a.stop()}}),a,this,[[0,8]])})))}},{key:"getTagSystem1SummaryMetrics",value:function(t,e,r){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,this.system1Service.getTagSummaryMetrics(t,this.selectedTagId,e,r).toPromise();case 3:return n=a.sent,i={},a.abrupt("return",(n.summary[0].selectedStat[0].selectedStartDate=e,n.summary[0].selectedStat[0].selectedEndDate=r,i.summary=n.summary,i));case 8:return a.prev=8,a.t0=a.catch(0),a.abrupt("return",a.t0);case 11:case"end":return a.stop()}}),a,this,[[0,8]])})))}},{key:"getSelectedCompanyFromLocalStorage",value:function(){return this.userService.getSelectedCompanyFromLocalStorage()}},{key:"toggleExpandRow",value:function(t){this.table.rowDetail.toggleExpandRow(t)}},{key:"onDetailToggle",value:function(t){}},{key:"getTagInformation",value:function(t){return this.tagManagementService.getOneTag(t).toPromise().then((function(t){return t})).catch((function(t){return t}))}},{key:"updateReportingFiltering",value:function(t){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.range=t,this.loadingIndicator=!0,this.statData=[],this.rows=[],"lyons"!=this.selectedAdvertiser){e.next=13;break}return e.next=7,this.getLyonChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 7:return this.chartData=e.sent,e.next=10,this.getAllLyonStats(this.range.startDate,this.range.endDate,this.tagRows);case 10:this.statData=e.sent,e.next=87;break;case 13:if("perion"!=this.selectedAdvertiser){e.next=25;break}return e.next=16,this.getPerionChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 16:return this.chartData=e.sent,e.next=19,this.getAllPerionStats(this.range.startDate,this.range.endDate,this.tagRows);case 19:return this.statData=e.sent,e.next=22,this.getTagPerionSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 22:this.summaryMetrics=e.sent,e.next=87;break;case 25:if("verizon-direct"!=this.selectedAdvertiser){e.next=37;break}return e.next=28,this.getVerizonChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 28:return this.chartData=e.sent,e.next=31,this.getAllVerizonStats(this.range.startDate,this.range.endDate,this.tagRows);case 31:return this.statData=e.sent,e.next=34,this.getTagVerizonSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 34:this.summaryMetrics=e.sent,e.next=87;break;case 37:if("verizon-direct-arb"!=this.selectedAdvertiser){e.next=49;break}return e.next=40,this.getVerizonArbChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 40:return this.chartData=e.sent,e.next=43,this.getAllVerizonArbStats(this.range.startDate,this.range.endDate,this.tagRows);case 43:return this.statData=e.sent,e.next=46,this.getTagVerizonArbSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 46:this.summaryMetrics=e.sent,e.next=87;break;case 49:if("rubi"!=this.selectedAdvertiser){e.next=58;break}return e.next=52,this.getRubiChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 52:return this.chartData=e.sent,e.next=55,this.getRubiAllStats(this.range.startDate,this.range.endDate,this.tagRows);case 55:this.statData=e.sent,e.next=87;break;case 58:if("solex-bc"!=this.selectedAdvertiser){e.next=67;break}return e.next=61,this.getSolexBCChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 61:return this.chartData=e.sent,e.next=64,this.getSolexBCAllStats(this.range.startDate,this.range.endDate,this.tagRows);case 64:this.statData=e.sent,e.next=87;break;case 67:if("system1"!=this.selectedAdvertiser){e.next=79;break}return e.next=70,this.getSystem1ChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 70:return this.chartData=e.sent,e.next=73,this.getSystem1AllStats(this.range.startDate,this.range.endDate,this.tagRows);case 73:return this.statData=e.sent,e.next=76,this.getTagSystem1SummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 76:this.summaryMetrics=e.sent,e.next=87;break;case 79:if(e.t0="apptitude"==this.selectedAdvertiser,!e.t0){e.next=87;break}return e.next=83,this.getApptitudeChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 83:return this.chartData=e.sent,e.next=86,this.getApptitudePublisherStats(this.range.startDate,this.range.endDate,this.tagRows);case 86:this.statData=e.sent;case 87:this.rows=this.statData,this.loadingIndicator=!1,this.refreshTable();case 90:case"end":return e.stop()}}),e,this)})))}},{key:"getLyonChartMetrics",value:function(e,r,a){var n=this;return this.lyonService.getAllPublisherStats(r,a).toPromise().then((function(e){n.allChart=e;var r,a=[],i=t(n.tagRows.subids);try{for(i.s();!(r=i.n()).done;){var s=r.value;"Contains"==s.filterTag?a=a.concat(n.allChart.filter((function(t){return t.subid.includes(s.subid)}))):"StartsWith"==s.filterTag?a=a.concat(n.allChart.filter((function(t){return t.subid.startsWith(s.subid)}))):"EndsWith"==s.filterTag?a=a.concat(n.allChart.filter((function(t){return t.subid.endsWith(s.subid)}))):"ExactValue"==s.filterTag&&(a=a.concat(n.allChart.filter((function(t){return t.subid==s.subid}))))}}catch(m){i.e(m)}finally{i.f()}var u=a.filter((function(t,e,r){return e===r.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))}));u=u.slice().sort((function(t,e){return t.date-e.date}));var c,l={},o=[],h=[],d=[],b=[],f={},g=t(u.reduce((function(t,e){var r=e.date;return l[r]?(l[r].searches+=parseInt(e.searches),e.revenue&&(l[r].revenue+=e.revenue)):(l[r]=Object.assign({},e),t.push(l[r])),t}),[]));try{for(g.s();!(c=g.n()).done;){var p=c.value;o.push(0),h.push(p.revenue),d.push(p.date),b.push(p.searches)}}catch(m){g.e(m)}finally{g.f()}return f.revenuePerDay=o,f.publisherRevenuePerDay=h,f.datesOfRevenue=d,f.searchesPerDay=b,f})).catch((function(t){return t}))}},{key:"refreshTable",value:function(){this.cdr.detectChanges()}},{key:"exportToCsv",value:function(){var e,r=[],a=t(this.statData);try{for(a.s();!(e=a.n()).done;){var n=e.value,i={date:this.datePipe.transform(n.date,"dd MMM yyyy"),subid:n.subid,searches:n.searches,cpc:this.currencyPipe.transform(n.cpc?n.cpc:0),ctr:this.percentPipe.transform(n.ctr,"1.2-2"),revenue:n.revenue};r.push(i)}}catch(s){a.e(s)}finally{a.f()}this.exportDataService.exportToCsv(r,this.tagRows.nickName?this.tagRows.nickName:this.tagRows.name,["date","subid","searches","cpc","ctr","revenue"])}},{key:"getPerionChartMetrics",value:function(e,r,a){var n=this;return this.perionService.getPerTagPerionStats(this.selectedCompany,this.selectedTagId,r,a).toPromise().then((function(e){n.allPerionChart=e;var r,a=[],i=t(n.tagRows.subids);try{for(i.s();!(r=i.n()).done;){var s=r.value;"Contains"==s.filterTag?a=a.concat(n.allPerionChart.filter((function(t){return t.subid.includes(s.subid)}))):"StartsWith"==s.filterTag?a=a.concat(n.allPerionChart.filter((function(t){return t.subid.startsWith(s.subid)}))):"EndsWith"==s.filterTag?a=a.concat(n.allPerionChart.filter((function(t){return t.subid.endsWith(s.subid)}))):"ExactValue"==s.filterTag&&(a=a.concat(n.allPerionChart.filter((function(t){return t.subid==s.subid}))))}}catch(m){i.e(m)}finally{i.f()}var u=a.filter((function(t,e,r){return e===r.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))}));u=u.slice().sort((function(t,e){return t.date-e.date}));var c,l={},o=[],h=[],d=[],b=[],f={},g=t(u.reduce((function(t,e){var r=e.date;return l[r]?(l[r].searches+=parseInt(e.impressions),e.revenue&&(l[r].revenue+=e.revenue)):(l[r]=Object.assign({},e),t.push(l[r])),t}),[]));try{for(g.s();!(c=g.n()).done;){var p=c.value;o.push(0),h.push(p.revenue),d.push(p.date),b.push(p.impressions)}}catch(m){g.e(m)}finally{g.f()}return f.revenuePerDay=o,f.publisherRevenuePerDay=h,f.datesOfRevenue=d,f.searchesPerDay=b,f})).catch((function(t){return t}))}},{key:"getAllPerionStats",value:function(e,r,a){var n=this;return this.perionService.getPerTagPerionStats(this.selectedCompany,this.selectedTagId,e,r).toPromise().then((function(e){n.allPerionStatData=e;var r,i=[],s=t(a.subids);try{for(s.s();!(r=s.n()).done;){var u=r.value;"Contains"==u.filterTag?(i=i.concat(n.allPerionStatData.filter((function(t){return t.subid.includes(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:"No Publisher"})):"StartsWith"==u.filterTag?(i=i.concat(n.allPerionStatData.filter((function(t){return t.subid.startsWith(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:"No Publisher"})):"EndsWith"==u.filterTag?(i=i.concat(n.allPerionStatData.filter((function(t){return t.subid.endsWith(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:"No Publisher"})):"ExactValue"==u.filterTag&&(i=i.concat(n.allPerionStatData.filter((function(t){return t.subid==u.subid})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:"No Publisher"}))}}catch(c){s.e(c)}finally{s.f()}return i.filter((function(t,e,r){return e===r.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))})).slice().sort((function(t,e){return e.date-t.date}))})).catch((function(t){return t}))}},{key:"getAllLyonStats",value:function(e,r,a){var n=this;return this.lyonService.getAllPublisherStats(e,r).toPromise().then((function(e){n.allLyonStatData=e;var r,i=[],s=t(a.subids);try{for(s.s();!(r=s.n()).done;){var u=r.value;"Contains"==u.filterTag?(i=i.concat(n.allLyonStatData.filter((function(t){return t.subid.includes(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:""})):"StartsWith"==u.filterTag?(i=i.concat(n.allLyonStatData.filter((function(t){return t.subid.startsWith(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:""})):"EndsWith"==u.filterTag?(i=i.concat(n.allLyonStatData.filter((function(t){return t.subid.endsWith(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:""})):"ExactValue"==u.filterTag&&(i=i.concat(n.allLyonStatData.filter((function(t){return t.subid==u.subid})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:""}))}}catch(c){s.e(c)}finally{s.f()}return i.filter((function(t,e,r){return e===r.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))})).slice().sort((function(t,e){return e.date-t.date}))})).catch((function(t){return t}))}},{key:"getAllVerizonStats",value:function(e,r,a){var n=this;return this.verizonService.getAllPublisherVerizonStats(this.selectedCompany,this.selectedTagId,e,r).toPromise().then((function(e){n.allVerizonStatData=e.stats;var r,i=[],s=t(a.subids);try{for(s.s();!(r=s.n()).done;){var u=r.value;"Contains"==u.filterTag?(i=i.concat(n.allVerizonStatData.filter((function(t){return t.subid.includes(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:"",t.tagname=a.name})):"StartsWith"==u.filterTag?(i=i.concat(n.allVerizonStatData.filter((function(t){return t.subid.startsWith(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:"",t.tagname=a.name})):"EndsWith"==u.filterTag?(i=i.concat(n.allVerizonStatData.filter((function(t){return t.subid.endsWith(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:"",t.tagname=a.name})):"ExactValue"==u.filterTag&&(i=i.concat(n.allVerizonStatData.filter((function(t){return t.subid==u.subid})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:"",t.tagname=a.name}))}}catch(c){s.e(c)}finally{s.f()}return i.filter((function(t,e,r){return e===r.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))})).slice().sort((function(t,e){return e.date-t.date}))})).catch((function(t){return t}))}},{key:"getAllVerizonArbStats",value:function(e,r,a){var n=this;return this.verizonArbService.getAllPublisherVerizonArbStats(this.selectedCompany,this.selectedTagId,e,r).toPromise().then((function(e){n.allVerizonArbStatData=e.stats;var r,i=[],s=t(a.subids);try{for(s.s();!(r=s.n()).done;){var u=r.value;"Contains"==u.filterTag?(i=i.concat(n.allVerizonArbStatData.filter((function(t){return t.subid.includes(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:"",t.tagname=a.name})):"StartsWith"==u.filterTag?(i=i.concat(n.allVerizonArbStatData.filter((function(t){return t.subid.startsWith(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:"",t.tagname=a.name})):"EndsWith"==u.filterTag?(i=i.concat(n.allVerizonArbStatData.filter((function(t){return t.subid.endsWith(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:"",t.tagname=a.name})):"ExactValue"==u.filterTag&&(i=i.concat(n.allVerizonArbStatData.filter((function(t){return t.subid==u.subid})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:"",t.tagname=a.name}))}}catch(c){s.e(c)}finally{s.f()}return i.filter((function(t,e,r){return e===r.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))})).slice().sort((function(t,e){return e.date-t.date}))})).catch((function(t){return t}))}},{key:"getVerizonChartMetrics",value:function(e,r,a){var n=this;return this.verizonService.getAllPublisherVerizonStats(this.selectedCompany,this.selectedTagId,r,a).toPromise().then((function(e){n.allVerizonChart=e.stats;var r,a=[],i=t(n.tagRows.subids);try{for(i.s();!(r=i.n()).done;){var s=r.value;"Contains"==s.filterTag?a=a.concat(n.allVerizonChart.filter((function(t){return t.subid.includes(s.subid)}))):"StartsWith"==s.filterTag?a=a.concat(n.allVerizonChart.filter((function(t){return t.subid.startsWith(s.subid)}))):"EndsWith"==s.filterTag?a=a.concat(n.allVerizonChart.filter((function(t){return t.subid.endsWith(s.subid)}))):"ExactValue"==s.filterTag&&(a=a.concat(n.allVerizonChart.filter((function(t){return t.subid==s.subid}))))}}catch(m){i.e(m)}finally{i.f()}var u=a.filter((function(t,e,r){return e===r.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))}));u=u.slice().sort((function(t,e){return t.date-e.date}));var c,l={},o=[],h=[],d=[],b=[],f={},g=t(u.reduce((function(t,e){var r=e.date;return l[r]?(l[r].searches+=parseInt(e.searches),e.revenue&&(l[r].revenue+=e.revenue)):(l[r]=Object.assign({},e),t.push(l[r])),t}),[]));try{for(g.s();!(c=g.n()).done;){var p=c.value;o.push(0),h.push(p.revenue),d.push(p.date),b.push(p.searches)}}catch(m){g.e(m)}finally{g.f()}return f.revenuePerDay=o,f.publisherRevenuePerDay=h,f.datesOfRevenue=d,f.searchesPerDay=b,f})).catch((function(t){return t}))}},{key:"getVerizonArbChartMetrics",value:function(e,r,a){var n=this;return this.verizonArbService.getAllPublisherVerizonArbStats(this.selectedCompany,this.selectedTagId,r,a).toPromise().then((function(e){n.allVerizonArbChart=e.stats;var r,a=[],i=t(n.tagRows.subids);try{for(i.s();!(r=i.n()).done;){var s=r.value;"Contains"==s.filterTag?a=a.concat(n.allVerizonArbChart.filter((function(t){return t.subid.includes(s.subid)}))):"StartsWith"==s.filterTag?a=a.concat(n.allVerizonArbChart.filter((function(t){return t.subid.startsWith(s.subid)}))):"EndsWith"==s.filterTag?a=a.concat(n.allVerizonArbChart.filter((function(t){return t.subid.endsWith(s.subid)}))):"ExactValue"==s.filterTag&&(a=a.concat(n.allVerizonArbChart.filter((function(t){return t.subid==s.subid}))))}}catch(m){i.e(m)}finally{i.f()}var u=a.filter((function(t,e,r){return e===r.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))}));u=u.slice().sort((function(t,e){return t.date-e.date}));var c,l={},o=[],h=[],d=[],b=[],f={},g=t(u.reduce((function(t,e){var r=e.date;return l[r]?(l[r].searches+=parseInt(e.searches),e.revenue&&(l[r].revenue+=e.revenue)):(l[r]=Object.assign({},e),t.push(l[r])),t}),[]));try{for(g.s();!(c=g.n()).done;){var p=c.value;o.push(0),h.push(p.revenue),d.push(p.date),b.push(p.searches)}}catch(m){g.e(m)}finally{g.f()}return f.revenuePerDay=o,f.publisherRevenuePerDay=h,f.datesOfRevenue=d,f.searchesPerDay=b,f})).catch((function(t){return t}))}},{key:"getRubiAllStats",value:function(e,r,a){var n=this;return this.rubiService.getAllRubiStats(this.selectedCompany,e,r).toPromise().then((function(e){n.allRubiStatData=e.stats;var r,i=[],s=t(a.subids);try{for(s.s();!(r=s.n()).done;){var u=r.value;"Contains"==u.filterTag?(i=i.concat(n.allRubiStatData.filter((function(t){return t.subid.includes(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:""})):"StartsWith"==u.filterTag?(i=i.concat(n.allRubiStatData.filter((function(t){return t.subid.startsWith(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:""})):"EndsWith"==u.filterTag?(i=i.concat(n.allRubiStatData.filter((function(t){return t.subid.endsWith(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:""})):"ExactValue"==u.filterTag&&(i=i.concat(n.allRubiStatData.filter((function(t){return t.subid==u.subid})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:""}))}}catch(c){s.e(c)}finally{s.f()}return i.filter((function(t,e,r){return e===r.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))})).slice().sort((function(t,e){return e.date-t.date}))})).catch((function(t){return t}))}},{key:"getRubiChartMetrics",value:function(e,r,a){var n=this;return this.rubiService.getAllRubiStats(this.selectedCompany,r,a).toPromise().then((function(e){n.allRubiChart=e.stats;var r,a=[],i=t(n.tagRows.subids);try{for(i.s();!(r=i.n()).done;){var s=r.value;"Contains"==s.filterTag?a=a.concat(n.allRubiChart.filter((function(t){return t.subid.includes(s.subid)}))):"StartsWith"==s.filterTag?a=a.concat(n.allRubiChart.filter((function(t){return t.subid.startsWith(s.subid)}))):"EndsWith"==s.filterTag?a=a.concat(n.allRubiChart.filter((function(t){return t.subid.endsWith(s.subid)}))):"ExactValue"==s.filterTag&&(a=a.concat(n.allRubiChart.filter((function(t){return t.subid==s.subid}))))}}catch(m){i.e(m)}finally{i.f()}var u=a.filter((function(t,e,r){return e===r.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))}));u=u.slice().sort((function(t,e){return t.date-e.date}));var c,l={},o=[],h=[],d=[],b=[],f={},g=t(u.reduce((function(t,e){var r=e.date;return l[r]?(l[r].searches+=parseInt(e.searches),e.revenue&&(l[r].revenue+=e.revenue)):(l[r]=Object.assign({},e),t.push(l[r])),t}),[]));try{for(g.s();!(c=g.n()).done;){var p=c.value;o.push(0),h.push(p.revenue),d.push(p.date),b.push(p.searches)}}catch(m){g.e(m)}finally{g.f()}return f.revenuePerDay=o,f.publisherRevenuePerDay=h,f.datesOfRevenue=d,f.searchesPerDay=b,f})).catch((function(t){return t}))}},{key:"getSolexBCAllStats",value:function(e,r,a){var n=this;return this.solexbcService.getAllSolexBCStats(this.selectedCompany,e,r).toPromise().then((function(e){n.allSolexBCStatData=e.stats;var r,i=[],s=t(a.subids);try{for(s.s();!(r=s.n()).done;){var u=r.value;"Contains"==u.filterTag?(i=i.concat(n.allSolexBCStatData.filter((function(t){return t.subid.includes(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:""})):"StartsWith"==u.filterTag?(i=i.concat(n.allSolexBCStatData.filter((function(t){return t.subid.startsWith(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:""})):"EndsWith"==u.filterTag?(i=i.concat(n.allSolexBCStatData.filter((function(t){return t.subid.endsWith(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:""})):"ExactValue"==u.filterTag&&(i=i.concat(n.allSolexBCStatData.filter((function(t){return t.subid==u.subid})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:""}))}}catch(c){s.e(c)}finally{s.f()}return i.filter((function(t,e,r){return e===r.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))})).slice().sort((function(t,e){return e.date-t.date}))})).catch((function(t){return t}))}},{key:"getSolexBCChartMetrics",value:function(e,r,a){var n=this;return this.solexbcService.getAllSolexBCStats(this.selectedCompany,r,a).toPromise().then((function(e){n.allSolexBCChart=e.stats;var r,a=[],i=t(n.tagRows.subids);try{for(i.s();!(r=i.n()).done;){var s=r.value;"Contains"==s.filterTag?a=a.concat(n.allSolexBCChart.filter((function(t){return t.subid.includes(s.subid)}))):"StartsWith"==s.filterTag?a=a.concat(n.allSolexBCChart.filter((function(t){return t.subid.startsWith(s.subid)}))):"EndsWith"==s.filterTag?a=a.concat(n.allSolexBCChart.filter((function(t){return t.subid.endsWith(s.subid)}))):"ExactValue"==s.filterTag&&(a=a.concat(n.allSolexBCChart.filter((function(t){return t.subid==s.subid}))))}}catch(m){i.e(m)}finally{i.f()}var u=a.filter((function(t,e,r){return e===r.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))}));u=u.slice().sort((function(t,e){return t.date-e.date}));var c,l={},o=[],h=[],d=[],b=[],f={},g=t(u.reduce((function(t,e){var r=e.date;return l[r]?(l[r].searches+=parseInt(e.searches),e.revenue&&(l[r].revenue+=e.revenue)):(l[r]=Object.assign({},e),t.push(l[r])),t}),[]));try{for(g.s();!(c=g.n()).done;){var p=c.value;o.push(0),h.push(p.revenue),d.push(p.date),b.push(p.searches)}}catch(m){g.e(m)}finally{g.f()}return f.revenuePerDay=o,f.publisherRevenuePerDay=h,f.datesOfRevenue=d,f.searchesPerDay=b,f})).catch((function(t){return t}))}},{key:"getSystem1AllStats",value:function(e,r,a){var n=this;return this.system1Service.getSystem1PublisherStats(this.selectedCompany,this.selectedTagId,e,r).toPromise().then((function(e){n.allSolexBCStatData=e.stats;var r,i=[],s=t(a.subids);try{for(s.s();!(r=s.n()).done;){var u=r.value;"Contains"==u.filterTag?(i=i.concat(n.allSolexBCStatData.filter((function(t){return t.subid.includes(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:""})):"StartsWith"==u.filterTag?(i=i.concat(n.allSolexBCStatData.filter((function(t){return t.subid.startsWith(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:""})):"EndsWith"==u.filterTag?(i=i.concat(n.allSolexBCStatData.filter((function(t){return t.subid.endsWith(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:""})):"ExactValue"==u.filterTag&&(i=i.concat(n.allSolexBCStatData.filter((function(t){return t.subid==u.subid})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:""}))}}catch(c){s.e(c)}finally{s.f()}return i.filter((function(t,e,r){return e===r.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))})).slice().sort((function(t,e){return e.date-t.date}))})).catch((function(t){return t}))}},{key:"getSystem1ChartMetrics",value:function(e,r,a){var n=this;return this.system1Service.getSystem1PublisherStats(this.selectedCompany,this.selectedTagId,r,a).toPromise().then((function(e){n.allSolexBCChart=e.stats;var r,a=[],i=t(n.tagRows.subids);try{for(i.s();!(r=i.n()).done;){var s=r.value;"Contains"==s.filterTag?a=a.concat(n.allSolexBCChart.filter((function(t){return t.subid.includes(s.subid)}))):"StartsWith"==s.filterTag?a=a.concat(n.allSolexBCChart.filter((function(t){return t.subid.startsWith(s.subid)}))):"EndsWith"==s.filterTag?a=a.concat(n.allSolexBCChart.filter((function(t){return t.subid.endsWith(s.subid)}))):"ExactValue"==s.filterTag&&(a=a.concat(n.allSolexBCChart.filter((function(t){return t.subid==s.subid}))))}}catch(m){i.e(m)}finally{i.f()}var u=a.filter((function(t,e,r){return e===r.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))}));u=u.slice().sort((function(t,e){return t.date-e.date}));var c,l={},o=[],h=[],d=[],b=[],f={},g=t(u.reduce((function(t,e){var r=e.date;return l[r]?(l[r].searches+=parseInt(e.searches),e.revenue&&(l[r].revenue+=e.revenue)):(l[r]=Object.assign({},e),t.push(l[r])),t}),[]));try{for(g.s();!(c=g.n()).done;){var p=c.value;o.push(0),h.push(p.revenue),d.push(p.date),b.push(p.searches)}}catch(m){g.e(m)}finally{g.f()}return f.revenuePerDay=o,f.publisherRevenuePerDay=h,f.datesOfRevenue=d,f.searchesPerDay=b,f})).catch((function(t){return t}))}},{key:"getApptitudePublisherStats",value:function(e,r,a){var n=this;return this.apptitudeService.getPublisherApptitudeStats(this.selectedCompany,e,r).toPromise().then((function(e){n.allApptitudeStatData=e.stats;var r,i=[],s=t(a.subids);try{for(s.s();!(r=s.n()).done;){var u=r.value;"Contains"==u.filterTag?(i=i.concat(n.allApptitudeStatData.filter((function(t){return t.subid.includes(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:""})):"StartsWith"==u.filterTag?(i=i.concat(n.allApptitudeStatData.filter((function(t){return t.subid.startsWith(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:""})):"EndsWith"==u.filterTag?(i=i.concat(n.allApptitudeStatData.filter((function(t){return t.subid.endsWith(u.subid)})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:""})):"ExactValue"==u.filterTag&&(i=i.concat(n.allApptitudeStatData.filter((function(t){return t.subid==u.subid})))).map((function(t){t.publisher=a.publisher?a.publisher.fullname:""}))}}catch(c){s.e(c)}finally{s.f()}return i.filter((function(t,e,r){return e===r.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))})).slice().sort((function(t,e){return e.date-t.date}))})).catch((function(t){return t}))}},{key:"getApptitudeChartMetrics",value:function(e,r,a){var n=this;return this.apptitudeService.getPublisherApptitudeStats(this.selectedCompany,r,a).toPromise().then((function(e){n.allApptitudeChart=e.stats;var r,a=[],i=t(n.tagRows.subids);try{for(i.s();!(r=i.n()).done;){var s=r.value;"Contains"==s.filterTag?a=a.concat(n.allApptitudeChart.filter((function(t){return t.subid.includes(s.subid)}))):"StartsWith"==s.filterTag?a=a.concat(n.allApptitudeChart.filter((function(t){return t.subid.startsWith(s.subid)}))):"EndsWith"==s.filterTag?a=a.concat(n.allApptitudeChart.filter((function(t){return t.subid.endsWith(s.subid)}))):"ExactValue"==s.filterTag&&(a=a.concat(n.allApptitudeChart.filter((function(t){return t.subid==s.subid}))))}}catch(m){i.e(m)}finally{i.f()}var u=a.filter((function(t,e,r){return e===r.findIndex((function(e){return e.date===t.date&&e.subid===t.subid}))}));u=u.slice().sort((function(t,e){return t.date-e.date}));var c,l={},o=[],h=[],d=[],b=[],f={},g=t(u.reduce((function(t,e){var r=e.date;return l[r]?(l[r].searches+=parseInt(e.searches),e.revenue&&(l[r].revenue+=e.revenue)):(l[r]=Object.assign({},e),t.push(l[r])),t}),[]));try{for(g.s();!(c=g.n()).done;){var p=c.value;o.push(0),h.push(p.revenue),d.push(p.date),b.push(p.searches)}}catch(m){g.e(m)}finally{g.f()}return f.revenuePerDay=o,f.publisherRevenuePerDay=h,f.datesOfRevenue=d,f.searchesPerDay=b,f})).catch((function(t){return t}))}}]),e}(),mt.\u0275fac=function(t){return new(t||mt)(l.Qb(c.a),l.Qb(d.a),l.Qb(l.i),l.Qb(b.a),l.Qb(f.a),l.Qb(g.a),l.Qb(p.a),l.Qb(m.a),l.Qb(v.a),l.Qb(y.a),l.Qb(D.a),l.Qb(S.a),l.Qb(x.a),l.Qb(u.f),l.Qb(u.d),l.Qb(u.w))},mt.\u0275cmp=l.Kb({type:mt,selectors:[["app-publisher"]],viewQuery:function(t,e){var r;1&t&&l.Tc(E,!0),2&t&&l.zc(r=l.ic())&&(e.table=r.first)},decls:40,vars:24,consts:[["class","loading-bar",4,"ngIf"],[3,"onDatesPicked"],[3,"chartData",4,"ngIf"],["class","mt-5",3,"summaryMetricsData",4,"ngIf"],[1,"row"],[1,"col-xl-4"],["appearance","fill"],[3,"ngModel","selectionChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"row","py-6"],[1,"btn","btn-sm","btn-primary","mx-3",3,"click"],[1,"material","fullscreen","expandable",2,"top","10px","height","500px",3,"loadingIndicator","columnMode","headerHeight","footerHeight","rowHeight","scrollbarV","scrollbarH","rows"],["expandableTable",""],[3,"rowHeight","toggle"],["ngx-datatable-row-detail-template",""],[3,"width","resizeable","sortable","draggable","canAutoResize"],["ngx-datatable-cell-template",""],["name","date",4,"ngIf"],["name","subid",4,"ngIf"],["name","searches"],["ngx-datatable-header-template",""],["name","biddedSearches",4,"ngIf"],["name","monetizedSearches",4,"ngIf"],["name","clicks"],["name","cpc"],["name","ctr"],["name","revenue"],["name","tq",4,"ngIf"],[1,"loading-bar"],["mode","indeterminate"],[3,"chartData"],[1,"mt-5",3,"summaryMetricsData"],[3,"value"],["class","table-responsive","style","padding-left: 36px;",4,"ngIf"],["style","padding-left: 35px",4,"ngIf"],[1,"table-responsive",2,"padding-left","36px"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[2,"padding-left","35px"],["href","javascript:void(0)","title","Expand/Collapse Row",3,"click"],["name","date"],["name","subid"],["name","biddedSearches"],["name","monetizedSearches"],["name","tq"]],template:function(t,e){1&t&&(l.Mc(0,F,2,0,"div",0),l.Wb(1,"app-reporting-filtering",1),l.hc("onDatesPicked",(function(t){return e.updateReportingFiltering(t)})),l.Vb(),l.Mc(2,B,1,1,"app-reporting-publisher-revenue-chart",2),l.Mc(3,j,1,1,"app-publisher-summary-metrics",3),l.Wb(4,"div",4),l.Wb(5,"div",5),l.Wb(6,"mat-form-field",6),l.Wb(7,"mat-label"),l.Oc(8,"Choose an Group By"),l.Vb(),l.Wb(9,"mat-select",7),l.hc("selectionChange",(function(t){return e.groupHandle(t)}))("ngModelChange",(function(t){return e.groupType=t})),l.Mc(10,Q,2,2,"mat-option",8),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Wb(11,"div",9),l.Wb(12,"button",10),l.hc("click",(function(){return e.exportToCsv()})),l.Oc(13," Export Stats "),l.Vb(),l.Vb(),l.Wb(14,"ngx-datatable",11,12),l.Wb(16,"ngx-datatable-row-detail",13),l.hc("toggle",(function(t){return e.onDetailToggle(t)})),l.Mc(17,U,2,2,"ng-template",14),l.Vb(),l.Wb(18,"ngx-datatable-column",15),l.Mc(19,G,1,4,"ng-template",16),l.Vb(),l.Mc(20,$,3,0,"ngx-datatable-column",17),l.Mc(21,J,3,0,"ngx-datatable-column",18),l.Wb(22,"ngx-datatable-column",19),l.Mc(23,Y,1,0,"ng-template",20),l.Mc(24,Z,2,1,"ng-template",16),l.Vb(),l.Mc(25,rt,3,0,"ngx-datatable-column",21),l.Mc(26,it,3,0,"ngx-datatable-column",22),l.Wb(27,"ngx-datatable-column",23),l.Mc(28,st,1,0,"ng-template",20),l.Mc(29,ut,2,1,"ng-template",16),l.Vb(),l.Wb(30,"ngx-datatable-column",24),l.Mc(31,ct,1,0,"ng-template",20),l.Mc(32,lt,4,7,"ng-template",16),l.Vb(),l.Wb(33,"ngx-datatable-column",25),l.Mc(34,ot,1,0,"ng-template",20),l.Mc(35,ht,4,7,"ng-template",16),l.Vb(),l.Wb(36,"ngx-datatable-column",26),l.Mc(37,dt,1,0,"ng-template",20),l.Mc(38,bt,3,4,"ng-template",16),l.Vb(),l.Mc(39,pt,3,0,"ngx-datatable-column",27),l.Vb()),2&t&&(l.rc("ngIf",e.loadingIndicator),l.Db(2),l.rc("ngIf",e.chartData&&!e.loadingIndicator),l.Db(1),l.rc("ngIf",e.summaryMetrics&&!e.loadingIndicator),l.Db(6),l.rc("ngModel",e.groupType),l.Db(1),l.rc("ngForOf",e.groupbyList),l.Db(4),l.rc("loadingIndicator",e.loadingIndicator)("columnMode","force")("headerHeight",50)("footerHeight",0)("rowHeight",50)("scrollbarV",!0)("scrollbarH",!0)("rows",e.rows),l.Db(2),l.rc("rowHeight","subid"===e.groupType?e.getDetailRowHeight:130),l.Db(2),l.rc("width",50)("resizeable",!1)("sortable",!1)("draggable",!1)("canAutoResize",!1),l.Db(2),l.rc("ngIf",!e.groupSubidShowFlag),l.Db(1),l.rc("ngIf",!e.groupDateShowFlag),l.Db(4),l.rc("ngIf","verizon-direct"===e.selectedAdvertiser||"verizon-direct-arb"===e.selectedAdvertiser||"verizon-direct-arb-hourly"==e.selectedAdvertiser),l.Db(1),l.rc("ngIf","perion"==e.selectedAdvertiser),l.Db(13),l.rc("ngIf","verizon-direct"===e.selectedAdvertiser||"verizon-direct-arb"===e.selectedAdvertiser||"verizon-direct-arb-hourly"==e.selectedAdvertiser))},directives:[u.p,C.a,W.c,W.g,V.a,T.q,T.t,u.o,M.d,M.e,M.f,M.b,M.a,M.c,P.a,k.a,O,z.p],pipes:[u.f,u.g,u.w,u.d],styles:[".mat-form-field-appearance-outline .mat-form-field-outline{background-color:#fff;border-radius:5px}.loading-bar[_ngcontent-%COMP%]{position:fixed;top:118px;left:0;right:0;transition:top .3s ease;z-index:95;margin:0}[_nghost-%COMP%]     .mat-progress-bar .mat-progress-bar-fill:after{background-color:#99c2eb}@media screen and (max-width:992px){.loading-bar[_ngcontent-%COMP%]{top:81px}}"]}),mt),pathMatch:"full"},{path:"",redirectTo:"",pathMatch:"full"},{path:"**",redirectTo:"",pathMatch:"full"}]}],St=((vt=function t(){r(this,t)}).\u0275mod=l.Ob({type:vt}),vt.\u0275inj=l.Nb({factory:function(t){return new(t||vt)},imports:[[c.k.forChild(Dt)],c.k]}),vt),xt=i("UKGz"),Ct=((yt=function t(){r(this,t)}).\u0275mod=l.Ob({type:yt}),yt.\u0275inj=l.Nb({factory:function(t){return new(t||yt)},providers:[u.f,u.w,u.d],imports:[[c.k,u.c,T.w,T.m,xt.a,M.g,P.b,z.n,z.q,V.b,W.e,St]]}),yt)}}])}();