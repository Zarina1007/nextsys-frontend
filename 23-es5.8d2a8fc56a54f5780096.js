!function(){function e(e,r){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(e,r)}(e))||r&&e&&"number"==typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==a.return||a.return()}finally{if(u)throw o}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{LvDl:function(e,t,r){(function(e){var a;(function(){var n="Expected a function",i="__lodash_placeholder__",o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],s="[object Arguments]",u="[object Array]",c="[object Boolean]",l="[object Date]",h="[object Error]",p="[object Function]",g="[object GeneratorFunction]",f="[object Map]",b="[object Number]",d="[object Object]",m="[object RegExp]",v="[object Set]",y="[object String]",S="[object Symbol]",D="[object WeakMap]",w="[object ArrayBuffer]",F="[object DataView]",W="[object Float32Array]",P="[object Float64Array]",x="[object Int8Array]",M="[object Int16Array]",V="[object Int32Array]",C="[object Uint8Array]",O="[object Uint16Array]",k="[object Uint32Array]",R=/\b__p \+= '';/g,_=/\b(__p \+=) '' \+/g,T=/(__e\(.*?\)|\b__t\)) \+\n'';/g,I=/&(?:amp|lt|gt|quot|#39);/g,N=/[&<>"']/g,j=RegExp(I.source),A=RegExp(N.source),E=/<%-([\s\S]+?)%>/g,z=/<%([\s\S]+?)%>/g,L=/<%=([\s\S]+?)%>/g,U=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,H=/^\w*$/,Y=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,B=/[\\^$.*+?()[\]{}|]/g,Q=RegExp(B.source),G=/^\s+/,q=/\s/,$=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,K=/\{\n\/\* \[wrapped with (.+)\] \*/,X=/,? & /,Z=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,J=/[()=,{}\[\]\/\s]/,ee=/\\(\\)?/g,te=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,re=/\w*$/,ae=/^[-+]0x[0-9a-f]+$/i,ne=/^0b[01]+$/i,ie=/^\[object .+?Constructor\]$/,oe=/^0o[0-7]+$/i,se=/^(?:0|[1-9]\d*)$/,ue=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ce=/($^)/,le=/['\n\r\u2028\u2029\\]/g,he="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",pe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ge="["+pe+"]",fe="["+he+"]",be="\\d+",de="[a-z\\xdf-\\xf6\\xf8-\\xff]",me="[^\\ud800-\\udfff"+pe+be+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ve="\\ud83c[\\udffb-\\udfff]",ye="[^\\ud800-\\udfff]",Se="(?:\\ud83c[\\udde6-\\uddff]){2}",De="[\\ud800-\\udbff][\\udc00-\\udfff]",we="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Fe="(?:"+de+"|"+me+")",We="(?:"+we+"|"+me+")",Pe="(?:"+fe+"|"+ve+")?",xe="[\\ufe0e\\ufe0f]?"+Pe+"(?:\\u200d(?:"+[ye,Se,De].join("|")+")[\\ufe0e\\ufe0f]?"+Pe+")*",Me="(?:"+["[\\u2700-\\u27bf]",Se,De].join("|")+")"+xe,Ve="(?:"+[ye+fe+"?",fe,Se,De,"[\\ud800-\\udfff]"].join("|")+")",Ce=RegExp("['\u2019]","g"),Oe=RegExp(fe,"g"),ke=RegExp(ve+"(?="+ve+")|"+Ve+xe,"g"),Re=RegExp([we+"?"+de+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[ge,we,"$"].join("|")+")",We+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[ge,we+Fe,"$"].join("|")+")",we+"?"+Fe+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",we+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",be,Me].join("|"),"g"),_e=RegExp("[\\u200d\\ud800-\\udfff"+he+"\\ufe0e\\ufe0f]"),Te=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ie=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ne=-1,je={};je[W]=je[P]=je[x]=je[M]=je[V]=je[C]=je["[object Uint8ClampedArray]"]=je[O]=je[k]=!0,je[s]=je[u]=je[w]=je[c]=je[F]=je[l]=je[h]=je[p]=je[f]=je[b]=je[d]=je[m]=je[v]=je[y]=je[D]=!1;var Ae={};Ae[s]=Ae[u]=Ae[w]=Ae[F]=Ae[c]=Ae[l]=Ae[W]=Ae[P]=Ae[x]=Ae[M]=Ae[V]=Ae[f]=Ae[b]=Ae[d]=Ae[m]=Ae[v]=Ae[y]=Ae[S]=Ae[C]=Ae["[object Uint8ClampedArray]"]=Ae[O]=Ae[k]=!0,Ae[h]=Ae[p]=Ae[D]=!1;var Ee={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ze=parseFloat,Le=parseInt,Ue="object"==typeof global&&global&&global.Object===Object&&global,He="object"==typeof self&&self&&self.Object===Object&&self,Ye=Ue||He||Function("return this")(),Be=t&&!t.nodeType&&t,Qe=Be&&"object"==typeof e&&e&&!e.nodeType&&e,Ge=Qe&&Qe.exports===Be,qe=Ge&&Ue.process,$e=function(){try{return Qe&&Qe.require&&Qe.require("util").types||qe&&qe.binding&&qe.binding("util")}catch(e){}}(),Ke=$e&&$e.isArrayBuffer,Xe=$e&&$e.isDate,Ze=$e&&$e.isMap,Je=$e&&$e.isRegExp,et=$e&&$e.isSet,tt=$e&&$e.isTypedArray;function rt(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function at(e,t,r,a){for(var n=-1,i=null==e?0:e.length;++n<i;){var o=e[n];t(a,o,r(o),e)}return a}function nt(e,t){for(var r=-1,a=null==e?0:e.length;++r<a&&!1!==t(e[r],r,e););return e}function it(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function ot(e,t){for(var r=-1,a=null==e?0:e.length;++r<a;)if(!t(e[r],r,e))return!1;return!0}function st(e,t){for(var r=-1,a=null==e?0:e.length,n=0,i=[];++r<a;){var o=e[r];t(o,r,e)&&(i[n++]=o)}return i}function ut(e,t){return!(null==e||!e.length)&&vt(e,t,0)>-1}function ct(e,t,r){for(var a=-1,n=null==e?0:e.length;++a<n;)if(r(t,e[a]))return!0;return!1}function lt(e,t){for(var r=-1,a=null==e?0:e.length,n=Array(a);++r<a;)n[r]=t(e[r],r,e);return n}function ht(e,t){for(var r=-1,a=t.length,n=e.length;++r<a;)e[n+r]=t[r];return e}function pt(e,t,r,a){var n=-1,i=null==e?0:e.length;for(a&&i&&(r=e[++n]);++n<i;)r=t(r,e[n],n,e);return r}function gt(e,t,r,a){var n=null==e?0:e.length;for(a&&n&&(r=e[--n]);n--;)r=t(r,e[n],n,e);return r}function ft(e,t){for(var r=-1,a=null==e?0:e.length;++r<a;)if(t(e[r],r,e))return!0;return!1}var bt=wt("length");function dt(e,t,r){var a;return r(e,(function(e,r,n){if(t(e,r,n))return a=r,!1})),a}function mt(e,t,r,a){for(var n=e.length,i=r+(a?1:-1);a?i--:++i<n;)if(t(e[i],i,e))return i;return-1}function vt(e,t,r){return t==t?function(e,t,r){for(var a=r-1,n=e.length;++a<n;)if(e[a]===t)return a;return-1}(e,t,r):mt(e,St,r)}function yt(e,t,r,a){for(var n=r-1,i=e.length;++n<i;)if(a(e[n],t))return n;return-1}function St(e){return e!=e}function Dt(e,t){var r=null==e?0:e.length;return r?Pt(e,t)/r:NaN}function wt(e){return function(t){return null==t?void 0:t[e]}}function Ft(e){return function(t){return null==e?void 0:e[t]}}function Wt(e,t,r,a,n){return n(e,(function(e,n,i){r=a?(a=!1,e):t(r,e,n,i)})),r}function Pt(e,t){for(var r,a=-1,n=e.length;++a<n;){var i=t(e[a]);void 0!==i&&(r=void 0===r?i:r+i)}return r}function xt(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}function Mt(e){return e?e.slice(0,Bt(e)+1).replace(G,""):e}function Vt(e){return function(t){return e(t)}}function Ct(e,t){return lt(t,(function(t){return e[t]}))}function Ot(e,t){return e.has(t)}function kt(e,t){for(var r=-1,a=e.length;++r<a&&vt(t,e[r],0)>-1;);return r}function Rt(e,t){for(var r=e.length;r--&&vt(t,e[r],0)>-1;);return r}function _t(e,t){for(var r=e.length,a=0;r--;)e[r]===t&&++a;return a}var Tt=Ft({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),It=Ft({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Nt(e){return"\\"+Ee[e]}function jt(e){return _e.test(e)}function At(e){var t=-1,r=Array(e.size);return e.forEach((function(e,a){r[++t]=[a,e]})),r}function Et(e,t){return function(r){return e(t(r))}}function zt(e,t){for(var r=-1,a=e.length,n=0,o=[];++r<a;){var s=e[r];s!==t&&s!==i||(e[r]=i,o[n++]=r)}return o}function Lt(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function Ut(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}function Ht(e){return jt(e)?function(e){for(var t=ke.lastIndex=0;ke.test(e);)++t;return t}(e):bt(e)}function Yt(e){return jt(e)?function(e){return e.match(ke)||[]}(e):function(e){return e.split("")}(e)}function Bt(e){for(var t=e.length;t--&&q.test(e.charAt(t)););return t}var Qt=Ft({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Gt=function e(t){var r,a=(t=null==t?Ye:Gt.defaults(Ye.Object(),t,Gt.pick(Ye,Ie))).Array,q=t.Date,he=t.Error,pe=t.Function,ge=t.Math,fe=t.Object,be=t.RegExp,de=t.String,me=t.TypeError,ve=a.prototype,ye=fe.prototype,Se=t["__core-js_shared__"],De=pe.prototype.toString,we=ye.hasOwnProperty,Fe=0,We=(r=/[^.]+$/.exec(Se&&Se.keys&&Se.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",Pe=ye.toString,xe=De.call(fe),Me=Ye._,Ve=be("^"+De.call(we).replace(B,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ke=Ge?t.Buffer:void 0,_e=t.Symbol,Ee=t.Uint8Array,Ue=ke?ke.allocUnsafe:void 0,He=Et(fe.getPrototypeOf,fe),Be=fe.create,Qe=ye.propertyIsEnumerable,qe=ve.splice,$e=_e?_e.isConcatSpreadable:void 0,bt=_e?_e.iterator:void 0,Ft=_e?_e.toStringTag:void 0,qt=function(){try{var e=Zn(fe,"defineProperty");return e({},"",{}),e}catch(t){}}(),$t=t.clearTimeout!==Ye.clearTimeout&&t.clearTimeout,Kt=q&&q.now!==Ye.Date.now&&q.now,Xt=t.setTimeout!==Ye.setTimeout&&t.setTimeout,Zt=ge.ceil,Jt=ge.floor,er=fe.getOwnPropertySymbols,tr=ke?ke.isBuffer:void 0,rr=t.isFinite,ar=ve.join,nr=Et(fe.keys,fe),ir=ge.max,or=ge.min,sr=q.now,ur=t.parseInt,cr=ge.random,lr=ve.reverse,hr=Zn(t,"DataView"),pr=Zn(t,"Map"),gr=Zn(t,"Promise"),fr=Zn(t,"Set"),br=Zn(t,"WeakMap"),dr=Zn(fe,"create"),mr=br&&new br,vr={},yr=Mi(hr),Sr=Mi(pr),Dr=Mi(gr),wr=Mi(fr),Fr=Mi(br),Wr=_e?_e.prototype:void 0,Pr=Wr?Wr.valueOf:void 0,xr=Wr?Wr.toString:void 0;function Mr(e){if(Bo(e)&&!To(e)&&!(e instanceof kr)){if(e instanceof Or)return e;if(we.call(e,"__wrapped__"))return Vi(e)}return new Or(e)}var Vr=function(){function e(){}return function(t){if(!Yo(t))return{};if(Be)return Be(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Cr(){}function Or(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function kr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Rr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function _r(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function Tr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function Ir(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Tr;++t<r;)this.add(e[t])}function Nr(e){var t=this.__data__=new _r(e);this.size=t.size}function jr(e,t){var r=To(e),a=!r&&_o(e),n=!r&&!a&&Ao(e),i=!r&&!a&&!n&&Jo(e),o=r||a||n||i,s=o?xt(e.length,de):[],u=s.length;for(var c in e)!t&&!we.call(e,c)||o&&("length"==c||n&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ii(c,u))||s.push(c);return s}function Ar(e){var t=e.length;return t?e[Ta(0,t-1)]:void 0}function Er(e,t){return wi(dn(e),qr(t,0,e.length))}function zr(e){return wi(dn(e))}function Lr(e,t,r){(void 0!==r&&!Oo(e[t],r)||void 0===r&&!(t in e))&&Qr(e,t,r)}function Ur(e,t,r){var a=e[t];we.call(e,t)&&Oo(a,r)&&(void 0!==r||t in e)||Qr(e,t,r)}function Hr(e,t){for(var r=e.length;r--;)if(Oo(e[r][0],t))return r;return-1}function Yr(e,t,r,a){return Jr(e,(function(e,n,i){t(a,e,r(e),i)})),a}function Br(e,t){return e&&mn(t,Ds(t),e)}function Qr(e,t,r){"__proto__"==t&&qt?qt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Gr(e,t){for(var r=-1,n=t.length,i=a(n),o=null==e;++r<n;)i[r]=o?void 0:ds(e,t[r]);return i}function qr(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}function $r(e,t,r,a,n,i){var o,u=1&t,h=2&t,D=4&t;if(r&&(o=n?r(e,a,n,i):r(e)),void 0!==o)return o;if(!Yo(e))return e;var R=To(e);if(R){if(o=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&we.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!u)return dn(e,o)}else{var _=ti(e),T=_==p||_==g;if(Ao(e))return ln(e,u);if(_==d||_==s||T&&!n){if(o=h||T?{}:ai(e),!u)return h?function(e,t){return mn(e,ei(e),t)}(e,function(e,t){return e&&mn(t,ws(t),e)}(o,e)):function(e,t){return mn(e,Jn(e),t)}(e,Br(o,e))}else{if(!Ae[_])return n?e:{};o=function(e,t,r){var a=e.constructor;switch(t){case w:return hn(e);case c:case l:return new a(+e);case F:return function(e,t){var r=t?hn(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case W:case P:case x:case M:case V:case C:case"[object Uint8ClampedArray]":case O:case k:return pn(e,r);case f:return new a;case b:case y:return new a(e);case m:return function(e){var t=new e.constructor(e.source,re.exec(e));return t.lastIndex=e.lastIndex,t}(e);case v:return new a;case S:return Pr?fe(Pr.call(e)):{}}}(e,_,u)}}i||(i=new Nr);var I=i.get(e);if(I)return I;i.set(e,o),Ko(e)?e.forEach((function(a){o.add($r(a,t,r,a,e,i))})):Qo(e)&&e.forEach((function(a,n){o.set(n,$r(a,t,r,n,e,i))}));var N=R?void 0:(D?h?Bn:Yn:h?ws:Ds)(e);return nt(N||e,(function(a,n){N&&(a=e[n=a]),Ur(o,n,$r(a,t,r,n,e,i))})),o}function Kr(e,t,r){var a=r.length;if(null==e)return!a;for(e=fe(e);a--;){var n=r[a],i=e[n];if(void 0===i&&!(n in e)||!(0,t[n])(i))return!1}return!0}function Xr(e,t,r){if("function"!=typeof e)throw new me(n);return vi((function(){e.apply(void 0,r)}),t)}function Zr(e,t,r,a){var n=-1,i=ut,o=!0,s=e.length,u=[],c=t.length;if(!s)return u;r&&(t=lt(t,Vt(r))),a?(i=ct,o=!1):t.length>=200&&(i=Ot,o=!1,t=new Ir(t));e:for(;++n<s;){var l=e[n],h=null==r?l:r(l);if(l=a||0!==l?l:0,o&&h==h){for(var p=c;p--;)if(t[p]===h)continue e;u.push(l)}else i(t,h,a)||u.push(l)}return u}Mr.templateSettings={escape:E,evaluate:z,interpolate:L,variable:"",imports:{_:Mr}},(Mr.prototype=Cr.prototype).constructor=Mr,(Or.prototype=Vr(Cr.prototype)).constructor=Or,(kr.prototype=Vr(Cr.prototype)).constructor=kr,Rr.prototype.clear=function(){this.__data__=dr?dr(null):{},this.size=0},Rr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Rr.prototype.get=function(e){var t=this.__data__;if(dr){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return we.call(t,e)?t[e]:void 0},Rr.prototype.has=function(e){var t=this.__data__;return dr?void 0!==t[e]:we.call(t,e)},Rr.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=dr&&void 0===t?"__lodash_hash_undefined__":t,this},_r.prototype.clear=function(){this.__data__=[],this.size=0},_r.prototype.delete=function(e){var t=this.__data__,r=Hr(t,e);return!(r<0||(r==t.length-1?t.pop():qe.call(t,r,1),--this.size,0))},_r.prototype.get=function(e){var t=this.__data__,r=Hr(t,e);return r<0?void 0:t[r][1]},_r.prototype.has=function(e){return Hr(this.__data__,e)>-1},_r.prototype.set=function(e,t){var r=this.__data__,a=Hr(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this},Tr.prototype.clear=function(){this.size=0,this.__data__={hash:new Rr,map:new(pr||_r),string:new Rr}},Tr.prototype.delete=function(e){var t=Kn(this,e).delete(e);return this.size-=t?1:0,t},Tr.prototype.get=function(e){return Kn(this,e).get(e)},Tr.prototype.has=function(e){return Kn(this,e).has(e)},Tr.prototype.set=function(e,t){var r=Kn(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this},Ir.prototype.add=Ir.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ir.prototype.has=function(e){return this.__data__.has(e)},Nr.prototype.clear=function(){this.__data__=new _r,this.size=0},Nr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Nr.prototype.get=function(e){return this.__data__.get(e)},Nr.prototype.has=function(e){return this.__data__.has(e)},Nr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof _r){var a=r.__data__;if(!pr||a.length<199)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new Tr(a)}return r.set(e,t),this.size=r.size,this};var Jr=Sn(sa),ea=Sn(ua,!0);function ta(e,t){var r=!0;return Jr(e,(function(e,a,n){return r=!!t(e,a,n)})),r}function ra(e,t,r){for(var a=-1,n=e.length;++a<n;){var i=e[a],o=t(i);if(null!=o&&(void 0===s?o==o&&!Zo(o):r(o,s)))var s=o,u=i}return u}function aa(e,t){var r=[];return Jr(e,(function(e,a,n){t(e,a,n)&&r.push(e)})),r}function na(e,t,r,a,n){var i=-1,o=e.length;for(r||(r=ni),n||(n=[]);++i<o;){var s=e[i];t>0&&r(s)?t>1?na(s,t-1,r,a,n):ht(n,s):a||(n[n.length]=s)}return n}var ia=Dn(),oa=Dn(!0);function sa(e,t){return e&&ia(e,t,Ds)}function ua(e,t){return e&&oa(e,t,Ds)}function ca(e,t){return st(t,(function(t){return Lo(e[t])}))}function la(e,t){for(var r=0,a=(t=on(t,e)).length;null!=e&&r<a;)e=e[xi(t[r++])];return r&&r==a?e:void 0}function ha(e,t,r){var a=t(e);return To(e)?a:ht(a,r(e))}function pa(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Ft&&Ft in fe(e)?function(e){var t=we.call(e,Ft),r=e[Ft];try{e[Ft]=void 0;var a=!0}catch(i){}var n=Pe.call(e);return a&&(t?e[Ft]=r:delete e[Ft]),n}(e):function(e){return Pe.call(e)}(e)}function ga(e,t){return e>t}function fa(e,t){return null!=e&&we.call(e,t)}function ba(e,t){return null!=e&&t in fe(e)}function da(e,t,r){for(var n=r?ct:ut,i=e[0].length,o=e.length,s=o,u=a(o),c=1/0,l=[];s--;){var h=e[s];s&&t&&(h=lt(h,Vt(t))),c=or(h.length,c),u[s]=!r&&(t||i>=120&&h.length>=120)?new Ir(s&&h):void 0}h=e[0];var p=-1,g=u[0];e:for(;++p<i&&l.length<c;){var f=h[p],b=t?t(f):f;if(f=r||0!==f?f:0,!(g?Ot(g,b):n(l,b,r))){for(s=o;--s;){var d=u[s];if(!(d?Ot(d,b):n(e[s],b,r)))continue e}g&&g.push(b),l.push(f)}}return l}function ma(e,t,r){var a=null==(e=fi(e,t=on(t,e)))?e:e[xi(Ei(t))];return null==a?void 0:rt(a,e,r)}function va(e){return Bo(e)&&pa(e)==s}function ya(e,t,r,a,n){return e===t||(null==e||null==t||!Bo(e)&&!Bo(t)?e!=e&&t!=t:function(e,t,r,a,n,i){var o=To(e),p=To(t),g=o?u:ti(e),D=p?u:ti(t),W=(g=g==s?d:g)==d,P=(D=D==s?d:D)==d,x=g==D;if(x&&Ao(e)){if(!Ao(t))return!1;o=!0,W=!1}if(x&&!W)return i||(i=new Nr),o||Jo(e)?Un(e,t,r,a,n,i):function(e,t,r,a,n,i,o){switch(r){case F:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!i(new Ee(e),new Ee(t)));case c:case l:case b:return Oo(+e,+t);case h:return e.name==t.name&&e.message==t.message;case m:case y:return e==t+"";case f:var s=At;case v:if(s||(s=Lt),e.size!=t.size&&!(1&a))return!1;var u=o.get(e);if(u)return u==t;a|=2,o.set(e,t);var p=Un(s(e),s(t),a,n,i,o);return o.delete(e),p;case S:if(Pr)return Pr.call(e)==Pr.call(t)}return!1}(e,t,g,r,a,n,i);if(!(1&r)){var M=W&&we.call(e,"__wrapped__"),V=P&&we.call(t,"__wrapped__");if(M||V){var C=M?e.value():e,O=V?t.value():t;return i||(i=new Nr),n(C,O,r,a,i)}}return!!x&&(i||(i=new Nr),function(e,t,r,a,n,i){var o=1&r,s=Yn(e),u=s.length;if(u!=Yn(t).length&&!o)return!1;for(var c=u;c--;){var l=s[c];if(!(o?l in t:we.call(t,l)))return!1}var h=i.get(e),p=i.get(t);if(h&&p)return h==t&&p==e;var g=!0;i.set(e,t),i.set(t,e);for(var f=o;++c<u;){var b=e[l=s[c]],d=t[l];if(a)var m=o?a(d,b,l,t,e,i):a(b,d,l,e,t,i);if(!(void 0===m?b===d||n(b,d,r,a,i):m)){g=!1;break}f||(f="constructor"==l)}if(g&&!f){var v=e.constructor,y=t.constructor;v==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y||(g=!1)}return i.delete(e),i.delete(t),g}(e,t,r,a,n,i))}(e,t,r,a,ya,n))}function Sa(e,t,r,a){var n=r.length,i=n,o=!a;if(null==e)return!i;for(e=fe(e);n--;){var s=r[n];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++n<i;){var u=(s=r[n])[0],c=e[u],l=s[1];if(o&&s[2]){if(void 0===c&&!(u in e))return!1}else{var h=new Nr;if(a)var p=a(c,l,u,e,t,h);if(!(void 0===p?ya(l,c,3,a,h):p))return!1}}return!0}function Da(e){return!(!Yo(e)||(t=e,We&&We in t))&&(Lo(e)?Ve:ie).test(Mi(e));var t}function wa(e){return"function"==typeof e?e:null==e?Gs:"object"==typeof e?To(e)?Ma(e[0],e[1]):xa(e):ru(e)}function Fa(e){if(!li(e))return nr(e);var t=[];for(var r in fe(e))we.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Wa(e,t){return e<t}function Pa(e,t){var r=-1,n=No(e)?a(e.length):[];return Jr(e,(function(e,a,i){n[++r]=t(e,a,i)})),n}function xa(e){var t=Xn(e);return 1==t.length&&t[0][2]?pi(t[0][0],t[0][1]):function(r){return r===e||Sa(r,e,t)}}function Ma(e,t){return si(e)&&hi(t)?pi(xi(e),t):function(r){var a=ds(r,e);return void 0===a&&a===t?ms(r,e):ya(t,a,3)}}function Va(e,t,r,a,n){e!==t&&ia(t,(function(i,o){if(n||(n=new Nr),Yo(i))!function(e,t,r,a,n,i,o){var s=di(e,r),u=di(t,r),c=o.get(u);if(c)Lr(e,r,c);else{var l=i?i(s,u,r+"",e,t,o):void 0,h=void 0===l;if(h){var p=To(u),g=!p&&Ao(u),f=!p&&!g&&Jo(u);l=u,p||g||f?To(s)?l=s:jo(s)?l=dn(s):g?(h=!1,l=ln(u,!0)):f?(h=!1,l=pn(u,!0)):l=[]:qo(u)||_o(u)?(l=s,_o(s)?l=ss(s):Yo(s)&&!Lo(s)||(l=ai(u))):h=!1}h&&(o.set(u,l),n(l,u,a,i,o),o.delete(u)),Lr(e,r,l)}}(e,t,o,r,Va,a,n);else{var s=a?a(di(e,o),i,o+"",e,t,n):void 0;void 0===s&&(s=i),Lr(e,o,s)}}),ws)}function Ca(e,t){var r=e.length;if(r)return ii(t+=t<0?r:0,r)?e[t]:void 0}function Oa(e,t,r){t=t.length?lt(t,(function(e){return To(e)?function(t){return la(t,1===e.length?e[0]:e)}:e})):[Gs];var a=-1;return t=lt(t,Vt($n())),function(e,t){var a=e.length;for(e.sort((function(e,t){return function(e,t,r){for(var a=-1,n=e.criteria,i=t.criteria,o=n.length,s=r.length;++a<o;){var u=gn(n[a],i[a]);if(u)return a>=s?u:u*("desc"==r[a]?-1:1)}return e.index-t.index}(e,t,r)}));a--;)e[a]=e[a].value;return e}(Pa(e,(function(e,r,n){return{criteria:lt(t,(function(t){return t(e)})),index:++a,value:e}})))}function ka(e,t,r){for(var a=-1,n=t.length,i={};++a<n;){var o=t[a],s=la(e,o);r(s,o)&&Ea(i,on(o,e),s)}return i}function Ra(e,t,r,a){var n=a?yt:vt,i=-1,o=t.length,s=e;for(e===t&&(t=dn(t)),r&&(s=lt(e,Vt(r)));++i<o;)for(var u=0,c=t[i],l=r?r(c):c;(u=n(s,l,u,a))>-1;)s!==e&&qe.call(s,u,1),qe.call(e,u,1);return e}function _a(e,t){for(var r=e?t.length:0,a=r-1;r--;){var n=t[r];if(r==a||n!==i){var i=n;ii(n)?qe.call(e,n,1):Xa(e,n)}}return e}function Ta(e,t){return e+Jt(cr()*(t-e+1))}function Ia(e,t){var r="";if(!e||t<1||t>9007199254740991)return r;do{t%2&&(r+=e),(t=Jt(t/2))&&(e+=e)}while(t);return r}function Na(e,t){return yi(gi(e,t,Gs),e+"")}function ja(e){return Ar(Os(e))}function Aa(e,t){var r=Os(e);return wi(r,qr(t,0,r.length))}function Ea(e,t,r,a){if(!Yo(e))return e;for(var n=-1,i=(t=on(t,e)).length,o=i-1,s=e;null!=s&&++n<i;){var u=xi(t[n]),c=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(n!=o){var l=s[u];void 0===(c=a?a(l,u,s):void 0)&&(c=Yo(l)?l:ii(t[n+1])?[]:{})}Ur(s,u,c),s=s[u]}return e}var za=mr?function(e,t){return mr.set(e,t),e}:Gs,La=qt?function(e,t){return qt(e,"toString",{configurable:!0,enumerable:!1,value:Ys(t),writable:!0})}:Gs;function Ua(e){return wi(Os(e))}function Ha(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=a(i);++n<i;)o[n]=e[n+t];return o}function Ya(e,t){var r;return Jr(e,(function(e,a,n){return!(r=t(e,a,n))})),!!r}function Ba(e,t,r){var a=0,n=null==e?a:e.length;if("number"==typeof t&&t==t&&n<=2147483647){for(;a<n;){var i=a+n>>>1,o=e[i];null!==o&&!Zo(o)&&(r?o<=t:o<t)?a=i+1:n=i}return n}return Qa(e,t,Gs,r)}function Qa(e,t,r,a){var n=0,i=null==e?0:e.length;if(0===i)return 0;for(var o=(t=r(t))!=t,s=null===t,u=Zo(t),c=void 0===t;n<i;){var l=Jt((n+i)/2),h=r(e[l]),p=void 0!==h,g=null===h,f=h==h,b=Zo(h);if(o)var d=a||f;else d=c?f&&(a||p):s?f&&p&&(a||!g):u?f&&p&&!g&&(a||!b):!g&&!b&&(a?h<=t:h<t);d?n=l+1:i=l}return or(i,4294967294)}function Ga(e,t){for(var r=-1,a=e.length,n=0,i=[];++r<a;){var o=e[r],s=t?t(o):o;if(!r||!Oo(s,u)){var u=s;i[n++]=0===o?0:o}}return i}function qa(e){return"number"==typeof e?e:Zo(e)?NaN:+e}function $a(e){if("string"==typeof e)return e;if(To(e))return lt(e,$a)+"";if(Zo(e))return xr?xr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ka(e,t,r){var a=-1,n=ut,i=e.length,o=!0,s=[],u=s;if(r)o=!1,n=ct;else if(i>=200){var c=t?null:Nn(e);if(c)return Lt(c);o=!1,n=Ot,u=new Ir}else u=t?[]:s;e:for(;++a<i;){var l=e[a],h=t?t(l):l;if(l=r||0!==l?l:0,o&&h==h){for(var p=u.length;p--;)if(u[p]===h)continue e;t&&u.push(h),s.push(l)}else n(u,h,r)||(u!==s&&u.push(h),s.push(l))}return s}function Xa(e,t){return null==(e=fi(e,t=on(t,e)))||delete e[xi(Ei(t))]}function Za(e,t,r,a){return Ea(e,t,r(la(e,t)),a)}function Ja(e,t,r,a){for(var n=e.length,i=a?n:-1;(a?i--:++i<n)&&t(e[i],i,e););return r?Ha(e,a?0:i,a?i+1:n):Ha(e,a?i+1:0,a?n:i)}function en(e,t){var r=e;return r instanceof kr&&(r=r.value()),pt(t,(function(e,t){return t.func.apply(t.thisArg,ht([e],t.args))}),r)}function tn(e,t,r){var n=e.length;if(n<2)return n?Ka(e[0]):[];for(var i=-1,o=a(n);++i<n;)for(var s=e[i],u=-1;++u<n;)u!=i&&(o[i]=Zr(o[i]||s,e[u],t,r));return Ka(na(o,1),t,r)}function rn(e,t,r){for(var a=-1,n=e.length,i=t.length,o={};++a<n;)r(o,e[a],a<i?t[a]:void 0);return o}function an(e){return jo(e)?e:[]}function nn(e){return"function"==typeof e?e:Gs}function on(e,t){return To(e)?e:si(e,t)?[e]:Pi(us(e))}var sn=Na;function un(e,t,r){var a=e.length;return r=void 0===r?a:r,!t&&r>=a?e:Ha(e,t,r)}var cn=$t||function(e){return Ye.clearTimeout(e)};function ln(e,t){if(t)return e.slice();var r=e.length,a=Ue?Ue(r):new e.constructor(r);return e.copy(a),a}function hn(e){var t=new e.constructor(e.byteLength);return new Ee(t).set(new Ee(e)),t}function pn(e,t){var r=t?hn(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function gn(e,t){if(e!==t){var r=void 0!==e,a=null===e,n=e==e,i=Zo(e),o=void 0!==t,s=null===t,u=t==t,c=Zo(t);if(!s&&!c&&!i&&e>t||i&&o&&u&&!s&&!c||a&&o&&u||!r&&u||!n)return 1;if(!a&&!i&&!c&&e<t||c&&r&&n&&!a&&!i||s&&r&&n||!o&&n||!u)return-1}return 0}function fn(e,t,r,n){for(var i=-1,o=e.length,s=r.length,u=-1,c=t.length,l=ir(o-s,0),h=a(c+l),p=!n;++u<c;)h[u]=t[u];for(;++i<s;)(p||i<o)&&(h[r[i]]=e[i]);for(;l--;)h[u++]=e[i++];return h}function bn(e,t,r,n){for(var i=-1,o=e.length,s=-1,u=r.length,c=-1,l=t.length,h=ir(o-u,0),p=a(h+l),g=!n;++i<h;)p[i]=e[i];for(var f=i;++c<l;)p[f+c]=t[c];for(;++s<u;)(g||i<o)&&(p[f+r[s]]=e[i++]);return p}function dn(e,t){var r=-1,n=e.length;for(t||(t=a(n));++r<n;)t[r]=e[r];return t}function mn(e,t,r,a){var n=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var s=t[i],u=a?a(r[s],e[s],s,r,e):void 0;void 0===u&&(u=e[s]),n?Qr(r,s,u):Ur(r,s,u)}return r}function vn(e,t){return function(r,a){var n=To(r)?at:Yr,i=t?t():{};return n(r,e,$n(a,2),i)}}function yn(e){return Na((function(t,r){var a=-1,n=r.length,i=n>1?r[n-1]:void 0,o=n>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(n--,i):void 0,o&&oi(r[0],r[1],o)&&(i=n<3?void 0:i,n=1),t=fe(t);++a<n;){var s=r[a];s&&e(t,s,a,i)}return t}))}function Sn(e,t){return function(r,a){if(null==r)return r;if(!No(r))return e(r,a);for(var n=r.length,i=t?n:-1,o=fe(r);(t?i--:++i<n)&&!1!==a(o[i],i,o););return r}}function Dn(e){return function(t,r,a){for(var n=-1,i=fe(t),o=a(t),s=o.length;s--;){var u=o[e?s:++n];if(!1===r(i[u],u,i))break}return t}}function wn(e){return function(t){var r=jt(t=us(t))?Yt(t):void 0,a=r?r[0]:t.charAt(0),n=r?un(r,1).join(""):t.slice(1);return a[e]()+n}}function Fn(e){return function(t){return pt(Ls(_s(t).replace(Ce,"")),e,"")}}function Wn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Vr(e.prototype),a=e.apply(r,t);return Yo(a)?a:r}}function Pn(e){return function(t,r,a){var n=fe(t);if(!No(t)){var i=$n(r,3);t=Ds(t),r=function(e){return i(n[e],e,n)}}var o=e(t,r,a);return o>-1?n[i?t[o]:o]:void 0}}function xn(e){return Hn((function(t){var r=t.length,a=r,i=Or.prototype.thru;for(e&&t.reverse();a--;){var o=t[a];if("function"!=typeof o)throw new me(n);if(i&&!s&&"wrapper"==Gn(o))var s=new Or([],!0)}for(a=s?a:r;++a<r;){var u=Gn(o=t[a]),c="wrapper"==u?Qn(o):void 0;s=c&&ui(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?s[Gn(c[0])].apply(s,c[3]):1==o.length&&ui(o)?s[u]():s.thru(o)}return function(){var e=arguments,a=e[0];if(s&&1==e.length&&To(a))return s.plant(a).value();for(var n=0,i=r?t[n].apply(this,e):a;++n<r;)i=t[n].call(this,i);return i}}))}function Mn(e,t,r,n,i,o,s,u,c,l){var h=128&t,p=1&t,g=2&t,f=24&t,b=512&t,d=g?void 0:Wn(e);return function m(){for(var v=arguments.length,y=a(v),S=v;S--;)y[S]=arguments[S];if(f)var D=qn(m),w=_t(y,D);if(n&&(y=fn(y,n,i,f)),o&&(y=bn(y,o,s,f)),v-=w,f&&v<l){var F=zt(y,D);return Tn(e,t,Mn,m.placeholder,r,y,F,u,c,l-v)}var W=p?r:this,P=g?W[e]:e;return v=y.length,u?y=bi(y,u):b&&v>1&&y.reverse(),h&&c<v&&(y.length=c),this&&this!==Ye&&this instanceof m&&(P=d||Wn(P)),P.apply(W,y)}}function Vn(e,t){return function(r,a){return function(e,t,r,a){return sa(e,(function(e,n,i){t(a,r(e),n,i)})),a}(r,e,t(a),{})}}function Cn(e,t){return function(r,a){var n;if(void 0===r&&void 0===a)return t;if(void 0!==r&&(n=r),void 0!==a){if(void 0===n)return a;"string"==typeof r||"string"==typeof a?(r=$a(r),a=$a(a)):(r=qa(r),a=qa(a)),n=e(r,a)}return n}}function On(e){return Hn((function(t){return t=lt(t,Vt($n())),Na((function(r){var a=this;return e(t,(function(e){return rt(e,a,r)}))}))}))}function kn(e,t){var r=(t=void 0===t?" ":$a(t)).length;if(r<2)return r?Ia(t,e):t;var a=Ia(t,Zt(e/Ht(t)));return jt(t)?un(Yt(a),0,e).join(""):a.slice(0,e)}function Rn(e){return function(t,r,n){return n&&"number"!=typeof n&&oi(t,r,n)&&(r=n=void 0),t=as(t),void 0===r?(r=t,t=0):r=as(r),function(e,t,r,n){for(var i=-1,o=ir(Zt((t-e)/(r||1)),0),s=a(o);o--;)s[n?o:++i]=e,e+=r;return s}(t,r,n=void 0===n?t<r?1:-1:as(n),e)}}function _n(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=os(t),r=os(r)),e(t,r)}}function Tn(e,t,r,a,n,i,o,s,u,c){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var h=[e,t,n,l?i:void 0,l?o:void 0,l?void 0:i,l?void 0:o,s,u,c],p=r.apply(void 0,h);return ui(e)&&mi(p,h),p.placeholder=a,Si(p,e,t)}function In(e){var t=ge[e];return function(e,r){if(e=os(e),(r=null==r?0:or(ns(r),292))&&rr(e)){var a=(us(e)+"e").split("e");return+((a=(us(t(a[0]+"e"+(+a[1]+r)))+"e").split("e"))[0]+"e"+(+a[1]-r))}return t(e)}}var Nn=fr&&1/Lt(new fr([,-0]))[1]==1/0?function(e){return new fr(e)}:Zs;function jn(e){return function(t){var r=ti(t);return r==f?At(t):r==v?Ut(t):function(e,t){return lt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function An(e,t,r,o,s,u,c,l){var h=2&t;if(!h&&"function"!=typeof e)throw new me(n);var p=o?o.length:0;if(p||(t&=-97,o=s=void 0),c=void 0===c?c:ir(ns(c),0),l=void 0===l?l:ns(l),p-=s?s.length:0,64&t){var g=o,f=s;o=s=void 0}var b=h?void 0:Qn(e),d=[e,t,r,o,s,g,f,u,c,l];if(b&&function(e,t){var r=e[1],a=t[1],n=r|a;if(!(n<131||128==a&&8==r||128==a&&256==r&&e[7].length<=t[8]||384==a&&t[7].length<=t[8]&&8==r))return e;1&a&&(e[2]=t[2],n|=1&r?0:4);var o=t[3];if(o){var s=e[3];e[3]=s?fn(s,o,t[4]):o,e[4]=s?zt(e[3],i):t[4]}(o=t[5])&&(e[5]=(s=e[5])?bn(s,o,t[6]):o,e[6]=s?zt(e[5],i):t[6]),(o=t[7])&&(e[7]=o),128&a&&(e[8]=null==e[8]?t[8]:or(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=n}(d,b),e=d[0],t=d[1],r=d[2],o=d[3],s=d[4],!(l=d[9]=void 0===d[9]?h?0:e.length:ir(d[9]-p,0))&&24&t&&(t&=-25),t&&1!=t)m=8==t||16==t?function(e,t,r){var n=Wn(e);return function i(){for(var o=arguments.length,s=a(o),u=o,c=qn(i);u--;)s[u]=arguments[u];var l=o<3&&s[0]!==c&&s[o-1]!==c?[]:zt(s,c);if((o-=l.length)<r)return Tn(e,t,Mn,i.placeholder,void 0,s,l,void 0,void 0,r-o);var h=this&&this!==Ye&&this instanceof i?n:e;return rt(h,this,s)}}(e,t,l):32!=t&&33!=t||s.length?Mn.apply(void 0,d):function(e,t,r,n){var i=1&t,o=Wn(e);return function t(){for(var s=-1,u=arguments.length,c=-1,l=n.length,h=a(l+u),p=this&&this!==Ye&&this instanceof t?o:e;++c<l;)h[c]=n[c];for(;u--;)h[c++]=arguments[++s];return rt(p,i?r:this,h)}}(e,t,r,o);else var m=function(e,t,r){var a=1&t,n=Wn(e);return function t(){var i=this&&this!==Ye&&this instanceof t?n:e;return i.apply(a?r:this,arguments)}}(e,t,r);return Si((b?za:mi)(m,d),e,t)}function En(e,t,r,a){return void 0===e||Oo(e,ye[r])&&!we.call(a,r)?t:e}function zn(e,t,r,a,n,i){return Yo(e)&&Yo(t)&&(i.set(t,e),Va(e,t,void 0,zn,i),i.delete(t)),e}function Ln(e){return qo(e)?void 0:e}function Un(e,t,r,a,n,i){var o=1&r,s=e.length,u=t.length;if(s!=u&&!(o&&u>s))return!1;var c=i.get(e),l=i.get(t);if(c&&l)return c==t&&l==e;var h=-1,p=!0,g=2&r?new Ir:void 0;for(i.set(e,t),i.set(t,e);++h<s;){var f=e[h],b=t[h];if(a)var d=o?a(b,f,h,t,e,i):a(f,b,h,e,t,i);if(void 0!==d){if(d)continue;p=!1;break}if(g){if(!ft(t,(function(e,t){if(!Ot(g,t)&&(f===e||n(f,e,r,a,i)))return g.push(t)}))){p=!1;break}}else if(f!==b&&!n(f,b,r,a,i)){p=!1;break}}return i.delete(e),i.delete(t),p}function Hn(e){return yi(gi(e,void 0,Ti),e+"")}function Yn(e){return ha(e,Ds,Jn)}function Bn(e){return ha(e,ws,ei)}var Qn=mr?function(e){return mr.get(e)}:Zs;function Gn(e){for(var t=e.name+"",r=vr[t],a=we.call(vr,t)?r.length:0;a--;){var n=r[a],i=n.func;if(null==i||i==e)return n.name}return t}function qn(e){return(we.call(Mr,"placeholder")?Mr:e).placeholder}function $n(){var e=Mr.iteratee||qs;return e=e===qs?wa:e,arguments.length?e(arguments[0],arguments[1]):e}function Kn(e,t){var r,a,n=e.__data__;return("string"==(a=typeof(r=t))||"number"==a||"symbol"==a||"boolean"==a?"__proto__"!==r:null===r)?n["string"==typeof t?"string":"hash"]:n.map}function Xn(e){for(var t=Ds(e),r=t.length;r--;){var a=t[r],n=e[a];t[r]=[a,n,hi(n)]}return t}function Zn(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Da(r)?r:void 0}var Jn=er?function(e){return null==e?[]:(e=fe(e),st(er(e),(function(t){return Qe.call(e,t)})))}:iu,ei=er?function(e){for(var t=[];e;)ht(t,Jn(e)),e=He(e);return t}:iu,ti=pa;function ri(e,t,r){for(var a=-1,n=(t=on(t,e)).length,i=!1;++a<n;){var o=xi(t[a]);if(!(i=null!=e&&r(e,o)))break;e=e[o]}return i||++a!=n?i:!!(n=null==e?0:e.length)&&Ho(n)&&ii(o,n)&&(To(e)||_o(e))}function ai(e){return"function"!=typeof e.constructor||li(e)?{}:Vr(He(e))}function ni(e){return To(e)||_o(e)||!!($e&&e&&e[$e])}function ii(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&se.test(e))&&e>-1&&e%1==0&&e<t}function oi(e,t,r){if(!Yo(r))return!1;var a=typeof t;return!!("number"==a?No(r)&&ii(t,r.length):"string"==a&&t in r)&&Oo(r[t],e)}function si(e,t){if(To(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Zo(e))||H.test(e)||!U.test(e)||null!=t&&e in fe(t)}function ui(e){var t=Gn(e),r=Mr[t];if("function"!=typeof r||!(t in kr.prototype))return!1;if(e===r)return!0;var a=Qn(r);return!!a&&e===a[0]}(hr&&ti(new hr(new ArrayBuffer(1)))!=F||pr&&ti(new pr)!=f||gr&&"[object Promise]"!=ti(gr.resolve())||fr&&ti(new fr)!=v||br&&ti(new br)!=D)&&(ti=function(e){var t=pa(e),r=t==d?e.constructor:void 0,a=r?Mi(r):"";if(a)switch(a){case yr:return F;case Sr:return f;case Dr:return"[object Promise]";case wr:return v;case Fr:return D}return t});var ci=Se?Lo:ou;function li(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ye)}function hi(e){return e==e&&!Yo(e)}function pi(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in fe(r))}}function gi(e,t,r){return t=ir(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=ir(n.length-t,0),s=a(o);++i<o;)s[i]=n[t+i];i=-1;for(var u=a(t+1);++i<t;)u[i]=n[i];return u[t]=r(s),rt(e,this,u)}}function fi(e,t){return t.length<2?e:la(e,Ha(t,0,-1))}function bi(e,t){for(var r=e.length,a=or(t.length,r),n=dn(e);a--;){var i=t[a];e[a]=ii(i,r)?n[i]:void 0}return e}function di(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var mi=Di(za),vi=Xt||function(e,t){return Ye.setTimeout(e,t)},yi=Di(La);function Si(e,t,r){var a=t+"";return yi(e,function(e,t){var r=t.length;if(!r)return e;var a=r-1;return t[a]=(r>1?"& ":"")+t[a],t=t.join(r>2?", ":" "),e.replace($,"{\n/* [wrapped with "+t+"] */\n")}(a,function(e,t){return nt(o,(function(r){var a="_."+r[0];t&r[1]&&!ut(e,a)&&e.push(a)})),e.sort()}(function(e){var t=e.match(K);return t?t[1].split(X):[]}(a),r)))}function Di(e){var t=0,r=0;return function(){var a=sr(),n=16-(a-r);if(r=a,n>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function wi(e,t){var r=-1,a=e.length,n=a-1;for(t=void 0===t?a:t;++r<t;){var i=Ta(r,n),o=e[i];e[i]=e[r],e[r]=o}return e.length=t,e}var Fi,Wi,Pi=(Fi=Wo((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Y,(function(e,r,a,n){t.push(a?n.replace(ee,"$1"):r||e)})),t}),(function(e){return 500===Wi.size&&Wi.clear(),e})),Wi=Fi.cache,Fi);function xi(e){if("string"==typeof e||Zo(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Mi(e){if(null!=e){try{return De.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Vi(e){if(e instanceof kr)return e.clone();var t=new Or(e.__wrapped__,e.__chain__);return t.__actions__=dn(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ci=Na((function(e,t){return jo(e)?Zr(e,na(t,1,jo,!0)):[]})),Oi=Na((function(e,t){var r=Ei(t);return jo(r)&&(r=void 0),jo(e)?Zr(e,na(t,1,jo,!0),$n(r,2)):[]})),ki=Na((function(e,t){var r=Ei(t);return jo(r)&&(r=void 0),jo(e)?Zr(e,na(t,1,jo,!0),void 0,r):[]}));function Ri(e,t,r){var a=null==e?0:e.length;if(!a)return-1;var n=null==r?0:ns(r);return n<0&&(n=ir(a+n,0)),mt(e,$n(t,3),n)}function _i(e,t,r){var a=null==e?0:e.length;if(!a)return-1;var n=a-1;return void 0!==r&&(n=ns(r),n=r<0?ir(a+n,0):or(n,a-1)),mt(e,$n(t,3),n,!0)}function Ti(e){return null!=e&&e.length?na(e,1):[]}function Ii(e){return e&&e.length?e[0]:void 0}var Ni=Na((function(e){var t=lt(e,an);return t.length&&t[0]===e[0]?da(t):[]})),ji=Na((function(e){var t=Ei(e),r=lt(e,an);return t===Ei(r)?t=void 0:r.pop(),r.length&&r[0]===e[0]?da(r,$n(t,2)):[]})),Ai=Na((function(e){var t=Ei(e),r=lt(e,an);return(t="function"==typeof t?t:void 0)&&r.pop(),r.length&&r[0]===e[0]?da(r,void 0,t):[]}));function Ei(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var zi=Na(Li);function Li(e,t){return e&&e.length&&t&&t.length?Ra(e,t):e}var Ui=Hn((function(e,t){var r=null==e?0:e.length,a=Gr(e,t);return _a(e,lt(t,(function(e){return ii(e,r)?+e:e})).sort(gn)),a}));function Hi(e){return null==e?e:lr.call(e)}var Yi=Na((function(e){return Ka(na(e,1,jo,!0))})),Bi=Na((function(e){var t=Ei(e);return jo(t)&&(t=void 0),Ka(na(e,1,jo,!0),$n(t,2))})),Qi=Na((function(e){var t=Ei(e);return t="function"==typeof t?t:void 0,Ka(na(e,1,jo,!0),void 0,t)}));function Gi(e){if(!e||!e.length)return[];var t=0;return e=st(e,(function(e){if(jo(e))return t=ir(e.length,t),!0})),xt(t,(function(t){return lt(e,wt(t))}))}function qi(e,t){if(!e||!e.length)return[];var r=Gi(e);return null==t?r:lt(r,(function(e){return rt(t,void 0,e)}))}var $i=Na((function(e,t){return jo(e)?Zr(e,t):[]})),Ki=Na((function(e){return tn(st(e,jo))})),Xi=Na((function(e){var t=Ei(e);return jo(t)&&(t=void 0),tn(st(e,jo),$n(t,2))})),Zi=Na((function(e){var t=Ei(e);return t="function"==typeof t?t:void 0,tn(st(e,jo),void 0,t)})),Ji=Na(Gi),eo=Na((function(e){var t=e.length,r=t>1?e[t-1]:void 0;return r="function"==typeof r?(e.pop(),r):void 0,qi(e,r)}));function to(e){var t=Mr(e);return t.__chain__=!0,t}function ro(e,t){return t(e)}var ao=Hn((function(e){var t=e.length,r=t?e[0]:0,a=this.__wrapped__,n=function(t){return Gr(t,e)};return!(t>1||this.__actions__.length)&&a instanceof kr&&ii(r)?((a=a.slice(r,+r+(t?1:0))).__actions__.push({func:ro,args:[n],thisArg:void 0}),new Or(a,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(n)})),no=vn((function(e,t,r){we.call(e,r)?++e[r]:Qr(e,r,1)})),io=Pn(Ri),oo=Pn(_i);function so(e,t){return(To(e)?nt:Jr)(e,$n(t,3))}function uo(e,t){return(To(e)?it:ea)(e,$n(t,3))}var co=vn((function(e,t,r){we.call(e,r)?e[r].push(t):Qr(e,r,[t])})),lo=Na((function(e,t,r){var n=-1,i="function"==typeof t,o=No(e)?a(e.length):[];return Jr(e,(function(e){o[++n]=i?rt(t,e,r):ma(e,t,r)})),o})),ho=vn((function(e,t,r){Qr(e,r,t)}));function po(e,t){return(To(e)?lt:Pa)(e,$n(t,3))}var go=vn((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]})),fo=Na((function(e,t){if(null==e)return[];var r=t.length;return r>1&&oi(e,t[0],t[1])?t=[]:r>2&&oi(t[0],t[1],t[2])&&(t=[t[0]]),Oa(e,na(t,1),[])})),bo=Kt||function(){return Ye.Date.now()};function mo(e,t,r){return t=r?void 0:t,An(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function vo(e,t){var r;if("function"!=typeof t)throw new me(n);return e=ns(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=void 0),r}}var yo=Na((function(e,t,r){var a=1;if(r.length){var n=zt(r,qn(yo));a|=32}return An(e,a,t,r,n)})),So=Na((function(e,t,r){var a=3;if(r.length){var n=zt(r,qn(So));a|=32}return An(t,a,e,r,n)}));function Do(e,t,r){var a,i,o,s,u,c,l=0,h=!1,p=!1,g=!0;if("function"!=typeof e)throw new me(n);function f(t){var r=a,n=i;return a=i=void 0,l=t,s=e.apply(n,r)}function b(e){return l=e,u=vi(m,t),h?f(e):s}function d(e){var r=e-c;return void 0===c||r>=t||r<0||p&&e-l>=o}function m(){var e=bo();if(d(e))return v(e);u=vi(m,function(e){var r=t-(e-c);return p?or(r,o-(e-l)):r}(e))}function v(e){return u=void 0,g&&a?f(e):(a=i=void 0,s)}function y(){var e=bo(),r=d(e);if(a=arguments,i=this,c=e,r){if(void 0===u)return b(c);if(p)return cn(u),u=vi(m,t),f(c)}return void 0===u&&(u=vi(m,t)),s}return t=os(t)||0,Yo(r)&&(h=!!r.leading,o=(p="maxWait"in r)?ir(os(r.maxWait)||0,t):o,g="trailing"in r?!!r.trailing:g),y.cancel=function(){void 0!==u&&cn(u),l=0,a=c=i=u=void 0},y.flush=function(){return void 0===u?s:v(bo())},y}var wo=Na((function(e,t){return Xr(e,1,t)})),Fo=Na((function(e,t,r){return Xr(e,os(t)||0,r)}));function Wo(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new me(n);var r=function r(){var a=arguments,n=t?t.apply(this,a):a[0],i=r.cache;if(i.has(n))return i.get(n);var o=e.apply(this,a);return r.cache=i.set(n,o)||i,o};return r.cache=new(Wo.Cache||Tr),r}function Po(e){if("function"!=typeof e)throw new me(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Wo.Cache=Tr;var xo=sn((function(e,t){var r=(t=1==t.length&&To(t[0])?lt(t[0],Vt($n())):lt(na(t,1),Vt($n()))).length;return Na((function(a){for(var n=-1,i=or(a.length,r);++n<i;)a[n]=t[n].call(this,a[n]);return rt(e,this,a)}))})),Mo=Na((function(e,t){return An(e,32,void 0,t,zt(t,qn(Mo)))})),Vo=Na((function(e,t){return An(e,64,void 0,t,zt(t,qn(Vo)))})),Co=Hn((function(e,t){return An(e,256,void 0,void 0,void 0,t)}));function Oo(e,t){return e===t||e!=e&&t!=t}var ko=_n(ga),Ro=_n((function(e,t){return e>=t})),_o=va(function(){return arguments}())?va:function(e){return Bo(e)&&we.call(e,"callee")&&!Qe.call(e,"callee")},To=a.isArray,Io=Ke?Vt(Ke):function(e){return Bo(e)&&pa(e)==w};function No(e){return null!=e&&Ho(e.length)&&!Lo(e)}function jo(e){return Bo(e)&&No(e)}var Ao=tr||ou,Eo=Xe?Vt(Xe):function(e){return Bo(e)&&pa(e)==l};function zo(e){if(!Bo(e))return!1;var t=pa(e);return t==h||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!qo(e)}function Lo(e){if(!Yo(e))return!1;var t=pa(e);return t==p||t==g||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Uo(e){return"number"==typeof e&&e==ns(e)}function Ho(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Yo(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Bo(e){return null!=e&&"object"==typeof e}var Qo=Ze?Vt(Ze):function(e){return Bo(e)&&ti(e)==f};function Go(e){return"number"==typeof e||Bo(e)&&pa(e)==b}function qo(e){if(!Bo(e)||pa(e)!=d)return!1;var t=He(e);if(null===t)return!0;var r=we.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&De.call(r)==xe}var $o=Je?Vt(Je):function(e){return Bo(e)&&pa(e)==m},Ko=et?Vt(et):function(e){return Bo(e)&&ti(e)==v};function Xo(e){return"string"==typeof e||!To(e)&&Bo(e)&&pa(e)==y}function Zo(e){return"symbol"==typeof e||Bo(e)&&pa(e)==S}var Jo=tt?Vt(tt):function(e){return Bo(e)&&Ho(e.length)&&!!je[pa(e)]},es=_n(Wa),ts=_n((function(e,t){return e<=t}));function rs(e){if(!e)return[];if(No(e))return Xo(e)?Yt(e):dn(e);if(bt&&e[bt])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[bt]());var t=ti(e);return(t==f?At:t==v?Lt:Os)(e)}function as(e){return e?(e=os(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ns(e){var t=as(e),r=t%1;return t==t?r?t-r:t:0}function is(e){return e?qr(ns(e),0,4294967295):0}function os(e){if("number"==typeof e)return e;if(Zo(e))return NaN;if(Yo(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Yo(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Mt(e);var r=ne.test(e);return r||oe.test(e)?Le(e.slice(2),r?2:8):ae.test(e)?NaN:+e}function ss(e){return mn(e,ws(e))}function us(e){return null==e?"":$a(e)}var cs=yn((function(e,t){if(li(t)||No(t))mn(t,Ds(t),e);else for(var r in t)we.call(t,r)&&Ur(e,r,t[r])})),ls=yn((function(e,t){mn(t,ws(t),e)})),hs=yn((function(e,t,r,a){mn(t,ws(t),e,a)})),ps=yn((function(e,t,r,a){mn(t,Ds(t),e,a)})),gs=Hn(Gr),fs=Na((function(e,t){e=fe(e);var r=-1,a=t.length,n=a>2?t[2]:void 0;for(n&&oi(t[0],t[1],n)&&(a=1);++r<a;)for(var i=t[r],o=ws(i),s=-1,u=o.length;++s<u;){var c=o[s],l=e[c];(void 0===l||Oo(l,ye[c])&&!we.call(e,c))&&(e[c]=i[c])}return e})),bs=Na((function(e){return e.push(void 0,zn),rt(Ws,void 0,e)}));function ds(e,t,r){var a=null==e?void 0:la(e,t);return void 0===a?r:a}function ms(e,t){return null!=e&&ri(e,t,ba)}var vs=Vn((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Pe.call(t)),e[t]=r}),Ys(Gs)),ys=Vn((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Pe.call(t)),we.call(e,t)?e[t].push(r):e[t]=[r]}),$n),Ss=Na(ma);function Ds(e){return No(e)?jr(e):Fa(e)}function ws(e){return No(e)?jr(e,!0):function(e){if(!Yo(e))return function(e){var t=[];if(null!=e)for(var r in fe(e))t.push(r);return t}(e);var t=li(e),r=[];for(var a in e)("constructor"!=a||!t&&we.call(e,a))&&r.push(a);return r}(e)}var Fs=yn((function(e,t,r){Va(e,t,r)})),Ws=yn((function(e,t,r,a){Va(e,t,r,a)})),Ps=Hn((function(e,t){var r={};if(null==e)return r;var a=!1;t=lt(t,(function(t){return t=on(t,e),a||(a=t.length>1),t})),mn(e,Bn(e),r),a&&(r=$r(r,7,Ln));for(var n=t.length;n--;)Xa(r,t[n]);return r})),xs=Hn((function(e,t){return null==e?{}:function(e,t){return ka(e,t,(function(t,r){return ms(e,r)}))}(e,t)}));function Ms(e,t){if(null==e)return{};var r=lt(Bn(e),(function(e){return[e]}));return t=$n(t),ka(e,r,(function(e,r){return t(e,r[0])}))}var Vs=jn(Ds),Cs=jn(ws);function Os(e){return null==e?[]:Ct(e,Ds(e))}var ks=Fn((function(e,t,r){return t=t.toLowerCase(),e+(r?Rs(t):t)}));function Rs(e){return zs(us(e).toLowerCase())}function _s(e){return(e=us(e))&&e.replace(ue,Tt).replace(Oe,"")}var Ts=Fn((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),Is=Fn((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Ns=wn("toLowerCase"),js=Fn((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()})),As=Fn((function(e,t,r){return e+(r?" ":"")+zs(t)})),Es=Fn((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),zs=wn("toUpperCase");function Ls(e,t,r){return e=us(e),void 0===(t=r?void 0:t)?function(e){return Te.test(e)}(e)?function(e){return e.match(Re)||[]}(e):function(e){return e.match(Z)||[]}(e):e.match(t)||[]}var Us=Na((function(e,t){try{return rt(e,void 0,t)}catch(r){return zo(r)?r:new he(r)}})),Hs=Hn((function(e,t){return nt(t,(function(t){t=xi(t),Qr(e,t,yo(e[t],e))})),e}));function Ys(e){return function(){return e}}var Bs=xn(),Qs=xn(!0);function Gs(e){return e}function qs(e){return wa("function"==typeof e?e:$r(e,1))}var $s=Na((function(e,t){return function(r){return ma(r,e,t)}})),Ks=Na((function(e,t){return function(r){return ma(e,r,t)}}));function Xs(e,t,r){var a=Ds(t),n=ca(t,a);null!=r||Yo(t)&&(n.length||!a.length)||(r=t,t=e,e=this,n=ca(t,Ds(t)));var i=!(Yo(r)&&"chain"in r&&!r.chain),o=Lo(e);return nt(n,(function(r){var a=t[r];e[r]=a,o&&(e.prototype[r]=function(){var t=this.__chain__;if(i||t){var r=e(this.__wrapped__),n=r.__actions__=dn(this.__actions__);return n.push({func:a,args:arguments,thisArg:e}),r.__chain__=t,r}return a.apply(e,ht([this.value()],arguments))})})),e}function Zs(){}var Js=On(lt),eu=On(ot),tu=On(ft);function ru(e){return si(e)?wt(xi(e)):function(e){return function(t){return la(t,e)}}(e)}var au=Rn(),nu=Rn(!0);function iu(){return[]}function ou(){return!1}var su,uu=Cn((function(e,t){return e+t}),0),cu=In("ceil"),lu=Cn((function(e,t){return e/t}),1),hu=In("floor"),pu=Cn((function(e,t){return e*t}),1),gu=In("round"),fu=Cn((function(e,t){return e-t}),0);return Mr.after=function(e,t){if("function"!=typeof t)throw new me(n);return e=ns(e),function(){if(--e<1)return t.apply(this,arguments)}},Mr.ary=mo,Mr.assign=cs,Mr.assignIn=ls,Mr.assignInWith=hs,Mr.assignWith=ps,Mr.at=gs,Mr.before=vo,Mr.bind=yo,Mr.bindAll=Hs,Mr.bindKey=So,Mr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return To(e)?e:[e]},Mr.chain=to,Mr.chunk=function(e,t,r){t=(r?oi(e,t,r):void 0===t)?1:ir(ns(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var i=0,o=0,s=a(Zt(n/t));i<n;)s[o++]=Ha(e,i,i+=t);return s},Mr.compact=function(e){for(var t=-1,r=null==e?0:e.length,a=0,n=[];++t<r;){var i=e[t];i&&(n[a++]=i)}return n},Mr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=a(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return ht(To(r)?dn(r):[r],na(t,1))},Mr.cond=function(e){var t=null==e?0:e.length,r=$n();return e=t?lt(e,(function(e){if("function"!=typeof e[1])throw new me(n);return[r(e[0]),e[1]]})):[],Na((function(r){for(var a=-1;++a<t;){var n=e[a];if(rt(n[0],this,r))return rt(n[1],this,r)}}))},Mr.conforms=function(e){return function(e){var t=Ds(e);return function(r){return Kr(r,e,t)}}($r(e,1))},Mr.constant=Ys,Mr.countBy=no,Mr.create=function(e,t){var r=Vr(e);return null==t?r:Br(r,t)},Mr.curry=function e(t,r,a){var n=An(t,8,void 0,void 0,void 0,void 0,void 0,r=a?void 0:r);return n.placeholder=e.placeholder,n},Mr.curryRight=function e(t,r,a){var n=An(t,16,void 0,void 0,void 0,void 0,void 0,r=a?void 0:r);return n.placeholder=e.placeholder,n},Mr.debounce=Do,Mr.defaults=fs,Mr.defaultsDeep=bs,Mr.defer=wo,Mr.delay=Fo,Mr.difference=Ci,Mr.differenceBy=Oi,Mr.differenceWith=ki,Mr.drop=function(e,t,r){var a=null==e?0:e.length;return a?Ha(e,(t=r||void 0===t?1:ns(t))<0?0:t,a):[]},Mr.dropRight=function(e,t,r){var a=null==e?0:e.length;return a?Ha(e,0,(t=a-(t=r||void 0===t?1:ns(t)))<0?0:t):[]},Mr.dropRightWhile=function(e,t){return e&&e.length?Ja(e,$n(t,3),!0,!0):[]},Mr.dropWhile=function(e,t){return e&&e.length?Ja(e,$n(t,3),!0):[]},Mr.fill=function(e,t,r,a){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&oi(e,t,r)&&(r=0,a=n),function(e,t,r,a){var n=e.length;for((r=ns(r))<0&&(r=-r>n?0:n+r),(a=void 0===a||a>n?n:ns(a))<0&&(a+=n),a=r>a?0:is(a);r<a;)e[r++]=t;return e}(e,t,r,a)):[]},Mr.filter=function(e,t){return(To(e)?st:aa)(e,$n(t,3))},Mr.flatMap=function(e,t){return na(po(e,t),1)},Mr.flatMapDeep=function(e,t){return na(po(e,t),1/0)},Mr.flatMapDepth=function(e,t,r){return r=void 0===r?1:ns(r),na(po(e,t),r)},Mr.flatten=Ti,Mr.flattenDeep=function(e){return null!=e&&e.length?na(e,1/0):[]},Mr.flattenDepth=function(e,t){return null!=e&&e.length?na(e,t=void 0===t?1:ns(t)):[]},Mr.flip=function(e){return An(e,512)},Mr.flow=Bs,Mr.flowRight=Qs,Mr.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,a={};++t<r;){var n=e[t];a[n[0]]=n[1]}return a},Mr.functions=function(e){return null==e?[]:ca(e,Ds(e))},Mr.functionsIn=function(e){return null==e?[]:ca(e,ws(e))},Mr.groupBy=co,Mr.initial=function(e){return null!=e&&e.length?Ha(e,0,-1):[]},Mr.intersection=Ni,Mr.intersectionBy=ji,Mr.intersectionWith=Ai,Mr.invert=vs,Mr.invertBy=ys,Mr.invokeMap=lo,Mr.iteratee=qs,Mr.keyBy=ho,Mr.keys=Ds,Mr.keysIn=ws,Mr.map=po,Mr.mapKeys=function(e,t){var r={};return t=$n(t,3),sa(e,(function(e,a,n){Qr(r,t(e,a,n),e)})),r},Mr.mapValues=function(e,t){var r={};return t=$n(t,3),sa(e,(function(e,a,n){Qr(r,a,t(e,a,n))})),r},Mr.matches=function(e){return xa($r(e,1))},Mr.matchesProperty=function(e,t){return Ma(e,$r(t,1))},Mr.memoize=Wo,Mr.merge=Fs,Mr.mergeWith=Ws,Mr.method=$s,Mr.methodOf=Ks,Mr.mixin=Xs,Mr.negate=Po,Mr.nthArg=function(e){return e=ns(e),Na((function(t){return Ca(t,e)}))},Mr.omit=Ps,Mr.omitBy=function(e,t){return Ms(e,Po($n(t)))},Mr.once=function(e){return vo(2,e)},Mr.orderBy=function(e,t,r,a){return null==e?[]:(To(t)||(t=null==t?[]:[t]),To(r=a?void 0:r)||(r=null==r?[]:[r]),Oa(e,t,r))},Mr.over=Js,Mr.overArgs=xo,Mr.overEvery=eu,Mr.overSome=tu,Mr.partial=Mo,Mr.partialRight=Vo,Mr.partition=go,Mr.pick=xs,Mr.pickBy=Ms,Mr.property=ru,Mr.propertyOf=function(e){return function(t){return null==e?void 0:la(e,t)}},Mr.pull=zi,Mr.pullAll=Li,Mr.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?Ra(e,t,$n(r,2)):e},Mr.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?Ra(e,t,void 0,r):e},Mr.pullAt=Ui,Mr.range=au,Mr.rangeRight=nu,Mr.rearg=Co,Mr.reject=function(e,t){return(To(e)?st:aa)(e,Po($n(t,3)))},Mr.remove=function(e,t){var r=[];if(!e||!e.length)return r;var a=-1,n=[],i=e.length;for(t=$n(t,3);++a<i;){var o=e[a];t(o,a,e)&&(r.push(o),n.push(a))}return _a(e,n),r},Mr.rest=function(e,t){if("function"!=typeof e)throw new me(n);return Na(e,t=void 0===t?t:ns(t))},Mr.reverse=Hi,Mr.sampleSize=function(e,t,r){return t=(r?oi(e,t,r):void 0===t)?1:ns(t),(To(e)?Er:Aa)(e,t)},Mr.set=function(e,t,r){return null==e?e:Ea(e,t,r)},Mr.setWith=function(e,t,r,a){return a="function"==typeof a?a:void 0,null==e?e:Ea(e,t,r,a)},Mr.shuffle=function(e){return(To(e)?zr:Ua)(e)},Mr.slice=function(e,t,r){var a=null==e?0:e.length;return a?(r&&"number"!=typeof r&&oi(e,t,r)?(t=0,r=a):(t=null==t?0:ns(t),r=void 0===r?a:ns(r)),Ha(e,t,r)):[]},Mr.sortBy=fo,Mr.sortedUniq=function(e){return e&&e.length?Ga(e):[]},Mr.sortedUniqBy=function(e,t){return e&&e.length?Ga(e,$n(t,2)):[]},Mr.split=function(e,t,r){return r&&"number"!=typeof r&&oi(e,t,r)&&(t=r=void 0),(r=void 0===r?4294967295:r>>>0)?(e=us(e))&&("string"==typeof t||null!=t&&!$o(t))&&!(t=$a(t))&&jt(e)?un(Yt(e),0,r):e.split(t,r):[]},Mr.spread=function(e,t){if("function"!=typeof e)throw new me(n);return t=null==t?0:ir(ns(t),0),Na((function(r){var a=r[t],n=un(r,0,t);return a&&ht(n,a),rt(e,this,n)}))},Mr.tail=function(e){var t=null==e?0:e.length;return t?Ha(e,1,t):[]},Mr.take=function(e,t,r){return e&&e.length?Ha(e,0,(t=r||void 0===t?1:ns(t))<0?0:t):[]},Mr.takeRight=function(e,t,r){var a=null==e?0:e.length;return a?Ha(e,(t=a-(t=r||void 0===t?1:ns(t)))<0?0:t,a):[]},Mr.takeRightWhile=function(e,t){return e&&e.length?Ja(e,$n(t,3),!1,!0):[]},Mr.takeWhile=function(e,t){return e&&e.length?Ja(e,$n(t,3)):[]},Mr.tap=function(e,t){return t(e),e},Mr.throttle=function(e,t,r){var a=!0,i=!0;if("function"!=typeof e)throw new me(n);return Yo(r)&&(a="leading"in r?!!r.leading:a,i="trailing"in r?!!r.trailing:i),Do(e,t,{leading:a,maxWait:t,trailing:i})},Mr.thru=ro,Mr.toArray=rs,Mr.toPairs=Vs,Mr.toPairsIn=Cs,Mr.toPath=function(e){return To(e)?lt(e,xi):Zo(e)?[e]:dn(Pi(us(e)))},Mr.toPlainObject=ss,Mr.transform=function(e,t,r){var a=To(e),n=a||Ao(e)||Jo(e);if(t=$n(t,4),null==r){var i=e&&e.constructor;r=n?a?new i:[]:Yo(e)&&Lo(i)?Vr(He(e)):{}}return(n?nt:sa)(e,(function(e,a,n){return t(r,e,a,n)})),r},Mr.unary=function(e){return mo(e,1)},Mr.union=Yi,Mr.unionBy=Bi,Mr.unionWith=Qi,Mr.uniq=function(e){return e&&e.length?Ka(e):[]},Mr.uniqBy=function(e,t){return e&&e.length?Ka(e,$n(t,2)):[]},Mr.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Ka(e,void 0,t):[]},Mr.unset=function(e,t){return null==e||Xa(e,t)},Mr.unzip=Gi,Mr.unzipWith=qi,Mr.update=function(e,t,r){return null==e?e:Za(e,t,nn(r))},Mr.updateWith=function(e,t,r,a){return a="function"==typeof a?a:void 0,null==e?e:Za(e,t,nn(r),a)},Mr.values=Os,Mr.valuesIn=function(e){return null==e?[]:Ct(e,ws(e))},Mr.without=$i,Mr.words=Ls,Mr.wrap=function(e,t){return Mo(nn(t),e)},Mr.xor=Ki,Mr.xorBy=Xi,Mr.xorWith=Zi,Mr.zip=Ji,Mr.zipObject=function(e,t){return rn(e||[],t||[],Ur)},Mr.zipObjectDeep=function(e,t){return rn(e||[],t||[],Ea)},Mr.zipWith=eo,Mr.entries=Vs,Mr.entriesIn=Cs,Mr.extend=ls,Mr.extendWith=hs,Xs(Mr,Mr),Mr.add=uu,Mr.attempt=Us,Mr.camelCase=ks,Mr.capitalize=Rs,Mr.ceil=cu,Mr.clamp=function(e,t,r){return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=os(r))==r?r:0),void 0!==t&&(t=(t=os(t))==t?t:0),qr(os(e),t,r)},Mr.clone=function(e){return $r(e,4)},Mr.cloneDeep=function(e){return $r(e,5)},Mr.cloneDeepWith=function(e,t){return $r(e,5,t="function"==typeof t?t:void 0)},Mr.cloneWith=function(e,t){return $r(e,4,t="function"==typeof t?t:void 0)},Mr.conformsTo=function(e,t){return null==t||Kr(e,t,Ds(t))},Mr.deburr=_s,Mr.defaultTo=function(e,t){return null==e||e!=e?t:e},Mr.divide=lu,Mr.endsWith=function(e,t,r){e=us(e),t=$a(t);var a=e.length,n=r=void 0===r?a:qr(ns(r),0,a);return(r-=t.length)>=0&&e.slice(r,n)==t},Mr.eq=Oo,Mr.escape=function(e){return(e=us(e))&&A.test(e)?e.replace(N,It):e},Mr.escapeRegExp=function(e){return(e=us(e))&&Q.test(e)?e.replace(B,"\\$&"):e},Mr.every=function(e,t,r){var a=To(e)?ot:ta;return r&&oi(e,t,r)&&(t=void 0),a(e,$n(t,3))},Mr.find=io,Mr.findIndex=Ri,Mr.findKey=function(e,t){return dt(e,$n(t,3),sa)},Mr.findLast=oo,Mr.findLastIndex=_i,Mr.findLastKey=function(e,t){return dt(e,$n(t,3),ua)},Mr.floor=hu,Mr.forEach=so,Mr.forEachRight=uo,Mr.forIn=function(e,t){return null==e?e:ia(e,$n(t,3),ws)},Mr.forInRight=function(e,t){return null==e?e:oa(e,$n(t,3),ws)},Mr.forOwn=function(e,t){return e&&sa(e,$n(t,3))},Mr.forOwnRight=function(e,t){return e&&ua(e,$n(t,3))},Mr.get=ds,Mr.gt=ko,Mr.gte=Ro,Mr.has=function(e,t){return null!=e&&ri(e,t,fa)},Mr.hasIn=ms,Mr.head=Ii,Mr.identity=Gs,Mr.includes=function(e,t,r,a){e=No(e)?e:Os(e),r=r&&!a?ns(r):0;var n=e.length;return r<0&&(r=ir(n+r,0)),Xo(e)?r<=n&&e.indexOf(t,r)>-1:!!n&&vt(e,t,r)>-1},Mr.indexOf=function(e,t,r){var a=null==e?0:e.length;if(!a)return-1;var n=null==r?0:ns(r);return n<0&&(n=ir(a+n,0)),vt(e,t,n)},Mr.inRange=function(e,t,r){return t=as(t),void 0===r?(r=t,t=0):r=as(r),function(e,t,r){return e>=or(t,r)&&e<ir(t,r)}(e=os(e),t,r)},Mr.invoke=Ss,Mr.isArguments=_o,Mr.isArray=To,Mr.isArrayBuffer=Io,Mr.isArrayLike=No,Mr.isArrayLikeObject=jo,Mr.isBoolean=function(e){return!0===e||!1===e||Bo(e)&&pa(e)==c},Mr.isBuffer=Ao,Mr.isDate=Eo,Mr.isElement=function(e){return Bo(e)&&1===e.nodeType&&!qo(e)},Mr.isEmpty=function(e){if(null==e)return!0;if(No(e)&&(To(e)||"string"==typeof e||"function"==typeof e.splice||Ao(e)||Jo(e)||_o(e)))return!e.length;var t=ti(e);if(t==f||t==v)return!e.size;if(li(e))return!Fa(e).length;for(var r in e)if(we.call(e,r))return!1;return!0},Mr.isEqual=function(e,t){return ya(e,t)},Mr.isEqualWith=function(e,t,r){var a=(r="function"==typeof r?r:void 0)?r(e,t):void 0;return void 0===a?ya(e,t,void 0,r):!!a},Mr.isError=zo,Mr.isFinite=function(e){return"number"==typeof e&&rr(e)},Mr.isFunction=Lo,Mr.isInteger=Uo,Mr.isLength=Ho,Mr.isMap=Qo,Mr.isMatch=function(e,t){return e===t||Sa(e,t,Xn(t))},Mr.isMatchWith=function(e,t,r){return r="function"==typeof r?r:void 0,Sa(e,t,Xn(t),r)},Mr.isNaN=function(e){return Go(e)&&e!=+e},Mr.isNative=function(e){if(ci(e))throw new he("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Da(e)},Mr.isNil=function(e){return null==e},Mr.isNull=function(e){return null===e},Mr.isNumber=Go,Mr.isObject=Yo,Mr.isObjectLike=Bo,Mr.isPlainObject=qo,Mr.isRegExp=$o,Mr.isSafeInteger=function(e){return Uo(e)&&e>=-9007199254740991&&e<=9007199254740991},Mr.isSet=Ko,Mr.isString=Xo,Mr.isSymbol=Zo,Mr.isTypedArray=Jo,Mr.isUndefined=function(e){return void 0===e},Mr.isWeakMap=function(e){return Bo(e)&&ti(e)==D},Mr.isWeakSet=function(e){return Bo(e)&&"[object WeakSet]"==pa(e)},Mr.join=function(e,t){return null==e?"":ar.call(e,t)},Mr.kebabCase=Ts,Mr.last=Ei,Mr.lastIndexOf=function(e,t,r){var a=null==e?0:e.length;if(!a)return-1;var n=a;return void 0!==r&&(n=(n=ns(r))<0?ir(a+n,0):or(n,a-1)),t==t?function(e,t,r){for(var a=r+1;a--;)if(e[a]===t)return a;return a}(e,t,n):mt(e,St,n,!0)},Mr.lowerCase=Is,Mr.lowerFirst=Ns,Mr.lt=es,Mr.lte=ts,Mr.max=function(e){return e&&e.length?ra(e,Gs,ga):void 0},Mr.maxBy=function(e,t){return e&&e.length?ra(e,$n(t,2),ga):void 0},Mr.mean=function(e){return Dt(e,Gs)},Mr.meanBy=function(e,t){return Dt(e,$n(t,2))},Mr.min=function(e){return e&&e.length?ra(e,Gs,Wa):void 0},Mr.minBy=function(e,t){return e&&e.length?ra(e,$n(t,2),Wa):void 0},Mr.stubArray=iu,Mr.stubFalse=ou,Mr.stubObject=function(){return{}},Mr.stubString=function(){return""},Mr.stubTrue=function(){return!0},Mr.multiply=pu,Mr.nth=function(e,t){return e&&e.length?Ca(e,ns(t)):void 0},Mr.noConflict=function(){return Ye._===this&&(Ye._=Me),this},Mr.noop=Zs,Mr.now=bo,Mr.pad=function(e,t,r){e=us(e);var a=(t=ns(t))?Ht(e):0;if(!t||a>=t)return e;var n=(t-a)/2;return kn(Jt(n),r)+e+kn(Zt(n),r)},Mr.padEnd=function(e,t,r){e=us(e);var a=(t=ns(t))?Ht(e):0;return t&&a<t?e+kn(t-a,r):e},Mr.padStart=function(e,t,r){e=us(e);var a=(t=ns(t))?Ht(e):0;return t&&a<t?kn(t-a,r)+e:e},Mr.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),ur(us(e).replace(G,""),t||0)},Mr.random=function(e,t,r){if(r&&"boolean"!=typeof r&&oi(e,t,r)&&(t=r=void 0),void 0===r&&("boolean"==typeof t?(r=t,t=void 0):"boolean"==typeof e&&(r=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=as(e),void 0===t?(t=e,e=0):t=as(t)),e>t){var a=e;e=t,t=a}if(r||e%1||t%1){var n=cr();return or(e+n*(t-e+ze("1e-"+((n+"").length-1))),t)}return Ta(e,t)},Mr.reduce=function(e,t,r){var a=To(e)?pt:Wt,n=arguments.length<3;return a(e,$n(t,4),r,n,Jr)},Mr.reduceRight=function(e,t,r){var a=To(e)?gt:Wt,n=arguments.length<3;return a(e,$n(t,4),r,n,ea)},Mr.repeat=function(e,t,r){return t=(r?oi(e,t,r):void 0===t)?1:ns(t),Ia(us(e),t)},Mr.replace=function(){var e=arguments,t=us(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Mr.result=function(e,t,r){var a=-1,n=(t=on(t,e)).length;for(n||(n=1,e=void 0);++a<n;){var i=null==e?void 0:e[xi(t[a])];void 0===i&&(a=n,i=r),e=Lo(i)?i.call(e):i}return e},Mr.round=gu,Mr.runInContext=e,Mr.sample=function(e){return(To(e)?Ar:ja)(e)},Mr.size=function(e){if(null==e)return 0;if(No(e))return Xo(e)?Ht(e):e.length;var t=ti(e);return t==f||t==v?e.size:Fa(e).length},Mr.snakeCase=js,Mr.some=function(e,t,r){var a=To(e)?ft:Ya;return r&&oi(e,t,r)&&(t=void 0),a(e,$n(t,3))},Mr.sortedIndex=function(e,t){return Ba(e,t)},Mr.sortedIndexBy=function(e,t,r){return Qa(e,t,$n(r,2))},Mr.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var a=Ba(e,t);if(a<r&&Oo(e[a],t))return a}return-1},Mr.sortedLastIndex=function(e,t){return Ba(e,t,!0)},Mr.sortedLastIndexBy=function(e,t,r){return Qa(e,t,$n(r,2),!0)},Mr.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var r=Ba(e,t,!0)-1;if(Oo(e[r],t))return r}return-1},Mr.startCase=As,Mr.startsWith=function(e,t,r){return e=us(e),r=null==r?0:qr(ns(r),0,e.length),t=$a(t),e.slice(r,r+t.length)==t},Mr.subtract=fu,Mr.sum=function(e){return e&&e.length?Pt(e,Gs):0},Mr.sumBy=function(e,t){return e&&e.length?Pt(e,$n(t,2)):0},Mr.template=function(e,t,r){var a=Mr.templateSettings;r&&oi(e,t,r)&&(t=void 0),e=us(e),t=hs({},t,a,En);var n,i,o=hs({},t.imports,a.imports,En),s=Ds(o),u=Ct(o,s),c=0,l=t.interpolate||ce,h="__p += '",p=be((t.escape||ce).source+"|"+l.source+"|"+(l===L?te:ce).source+"|"+(t.evaluate||ce).source+"|$","g"),g="//# sourceURL="+(we.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ne+"]")+"\n";e.replace(p,(function(t,r,a,o,s,u){return a||(a=o),h+=e.slice(c,u).replace(le,Nt),r&&(n=!0,h+="' +\n__e("+r+") +\n'"),s&&(i=!0,h+="';\n"+s+";\n__p += '"),a&&(h+="' +\n((__t = ("+a+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),h+="';\n";var f=we.call(t,"variable")&&t.variable;if(f){if(J.test(f))throw new he("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(i?h.replace(R,""):h).replace(_,"$1").replace(T,"$1;"),h="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(n?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var b=Us((function(){return pe(s,g+"return "+h).apply(void 0,u)}));if(b.source=h,zo(b))throw b;return b},Mr.times=function(e,t){if((e=ns(e))<1||e>9007199254740991)return[];var r=4294967295,a=or(e,4294967295);e-=4294967295;for(var n=xt(a,t=$n(t));++r<e;)t(r);return n},Mr.toFinite=as,Mr.toInteger=ns,Mr.toLength=is,Mr.toLower=function(e){return us(e).toLowerCase()},Mr.toNumber=os,Mr.toSafeInteger=function(e){return e?qr(ns(e),-9007199254740991,9007199254740991):0===e?e:0},Mr.toString=us,Mr.toUpper=function(e){return us(e).toUpperCase()},Mr.trim=function(e,t,r){if((e=us(e))&&(r||void 0===t))return Mt(e);if(!e||!(t=$a(t)))return e;var a=Yt(e),n=Yt(t);return un(a,kt(a,n),Rt(a,n)+1).join("")},Mr.trimEnd=function(e,t,r){if((e=us(e))&&(r||void 0===t))return e.slice(0,Bt(e)+1);if(!e||!(t=$a(t)))return e;var a=Yt(e);return un(a,0,Rt(a,Yt(t))+1).join("")},Mr.trimStart=function(e,t,r){if((e=us(e))&&(r||void 0===t))return e.replace(G,"");if(!e||!(t=$a(t)))return e;var a=Yt(e);return un(a,kt(a,Yt(t))).join("")},Mr.truncate=function(e,t){var r=30,a="...";if(Yo(t)){var n="separator"in t?t.separator:n;r="length"in t?ns(t.length):r,a="omission"in t?$a(t.omission):a}var i=(e=us(e)).length;if(jt(e)){var o=Yt(e);i=o.length}if(r>=i)return e;var s=r-Ht(a);if(s<1)return a;var u=o?un(o,0,s).join(""):e.slice(0,s);if(void 0===n)return u+a;if(o&&(s+=u.length-s),$o(n)){if(e.slice(s).search(n)){var c,l=u;for(n.global||(n=be(n.source,us(re.exec(n))+"g")),n.lastIndex=0;c=n.exec(l);)var h=c.index;u=u.slice(0,void 0===h?s:h)}}else if(e.indexOf($a(n),s)!=s){var p=u.lastIndexOf(n);p>-1&&(u=u.slice(0,p))}return u+a},Mr.unescape=function(e){return(e=us(e))&&j.test(e)?e.replace(I,Qt):e},Mr.uniqueId=function(e){var t=++Fe;return us(e)+t},Mr.upperCase=Es,Mr.upperFirst=zs,Mr.each=so,Mr.eachRight=uo,Mr.first=Ii,Xs(Mr,(su={},sa(Mr,(function(e,t){we.call(Mr.prototype,t)||(su[t]=e)})),su),{chain:!1}),Mr.VERSION="4.17.21",nt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Mr[e].placeholder=Mr})),nt(["drop","take"],(function(e,t){kr.prototype[e]=function(r){r=void 0===r?1:ir(ns(r),0);var a=this.__filtered__&&!t?new kr(this):this.clone();return a.__filtered__?a.__takeCount__=or(r,a.__takeCount__):a.__views__.push({size:or(r,4294967295),type:e+(a.__dir__<0?"Right":"")}),a},kr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),nt(["filter","map","takeWhile"],(function(e,t){var r=t+1,a=1==r||3==r;kr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:$n(e,3),type:r}),t.__filtered__=t.__filtered__||a,t}})),nt(["head","last"],(function(e,t){var r="take"+(t?"Right":"");kr.prototype[e]=function(){return this[r](1).value()[0]}})),nt(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");kr.prototype[e]=function(){return this.__filtered__?new kr(this):this[r](1)}})),kr.prototype.compact=function(){return this.filter(Gs)},kr.prototype.find=function(e){return this.filter(e).head()},kr.prototype.findLast=function(e){return this.reverse().find(e)},kr.prototype.invokeMap=Na((function(e,t){return"function"==typeof e?new kr(this):this.map((function(r){return ma(r,e,t)}))})),kr.prototype.reject=function(e){return this.filter(Po($n(e)))},kr.prototype.slice=function(e,t){e=ns(e);var r=this;return r.__filtered__&&(e>0||t<0)?new kr(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),void 0!==t&&(r=(t=ns(t))<0?r.dropRight(-t):r.take(t-e)),r)},kr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},kr.prototype.toArray=function(){return this.take(4294967295)},sa(kr.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),n=Mr[a?"take"+("last"==t?"Right":""):t],i=a||/^find/.test(t);n&&(Mr.prototype[t]=function(){var t=this.__wrapped__,o=a?[1]:arguments,s=t instanceof kr,u=o[0],c=s||To(t),l=function(e){var t=n.apply(Mr,ht([e],o));return a&&h?t[0]:t};c&&r&&"function"==typeof u&&1!=u.length&&(s=c=!1);var h=this.__chain__,p=!!this.__actions__.length,g=i&&!h,f=s&&!p;if(!i&&c){t=f?t:new kr(this);var b=e.apply(t,o);return b.__actions__.push({func:ro,args:[l],thisArg:void 0}),new Or(b,h)}return g&&f?e.apply(this,o):(b=this.thru(l),g?a?b.value()[0]:b.value():b)})})),nt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=ve[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);Mr.prototype[e]=function(){var e=arguments;if(a&&!this.__chain__){var n=this.value();return t.apply(To(n)?n:[],e)}return this[r]((function(r){return t.apply(To(r)?r:[],e)}))}})),sa(kr.prototype,(function(e,t){var r=Mr[t];if(r){var a=r.name+"";we.call(vr,a)||(vr[a]=[]),vr[a].push({name:t,func:r})}})),vr[Mn(void 0,2).name]=[{name:"wrapper",func:void 0}],kr.prototype.clone=function(){var e=new kr(this.__wrapped__);return e.__actions__=dn(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=dn(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=dn(this.__views__),e},kr.prototype.reverse=function(){if(this.__filtered__){var e=new kr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},kr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=To(e),a=t<0,n=r?e.length:0,i=function(e,t,r){for(var a=-1,n=r.length;++a<n;){var i=r[a],o=i.size;switch(i.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=or(t,e+o);break;case"takeRight":e=ir(e,t-o)}}return{start:e,end:t}}(0,n,this.__views__),o=i.start,s=i.end,u=s-o,c=a?s:o-1,l=this.__iteratees__,h=l.length,p=0,g=or(u,this.__takeCount__);if(!r||!a&&n==u&&g==u)return en(e,this.__actions__);var f=[];e:for(;u--&&p<g;){for(var b=-1,d=e[c+=t];++b<h;){var m=l[b],v=m.type,y=(0,m.iteratee)(d);if(2==v)d=y;else if(!y){if(1==v)continue e;break e}}f[p++]=d}return f},Mr.prototype.at=ao,Mr.prototype.chain=function(){return to(this)},Mr.prototype.commit=function(){return new Or(this.value(),this.__chain__)},Mr.prototype.next=function(){void 0===this.__values__&&(this.__values__=rs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Mr.prototype.plant=function(e){for(var t,r=this;r instanceof Cr;){var a=Vi(r);a.__index__=0,a.__values__=void 0,t?n.__wrapped__=a:t=a;var n=a;r=r.__wrapped__}return n.__wrapped__=e,t},Mr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof kr){var t=e;return this.__actions__.length&&(t=new kr(this)),(t=t.reverse()).__actions__.push({func:ro,args:[Hi],thisArg:void 0}),new Or(t,this.__chain__)}return this.thru(Hi)},Mr.prototype.toJSON=Mr.prototype.valueOf=Mr.prototype.value=function(){return en(this.__wrapped__,this.__actions__)},Mr.prototype.first=Mr.prototype.head,bt&&(Mr.prototype[bt]=function(){return this}),Mr}();Ye._=Gt,void 0===(a=(function(){return Gt}).call(t,r,t,e))||(e.exports=a)}).call(this)}).call(this,r("YuTi")(e))},pJjZ:function(t,a,i){"use strict";i.r(a),i.d(a,"AdminReportingModule",(function(){return Iu}));var o,s=i("ofXK"),u=i("tyNb"),c=i("mrSG"),l=i("LvDl"),h=i("fXoL"),p=i("oabR"),g=i("aNep"),f=i("3awX"),b=i("/X+5"),d=i("kmnG"),m=i("d3UM"),v=i("3Pt+"),y=i("FKr1"),S=i("lDzL"),D=i("MT78"),w=i("wd/R"),F=((o=function(){function t(){r(this,t)}return n(t,[{key:"ngOnInit",value:function(){this.setChartOptions(5,5,[0],[0],[0],[0]),this.chartData=this.getChartData(this.chartData),this.setChartOptions(3e4,3e5,this.chartData.datesOfRevenue,this.chartData.revenuePerDay,this.chartData.publisherName,this.chartData.searchesPerDay)}},{key:"ngOnChanges",value:function(){this.chartData&&(this.chartData.datesOfRevenue=this.convertTimeStampArryToDate(this.chartData.datesOfRevenue),this.setChartOptions(3e4,3e5,this.chartData.datesOfRevenue,this.chartData.revenuePerDay,this.chartData.publisherName,this.chartData.searchesPerDay))}},{key:"setChartOptions",value:function(t,r,a,n,i,o){this.chartDom=document.getElementById("main"),this.myChart=D.a(this.chartDom);var s,u=[],c=e(n);try{for(c.s();!(s=c.n()).done;){var l=s.value,h=Object.keys(l)[0];h&&u.push({name:h,type:"bar",stack:"Ad",data:l[h].map((function(e){return parseFloat(e).toFixed(2)}))})}}catch(p){c.e(p)}finally{c.f()}this.option={tooltip:{trigger:"axis",axisPointer:{animation:!0,type:"cross",crossStyle:{color:"#999"}},formatter:function(e){var t=function(e){return'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+e+'"></span>'},r="<p>"+e[0].axisValue+"</p>",a=0;return e.forEach((function(e){var n="<p>"+t(e.color)+" "+e.seriesName+":  $ "+e.data+"</p>";r+=n,a+=parseFloat(e.data)})),r+="<p>"+t("#fc345c")+" Total:  $ "+a.toFixed(2)+"</p>"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:i},xAxis:[{type:"category",data:a,axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"Revenue",axisLabel:{formatter:"${value}"},axisLine:{show:!0,lineStyle:{color:"#5470C6"}}}],series:u},this.option&&this.myChart.setOption(this.option,!0),window.addEventListener("resize",this.myChart.resize)}},{key:"convertTimeStampArryToDate",value:function(e){for(var t=[],r=0;r<e.length;r++)t.push(w(e[r]).format("MM-DD-YYYY"));return t}},{key:"getChartData",value:function(e){if(e)return e}}]),t}()).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=h.Kb({type:o,selectors:[["app-reporting-revenue-chart"]],inputs:{chartData:"chartData"},features:[h.Bb],decls:1,vars:0,consts:[["id","main",2,"width","100%","height","300px"]],template:function(e,t){1&e&&h.Rb(0,"div",0)},styles:[".demo-chart[_ngcontent-%COMP%]{height:400px}"]}),o),W=i("MutI"),P=i("f0Cb");function x(e,t){if(1&e&&(h.Wb(0,"div",1),h.Wb(1,"div",2),h.Wb(2,"div",3),h.Wb(3,"div",4),h.Wb(4,"div",5),h.Wb(5,"h2",6),h.Oc(6,"Selected Statistics"),h.Vb(),h.Vb(),h.Vb(),h.Wb(7,"div",7),h.Wb(8,"mat-list"),h.Wb(9,"mat-list-item"),h.Oc(10),h.mc(11,"number"),h.Vb(),h.Rb(12,"mat-divider"),h.Rb(13,"mat-divider"),h.Wb(14,"mat-list-item"),h.Oc(15),h.mc(16,"number"),h.Vb(),h.Rb(17,"mat-divider"),h.Wb(18,"mat-list-item"),h.Oc(19),h.Vb(),h.Rb(20,"mat-divider"),h.Wb(21,"mat-list-item"),h.Oc(22),h.Vb(),h.Rb(23,"mat-divider"),h.Rb(24,"mat-list-item"),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(25,"div",2),h.Wb(26,"div",3),h.Wb(27,"div",4),h.Wb(28,"div",5),h.Wb(29,"h2",6),h.Oc(30,"Month to Date Statistics"),h.Vb(),h.Vb(),h.Vb(),h.Wb(31,"div",7),h.Wb(32,"mat-list"),h.Wb(33,"mat-list-item"),h.Oc(34),h.mc(35,"number"),h.Vb(),h.Rb(36,"mat-divider"),h.Wb(37,"mat-list-item"),h.Oc(38),h.mc(39,"number"),h.Vb(),h.Rb(40,"mat-divider"),h.Wb(41,"mat-list-item"),h.Oc(42),h.mc(43,"number"),h.Vb(),h.Rb(44,"mat-divider"),h.Wb(45,"mat-list-item"),h.Oc(46),h.mc(47,"number"),h.Vb(),h.Rb(48,"mat-divider"),h.Wb(49,"mat-list-item"),h.Oc(50),h.mc(51,"number"),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(52,"div",2),h.Wb(53,"div",3),h.Wb(54,"div",4),h.Wb(55,"div",5),h.Wb(56,"h2",6),h.Oc(57,"Last Month Stats"),h.Vb(),h.Vb(),h.Vb(),h.Wb(58,"div",7),h.Wb(59,"mat-list"),h.Wb(60,"mat-list-item"),h.Oc(61),h.mc(62,"number"),h.Vb(),h.Rb(63,"mat-divider"),h.Wb(64,"mat-list-item"),h.Oc(65),h.mc(66,"number"),h.Vb(),h.Rb(67,"mat-divider"),h.Wb(68,"mat-list-item"),h.Oc(69),h.mc(70,"number"),h.Vb(),h.Rb(71,"mat-divider"),h.Wb(72,"mat-list-item"),h.Oc(73),h.mc(74,"number"),h.Vb(),h.Rb(75,"mat-divider"),h.Wb(76,"mat-list-item"),h.Oc(77),h.mc(78,"number"),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb()),2&e){var r=h.lc();h.Db(10),h.Qc("Revenue: $ ",r.summaryMetricsData.summary[0].selectedStat[0].revenue?h.oc(11,14,r.summaryMetricsData.summary[0].selectedStat[0].revenue,"1.2-2"):"0.00",""),h.Db(5),h.Qc("Profit: $ ",r.summaryMetricsData.summary[0].selectedStat[0].profit?h.oc(16,17,r.summaryMetricsData.summary[0].selectedStat[0].profit,"1.2-2"):"0.00",""),h.Db(4),h.Qc("Start Date: ",r.summaryMetricsData.summary[0].selectedStat[0].selectedStartDate,""),h.Db(3),h.Qc("End Date: ",r.summaryMetricsData.summary[0].selectedStat[0].selectedEndDate,""),h.Db(12),h.Qc("Revenue: $ ",r.summaryMetricsData.summary[0].summaryMetrics[0].revenue?h.oc(35,20,r.summaryMetricsData.summary[0].summaryMetrics[0].revenue,"1.2-2"):"0.00",""),h.Db(4),h.Qc("Revenue Pace: $ ",r.summaryMetricsData.summary[0].summaryMetrics[0].revenuePace?h.oc(39,23,r.summaryMetricsData.summary[0].summaryMetrics[0].revenuePace,"1.2-2"):"0.00",""),h.Db(4),h.Qc("Profit: $ ",r.summaryMetricsData.summary[0].summaryMetrics[0].profit?h.oc(43,26,r.summaryMetricsData.summary[0].summaryMetrics[0].profit,"1.2-2"):"0.00",""),h.Db(4),h.Qc("Profit Pace: $ ",r.summaryMetricsData.summary[0].summaryMetrics[0].profitPace?h.oc(47,29,r.summaryMetricsData.summary[0].summaryMetrics[0].profitPace,"1.2-2"):"0.00",""),h.Db(4),h.Qc("Percentage Change: ",r.summaryMetricsData.summary[0].summaryMetrics[0].percentPace?h.oc(51,32,r.summaryMetricsData.summary[0].summaryMetrics[0].percentPace,"1.2-2"):"0.00"," %"),h.Db(11),h.Qc("Revenue: $ ",r.summaryMetricsData.summary[0].lastMonthStat[0].revenue?h.oc(62,35,r.summaryMetricsData.summary[0].lastMonthStat[0].revenue,"1.2-2"):"0.00",""),h.Db(4),h.Qc("Revenue Pace: $ ",r.summaryMetricsData.summary[0].lastMonthStat[0].revenuePace?h.oc(66,38,r.summaryMetricsData.summary[0].lastMonthStat[0].revenuePace,"2.2-2"):"0.00",""),h.Db(4),h.Qc("Profit: $ ",r.summaryMetricsData.summary[0].lastMonthStat[0].profit?h.oc(70,41,r.summaryMetricsData.summary[0].lastMonthStat[0].profit,"1.2-2"):"0.00",""),h.Db(4),h.Qc("Profit Pace: $ ",r.summaryMetricsData.summary[0].lastMonthStat[0].profitPace?h.oc(74,44,r.summaryMetricsData.summary[0].lastMonthStat[0].profitPace,"1.2-2"):"0.00",""),h.Db(4),h.Qc("Percentage Change: ",r.summaryMetricsData.summary[0].lastMonthStat[0].percentPace?h.oc(78,47,r.summaryMetricsData.summary[0].lastMonthStat[0].percentPace,"1.2-2"):"0.00"," %")}}var M,V=((M=function(){function e(){r(this,e)}return n(e,[{key:"ngOnInit",value:function(){this.summaryMetricsData=this.getSummaryData(this.summaryMetricsData)}},{key:"getSummaryData",value:function(e){if(e)return e}}]),e}()).\u0275fac=function(e){return new(e||M)},M.\u0275cmp=h.Kb({type:M,selectors:[["app-summary-metrics"]],inputs:{summaryMetricsData:"summaryMetricsData"},decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-xl-4"],[1,"card","card-custom","example","example-compact","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"card-body"]],template:function(e,t){1&e&&h.Mc(0,x,79,50,"div",0),2&e&&h.rc("ngIf",t.summaryMetricsData)},directives:[s.p,W.a,W.c,P.a],pipes:[s.g],styles:[""]}),M),C=["expandableTable"];function O(e,t){if(1&e&&h.Rb(0,"app-reporting-revenue-chart",31),2&e){var r=h.lc();h.rc("chartData",r.chartData)}}function k(e,t){if(1&e&&h.Rb(0,"app-summary-metrics",32),2&e){var r=h.lc();h.rc("summaryMetricsData",r.summaryMetrics)}}function R(e,t){if(1&e&&(h.Wb(0,"tr"),h.Wb(1,"td"),h.Oc(2),h.mc(3,"date"),h.Vb(),h.Wb(4,"td"),h.Oc(5),h.mc(6,"number"),h.Vb(),h.Wb(7,"td"),h.Oc(8),h.mc(9,"number"),h.Vb(),h.Wb(10,"td"),h.Oc(11),h.mc(12,"percent"),h.mc(13,"percent"),h.Vb(),h.Wb(14,"td"),h.Oc(15),h.mc(16,"currency"),h.mc(17,"currency"),h.Vb(),h.Wb(18,"td"),h.Oc(19),h.mc(20,"currency"),h.Vb(),h.Wb(21,"td"),h.Oc(22),h.mc(23,"currency"),h.Vb(),h.Wb(24,"td"),h.Oc(25),h.mc(26,"currency"),h.Vb(),h.Vb()),2&e){var r=t.$implicit;h.Db(2),h.Pc(h.nc(3,8,r.date)),h.Db(3),h.Pc(h.nc(6,10,r.searches)),h.Db(3),h.Pc(h.nc(9,12,r.clicks)),h.Db(3),h.Pc(h.oc(12,14,r.ctr,"2.2-2")||h.oc(13,17,0,"2.2-2")),h.Db(4),h.Pc(h.oc(16,20,r.cpc,"USD")||h.oc(17,23,0,"USD")),h.Db(4),h.Pc(h.oc(20,26,r.publisherNet,"USD")),h.Db(3),h.Pc(h.oc(23,29,r.profit,"USD")),h.Db(3),h.Pc(h.oc(26,32,r.revenue,"USD"))}}function _(e,t){if(1&e&&(h.Wb(0,"div",35),h.Wb(1,"table",36),h.Wb(2,"thead"),h.Wb(3,"tr"),h.Wb(4,"th"),h.Oc(5,"Date"),h.Vb(),h.Wb(6,"th"),h.Oc(7,"Searches"),h.Vb(),h.Wb(8,"th"),h.Oc(9,"Clicks"),h.Vb(),h.Wb(10,"th"),h.Oc(11,"CTR"),h.Vb(),h.Wb(12,"th"),h.Oc(13,"CPC"),h.Vb(),h.Wb(14,"th"),h.Oc(15,"Publisher Net"),h.Vb(),h.Wb(16,"th"),h.Oc(17,"Profit"),h.Vb(),h.Wb(18,"th"),h.Oc(19,"Revenue"),h.Vb(),h.Vb(),h.Vb(),h.Wb(20,"tbody"),h.Mc(21,R,27,35,"tr",37),h.Vb(),h.Vb(),h.Vb()),2&e){var r=h.lc().row;h.Db(21),h.rc("ngForOf",r.subReportingForDate)}}function T(e,t){1&e&&(h.Wb(0,"div",38),h.Wb(1,"div"),h.Wb(2,"strong"),h.Oc(3,"Address"),h.Vb(),h.Vb(),h.Wb(4,"div"),h.Oc(5,"Test"),h.Vb(),h.Vb())}function I(e,t){if(1&e&&(h.Mc(0,_,22,1,"div",33),h.Mc(1,T,6,0,"div",34)),2&e){var r=h.lc();h.rc("ngIf","publisher"===r.groupType||"subid"===r.groupType),h.Db(1),h.rc("ngIf","publisher"!==r.groupType&&"subid"!==r.groupType)}}function N(e,t){if(1&e){var r=h.Xb();h.Wb(0,"a",39),h.hc("click",(function(){h.Dc(r);var e=t.row;return h.lc().toggleExpandRow(e)})),h.Vb()}if(2&e){var a=t.expanded;h.Ib("datatable-icon-right",!a)("datatable-icon-down",a)}}function j(e,t){1&e&&h.Oc(0," Date ")}function A(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"date"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function E(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",40),h.Mc(1,j,1,0,"ng-template",23),h.Mc(2,A,3,3,"ng-template",16),h.Vb()),2&e&&h.rc("minWidth",100)}function z(e,t){1&e&&h.Oc(0," Subid ")}function L(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function U(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",41),h.Mc(1,z,1,0,"ng-template",23),h.Mc(2,L,2,1,"ng-template",16),h.Vb())}function H(e,t){1&e&&h.Oc(0," Publisher ")}function Y(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function B(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",42),h.Mc(1,H,1,0,"ng-template",23),h.Mc(2,Y,2,1,"ng-template",16),h.Vb())}function Q(e,t){1&e&&h.Oc(0," Clicks ")}function G(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function q(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",43),h.Mc(1,Q,1,0,"ng-template",23),h.Mc(2,G,3,3,"ng-template",16),h.Vb())}function $(e,t){1&e&&h.Oc(0," Searches ")}function K(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function X(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",44),h.Mc(1,$,1,0,"ng-template",23),h.Mc(2,K,3,3,"ng-template",16),h.Vb())}function Z(e,t){1&e&&h.Oc(0," Filtering ")}function J(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function ee(e,t){1&e&&h.Oc(0," Impressions ")}function te(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function re(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",45),h.Mc(1,ee,1,0,"ng-template",23),h.Mc(2,te,3,3,"ng-template",16),h.Vb())}function ae(e,t){1&e&&h.Oc(0," CPC ")}function ne(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"1.2-2"))}}function ie(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",46),h.Mc(1,ae,1,0,"ng-template",23),h.Mc(2,ne,3,4,"ng-template",16),h.Vb())}function oe(e,t){1&e&&h.Oc(0," CTR ")}function se(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"1.2-2"))}}function ue(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",47),h.Mc(1,oe,1,0,"ng-template",23),h.Mc(2,se,3,4,"ng-template",16),h.Vb())}function ce(e,t){1&e&&h.Oc(0," Split ")}function le(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function he(e,t){1&e&&h.Oc(0," Publisher Net ")}function pe(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}function ge(e,t){1&e&&h.Oc(0," Profit ")}function fe(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}function be(e,t){1&e&&h.Oc(0," Revenue ")}function de(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}var me,ve=((me=function(){function t(e,a,n,i){r(this,t),this.cdr=e,this.userService=a,this.apptitudeService=n,this.tagService=i,this.range={startDate:"",endDate:""},this.loadingIndicator=!0,this.expanded={},this.tagList=[],this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.groupType="",this.selectedCompany=this.getSelectedCompanyStored()}return n(t,[{key:"ngAfterViewInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCompanyTags(this.selectedCompany);case 2:return this.tagList=e.sent,this.rows=[],e.next=6,this.getAllApptitudeStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 6:return this.rows=e.sent,e.next=9,this.getChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 9:return this.chartData=e.sent,e.next=12,this.getSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 12:this.summaryMetrics=e.sent,this.cdr.detectChanges();case 14:case"end":return e.stop()}}),e,this)})))}},{key:"getAllApptitudeStats",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,s,u,c,l,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.apptitudeService.getApptitudeStats(t,r,a).toPromise();case 2:i=n.sent,o=e((this.loadingIndicator=!1,this.allStats=i.stats,this.allStats.map((function(e){e.publisher="No Publisher"})),this.tagList));try{for(o.s();!(s=o.n()).done;)if("apptitude"==(u=s.value).tag.advertiser){c=e(u.tag.subids);try{for(c.s();!(l=c.n()).done;)"Contains"==(h=l.value).filterTag?this.allStats.map((function(e){e.subid.includes(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher")})):"StartsWith"==h.filterTag?this.allStats.map((function(e){e.subid.startsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher")})):"EndsWith"==h.filterTag?this.allStats.map((function(e){e.subid.endsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher")})):"ExactValue"==h.filterTag&&this.allStats.map((function(e){e.subid==h.subid&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher")}))}catch(p){c.e(p)}finally{c.f()}}}catch(p){o.e(p)}finally{o.f()}return n.abrupt("return",this.allStats);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"getSelectedCompanyStored",value:function(){return this.userService.getSelectedCompanyFromLocalStorage()}},{key:"getDetailRowHeight",value:function(e,t){var r;return e&&(r=e.detailHeight),r}},{key:"toggleExpandRow",value:function(e){console.log("Toggled Expand Row!",e),this.table.rowDetail.toggleExpandRow(e)}},{key:"onDetailToggle",value:function(e){console.log("Detail Toggled",e)}},{key:"updateReportingFiltering",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.range=e,t.next=3,this.getAllApptitudeStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 3:return this.rows=t.sent,t.next=6,this.getChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 6:return this.chartData=t.sent,t.next=9,this.getSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 9:this.summaryMetrics=t.sent,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.groupType="",this.cdr.detectChanges();case 15:case"end":return t.stop()}}),t,this)})))}},{key:"groupSubid",value:function(){var t,r={},a=this.allStats.reduce((function(e,t){var a=t.subid;return r[a]?(r[a].clicks+=parseFloat(t.clicks),r[a].impressions+=parseFloat(t.impressions?t.impressions:0),r[a].filtering+=parseFloat(t.filtering?t.filtering:0),r[a].searches+=parseFloat(t.searches?t.searches:0),r[a].revenue+=parseFloat(t.revenue),r[a].split+=parseFloat(t.split),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.cpc=i.revenue/i.clicks,i.ctr=i.clicks/i.searches,i.subReportingForDate=this.groupDateForSubid(i),i.detailHeight=50*(i.subReportingForDate.length+1)}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!0,this.cdr.detectChanges()}},{key:"groupDate",value:function(){var t,r={},a=this.allStats.reduce((function(e,t){var a=t.date;return r[a]?(r[a].clicks+=parseFloat(t.clicks),r[a].impressions+=parseFloat(t.impressions?t.impressions:0),r[a].filtering+=parseFloat(t.filtering?t.filtering:0),r[a].searches+=parseFloat(t.searches?t.searches:0),r[a].revenue+=parseFloat(t.revenue),r[a].split+=parseFloat(t.split),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.cpc=i.revenue/i.clicks,i.ctr=i.clicks/i.searches}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!1,this.groupDateShowFlag=!0,this.groupSubidShowFlag=!1,this.cdr.detectChanges()}},{key:"groupProvider",value:function(){var t,r={},a=this.allStats.reduce((function(e,t){var a=t.publisher;return r[a]?(r[a].clicks+=parseFloat(t.clicks),r[a].impressions+=parseFloat(t.impressions?t.impressions:0),r[a].filtering+=parseFloat(t.filtering?t.filtering:0),r[a].searches+=parseFloat(t.searches?t.searches:0),r[a].revenue+=parseFloat(t.revenue),r[a].split+=parseFloat(t.split),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.cpc=i.revenue/i.clicks,i.ctr=i.clicks/i.searches,i.subReportingForDate=this.groupDateForPublisher(i),i.detailHeight=50*(i.subReportingForDate.length+1)}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!0,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.cdr.detectChanges()}},{key:"backGroup",value:function(){this.rows=this.allStats,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.cdr.detectChanges()}},{key:"groupDateForPublisher",value:function(t){var r,a={},n=this.allStats.filter((function(e){return e.publisher===t.publisher})).reduce((function(e,t){var r=t.date;return a[r]?(a[r].clicks+=parseFloat(t.clicks),a[r].impressions+=parseFloat(t.impressions?t.impressions:0),a[r].filtering+=parseFloat(t.filtering?t.filtering:0),a[r].searches+=parseFloat(t.searches?t.searches:0),a[r].revenue+=parseFloat(t.revenue),a[r].split+=parseFloat(t.split),a[r].profit+=parseFloat(t.profit),a[r].publisherNet+=parseFloat(t.publisherNet),a[r].counter++):(a[r]=Object.assign({},t),a[r].counter=1,e.push(a[r])),e}),[]),i=e(n);try{for(i.s();!(r=i.n()).done;)(t=r.value).split=t.split/t.counter,t.cpc=t.revenue/t.clicks,t.ctr=t.clicks/t.searches}catch(o){i.e(o)}finally{i.f()}return n}},{key:"groupDateForSubid",value:function(t){var r,a={},n=this.allStats.filter((function(e){return e.subid===t.subid})).reduce((function(e,t){var r=t.date;return a[r]?(a[r].clicks+=parseFloat(t.clicks),a[r].impressions+=parseFloat(t.impressions?t.impressions:0),a[r].filtering+=parseFloat(t.filtering?t.filtering:0),a[r].searches+=parseFloat(t.searches?t.searches:0),a[r].revenue+=parseFloat(t.revenue),a[r].split+=parseFloat(t.split),a[r].profit+=parseFloat(t.profit),a[r].publisherNet+=parseFloat(t.publisherNet),a[r].counter++):(a[r]=Object.assign({},t),a[r].counter=1,e.push(a[r])),e}),[]),i=e(n);try{for(i.s();!(r=i.n()).done;)(t=r.value).split=t.split/t.counter,t.cpc=t.revenue/t.clicks,t.ctr=t.clicks/t.searches}catch(o){i.e(o)}finally{i.f()}return n}},{key:"groupHandle",value:function(e){this.groupType=e.value,"date"==e.value?this.groupDate():"publisher"==e.value?this.groupProvider():"subid"==e.value?this.groupSubid():this.backGroup()}},{key:"getChartMetrics",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,s,u,c,h,p,g,f,b,d,m,v,y,S,D,w,F,W,P,x,M,V,C,O,k,R,_,T,I;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.apptitudeService.getApptitudeStats(t,r,a).toPromise();case 3:i=n.sent,o=e((this.loadingIndicator=!1,this.allChartStat=i.stats,this.allChartStat.map((function(e){e.publisher="No Publisher"})),this.tagList));try{for(o.s();!(s=o.n()).done;)if("apptitude"==(u=s.value).tag.advertiser){c=e(u.tag.subids);try{for(c.s();!(h=c.n()).done;)"Contains"==(p=h.value).filterTag?this.allChartStat.map((function(e){e.subid.includes(p.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher")})):"StartsWith"==p.filterTag?this.allChartStat.map((function(e){e.subid.startsWith(p.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher")})):"EndsWith"==p.filterTag?this.allChartStat.map((function(e){e.subid.endsWith(p.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher")})):"ExactValue"==p.filterTag&&this.allChartStat.map((function(e){e.subid==p.subid&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher")}))}catch(N){c.e(N)}finally{c.f()}}}catch(N){o.e(N)}finally{o.f()}for(d in g=l.chain(this.allChartStat).sortBy((function(e){return e.date})).sortBy((function(e){return e.publisher})).value(),f=function e(t,r){if(!r.length)return t;var a=r[0],n=r.slice(1);return l.mapValues(l.groupBy(t,a),(function(t){return e(t,n)}))}(g,["date","publisher"]),b=[],f)if(f.hasOwnProperty(d))for(m in f[d])v={date:f[d][m][0].date,publisher:f[d][m][0].publisher,revenue:l.reduce(f[d][m],(function(e,t){return e+t.revenue}),0)},b.push(v);for(y=[],S=0,D=b;S<D.length;S++)w=D[S],y.push(w.publisher);F=y.filter((function(e,t,r){return t===r.indexOf(e)})),this.allChartStat=this.allChartStat.slice().sort((function(e,t){return e.date-t.date})),W={},P=this.allChartStat.reduce((function(e,t){var r=t.date;return W[r]?W[r].searches+=parseInt(t.searches):(W[r]=Object.assign({},t),e.push(W[r])),e}),[]),x=[],M=[],V={},C=e(P);try{for(C.s();!(O=C.n()).done;)k=O.value,x.push(k.date),M.push(k.searches)}catch(N){C.e(N)}finally{C.f()}R=[],_=e(F);try{for(I=function(){var t,r=T.value,a=[],n=e(x);try{var i=function(){var e=t.value,n=b.filter((function(t){return t.date==e&&t.publisher==r}));a.push(n.length>0?n[0].revenue:0)};for(n.s();!(t=n.n()).done;)i()}catch(N){n.e(N)}finally{n.f()}var o={};o[r]=a,R.push(o)},_.s();!(T=_.n()).done;)I()}catch(N){_.e(N)}finally{_.f()}return n.abrupt("return",(V.revenuePerDay=R,V.datesOfRevenue=x,V.searchesPerDay=M,V.publisherName=F,V));case 22:return n.prev=22,n.t0=n.catch(0),n.abrupt("return",n.t0);case 25:case"end":return n.stop()}}),n,this,[[0,22]])})))}},{key:"remove_element",value:function(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return void e.splice(r,1)}},{key:"getSummaryMetrics",value:function(e,t,r){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a,n,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apptitudeService.getSummaryMetrics(this.selectedCompany,t,r).toPromise();case 2:return a=e.sent,n={},i=0,o=0,s=0,e.abrupt("return",(0!=a.summary[0].lastMonthStat[0].profitPace&&(i=(a.summary[0].summaryMetrics[0].profitPace-a.summary[0].lastMonthStat[0].profitPace)/a.summary[0].lastMonthStat[0].profitPace*100),0!=a.summary[0].twoLastMonthStat[0].profitPace&&(o=(a.summary[0].lastMonthStat[0].profitPace-a.summary[0].twoLastMonthStat[0].profitPace)/a.summary[0].twoLastMonthStat[0].profitPace*100),0!=a.summary[0].prevSelectedStat[0].profitPace&&(s=(a.summary[0].selectedStat[0].profitPace-a.summary[0].prevSelectedStat[0].profitPace)/a.summary[0].prevSelectedStat[0].profitPace*100),a.summary[0].summaryMetrics[0].percentPace=i,a.summary[0].lastMonthStat[0].percentPace=o,a.summary[0].selectedStat[0].percentPace=s,a.summary[0].selectedStat[0].selectedStartDate=t,a.summary[0].selectedStat[0].selectedEndDate=r,n.summary=a.summary,n));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"getCompanyTags",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.split("/")[1],t.prev=1,t.next=4,this.tagService.getCompanyTags(r).toPromise();case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))}}]),t}()).\u0275fac=function(e){return new(e||me)(h.Qb(h.i),h.Qb(p.a),h.Qb(g.a),h.Qb(f.a))},me.\u0275cmp=h.Kb({type:me,selectors:[["app-apptitude"]],viewQuery:function(e,t){var r;1&e&&h.Tc(C,!0),2&e&&h.zc(r=h.ic())&&(t.table=r.first)},decls:46,vars:24,consts:[[3,"onDatesPicked"],[3,"chartData",4,"ngIf"],[3,"summaryMetricsData",4,"ngIf"],[1,"row"],[1,"col-xl-4"],["appearance","fill"],[3,"ngModel","selectionChange","ngModelChange"],["value","date"],["value","publisher"],["value","subid"],["value","reset"],[1,"material","fullscreen","expandable",2,"top","10px","height","500px",3,"columnMode","headerHeight","footerHeight","rowHeight","scrollbarV","rows","loadingIndicator"],["expandableTable",""],[3,"rowHeight","toggle"],["ngx-datatable-row-detail-template",""],[3,"width","resizeable","sortable","draggable","canAutoResize"],["ngx-datatable-cell-template",""],["name","date",3,"minWidth",4,"ngIf"],["name","subid",4,"ngIf"],["name","publisher",4,"ngIf"],["name","clicks",4,"ngIf"],["name","searches",4,"ngIf"],["name","filtering"],["ngx-datatable-header-template",""],["name","impressions",4,"ngIf"],["name","cpc",4,"ngIf"],["name","ctr",4,"ngIf"],["name","split"],["name","publisherNet"],["name","profit"],["name","revenue"],[3,"chartData"],[3,"summaryMetricsData"],["class","table-responsive","style","padding-left: 36px;",4,"ngIf"],["style","padding-left: 35px",4,"ngIf"],[1,"table-responsive",2,"padding-left","36px"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[2,"padding-left","35px"],["href","javascript:void(0)","title","Expand/Collapse Row",3,"click"],["name","date",3,"minWidth"],["name","subid"],["name","publisher"],["name","clicks"],["name","searches"],["name","impressions"],["name","cpc"],["name","ctr"]],template:function(e,t){1&e&&(h.Wb(0,"app-reporting-filtering",0),h.hc("onDatesPicked",(function(e){return t.updateReportingFiltering(e)})),h.Vb(),h.Mc(1,O,1,1,"app-reporting-revenue-chart",1),h.Mc(2,k,1,1,"app-summary-metrics",2),h.Wb(3,"div",3),h.Wb(4,"div",4),h.Wb(5,"mat-form-field",5),h.Wb(6,"mat-label"),h.Oc(7,"Choose an Group By"),h.Vb(),h.Wb(8,"mat-select",6),h.hc("selectionChange",(function(e){return t.groupHandle(e)}))("ngModelChange",(function(e){return t.groupType=e})),h.Wb(9,"mat-option",7),h.Oc(10,"Date"),h.Vb(),h.Wb(11,"mat-option",8),h.Oc(12,"Publisher"),h.Vb(),h.Wb(13,"mat-option",9),h.Oc(14,"Subid"),h.Vb(),h.Wb(15,"mat-option",10),h.Oc(16,"Reset"),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(17,"ngx-datatable",11,12),h.Wb(19,"ngx-datatable-row-detail",13),h.hc("toggle",(function(e){return t.onDetailToggle(e)})),h.Mc(20,I,2,2,"ng-template",14),h.Vb(),h.Wb(21,"ngx-datatable-column",15),h.Mc(22,N,1,4,"ng-template",16),h.Vb(),h.Mc(23,E,3,1,"ngx-datatable-column",17),h.Mc(24,U,3,0,"ngx-datatable-column",18),h.Mc(25,B,3,0,"ngx-datatable-column",19),h.Mc(26,q,3,0,"ngx-datatable-column",20),h.Mc(27,X,3,0,"ngx-datatable-column",21),h.Wb(28,"ngx-datatable-column",22),h.Mc(29,Z,1,0,"ng-template",23),h.Mc(30,J,3,3,"ng-template",16),h.Vb(),h.Mc(31,re,3,0,"ngx-datatable-column",24),h.Mc(32,ie,3,0,"ngx-datatable-column",25),h.Mc(33,ue,3,0,"ngx-datatable-column",26),h.Wb(34,"ngx-datatable-column",27),h.Mc(35,ce,1,0,"ng-template",23),h.Mc(36,le,3,3,"ng-template",16),h.Vb(),h.Wb(37,"ngx-datatable-column",28),h.Mc(38,he,1,0,"ng-template",23),h.Mc(39,pe,3,4,"ng-template",16),h.Vb(),h.Wb(40,"ngx-datatable-column",29),h.Mc(41,ge,1,0,"ng-template",23),h.Mc(42,fe,3,4,"ng-template",16),h.Vb(),h.Wb(43,"ngx-datatable-column",30),h.Mc(44,be,1,0,"ng-template",23),h.Mc(45,de,3,4,"ng-template",16),h.Vb(),h.Vb()),2&e&&(h.Db(1),h.rc("ngIf",t.chartData),h.Db(1),h.rc("ngIf",t.summaryMetrics),h.Db(6),h.rc("ngModel",t.groupType),h.Db(9),h.rc("columnMode","force")("headerHeight",50)("footerHeight",0)("rowHeight",50)("scrollbarV",!0)("rows",t.rows)("loadingIndicator",t.loadingIndicator),h.Db(2),h.rc("rowHeight","publisher"===t.groupType||"subid"===t.groupType?t.getDetailRowHeight:130),h.Db(2),h.rc("width",50)("resizeable",!1)("sortable",!1)("draggable",!1)("canAutoResize",!1),h.Db(2),h.rc("ngIf",!t.groupPublishFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag),h.Db(1),h.rc("ngIf",!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(4),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag))},directives:[b.a,s.p,d.c,d.g,m.a,v.q,v.t,y.p,S.d,S.e,S.f,S.b,S.a,S.c,F,V,s.o],pipes:[s.f,s.g,s.w,s.d],styles:[""]}),me),ye=i("XJ1K"),Se=["expandableTable"];function De(e,t){if(1&e&&h.Rb(0,"app-reporting-revenue-chart",26),2&e){var r=h.lc();h.rc("chartData",r.chartData)}}function we(e,t){if(1&e&&h.Rb(0,"app-summary-metrics",27),2&e){var r=h.lc();h.rc("summaryMetricsData",r.summaryMetrics)}}function Fe(e,t){1&e&&(h.Wb(0,"div",28),h.Wb(1,"div"),h.Wb(2,"strong"),h.Oc(3,"Address"),h.Vb(),h.Vb(),h.Wb(4,"div"),h.Oc(5,"Test"),h.Vb(),h.Vb())}function We(e,t){if(1&e){var r=h.Xb();h.Wb(0,"a",29),h.hc("click",(function(){h.Dc(r);var e=t.row;return h.lc().toggleExpandRow(e)})),h.Vb()}if(2&e){var a=t.expanded;h.Ib("datatable-icon-right",!a)("datatable-icon-down",a)}}function Pe(e,t){1&e&&h.Oc(0," Date ")}function xe(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"date"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function Me(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",30),h.Mc(1,Pe,1,0,"ng-template",16),h.Mc(2,xe,3,3,"ng-template",12),h.Vb()),2&e&&h.rc("minWidth",100)}function Ve(e,t){1&e&&h.Oc(0," Subid ")}function Ce(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function Oe(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",31),h.Mc(1,Ve,1,0,"ng-template",16),h.Mc(2,Ce,2,1,"ng-template",12),h.Vb())}function ke(e,t){1&e&&h.Oc(0," Publisher ")}function Re(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function _e(e,t){1&e&&h.Oc(0," Searches ")}function Te(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function Ie(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",32),h.Mc(1,_e,1,0,"ng-template",16),h.Mc(2,Te,3,3,"ng-template",12),h.Vb())}function Ne(e,t){1&e&&h.Oc(0," Clicks ")}function je(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function Ae(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",33),h.Mc(1,Ne,1,0,"ng-template",16),h.Mc(2,je,3,3,"ng-template",12),h.Vb())}function Ee(e,t){1&e&&h.Oc(0," Coverage ")}function ze(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function Le(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",34),h.Mc(1,Ee,1,0,"ng-template",16),h.Mc(2,ze,3,3,"ng-template",12),h.Vb())}function Ue(e,t){1&e&&h.Oc(0," PPC ")}function He(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function Ye(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",35),h.Mc(1,Ue,1,0,"ng-template",16),h.Mc(2,He,3,3,"ng-template",12),h.Vb())}function Be(e,t){1&e&&h.Oc(0," TQ ")}function Qe(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function Ge(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",36),h.Mc(1,Be,1,0,"ng-template",16),h.Mc(2,Qe,3,3,"ng-template",12),h.Vb())}function qe(e,t){1&e&&h.Oc(0," Split ")}function $e(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.mc(3,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r)||h.oc(3,3,0,"1.0-0"))}}function Ke(e,t){1&e&&h.Oc(0," Publisher Net ")}function Xe(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}function Ze(e,t){1&e&&h.Oc(0," Profit ")}function Je(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}function et(e,t){1&e&&h.Oc(0," Revenue ")}function tt(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}var rt,at=((rt=function(){function t(e,a,n,i){r(this,t),this.cdr=e,this.userService=a,this.hopkinService=n,this.tagService=i,this.range={startDate:"",endDate:""},this.loadingIndicator=!0,this.groupPublishFlag=!1,this.expanded={},this.tagList=[],this.selectedCompany=this.getSelectedCompanyStored()}return n(t,[{key:"ngAfterViewInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCompanyTags(this.selectedCompany);case 2:return this.tagList=e.sent,this.rows=[],e.next=6,this.getAllHopkinStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 6:return this.rows=e.sent,e.next=9,this.getChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 9:return this.chartData=e.sent,e.next=12,this.getSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 12:this.summaryMetrics=e.sent,this.refreshTable();case 14:case"end":return e.stop()}}),e,this)})))}},{key:"getAllHopkinStats",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,s,u,c,l,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.hopkinService.getHopkinStats(t,r,a).toPromise();case 2:i=n.sent,o=e((this.loadingIndicator=!1,this.allStats=i.stats,this.allStats.map((function(e){e.publisher="No Publisher",e.tagname="No Tag"})),this.tagList));try{for(o.s();!(s=o.n()).done;)if("hopkins"==(u=s.value).tag.advertiser){c=e(u.tag.subids);try{for(c.s();!(l=c.n()).done;)"Contains"==(h=l.value).filterTag?this.allStats.map((function(e){e.subid.includes(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"StartsWith"==h.filterTag?this.allStats.map((function(e){e.subid.startsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"EndsWith"==h.filterTag?this.allStats.map((function(e){e.subid.endsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"ExactValue"==h.filterTag&&this.allStats.map((function(e){e.subid==h.subid&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)}))}catch(p){c.e(p)}finally{c.f()}}}catch(p){o.e(p)}finally{o.f()}return n.abrupt("return",this.allStats);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"groupProvider",value:function(){var t,r={},a=this.allStats.reduce((function(e,t){var a=t.publisher;return r[a]?(r[a].clicks+=parseFloat(t.clicks),r[a].searches+=parseFloat(t.searches?t.searches:0),r[a].coverage+=parseFloat(t.coverage?t.coverage:0),r[a].ppc+=parseFloat(t.ppc?t.ppc:0),r[a].tq+=parseFloat(t.tq?t.tq:0),r[a].revenue+=parseFloat(t.revenue),r[a].split+=parseFloat(t.split),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!0,this.cdr.markForCheck()}},{key:"backProvider",value:function(){this.rows=this.allStats,this.groupPublishFlag=!1,this.cdr.markForCheck()}},{key:"remove_element",value:function(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return void e.splice(r,1)}},{key:"updateReportingFiltering",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.range=e,t.next=3,this.getAllHopkinStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 3:return this.rows=t.sent,t.next=6,this.getChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 6:return this.chartData=t.sent,t.next=9,this.getSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 9:this.summaryMetrics=t.sent,this.groupPublishFlag=!1,this.refreshTable();case 12:case"end":return t.stop()}}),t,this)})))}},{key:"getSelectedCompanyStored",value:function(){return this.userService.getSelectedCompanyFromLocalStorage()}},{key:"toggleExpandRow",value:function(e){console.log("Toggled Expand Row!",e),this.table.rowDetail.toggleExpandRow(e)}},{key:"onDetailToggle",value:function(e){console.log("Detail Toggled",e)}},{key:"refreshTable",value:function(){this.cdr.markForCheck()}},{key:"getCompanyTags",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.split("/")[1],t.prev=1,t.next=4,this.tagService.getCompanyTags(r).toPromise();case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))}},{key:"getChartMetrics",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,s,u,c,h,p,g,f,b,d,m,v,y,S,D,w,F,W,P,x,M,V,C,O,k,R,_,T,I;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.hopkinService.getHopkinStats(t,r,a).toPromise();case 3:i=n.sent,o=e((this.allChartStat=i.stats,this.allChartStat.map((function(e){e.publisher="No Publisher",e.tagname="No Tag"})),this.tagList));try{for(o.s();!(s=o.n()).done;)if("hopkins"==(u=s.value).tag.advertiser){c=e(u.tag.subids);try{for(c.s();!(h=c.n()).done;)"Contains"==(p=h.value).filterTag?this.allChartStat.map((function(e){e.subid.includes(p.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"StartsWith"==p.filterTag?this.allChartStat.map((function(e){e.subid.startsWith(p.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"EndsWith"==p.filterTag?this.allChartStat.map((function(e){e.subid.endsWith(p.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"ExactValue"==p.filterTag&&this.allChartStat.map((function(e){e.subid==p.subid&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)}))}catch(N){c.e(N)}finally{c.f()}}}catch(N){o.e(N)}finally{o.f()}for(d in g=l.chain(this.allChartStat).sortBy((function(e){return e.date})).sortBy((function(e){return e.publisher})).value(),f=function e(t,r){if(!r.length)return t;var a=r[0],n=r.slice(1);return l.mapValues(l.groupBy(t,a),(function(t){return e(t,n)}))}(g,["date","publisher"]),b=[],f)if(f.hasOwnProperty(d))for(m in f[d])v={date:f[d][m][0].date,publisher:f[d][m][0].publisher,revenue:l.reduce(f[d][m],(function(e,t){return e+t.revenue}),0)},b.push(v);for(y=[],S=0,D=b;S<D.length;S++)w=D[S],y.push(w.publisher);F=y.filter((function(e,t,r){return t===r.indexOf(e)})),this.allChartStat=this.allChartStat.slice().sort((function(e,t){return e.date-t.date})),W={},P=this.allChartStat.reduce((function(e,t){var r=t.date;return W[r]?W[r].searches+=parseInt(t.searches):(W[r]=Object.assign({},t),e.push(W[r])),e}),[]),x=[],M=[],V={},C=e(P);try{for(C.s();!(O=C.n()).done;)k=O.value,x.push(k.date),M.push(k.searches)}catch(N){C.e(N)}finally{C.f()}R=[],_=e(F);try{for(I=function(){var t,r=T.value,a=[],n=e(x);try{var i=function(){var e=t.value,n=b.filter((function(t){return t.date==e&&t.publisher==r}));a.push(n.length>0?n[0].revenue:0)};for(n.s();!(t=n.n()).done;)i()}catch(N){n.e(N)}finally{n.f()}var o={};o[r]=a,R.push(o)},_.s();!(T=_.n()).done;)I()}catch(N){_.e(N)}finally{_.f()}return n.abrupt("return",(V.revenuePerDay=R,V.datesOfRevenue=x,V.searchesPerDay=M,V.publisherName=F,V));case 22:return n.prev=22,n.t0=n.catch(0),n.abrupt("return",n.t0);case 25:case"end":return n.stop()}}),n,this,[[0,22]])})))}},{key:"getSummaryMetrics",value:function(e,t,r){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var n,i,o,s,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.hopkinService.getSummaryMetrics(e,t,r).toPromise();case 2:return n=a.sent,i={},o=0,s=0,u=0,a.abrupt("return",(0!=n.summary[0].lastMonthStat[0].profitPace&&(o=(n.summary[0].summaryMetrics[0].profitPace-n.summary[0].lastMonthStat[0].profitPace)/n.summary[0].lastMonthStat[0].profitPace*100),0!=n.summary[0].twoLastMonthStat[0].profitPace&&(s=(n.summary[0].lastMonthStat[0].profitPace-n.summary[0].twoLastMonthStat[0].profitPace)/n.summary[0].twoLastMonthStat[0].profitPace*100),0!=n.summary[0].prevSelectedStat[0].profitPace&&(u=(n.summary[0].selectedStat[0].profitPace-n.summary[0].prevSelectedStat[0].profitPace)/n.summary[0].prevSelectedStat[0].profitPace*100),n.summary[0].summaryMetrics[0].percentPace=o,n.summary[0].lastMonthStat[0].percentPace=s,n.summary[0].selectedStat[0].percentPace=u,n.summary[0].selectedStat[0].selectedStartDate=t,n.summary[0].selectedStat[0].selectedEndDate=r,i.summary=n.summary,i));case 5:case"end":return a.stop()}}),a,this)})))}}]),t}()).\u0275fac=function(e){return new(e||rt)(h.Qb(h.i),h.Qb(p.a),h.Qb(ye.a),h.Qb(f.a))},rt.\u0275cmp=h.Kb({type:rt,selectors:[["app-hopkins"]],viewQuery:function(e,t){var r;1&e&&h.Tc(Se,!0),2&e&&h.zc(r=h.ic())&&(t.table=r.first)},decls:37,vars:24,consts:[[3,"onDatesPicked"],[3,"chartData",4,"ngIf"],[3,"summaryMetricsData",4,"ngIf"],[1,"row","px-6"],[1,"btn","btn-sm","btn-primary","mx-3",3,"click"],[1,"btn","btn-sm","btn-dark","mx-3",3,"click"],[1,"material","fullscreen","expandable",2,"top","30px","height","500px",3,"columnMode","headerHeight","footerHeight","rowHeight","scrollbarV","rows","loadingIndicator"],["expandableTable",""],[3,"rowHeight","toggle"],["myDetailRow",""],["ngx-datatable-row-detail-template",""],[3,"width","resizeable","sortable","draggable","canAutoResize"],["ngx-datatable-cell-template",""],["name","date",3,"minWidth",4,"ngIf"],["name","subid",4,"ngIf"],["name","publisher",3,"minWidth"],["ngx-datatable-header-template",""],["name","searches",4,"ngIf"],["name","clicks",4,"ngIf"],["name","coverage",4,"ngIf"],["name","ppc",4,"ngIf"],["name","tq",4,"ngIf"],["name","split",3,"minWidth"],["name","publisherNet"],["name","profit"],["name","revenue"],[3,"chartData"],[3,"summaryMetricsData"],[2,"padding-left","35px"],["href","javascript:void(0)","title","Expand/Collapse Row",3,"click"],["name","date",3,"minWidth"],["name","subid"],["name","searches"],["name","clicks"],["name","coverage"],["name","ppc"],["name","tq"]],template:function(e,t){1&e&&(h.Wb(0,"app-reporting-filtering",0),h.hc("onDatesPicked",(function(e){return t.updateReportingFiltering(e)})),h.Vb(),h.Mc(1,De,1,1,"app-reporting-revenue-chart",1),h.Mc(2,we,1,1,"app-summary-metrics",2),h.Wb(3,"div",3),h.Wb(4,"button",4),h.hc("click",(function(){return t.groupProvider()})),h.Oc(5," Group "),h.Vb(),h.Wb(6,"button",5),h.hc("click",(function(){return t.backProvider()})),h.Oc(7," Back "),h.Vb(),h.Vb(),h.Wb(8,"ngx-datatable",6,7),h.Wb(10,"ngx-datatable-row-detail",8,9),h.hc("toggle",(function(e){return t.onDetailToggle(e)})),h.Mc(12,Fe,6,0,"ng-template",10),h.Vb(),h.Wb(13,"ngx-datatable-column",11),h.Mc(14,We,1,4,"ng-template",12),h.Vb(),h.Mc(15,Me,3,1,"ngx-datatable-column",13),h.Mc(16,Oe,3,0,"ngx-datatable-column",14),h.Wb(17,"ngx-datatable-column",15),h.Mc(18,ke,1,0,"ng-template",16),h.Mc(19,Re,2,1,"ng-template",12),h.Vb(),h.Mc(20,Ie,3,0,"ngx-datatable-column",17),h.Mc(21,Ae,3,0,"ngx-datatable-column",18),h.Mc(22,Le,3,0,"ngx-datatable-column",19),h.Mc(23,Ye,3,0,"ngx-datatable-column",20),h.Mc(24,Ge,3,0,"ngx-datatable-column",21),h.Wb(25,"ngx-datatable-column",22),h.Mc(26,qe,1,0,"ng-template",16),h.Mc(27,$e,4,6,"ng-template",12),h.Vb(),h.Wb(28,"ngx-datatable-column",23),h.Mc(29,Ke,1,0,"ng-template",16),h.Mc(30,Xe,3,4,"ng-template",12),h.Vb(),h.Wb(31,"ngx-datatable-column",24),h.Mc(32,Ze,1,0,"ng-template",16),h.Mc(33,Je,3,4,"ng-template",12),h.Vb(),h.Wb(34,"ngx-datatable-column",25),h.Mc(35,et,1,0,"ng-template",16),h.Mc(36,tt,3,4,"ng-template",12),h.Vb(),h.Vb()),2&e&&(h.Db(1),h.rc("ngIf",t.chartData),h.Db(1),h.rc("ngIf",t.summaryMetrics),h.Db(6),h.rc("columnMode","force")("headerHeight",50)("footerHeight",0)("rowHeight",50)("scrollbarV",!0)("rows",t.rows)("loadingIndicator",t.loadingIndicator),h.Db(2),h.rc("rowHeight",100),h.Db(3),h.rc("width",30)("resizeable",!1)("sortable",!1)("draggable",!1)("canAutoResize",!1),h.Db(2),h.rc("ngIf",!t.groupPublishFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag),h.Db(1),h.rc("minWidth",100),h.Db(3),h.rc("ngIf",!t.groupPublishFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag),h.Db(1),h.rc("minWidth",35))},directives:[b.a,s.p,S.d,S.e,S.f,S.b,S.a,S.c,F,V],pipes:[s.f,s.g,s.d],styles:[""]}),rt),nt=["expandableTable"];function it(e,t){1&e&&(h.Wb(0,"div",23),h.Wb(1,"div"),h.Wb(2,"strong"),h.Oc(3,"Address"),h.Vb(),h.Vb(),h.Wb(4,"div"),h.Oc(5,"Test"),h.Vb(),h.Vb())}function ot(e,t){if(1&e){var r=h.Xb();h.Wb(0,"a",24),h.hc("click",(function(){h.Dc(r);var e=t.row;return h.lc().toggleExpandRow(e)})),h.Vb()}if(2&e){var a=t.expanded;h.Ib("datatable-icon-right",!a)("datatable-icon-down",a)}}function st(e,t){1&e&&h.Oc(0," Publisher ")}function ut(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function ct(e,t){1&e&&h.Oc(0," Tag ")}function lt(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function ht(e,t){1&e&&h.Oc(0," Total Searches ")}function pt(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function gt(e,t){1&e&&h.Oc(0," Monetized Searches ")}function ft(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function bt(e,t){1&e&&h.Oc(0," Clicks ")}function dt(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function mt(e,t){1&e&&h.Oc(0," Follow On ")}function vt(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function yt(e,t){if(1&e&&(h.Wb(0,"span"),h.Oc(1),h.Vb()),2&e){var r=t.column;h.Db(1),h.Pc(r.name)}}function St(e,t){if(1&e&&(h.Rb(0,"strong",25),h.mc(1,"percent")),2&e){var r=t.row;h.rc("innerHTML",h.oc(1,1,r.clicks/r.totalSearches,"2.2-2"),h.Ec)}}function Dt(e,t){1&e&&h.Oc(0," Revenue ")}function wt(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}var Ft,Wt,Pt=((Wt=function(){function e(){r(this,e),this.rows=[{name:"Greg",tag:"YHS Organic",totalSearches:"536412",monetizedSearches:"501235",revenue:"52623",clicks:50351,followOn:"13%"}],this.columns=[{prop:"name"},{name:"Gender"}],this.expanded={}}return n(e,[{key:"ngOnInit",value:function(){}},{key:"toggleExpandRow",value:function(e){console.log("Toggled Expand Row!",e),this.table.rowDetail.toggleExpandRow(e)}},{key:"onDetailToggle",value:function(e){console.log("Detail Toggled",e)}}]),e}()).\u0275fac=function(e){return new(e||Wt)},Wt.\u0275cmp=h.Kb({type:Wt,selectors:[["app-imgage-advantage"]],viewQuery:function(e,t){var r;1&e&&h.Tc(nt,!0),2&e&&h.zc(r=h.ic())&&(t.table=r.first)},decls:70,vars:13,consts:[[1,"row"],[1,"col-xl-6"],[1,"card","card-custom","example","example-compact","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"card-body"],[1,"material","fullscreen","expandable",2,"top","52px",3,"columnMode","headerHeight","footerHeight","rowHeight","scrollbarV","scrollbarH","rows"],["expandableTable",""],[3,"rowHeight","toggle"],["myDetailRow",""],["ngx-datatable-row-detail-template",""],[3,"width","resizeable","sortable","draggable","canAutoResize"],["ngx-datatable-cell-template",""],["name","name"],["ngx-datatable-header-template",""],["name","tag"],["name","totalSearches"],["name","monetizedSearches"],["name","clicks"],["name","followOn"],["name","CTR"],["name","revenue"],[2,"padding-left","35px"],["href","javascript:void(0)","title","Expand/Collapse Row",3,"click"],[3,"innerHTML"]],template:function(e,t){1&e&&(h.Wb(0,"div",0),h.Wb(1,"div",1),h.Wb(2,"div",2),h.Wb(3,"div",3),h.Wb(4,"div",4),h.Wb(5,"h2",5),h.Oc(6,"Month to Date Stats"),h.Vb(),h.Vb(),h.Vb(),h.Wb(7,"div",6),h.Wb(8,"mat-list"),h.Wb(9,"mat-list-item"),h.Oc(10,"Revenue: $103,201.26"),h.Vb(),h.Rb(11,"mat-divider"),h.Wb(12,"mat-list-item"),h.Oc(13,"Revenue Pace: $131,285.19"),h.Vb(),h.Rb(14,"mat-divider"),h.Wb(15,"mat-list-item"),h.Oc(16,"Profit: $21,109.59"),h.Vb(),h.Rb(17,"mat-divider"),h.Wb(18,"mat-list-item"),h.Oc(19,"Profit Pace: $173,121.45"),h.Vb(),h.Rb(20,"mat-divider"),h.Wb(21,"mat-list-item"),h.Oc(22,"Percentage Change: +27%"),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(23,"div",1),h.Wb(24,"div",2),h.Wb(25,"div",3),h.Wb(26,"div",4),h.Wb(27,"h2",5),h.Oc(28,"Last Month Stats"),h.Vb(),h.Vb(),h.Vb(),h.Wb(29,"div",6),h.Wb(30,"mat-list"),h.Wb(31,"mat-list-item"),h.Oc(32,"Revenue: $113,542.23"),h.Vb(),h.Rb(33,"mat-divider"),h.Wb(34,"mat-list-item"),h.Oc(35,"Profit: $14,121.39"),h.Vb(),h.Rb(36,"mat-divider"),h.Wb(37,"mat-list-item"),h.Oc(38,"Percentage Change: +11%"),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(39,"ngx-datatable",7,8),h.Wb(41,"ngx-datatable-row-detail",9,10),h.hc("toggle",(function(e){return t.onDetailToggle(e)})),h.Mc(43,it,6,0,"ng-template",11),h.Vb(),h.Wb(44,"ngx-datatable-column",12),h.Mc(45,ot,1,4,"ng-template",13),h.Vb(),h.Wb(46,"ngx-datatable-column",14),h.Mc(47,st,1,0,"ng-template",15),h.Mc(48,ut,2,1,"ng-template",13),h.Vb(),h.Wb(49,"ngx-datatable-column",16),h.Mc(50,ct,1,0,"ng-template",15),h.Mc(51,lt,2,1,"ng-template",13),h.Vb(),h.Wb(52,"ngx-datatable-column",17),h.Mc(53,ht,1,0,"ng-template",15),h.Mc(54,pt,3,3,"ng-template",13),h.Vb(),h.Wb(55,"ngx-datatable-column",18),h.Mc(56,gt,1,0,"ng-template",15),h.Mc(57,ft,3,3,"ng-template",13),h.Vb(),h.Wb(58,"ngx-datatable-column",19),h.Mc(59,bt,1,0,"ng-template",15),h.Mc(60,dt,3,3,"ng-template",13),h.Vb(),h.Wb(61,"ngx-datatable-column",20),h.Mc(62,mt,1,0,"ng-template",15),h.Mc(63,vt,2,1,"ng-template",13),h.Vb(),h.Wb(64,"ngx-datatable-column",21),h.Mc(65,yt,2,1,"ng-template",15),h.Mc(66,St,2,4,"ng-template",13),h.Vb(),h.Wb(67,"ngx-datatable-column",22),h.Mc(68,Dt,1,0,"ng-template",15),h.Mc(69,wt,3,4,"ng-template",13),h.Vb(),h.Vb()),2&e&&(h.Db(39),h.rc("columnMode","force")("headerHeight",50)("footerHeight",0)("rowHeight",50)("scrollbarV",!0)("scrollbarH",!0)("rows",t.rows),h.Db(2),h.rc("rowHeight",100),h.Db(3),h.rc("width",50)("resizeable",!1)("sortable",!1)("draggable",!1)("canAutoResize",!1))},directives:[W.a,W.c,P.a,S.d,S.e,S.f,S.b,S.a,S.c],pipes:[s.g,s.w,s.d],styles:[""]}),Wt),xt=((Ft=function(){function e(){r(this,e)}return n(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Ft)},Ft.\u0275cmp=h.Kb({type:Ft,selectors:[["app-media-net"]],decls:2,vars:0,template:function(e,t){1&e&&(h.Wb(0,"p"),h.Oc(1,"media-net works!"),h.Vb())},styles:[""]}),Ft),Mt=i("0TA1"),Vt=i("SHm6"),Ct=i("qFsG"),Ot=["expandableTable"];function kt(e,t){if(1&e&&h.Rb(0,"app-reporting-revenue-chart",33),2&e){var r=h.lc();h.rc("chartData",r.chartData)}}function Rt(e,t){if(1&e&&h.Rb(0,"app-summary-metrics",34),2&e){var r=h.lc();h.rc("summaryMetricsData",r.summaryMetrics)}}function _t(e,t){if(1&e&&(h.Wb(0,"mat-option",35),h.Oc(1),h.Vb()),2&e){var r=t.$implicit;h.rc("value",r.value),h.Db(1),h.Qc(" ",r.label," ")}}function Tt(e,t){if(1&e){var r=h.Xb();h.Wb(0,"div",4),h.Wb(1,"mat-form-field",5),h.Wb(2,"mat-label"),h.Oc(3,"Condition"),h.Vb(),h.Wb(4,"mat-select",6),h.hc("selectionChange",(function(e){return h.Dc(r),h.lc().filterConditionHandle(e)}))("ngModelChange",(function(e){return h.Dc(r),h.lc().filterCondition=e})),h.Wb(5,"mat-option",36),h.Oc(6,"Greater Than"),h.Vb(),h.Wb(7,"mat-option",37),h.Oc(8,"Less Than"),h.Vb(),h.Vb(),h.Vb(),h.Vb()}if(2&e){var a=h.lc();h.Db(4),h.rc("ngModel",a.filterCondition)}}function It(e,t){if(1&e){var r=h.Xb();h.Wb(0,"div",4),h.Wb(1,"mat-form-field",38),h.Wb(2,"mat-label"),h.Oc(3,"Filter Amount"),h.Vb(),h.Wb(4,"input",39),h.hc("ngModelChange",(function(e){return h.Dc(r),h.lc().filterAmount=e}))("input",(function(){return h.Dc(r),h.lc().updateFilterAmount()})),h.Vb(),h.Vb(),h.Vb()}if(2&e){var a=h.lc();h.Db(4),h.rc("ngModel",a.filterAmount)}}function Nt(e,t){if(1&e&&(h.Wb(0,"tr"),h.Wb(1,"td"),h.Oc(2),h.mc(3,"date"),h.Vb(),h.Wb(4,"td"),h.Oc(5),h.mc(6,"number"),h.Vb(),h.Wb(7,"td"),h.Oc(8),h.mc(9,"number"),h.Vb(),h.Wb(10,"td"),h.Oc(11),h.mc(12,"number"),h.Vb(),h.Wb(13,"td"),h.Oc(14),h.mc(15,"percent"),h.mc(16,"percent"),h.Vb(),h.Wb(17,"td"),h.Oc(18),h.mc(19,"currency"),h.mc(20,"currency"),h.Vb(),h.Wb(21,"td"),h.Oc(22),h.mc(23,"currency"),h.Vb(),h.Wb(24,"td"),h.Oc(25),h.mc(26,"currency"),h.Vb(),h.Wb(27,"td"),h.Oc(28),h.mc(29,"currency"),h.Vb(),h.Vb()),2&e){var r=t.$implicit;h.Db(2),h.Pc(h.nc(3,9,r.date)),h.Db(3),h.Pc(h.nc(6,11,r.totalsearches)),h.Db(3),h.Pc(h.nc(9,13,r.impressions)),h.Db(3),h.Pc(h.nc(12,15,r.clicks)),h.Db(3),h.Pc(h.oc(15,17,r.ctr,"2.2-2")||h.oc(16,20,0,"2.2-2")),h.Db(4),h.Pc(h.oc(19,23,r.cpc,"USD")||h.oc(20,26,0,"USD")),h.Db(4),h.Pc(h.oc(23,29,r.publisherNet,"USD")),h.Db(3),h.Pc(h.oc(26,32,r.profit,"USD")),h.Db(3),h.Pc(h.oc(29,35,r.revenue,"USD"))}}function jt(e,t){if(1&e&&(h.Wb(0,"div",42),h.Wb(1,"table",43),h.Wb(2,"thead"),h.Wb(3,"tr"),h.Wb(4,"th"),h.Oc(5,"Date"),h.Vb(),h.Wb(6,"th"),h.Oc(7,"Searches"),h.Vb(),h.Wb(8,"th"),h.Oc(9,"Impressions"),h.Vb(),h.Wb(10,"th"),h.Oc(11,"Clicks"),h.Vb(),h.Wb(12,"th"),h.Oc(13,"CTR"),h.Vb(),h.Wb(14,"th"),h.Oc(15,"CPC"),h.Vb(),h.Wb(16,"th"),h.Oc(17,"Publisher Net"),h.Vb(),h.Wb(18,"th"),h.Oc(19,"Profit"),h.Vb(),h.Wb(20,"th"),h.Oc(21,"Revenue"),h.Vb(),h.Vb(),h.Vb(),h.Wb(22,"tbody"),h.Mc(23,Nt,30,38,"tr",44),h.Vb(),h.Vb(),h.Vb()),2&e){var r=h.lc().row;h.Db(23),h.rc("ngForOf",r.subReportingForDate)}}function At(e,t){1&e&&(h.Wb(0,"div",45),h.Wb(1,"div"),h.Wb(2,"strong"),h.Oc(3,"Address"),h.Vb(),h.Vb(),h.Wb(4,"div"),h.Oc(5,"Test"),h.Vb(),h.Vb())}function Et(e,t){if(1&e&&(h.Mc(0,jt,24,1,"div",40),h.Mc(1,At,6,0,"div",41)),2&e){var r=h.lc();h.rc("ngIf","publisher"===r.groupType||"subid"===r.groupType),h.Db(1),h.rc("ngIf","publisher"!==r.groupType&&"subid"!==r.groupType)}}function zt(e,t){if(1&e){var r=h.Xb();h.Wb(0,"a",46),h.hc("click",(function(){h.Dc(r);var e=t.row;return h.lc().toggleExpandRow(e)})),h.Vb()}if(2&e){var a=t.expanded;h.Ib("datatable-icon-right",!a)("datatable-icon-down",a)}}function Lt(e,t){1&e&&h.Oc(0," Date ")}function Ut(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"date"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function Ht(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",47),h.Mc(1,Lt,1,0,"ng-template",31),h.Mc(2,Ut,3,3,"ng-template",16),h.Vb()),2&e&&h.rc("minWidth",100)}function Yt(e,t){1&e&&h.Oc(0," Subid ")}function Bt(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function Qt(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",48),h.Mc(1,Yt,1,0,"ng-template",31),h.Mc(2,Bt,2,1,"ng-template",16),h.Vb())}function Gt(e,t){1&e&&h.Oc(0," Publisher ")}function qt(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function $t(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",49),h.Mc(1,Gt,1,0,"ng-template",31),h.Mc(2,qt,2,1,"ng-template",16),h.Vb()),2&e&&h.rc("minWidth",100)}function Kt(e,t){1&e&&h.Oc(0," Searches ")}function Xt(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function Zt(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",50),h.Mc(1,Kt,1,0,"ng-template",31),h.Mc(2,Xt,3,3,"ng-template",16),h.Vb())}function Jt(e,t){1&e&&h.Oc(0," Impressions ")}function er(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function tr(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",51),h.Mc(1,Jt,1,0,"ng-template",31),h.Mc(2,er,3,3,"ng-template",16),h.Vb())}function rr(e,t){1&e&&h.Oc(0," Clicks ")}function ar(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function nr(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",52),h.Mc(1,rr,1,0,"ng-template",31),h.Mc(2,ar,3,3,"ng-template",16),h.Vb())}function ir(e,t){1&e&&h.Oc(0," CPC ")}function or(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.mc(3,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD")||h.oc(3,4,0,"USD"))}}function sr(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",53),h.Mc(1,ir,1,0,"ng-template",31),h.Mc(2,or,4,7,"ng-template",16),h.Vb())}function ur(e,t){1&e&&h.Oc(0," CTR ")}function cr(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"percent"),h.mc(3,"percent"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"2.2-2")||h.oc(3,4,0,"2.2-2"))}}function lr(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",54),h.Mc(1,ur,1,0,"ng-template",31),h.Mc(2,cr,4,7,"ng-template",16),h.Vb())}function hr(e,t){1&e&&h.Oc(0," Bing Coverage ")}function pr(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Qc("",h.nc(2,1,r)," %")}}function gr(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",55),h.Mc(1,hr,1,0,"ng-template",31),h.Mc(2,pr,3,3,"ng-template",16),h.Vb())}function fr(e,t){1&e&&h.Oc(0," CF Coverage ")}function br(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Qc("",h.nc(2,1,r)," %")}}function dr(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",56),h.Mc(1,fr,1,0,"ng-template",31),h.Mc(2,br,3,3,"ng-template",16),h.Vb())}function mr(e,t){1&e&&h.Oc(0," Follow On ")}function vr(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"1.2-2"))}}function yr(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",57),h.Mc(1,mr,1,0,"ng-template",31),h.Mc(2,vr,3,4,"ng-template",16),h.Vb())}function Sr(e,t){1&e&&h.Oc(0," Publisher Net ")}function Dr(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}function wr(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",58),h.Mc(1,Sr,1,0,"ng-template",31),h.Mc(2,Dr,3,4,"ng-template",16),h.Vb())}function Fr(e,t){1&e&&h.Oc(0," Profit ")}function Wr(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}function Pr(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",59),h.Mc(1,Fr,1,0,"ng-template",31),h.Mc(2,Wr,3,4,"ng-template",16),h.Vb())}function xr(e,t){1&e&&h.Oc(0," Revenue ")}function Mr(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}function Vr(e,t){1&e&&h.Oc(0," Split ")}function Cr(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.mc(3,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r)||h.oc(3,3,0,"1.0-0"))}}function Or(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",60),h.Mc(1,Vr,1,0,"ng-template",31),h.Mc(2,Cr,4,6,"ng-template",16),h.Vb()),2&e&&h.rc("minWidth",35)}var kr,Rr,_r=((Rr=function(){function t(e,a,n,i,o,s,u,c){r(this,t),this.perionService=e,this.cdr=a,this.userService=n,this.tagService=i,this.exportDataService=o,this.datePipe=s,this.currencyPipe=u,this.percentPipe=c,this.range={startDate:"",endDate:""},this.loadingIndicator=!0,this.summary={revenue:0,profit:0},this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.groupCoverageFlag=!1,this.groupBingCoverageFlag=!1,this.groupCFCoverageFlag=!1,this.columns=[{prop:"name"},{name:"Gender"}],this.expanded={},this.tagList=[],this.showFilterAmount=!1,this.filterCondition="",this.groupType="",this.groupbyList=[{value:"date",label:"Date"},{value:"publisher",label:"Publisher"},{value:"subid",label:"Subid"},{value:"bestBingCoverage",label:"Best Bing Coverage"},{value:"worstBingCoverage",label:"Worst Bing Coverage"},{value:"bestCFCoverage",label:"Best CF Coverage"},{value:"worstCFCoverage",label:"Worst CF Coverage"},{value:"reset",label:"Reset"}],this.selectedCompany=this.getSelectedCompanyFromLocalStorage()}return n(t,[{key:"ngAfterViewInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCompanyTags(this.selectedCompany);case 2:return this.tagList=e.sent,this.rows=[],e.next=6,this.getAllPerionStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 6:return this.rows=e.sent,e.next=9,this.getChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 9:return this.chartData=e.sent,e.next=12,this.getSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 12:this.summaryMetrics=e.sent,this.refreshTable();case 14:case"end":return e.stop()}}),e,this)})))}},{key:"getSelectedCompanyFromLocalStorage",value:function(){return this.userService.getSelectedCompanyFromLocalStorage()}},{key:"toggleExpandRow",value:function(e){console.log("Toggled Expand Row!",e),this.table.rowDetail.toggleExpandRow(e)}},{key:"onDetailToggle",value:function(e){console.log("Detail Toggled",e)}},{key:"getDetailRowHeight",value:function(e,t){var r;return e&&(r=e.detailHeight),r}},{key:"updateAllPerionStats",value:function(e,t,r){this.perionService.updateAllPerionStats(e,t,r).subscribe((function(e){}))}},{key:"updateReportingFiltering",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.range=e,t.next=3,this.getAllPerionStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 3:return this.rows=t.sent,t.next=6,this.getChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 6:return this.chartData=t.sent,t.next=9,this.getSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 9:this.summaryMetrics=t.sent,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.groupCoverageFlag=!1,this.groupBingCoverageFlag=!1,this.groupCFCoverageFlag=!1,this.groupType="",this.refreshTable();case 18:case"end":return t.stop()}}),t,this)})))}},{key:"getAllPerionStats",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,s,u,c,l,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.perionService.getAllPerionStats(t,r,a).toPromise();case 3:i=n.sent,o=e((this.loadingIndicator=!1,this.allStat=i.stats,this.allStat.map((function(e){e.publisher="No Publisher",e.tagname="No Tag"})),this.tagList));try{for(o.s();!(s=o.n()).done;)if("perion"==(u=s.value).tag.advertiser){c=e(u.tag.subids);try{for(c.s();!(l=c.n()).done;)"Contains"==(h=l.value).filterTag?this.allStat.map((function(e){e.subid.includes(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"StartsWith"==h.filterTag?this.allStat.map((function(e){e.subid.startsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"EndsWith"==h.filterTag?this.allStat.map((function(e){e.subid.endsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"ExactValue"==h.filterTag&&this.allStat.map((function(e){e.subid==h.subid&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)}))}catch(p){c.e(p)}finally{c.f()}}}catch(p){o.e(p)}finally{o.f()}return n.abrupt("return",this.allStat);case 9:return n.prev=9,n.t0=n.catch(0),n.abrupt("return",n.t0);case 12:case"end":return n.stop()}}),n,this,[[0,9]])})))}},{key:"groupDate",value:function(){var t,r={},a=this.allStat.reduce((function(e,t){var a=t.date;return r[a]?(r[a].clicks+=parseFloat(t.clicks),r[a].impressions+=parseFloat(t.impressions?t.impressions:0),r[a].totalsearches+=parseFloat(t.totalsearches?t.totalsearches:0),r[a].bingCoverage+=parseFloat(t.bingCoverage?t.bingCoverage:0),r[a].cfCoverage+=parseFloat(t.cfCoverage?t.cfCoverage:0),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].revenue+=parseFloat(t.revenue),r[a].split+=parseFloat(t.split),r[a].followon+=parseFloat(t.followon?t.followon:0),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.followon=i.followon/i.counter,i.ctr=i.clicks/i.impressions,i.cpc=i.revenue/i.clicks,i.bingCoverage=i.bingCoverage/i.counter,i.cfCoverage=i.cfCoverage/i.counter}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupDateShowFlag=!0,this.groupPublishFlag=!1,this.groupSubidShowFlag=!1,this.groupCoverageFlag=!1,this.groupBingCoverageFlag=!1,this.groupCFCoverageFlag=!1,this.cdr.markForCheck()}},{key:"groupSubid",value:function(){var t,r={},a=this.allStat.reduce((function(e,t){var a=t.subid;return r[a]?(r[a].clicks+=parseFloat(t.clicks),r[a].impressions+=parseFloat(t.impressions?t.impressions:0),r[a].totalsearches+=parseFloat(t.totalsearches?t.totalsearches:0),r[a].bingCoverage+=parseFloat(t.bingCoverage?t.bingCoverage:0),r[a].cfCoverage+=parseFloat(t.cfCoverage?t.cfCoverage:0),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].revenue+=parseFloat(t.revenue),r[a].split+=parseFloat(t.split),r[a].followon+=parseFloat(t.followon?t.followon:0),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.followon=i.followon/i.counter,i.ctr=i.clicks/i.impressions,i.cpc=i.revenue/i.clicks,i.bingCoverage=i.bingCoverage/i.counter,i.cfCoverage=i.cfCoverage/i.counter,i.subReportingForDate=this.groupDateForSubid(i),i.detailHeight=50*(i.subReportingForDate.length+1)}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!0,this.groupCoverageFlag=!1,this.groupBingCoverageFlag=!1,this.groupCFCoverageFlag=!1,this.cdr.markForCheck()}},{key:"groupProvider",value:function(){var t,r={},a=this.allStat.reduce((function(e,t){var a=t.publisher;return r[a]?(r[a].clicks+=parseFloat(t.clicks),r[a].impressions+=parseFloat(t.impressions?t.impressions:0),r[a].totalsearches+=parseFloat(t.totalsearches?t.totalsearches:0),r[a].profit+=parseFloat(t.profit),r[a].bingCoverage+=parseFloat(t.bingCoverage?t.bingCoverage:0),r[a].cfCoverage+=parseFloat(t.cfCoverage?t.cfCoverage:0),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].revenue+=parseFloat(t.revenue),r[a].split+=parseFloat(t.split),r[a].followon+=parseFloat(t.followon?t.followon:0),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.followon=i.followon/i.counter,i.ctr=i.clicks/i.impressions,i.cpc=i.revenue/i.clicks,i.bingCoverage=i.bingCoverage/i.counter,i.cfCoverage=i.cfCoverage/i.counter,i.subReportingForDate=this.groupDateForPublisher(i),i.detailHeight=50*(i.subReportingForDate.length+1)}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!0,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.groupCoverageFlag=!1,this.groupBingCoverageFlag=!1,this.groupCFCoverageFlag=!1,this.cdr.markForCheck()}},{key:"backGroup",value:function(){this.rows=this.allStat,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.groupCoverageFlag=!1,this.groupBingCoverageFlag=!1,this.groupCFCoverageFlag=!1,this.cdr.markForCheck()}},{key:"groupDateForPublisher",value:function(t){var r,a={},n=this.allStat.filter((function(e){return e.publisher===t.publisher})).reduce((function(e,t){var r=t.date;return a[r]?(a[r].clicks+=parseFloat(t.clicks),a[r].impressions+=parseFloat(t.impressions?t.impressions:0),a[r].totalsearches+=parseFloat(t.totalsearches?t.totalsearches:0),a[r].profit+=parseFloat(t.profit),a[r].bingCoverage+=parseFloat(t.bingCoverage?t.bingCoverage:0),a[r].cfCoverage+=parseFloat(t.cfCoverage?t.cfCoverage:0),a[r].publisherNet+=parseFloat(t.publisherNet),a[r].revenue+=parseFloat(t.revenue),a[r].split+=parseFloat(t.split),a[r].followon+=parseFloat(t.followon?t.followon:0),a[r].counter++):(a[r]=Object.assign({},t),a[r].counter=1,e.push(a[r])),e}),[]),i=e(n);try{for(i.s();!(r=i.n()).done;)(t=r.value).split=t.split/t.counter,t.followon=t.followon/t.counter,t.ctr=t.clicks/t.impressions,t.cpc=t.revenue/t.clicks,t.bingCoverage=t.bingCoverage/t.counter,t.cfCoverage=t.cfCoverage/t.counter}catch(o){i.e(o)}finally{i.f()}return n}},{key:"groupDateForSubid",value:function(t){var r,a={},n=this.allStat.filter((function(e){return e.subid===t.subid})).reduce((function(e,t){var r=t.date;return a[r]?(a[r].clicks+=parseFloat(t.clicks),a[r].impressions+=parseFloat(t.impressions?t.impressions:0),a[r].totalsearches+=parseFloat(t.totalsearches?t.totalsearches:0),a[r].profit+=parseFloat(t.profit),a[r].bingCoverage+=parseFloat(t.bingCoverage?t.bingCoverage:0),a[r].cfCoverage+=parseFloat(t.cfCoverage?t.cfCoverage:0),a[r].publisherNet+=parseFloat(t.publisherNet),a[r].revenue+=parseFloat(t.revenue),a[r].split+=parseFloat(t.split),a[r].followon+=parseFloat(t.followon?t.followon:0),a[r].counter++):(a[r]=Object.assign({},t),a[r].counter=1,e.push(a[r])),e}),[]),i=e(n);try{for(i.s();!(r=i.n()).done;)(t=r.value).split=t.split/t.counter,t.followon=t.followon/t.counter,t.ctr=t.clicks/t.impressions,t.cpc=t.revenue/t.clicks,t.bingCoverage=t.bingCoverage/t.counter,t.cfCoverage=t.cfCoverage/t.counter}catch(o){i.e(o)}finally{i.f()}return n}},{key:"updateFilterAmount",value:function(){this.groupCoverageCondition(this.groupType,this.filterAmount,this.filterCondition)}},{key:"groupCoverageCondition",value:function(t,r,a){var n,i={},o=this.allStat.reduce((function(e,t){var r=t.date+"-"+t.subid+"-"+t.publisher;return i[r]?(i[r].bingCoverage+=parseFloat(t.bingCoverage?t.bingCoverage:0),i[r].cfCoverage+=parseFloat(t.cfCoverage?t.cfCoverage:0),i[r].revenue+=parseFloat(t.revenue),i[r].counter++):(i[r]=Object.assign({},t),i[r].counter=1,e.push(i[r])),e}),[]),s=e(o);try{for(s.s();!(n=s.n()).done;){var u=n.value;u.bingCoverage=u.bingCoverage/u.counter,u.cfCoverage=u.cfCoverage/u.counter}}catch(c){s.e(c)}finally{s.f()}"worstBingCoverage"==t?(this.rows=r>0&&""!=a?"greater"==a?o.sort((function(e,t){return e.bingCoverage-t.bingCoverage})).filter((function(e){return e.revenue>=r})):o.sort((function(e,t){return e.bingCoverage-t.bingCoverage})).filter((function(e){return e.revenue<=r})):o.sort((function(e,t){return e.bingCoverage-t.bingCoverage})),this.groupBingCoverageFlag=!0,this.groupCFCoverageFlag=!1):"bestBingCoverage"==t?(this.rows=r>0&&""!=a?"greater"==a?o.sort((function(e,t){return t.bingCoverage-e.bingCoverage})).filter((function(e){return e.revenue>=r})):o.sort((function(e,t){return t.bingCoverage-e.bingCoverage})).filter((function(e){return e.revenue<=r})):o.sort((function(e,t){return t.bingCoverage-e.bingCoverage})),this.groupBingCoverageFlag=!0,this.groupCFCoverageFlag=!1):"bestCFCoverage"==t?(this.rows=r>0&&""!=a?"greater"==a?o.sort((function(e,t){return t.cfCoverage-e.cfCoverage})).filter((function(e){return e.revenue>=r})):o.sort((function(e,t){return t.cfCoverage-e.cfCoverage})).filter((function(e){return e.revenue<=r})):o.sort((function(e,t){return t.cfCoverage-e.cfCoverage})),this.groupBingCoverageFlag=!1,this.groupCFCoverageFlag=!0):(this.rows=r>0&&""!=a?"greater"==a?o.sort((function(e,t){return e.cfCoverage-t.cfCoverage})).filter((function(e){return e.revenue>=r})):o.sort((function(e,t){return e.cfCoverage-t.cfCoverage})).filter((function(e){return e.revenue<=r})):o.sort((function(e,t){return e.cfCoverage-t.cfCoverage})),this.groupBingCoverageFlag=!1,this.groupCFCoverageFlag=!0),this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.groupCoverageFlag=!0,this.cdr.markForCheck()}},{key:"filterConditionHandle",value:function(e){this.filterCondition=e.value,this.groupCoverageCondition(this.groupType,this.filterAmount,this.filterCondition),this.cdr.markForCheck()}},{key:"groupHandle",value:function(e){this.groupType=e.value,this.showFilterAmount=!1,this.filterAmount=0,this.filterCondition="","date"==e.value?this.groupDate():"publisher"==e.value?this.groupProvider():"subid"==e.value?this.groupSubid():"worstBingCoverage"==e.value||"bestBingCoverage"==e.value||"bestCFCoverage"==e.value||"worstCFCoverage"==e.value?(this.showFilterAmount=!0,this.groupCoverageCondition(e.value,this.filterAmount,this.filterCondition)):this.backGroup(),this.cdr.markForCheck()}},{key:"refreshTable",value:function(){this.cdr.markForCheck()}},{key:"exportToCsv",value:function(){var t=[];if("date"==this.groupType){var r,a=e(this.rows);try{for(a.s();!(r=a.n()).done;){var n=r.value,i={date:this.datePipe.transform(n.date,"dd MMM yyyy"),followOn:n.followon,publisherNet:this.currencyPipe.transform(n.publisherNet?n.publisherNet:0),profit:this.currencyPipe.transform(n.profit?n.profit:0),revenue:this.currencyPipe.transform(n.revenue?n.revenue:0),split:n.split};t.push(i)}}catch(x){a.e(x)}finally{a.f()}}else if("publisher"==this.groupType){var o,s=e(this.rows);try{for(s.s();!(o=s.n()).done;){var u=o.value,c={publisher:u.publisher,followOn:u.followon,publisherNet:this.currencyPipe.transform(u.publisherNet?u.publisherNet:0),profit:this.currencyPipe.transform(u.profit?u.profit:0),revenue:this.currencyPipe.transform(u.revenue?u.revenue:0),split:u.split};t.push(c)}}catch(x){s.e(x)}finally{s.f()}}else if("subid"==this.groupType){var l,h=e(this.rows);try{for(h.s();!(l=h.n()).done;){var p=l.value,g={subid:p.subid,followOn:p.followon,publisherNet:this.currencyPipe.transform(p.publisherNet?p.publisherNet:0),profit:this.currencyPipe.transform(p.profit?p.profit:0),revenue:this.currencyPipe.transform(p.revenue?p.revenue:0),split:p.split};t.push(g)}}catch(x){h.e(x)}finally{h.f()}}else if("worstBingCoverage"==this.groupType||"bestBingCoverage"==this.groupType){var f,b=e(this.rows);try{for(b.s();!(f=b.n()).done;){var d=f.value,m={date:this.datePipe.transform(d.date,"dd MMM yyyy"),subid:d.subid,publisher:d.publisher,bingCoverage:d.bingCoverage+"%",revenue:this.currencyPipe.transform(d.revenue?d.revenue:0)};t.push(m)}}catch(x){b.e(x)}finally{b.f()}}else if("worstCFCoverage"==this.groupType||"bestCFCoverage"==this.groupType){var v,y=e(this.rows);try{for(y.s();!(v=y.n()).done;){var S=v.value,D={date:this.datePipe.transform(S.date,"dd MMM yyyy"),subid:S.subid,publisher:S.publisher,cfCoverage:S.cfCoverage+"%",revenue:this.currencyPipe.transform(S.revenue?S.revenue:0)};t.push(D)}}catch(x){y.e(x)}finally{y.f()}}else{var w,F=e(this.rows);try{for(F.s();!(w=F.n()).done;){var W=w.value;W.date=this.datePipe.transform(W.date,"dd MMM yyyy"),W.bingCoverage=W.bingCoverage+"%",W.cfCoverage=W.cfCoverage+"%"}}catch(x){F.e(x)}finally{F.f()}t=this.rows}var P=t.length>0?Object.keys(t[0]):[];this.exportDataService.exportToCsv(t,""!==this.groupType?"perion-".concat(this.selectedCompany,"-").concat(this.groupType):"perion-"+this.selectedCompany,P)}},{key:"getSummaryMetrics",value:function(e,t,r){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var n,i,o,s,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,this.perionService.getSummaryMetrics(e,t,r).toPromise();case 3:return n=a.sent,i={},o=0,s=0,u=0,a.abrupt("return",(0!=n.summary[0].lastMonthStat[0].profitPace&&(o=(n.summary[0].summaryMetrics[0].profitPace-n.summary[0].lastMonthStat[0].profitPace)/n.summary[0].lastMonthStat[0].profitPace*100),0!=n.summary[0].twoLastMonthStat[0].profitPace&&(s=(n.summary[0].lastMonthStat[0].profitPace-n.summary[0].twoLastMonthStat[0].profitPace)/n.summary[0].twoLastMonthStat[0].profitPace*100),0!=n.summary[0].prevSelectedStat[0].profitPace&&(u=(n.summary[0].selectedStat[0].profitPace-n.summary[0].prevSelectedStat[0].profitPace)/n.summary[0].prevSelectedStat[0].profitPace*100),n.summary[0].summaryMetrics[0].percentPace=o,n.summary[0].lastMonthStat[0].percentPace=s,n.summary[0].selectedStat[0].percentPace=u,n.summary[0].selectedStat[0].selectedStartDate=t,n.summary[0].selectedStat[0].selectedEndDate=r,i.summary=n.summary,i));case 8:return a.prev=8,a.t0=a.catch(0),a.abrupt("return",a.t0);case 11:case"end":return a.stop()}}),a,this,[[0,8]])})))}},{key:"getChartMetrics",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,s,u,c,h,p,g,f,b,d,m,v,y,S,D,w,F,W,P,x,M,V,C,O,k,R,_,T,I;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.perionService.getAllPerionStats(t,r,a).toPromise();case 3:i=n.sent,o=e((this.allChartStat=i.stats,this.allChartStat.map((function(e){e.publisher="No Publisher",e.tagname="No Tag"})),this.tagList));try{for(o.s();!(s=o.n()).done;)if("perion"==(u=s.value).tag.advertiser){c=e(u.tag.subids);try{for(c.s();!(h=c.n()).done;)"Contains"==(p=h.value).filterTag?this.allChartStat.map((function(e){e.subid.includes(p.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"StartsWith"==p.filterTag?this.allChartStat.map((function(e){e.subid.startsWith(p.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"EndsWith"==p.filterTag?this.allChartStat.map((function(e){e.subid.endsWith(p.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"ExactValue"==p.filterTag&&this.allChartStat.map((function(e){e.subid==p.subid&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)}))}catch(N){c.e(N)}finally{c.f()}}}catch(N){o.e(N)}finally{o.f()}for(d in g=l.chain(this.allChartStat).sortBy((function(e){return e.date})).sortBy((function(e){return e.publisher})).value(),f=function e(t,r){if(!r.length)return t;var a=r[0],n=r.slice(1);return l.mapValues(l.groupBy(t,a),(function(t){return e(t,n)}))}(g,["date","publisher"]),b=[],f)if(f.hasOwnProperty(d))for(m in f[d])v={date:f[d][m][0].date,publisher:f[d][m][0].publisher,revenue:l.reduce(f[d][m],(function(e,t){return e+t.revenue}),0)},b.push(v);for(y=[],S=0,D=b;S<D.length;S++)w=D[S],y.push(w.publisher);F=y.filter((function(e,t,r){return t===r.indexOf(e)})),this.allChartStat=this.allChartStat.slice().sort((function(e,t){return e.date-t.date})),W={},P=this.allChartStat.reduce((function(e,t){var r=t.date;return W[r]?W[r].totalsearches+=parseInt(t.totalsearches):(W[r]=Object.assign({},t),e.push(W[r])),e}),[]),x=[],M=[],V={},C=e(P);try{for(C.s();!(O=C.n()).done;)k=O.value,x.push(k.date),M.push(k.totalsearches)}catch(N){C.e(N)}finally{C.f()}R=[],_=e(F);try{for(I=function(){var t,r=T.value,a=[],n=e(x);try{var i=function(){var e=t.value,n=b.filter((function(t){return t.date==e&&t.publisher==r}));a.push(n.length>0?n[0].revenue:0)};for(n.s();!(t=n.n()).done;)i()}catch(N){n.e(N)}finally{n.f()}var o={};o[r]=a,R.push(o)},_.s();!(T=_.n()).done;)I()}catch(N){_.e(N)}finally{_.f()}return n.abrupt("return",(V.revenuePerDay=R,V.datesOfRevenue=x,V.searchesPerDay=M,V.publisherName=F,V));case 22:return n.prev=22,n.t0=n.catch(0),n.abrupt("return",n.t0);case 25:case"end":return n.stop()}}),n,this,[[0,22]])})))}},{key:"remove_element",value:function(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return void e.splice(r,1)}},{key:"combineSummaryMetrics",value:function(e){var t=this;e.summary.keys.forEach((function(e){console.log(e.revenue),t.summary.revenue+=e.revenue,t.summary.profit+=e.revenue*(.01*(100-e.split))}))}},{key:"getCompanyTags",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.split("/")[1],t.prev=1,t.next=4,this.tagService.getCompanyTags(r).toPromise();case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))}}]),t}()).\u0275fac=function(e){return new(e||Rr)(h.Qb(Mt.a),h.Qb(h.i),h.Qb(p.a),h.Qb(f.a),h.Qb(Vt.a),h.Qb(s.f),h.Qb(s.d),h.Qb(s.w))},Rr.\u0275cmp=h.Kb({type:Rr,selectors:[["app-perion"]],viewQuery:function(e,t){var r;1&e&&h.Tc(Ot,!0),2&e&&h.zc(r=h.ic())&&(t.table=r.first)},decls:38,vars:33,consts:[[3,"onDatesPicked"],[3,"chartData",4,"ngIf"],[3,"summaryMetricsData",4,"ngIf"],[1,"row"],[1,"col-xl-4"],["appearance","fill"],[3,"ngModel","selectionChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","col-xl-4",4,"ngIf"],[1,"row","py-2"],[1,"btn","btn-sm","btn-primary","mx-3",3,"click"],[1,"material","fullscreen","expandable",2,"top","10px","height","500px",3,"columnMode","headerHeight","footerHeight","rowHeight","scrollbarV","rows","loadingIndicator"],["expandableTable",""],[3,"rowHeight","toggle"],["ngx-datatable-row-detail-template",""],[3,"width","resizeable","sortable","draggable","canAutoResize"],["ngx-datatable-cell-template",""],["name","date",3,"minWidth",4,"ngIf"],["name","subid",4,"ngIf"],["name","publisher",3,"minWidth",4,"ngIf"],["name","totalsearches",4,"ngIf"],["name","impressions",4,"ngIf"],["name","clicks",4,"ngIf"],["name","cpc",4,"ngIf"],["name","ctr",4,"ngIf"],["name","bingCoverage",4,"ngIf"],["name","cfCoverage",4,"ngIf"],["name","followon",4,"ngIf"],["name","publisherNet",4,"ngIf"],["name","profit",4,"ngIf"],["name","revenue"],["ngx-datatable-header-template",""],["name","split",3,"minWidth",4,"ngIf"],[3,"chartData"],[3,"summaryMetricsData"],[3,"value"],["value","greater"],["value","less"],["appearance","outline",1,"custom-mat-input"],["matInput","","type","number","min","0",3,"ngModel","ngModelChange","input"],["class","table-responsive","style","padding-left: 36px;",4,"ngIf"],["style","padding-left: 35px",4,"ngIf"],[1,"table-responsive",2,"padding-left","36px"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[2,"padding-left","35px"],["href","javascript:void(0)","title","Expand/Collapse Row",3,"click"],["name","date",3,"minWidth"],["name","subid"],["name","publisher",3,"minWidth"],["name","totalsearches"],["name","impressions"],["name","clicks"],["name","cpc"],["name","ctr"],["name","bingCoverage"],["name","cfCoverage"],["name","followon"],["name","publisherNet"],["name","profit"],["name","split",3,"minWidth"]],template:function(e,t){1&e&&(h.Wb(0,"app-reporting-filtering",0),h.hc("onDatesPicked",(function(e){return t.updateReportingFiltering(e)})),h.Vb(),h.Mc(1,kt,1,1,"app-reporting-revenue-chart",1),h.Mc(2,Rt,1,1,"app-summary-metrics",2),h.Wb(3,"div",3),h.Wb(4,"div",4),h.Wb(5,"mat-form-field",5),h.Wb(6,"mat-label"),h.Oc(7,"Choose an Group By"),h.Vb(),h.Wb(8,"mat-select",6),h.hc("selectionChange",(function(e){return t.groupHandle(e)}))("ngModelChange",(function(e){return t.groupType=e})),h.Mc(9,_t,2,2,"mat-option",7),h.Vb(),h.Vb(),h.Vb(),h.Mc(10,Tt,9,1,"div",8),h.Mc(11,It,5,1,"div",8),h.Vb(),h.Wb(12,"div",9),h.Wb(13,"button",10),h.hc("click",(function(){return t.exportToCsv()})),h.Oc(14," Export Stats "),h.Vb(),h.Vb(),h.Wb(15,"ngx-datatable",11,12),h.Wb(17,"ngx-datatable-row-detail",13),h.hc("toggle",(function(e){return t.onDetailToggle(e)})),h.Mc(18,Et,2,2,"ng-template",14),h.Vb(),h.Wb(19,"ngx-datatable-column",15),h.Mc(20,zt,1,4,"ng-template",16),h.Vb(),h.Mc(21,Ht,3,1,"ngx-datatable-column",17),h.Mc(22,Qt,3,0,"ngx-datatable-column",18),h.Mc(23,$t,3,1,"ngx-datatable-column",19),h.Mc(24,Zt,3,0,"ngx-datatable-column",20),h.Mc(25,tr,3,0,"ngx-datatable-column",21),h.Mc(26,nr,3,0,"ngx-datatable-column",22),h.Mc(27,sr,3,0,"ngx-datatable-column",23),h.Mc(28,lr,3,0,"ngx-datatable-column",24),h.Mc(29,gr,3,0,"ngx-datatable-column",25),h.Mc(30,dr,3,0,"ngx-datatable-column",26),h.Mc(31,yr,3,0,"ngx-datatable-column",27),h.Mc(32,wr,3,0,"ngx-datatable-column",28),h.Mc(33,Pr,3,0,"ngx-datatable-column",29),h.Wb(34,"ngx-datatable-column",30),h.Mc(35,xr,1,0,"ng-template",31),h.Mc(36,Mr,3,4,"ng-template",16),h.Vb(),h.Mc(37,Or,3,1,"ngx-datatable-column",32),h.Vb()),2&e&&(h.Db(1),h.rc("ngIf",t.chartData),h.Db(1),h.rc("ngIf",t.summaryMetrics),h.Db(6),h.rc("ngModel",t.groupType),h.Db(1),h.rc("ngForOf",t.groupbyList),h.Db(1),h.rc("ngIf",t.showFilterAmount),h.Db(1),h.rc("ngIf",t.showFilterAmount),h.Db(4),h.rc("columnMode","force")("headerHeight",50)("footerHeight",0)("rowHeight",50)("scrollbarV",!0)("rows",t.rows)("loadingIndicator",t.loadingIndicator),h.Db(2),h.rc("rowHeight","publisher"===t.groupType||"subid"===t.groupType?t.getDetailRowHeight:130),h.Db(2),h.rc("width",30)("resizeable",!1)("sortable",!1)("draggable",!1)("canAutoResize",!1),h.Db(2),h.rc("ngIf",!t.groupPublishFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag),h.Db(1),h.rc("ngIf",!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!(t.groupPublishFlag||t.groupDateShowFlag||t.groupSubidShowFlag||t.groupCoverageFlag)),h.Db(1),h.rc("ngIf",!(t.groupPublishFlag||t.groupDateShowFlag||t.groupSubidShowFlag||t.groupCoverageFlag)),h.Db(1),h.rc("ngIf",!(t.groupPublishFlag||t.groupDateShowFlag||t.groupSubidShowFlag||t.groupCoverageFlag)),h.Db(1),h.rc("ngIf",!(t.groupPublishFlag||t.groupDateShowFlag||t.groupSubidShowFlag||t.groupCoverageFlag)),h.Db(1),h.rc("ngIf",!(t.groupPublishFlag||t.groupDateShowFlag||t.groupSubidShowFlag||t.groupCoverageFlag)),h.Db(1),h.rc("ngIf",!(t.groupPublishFlag||t.groupDateShowFlag||t.groupSubidShowFlag||t.groupCFCoverageFlag)),h.Db(1),h.rc("ngIf",!(t.groupPublishFlag||t.groupDateShowFlag||t.groupSubidShowFlag||t.groupBingCoverageFlag)),h.Db(1),h.rc("ngIf",!t.groupCoverageFlag),h.Db(1),h.rc("ngIf",!t.groupCoverageFlag),h.Db(1),h.rc("ngIf",!t.groupCoverageFlag),h.Db(4),h.rc("ngIf",!t.groupCoverageFlag))},directives:[b.a,s.p,d.c,d.g,m.a,v.q,v.t,s.o,S.d,S.e,S.f,S.b,S.a,S.c,F,V,y.p,Ct.b,v.v,v.d],pipes:[s.f,s.g,s.w,s.d],styles:[".mat-form-field-appearance-outline .mat-form-field-outline{background-color:#fff;border-radius:5px}"]}),Rr),Tr=((kr=function(){function e(){r(this,e)}return n(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||kr)},kr.\u0275cmp=h.Kb({type:kr,selectors:[["app-reporting"]],decls:1,vars:0,template:function(e,t){1&e&&h.Rb(0,"router-outlet")},directives:[u.l],encapsulation:2}),kr),Ir=["expandableTable"];function Nr(e,t){1&e&&(h.Wb(0,"div",17),h.Wb(1,"div"),h.Wb(2,"strong"),h.Oc(3,"Address"),h.Vb(),h.Vb(),h.Wb(4,"div"),h.Oc(5,"Test"),h.Vb(),h.Vb())}function jr(e,t){if(1&e){var r=h.Xb();h.Wb(0,"a",18),h.hc("click",(function(){h.Dc(r);var e=t.row;return h.lc().toggleExpandRow(e)})),h.Vb()}if(2&e){var a=t.expanded;h.Ib("datatable-icon-right",!a)("datatable-icon-down",a)}}function Ar(e,t){1&e&&h.Oc(0," Publisher ")}function Er(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function zr(e,t){1&e&&h.Oc(0," Tag ")}function Lr(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function Ur(e,t){1&e&&h.Oc(0," Total Searches ")}function Hr(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function Yr(e,t){1&e&&h.Oc(0," Monetized Searches ")}function Br(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function Qr(e,t){1&e&&h.Oc(0," Clicks ")}function Gr(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function qr(e,t){if(1&e&&(h.Wb(0,"span"),h.Oc(1),h.Vb()),2&e){var r=t.column;h.Db(1),h.Pc(r.name)}}function $r(e,t){if(1&e&&(h.Rb(0,"strong",19),h.mc(1,"percent")),2&e){var r=t.row;h.rc("innerHTML",h.oc(1,1,r.clicks/r.totalSearches,"2.2-2"),h.Ec)}}function Kr(e,t){1&e&&h.Oc(0," Revenue ")}function Xr(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}var Zr,Jr,ea=((Jr=function(){function e(){r(this,e),this.rows=[{name:"Datalox",tag:"Guppy Media",totalSearches:"5341",monetizedSearches:"5213",revenue:"1362",clicks:562},{name:"Hopkins Branded",tag:"Guppy Media",totalSearches:"5341",monetizedSearches:"5213",revenue:"1362",clicks:562},{name:"Datalox 2",tag:"Guppy Media",totalSearches:"5341",monetizedSearches:"5213",revenue:"1362",clicks:562}],this.columns=[{prop:"name"},{name:"Gender"}],this.expanded={}}return n(e,[{key:"ngOnInit",value:function(){var e=Array.from({length:20},(function(){return Math.floor(4e3*Math.random()+4e3)})),t=Array.from({length:20},(function(){return Math.floor(6e4*Math.random()+4e4)}));this.setChartOptions(1e4,1e5,["Nov 1, Nov 2, Nov 3, Nov 4","Nov 5","Nov 5","Nov 6","Nov 7","Nov 8","Nov 9","Nov 10","Nov 11","Nov 12","Nov 13","Nov 14","Nov 15","Nov 16","Nov 17","Nov 18","Nov 19","Nov 20"],e,t)}},{key:"updateReportingFiltering",value:function(e){console.log("Report")}},{key:"toggleExpandRow",value:function(e){console.log("Toggled Expand Row!",e),this.table.rowDetail.toggleExpandRow(e)}},{key:"onDetailToggle",value:function(e){console.log("Detail Toggled",e)}},{key:"setChartOptions",value:function(e,t,r,a,n){this.chartDom=document.getElementById("main"),this.myChart=D.a(this.chartDom),this.option={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:["Revenue","Searches"]},xAxis:[{type:"category",data:r,axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"Revenue",min:0,max:e,interval:25e3,axisLabel:{formatter:"${value}"}},{type:"value",name:"Searches",min:0,max:t,interval:1e5,axisLabel:{formatter:"{value}"}}],series:[{name:"Revenue",type:"bar",data:a},{name:"Searches",type:"line",yAxisIndex:1,data:n}]},this.option&&this.myChart.setOption(this.option)}}]),e}()).\u0275fac=function(e){return new(e||Jr)},Jr.\u0275cmp=h.Kb({type:Jr,selectors:[["app-third-party"]],viewQuery:function(e,t){var r;1&e&&h.Tc(Ir,!0),2&e&&h.zc(r=h.ic())&&(t.table=r.first)},decls:30,vars:13,consts:[[3,"onDatesPicked"],["id","main",2,"width","100%","height","300px"],[1,"material","fullscreen","expandable",2,"top","52px",3,"columnMode","headerHeight","footerHeight","rowHeight","scrollbarV","scrollbarH","rows"],["expandableTable",""],[3,"rowHeight","toggle"],["myDetailRow",""],["ngx-datatable-row-detail-template",""],[3,"width","resizeable","sortable","draggable","canAutoResize"],["ngx-datatable-cell-template",""],["name","name"],["ngx-datatable-header-template",""],["name","tag"],["name","totalSearches"],["name","monetizedSearches"],["name","clicks"],["name","CTR"],["name","revenue"],[2,"padding-left","35px"],["href","javascript:void(0)","title","Expand/Collapse Row",3,"click"],[3,"innerHTML"]],template:function(e,t){1&e&&(h.Wb(0,"app-reporting-filtering",0),h.hc("onDatesPicked",(function(e){return t.updateReportingFiltering(e)})),h.Vb(),h.Rb(1,"div",1),h.Wb(2,"ngx-datatable",2,3),h.Wb(4,"ngx-datatable-row-detail",4,5),h.hc("toggle",(function(e){return t.onDetailToggle(e)})),h.Mc(6,Nr,6,0,"ng-template",6),h.Vb(),h.Wb(7,"ngx-datatable-column",7),h.Mc(8,jr,1,4,"ng-template",8),h.Vb(),h.Wb(9,"ngx-datatable-column",9),h.Mc(10,Ar,1,0,"ng-template",10),h.Mc(11,Er,2,1,"ng-template",8),h.Vb(),h.Wb(12,"ngx-datatable-column",11),h.Mc(13,zr,1,0,"ng-template",10),h.Mc(14,Lr,2,1,"ng-template",8),h.Vb(),h.Wb(15,"ngx-datatable-column",12),h.Mc(16,Ur,1,0,"ng-template",10),h.Mc(17,Hr,3,3,"ng-template",8),h.Vb(),h.Wb(18,"ngx-datatable-column",13),h.Mc(19,Yr,1,0,"ng-template",10),h.Mc(20,Br,3,3,"ng-template",8),h.Vb(),h.Wb(21,"ngx-datatable-column",14),h.Mc(22,Qr,1,0,"ng-template",10),h.Mc(23,Gr,3,3,"ng-template",8),h.Vb(),h.Wb(24,"ngx-datatable-column",15),h.Mc(25,qr,2,1,"ng-template",10),h.Mc(26,$r,2,4,"ng-template",8),h.Vb(),h.Wb(27,"ngx-datatable-column",16),h.Mc(28,Kr,1,0,"ng-template",10),h.Mc(29,Xr,3,4,"ng-template",8),h.Vb(),h.Vb()),2&e&&(h.Db(2),h.rc("columnMode","force")("headerHeight",50)("footerHeight",0)("rowHeight",50)("scrollbarV",!0)("scrollbarH",!0)("rows",t.rows),h.Db(2),h.rc("rowHeight",100),h.Db(3),h.rc("width",50)("resizeable",!1)("sortable",!1)("draggable",!1)("canAutoResize",!1))},directives:[b.a,S.d,S.e,S.f,S.b,S.a,S.c],pipes:[s.g,s.w,s.d],styles:[""]}),Jr),ta=((Zr=function(){function e(){r(this,e)}return n(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Zr)},Zr.\u0275cmp=h.Kb({type:Zr,selectors:[["app-bing-direct"]],decls:2,vars:0,template:function(e,t){1&e&&(h.Wb(0,"p"),h.Oc(1,"bing-direct works!"),h.Vb())},styles:[""]}),Zr),ra=i("d9f2"),aa=["expandableTable"];function na(e,t){if(1&e&&h.Rb(0,"app-reporting-revenue-chart",30),2&e){var r=h.lc();h.rc("chartData",r.chartData)}}function ia(e,t){if(1&e&&h.Rb(0,"app-summary-metrics",31),2&e){var r=h.lc();h.rc("summaryMetricsData",r.summaryMetricsData)}}function oa(e,t){if(1&e&&(h.Wb(0,"tr"),h.Wb(1,"td"),h.Oc(2),h.mc(3,"date"),h.Vb(),h.Wb(4,"td"),h.Oc(5),h.mc(6,"number"),h.Vb(),h.Wb(7,"td"),h.Oc(8),h.mc(9,"number"),h.Vb(),h.Wb(10,"td"),h.Oc(11),h.mc(12,"percent"),h.mc(13,"percent"),h.Vb(),h.Wb(14,"td"),h.Oc(15),h.mc(16,"currency"),h.mc(17,"currency"),h.Vb(),h.Wb(18,"td"),h.Oc(19),h.mc(20,"currency"),h.Vb(),h.Wb(21,"td"),h.Oc(22),h.mc(23,"currency"),h.Vb(),h.Wb(24,"td"),h.Oc(25),h.mc(26,"currency"),h.Vb(),h.Vb()),2&e){var r=t.$implicit;h.Db(2),h.Pc(h.nc(3,8,r.date)),h.Db(3),h.Pc(h.nc(6,10,r.searches)),h.Db(3),h.Pc(h.nc(9,12,r.clicks)),h.Db(3),h.Pc(h.oc(12,14,r.ctr,"2.2-2")||h.oc(13,17,0,"2.2-2")),h.Db(4),h.Pc(h.oc(16,20,r.cpc,"USD")||h.oc(17,23,0,"USD")),h.Db(4),h.Pc(h.oc(20,26,r.publisherNet,"USD")),h.Db(3),h.Pc(h.oc(23,29,r.profit,"USD")),h.Db(3),h.Pc(h.oc(26,32,r.revenue,"USD"))}}function sa(e,t){if(1&e&&(h.Wb(0,"div",34),h.Wb(1,"table",35),h.Wb(2,"thead"),h.Wb(3,"tr"),h.Wb(4,"th"),h.Oc(5,"Date"),h.Vb(),h.Wb(6,"th"),h.Oc(7,"Searches"),h.Vb(),h.Wb(8,"th"),h.Oc(9,"Clicks"),h.Vb(),h.Wb(10,"th"),h.Oc(11,"CTR"),h.Vb(),h.Wb(12,"th"),h.Oc(13,"CPC"),h.Vb(),h.Wb(14,"th"),h.Oc(15,"Publisher Net"),h.Vb(),h.Wb(16,"th"),h.Oc(17,"Profit"),h.Vb(),h.Wb(18,"th"),h.Oc(19,"Revenue"),h.Vb(),h.Vb(),h.Vb(),h.Wb(20,"tbody"),h.Mc(21,oa,27,35,"tr",36),h.Vb(),h.Vb(),h.Vb()),2&e){var r=h.lc().row;h.Db(21),h.rc("ngForOf",r.subReportingForDate)}}function ua(e,t){1&e&&(h.Wb(0,"div",37),h.Wb(1,"div"),h.Wb(2,"strong"),h.Oc(3,"Address"),h.Vb(),h.Vb(),h.Wb(4,"div"),h.Oc(5,"Test"),h.Vb(),h.Vb())}function ca(e,t){if(1&e&&(h.Mc(0,sa,22,1,"div",32),h.Mc(1,ua,6,0,"div",33)),2&e){var r=h.lc();h.rc("ngIf","publisher"===r.groupType||"subid"===r.groupType),h.Db(1),h.rc("ngIf","publisher"!==r.groupType&&"subid"!==r.groupType)}}function la(e,t){if(1&e){var r=h.Xb();h.Wb(0,"a",38),h.hc("click",(function(){h.Dc(r);var e=t.row;return h.lc().toggleExpandRow(e)})),h.Vb()}if(2&e){var a=t.expanded;h.Ib("datatable-icon-right",!a)("datatable-icon-down",a)}}function ha(e,t){1&e&&h.Oc(0," Date ")}function pa(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"date"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function ga(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",39),h.Mc(1,ha,1,0,"ng-template",26),h.Mc(2,pa,3,3,"ng-template",16),h.Vb())}function fa(e,t){1&e&&h.Oc(0," Subid ")}function ba(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function da(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",40),h.Mc(1,fa,1,0,"ng-template",26),h.Mc(2,ba,2,1,"ng-template",16),h.Vb())}function ma(e,t){1&e&&h.Oc(0," Publisher ")}function va(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function ya(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",41),h.Mc(1,ma,1,0,"ng-template",26),h.Mc(2,va,2,1,"ng-template",16),h.Vb())}function Sa(e,t){1&e&&h.Oc(0," Searches ")}function Da(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function wa(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",42),h.Mc(1,Sa,1,0,"ng-template",26),h.Mc(2,Da,3,3,"ng-template",16),h.Vb())}function Fa(e,t){1&e&&h.Oc(0," Bid Searches ")}function Wa(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function Pa(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",43),h.Mc(1,Fa,1,0,"ng-template",26),h.Mc(2,Wa,3,3,"ng-template",16),h.Vb())}function xa(e,t){1&e&&h.Oc(0," Clicks ")}function Ma(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function Va(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",44),h.Mc(1,xa,1,0,"ng-template",26),h.Mc(2,Ma,3,3,"ng-template",16),h.Vb())}function Ca(e,t){1&e&&h.Oc(0," BiddedCTR ")}function Oa(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.mc(3,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"2.2-2")||h.oc(3,4,0,"2.2-2"))}}function ka(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",45),h.Mc(1,Ca,1,0,"ng-template",26),h.Mc(2,Oa,4,7,"ng-template",16),h.Vb())}function Ra(e,t){1&e&&h.Oc(0," CTR ")}function _a(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.mc(3,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"2.2-2")||h.oc(3,4,0,"2.2-2"))}}function Ta(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",46),h.Mc(1,Ra,1,0,"ng-template",26),h.Mc(2,_a,4,7,"ng-template",16),h.Vb())}function Ia(e,t){1&e&&h.Oc(0," Publisher Net ")}function Na(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}function ja(e,t){1&e&&h.Oc(0," Profit ")}function Aa(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}function Ea(e,t){1&e&&h.Oc(0," Revenue ")}function za(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}function La(e,t){1&e&&h.Oc(0," Spilt ")}function Ua(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.mc(3,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r)||h.oc(3,3,0,"1.0-0"))}}var Ha,Ya=((Ha=function(){function t(e,a,n,i){r(this,t),this.lyonService=e,this.cdr=a,this.userService=n,this.tagService=i,this.range={startDate:"",endDate:""},this.summary={revenue:0,profit:0},this.loadingIndicator=!0,this.columns=[{prop:"name"},{name:"Gender"}],this.expanded={},this.tagList=[],this.filteredLyonStat=[],this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.groupType="",this.selectedCompany=this.getSelectedCompanyFromLocalStorage()}return n(t,[{key:"ngAfterViewInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCompanyTags(this.selectedCompany);case 2:return this.tagList=e.sent,this.rows=[],e.next=6,this.getAllLyonStats(this.range.startDate,this.range.endDate);case 6:return this.rows=e.sent,e.next=9,this.getChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 9:return this.chartData=e.sent,e.next=12,this.getSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 12:this.summaryMetricsData=e.sent,this.refreshTable();case 14:case"end":return e.stop()}}),e,this)})))}},{key:"toggleExpandRow",value:function(e){console.log("Toggled Expand Row!",e),this.table.rowDetail.toggleExpandRow(e)}},{key:"onDetailToggle",value:function(e){console.log("Detail Toggled",e)}},{key:"getSelectedCompanyFromLocalStorage",value:function(){return this.userService.getSelectedCompanyFromLocalStorage()}},{key:"getCompanyTags",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.split("/")[1],t.prev=1,t.next=4,this.tagService.getCompanyTags(r).toPromise();case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))}},{key:"getAllLyonStats",value:function(t,r){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var n,i,o,s,u,c,l;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,this.lyonService.getAllStats(t,r).toPromise();case 3:n=a.sent,i=e((this.loadingIndicator=!1,this.allstat=n,this.allstat.map((function(e){e.publisher="No Publisher",e.tagname="No Tag"})),this.tagList));try{for(i.s();!(o=i.n()).done;)if("lyons"==(s=o.value).tag.advertiser){u=e(s.tag.subids);try{for(u.s();!(c=u.n()).done;)"Contains"==(l=c.value).filterTag?this.allstat.map((function(e){e.subid.includes(l.subid)&&(e.publisher=s.user.length?s.user[0].fullname:"No Publisher",e.tagname=s.tag.name)})):"StartsWith"==l.filterTag?this.allstat.map((function(e){e.subid.startsWith(l.subid)&&(e.publisher=s.user.length?s.user[0].fullname:"No Publisher",e.tagname=s.tag.name)})):"EndsWith"==l.filterTag?this.allstat.map((function(e){e.subid.endsWith(l.subid)&&(e.publisher=s.user.length?s.user[0].fullname:"No Publisher",e.tagname=s.tag.name)})):"ExactValue"==l.filterTag&&this.allstat.map((function(e){e.subid==l.subid&&(e.publisher=s.user.length?s.user[0].fullname:"No Publisher",e.tagname=s.tag.name)}))}catch(h){u.e(h)}finally{u.f()}}}catch(h){i.e(h)}finally{i.f()}return a.abrupt("return",this.allstat);case 9:return a.prev=9,a.t0=a.catch(0),a.abrupt("return",a.t0);case 12:case"end":return a.stop()}}),a,this,[[0,9]])})))}},{key:"groupDate",value:function(){var t,r={},a=this.allstat.reduce((function(e,t){var a=t.date;return r[a]?(r[a].clicks+=parseFloat(t.clicks),r[a].biddedCtr+=parseFloat(t.biddedCtr?t.biddedCtr:0),r[a].biddedSearches+=parseFloat(t.biddedSearches?t.biddedSearches:0),r[a].searches+=parseFloat(t.searches?t.searches:0),r[a].revenue+=parseFloat(t.revenue),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].split+=parseFloat(t.split),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.biddedCtr=i.biddedCtr/i.counter,i.ctr=i.clicks/i.searches,i.cpc=i.revenue/i.clicks}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!1,this.groupDateShowFlag=!0,this.groupSubidShowFlag=!1,this.cdr.markForCheck()}},{key:"groupSubid",value:function(){var t,r={},a=this.allstat.reduce((function(e,t){var a=t.subid;return r[a]?(r[a].clicks+=parseFloat(t.clicks),r[a].biddedCtr+=parseFloat(t.biddedCtr?t.biddedCtr:0),r[a].biddedSearches+=parseFloat(t.biddedSearches?t.biddedSearches:0),r[a].searches+=parseFloat(t.searches?t.searches:0),r[a].revenue+=parseFloat(t.revenue),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].split+=parseFloat(t.split),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.biddedCtr=i.biddedCtr/i.counter,i.ctr=i.clicks/i.searches,i.cpc=i.revenue/i.clicks,i.subReportingForDate=this.groupDateForSubid(i),i.detailHeight=50*(i.subReportingForDate.length+1)}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!0,this.cdr.markForCheck()}},{key:"groupProvider",value:function(){var t,r={},a=this.allstat.reduce((function(e,t){var a=t.publisher;return r[a]?(r[a].clicks+=parseFloat(t.clicks),r[a].biddedCtr+=parseFloat(t.biddedCtr?t.biddedCtr:0),r[a].biddedSearches+=parseFloat(t.biddedSearches?t.biddedSearches:0),r[a].searches+=parseFloat(t.searches?t.searches:0),r[a].revenue+=parseFloat(t.revenue),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].split+=parseFloat(t.split),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.biddedCtr=i.biddedCtr/i.counter,i.ctr=i.clicks/i.searches,i.cpc=i.revenue/i.clicks,i.subReportingForDate=this.groupDateForPublisher(i),i.detailHeight=50*(i.subReportingForDate.length+1)}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!0,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.cdr.markForCheck()}},{key:"backGroup",value:function(){this.rows=this.allstat,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.cdr.markForCheck()}},{key:"updateAllLyonStats",value:function(e,t,r){this.lyonService.updateAllLyonStats(e,t,r).subscribe((function(e){}))}},{key:"updateReportingFiltering",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.range=e,t.next=3,this.getAllLyonStats(this.range.startDate,this.range.endDate);case 3:return this.rows=t.sent,t.next=6,this.getChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 6:return this.chartData=t.sent,t.next=9,this.getSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 9:this.summaryMetricsData=t.sent,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.groupType="",this.refreshTable();case 15:case"end":return t.stop()}}),t,this)})))}},{key:"refreshTable",value:function(){this.cdr.markForCheck()}},{key:"getDetailRowHeight",value:function(e,t){var r;return e&&(r=e.detailHeight),r}},{key:"getSummaryMetrics",value:function(e,t,r){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var n,i,o,s,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,this.lyonService.getSummaryMetrics(e,t,r).toPromise();case 3:return n=a.sent,i={},o=0,s=0,u=0,a.abrupt("return",(0!=n.summary[0].lastMonthStat[0].profitPace&&(o=(n.summary[0].summaryMetrics[0].profitPace-n.summary[0].lastMonthStat[0].profitPace)/n.summary[0].lastMonthStat[0].profitPace*100),0!=n.summary[0].twoLastMonthStat[0].profitPace&&(s=(n.summary[0].lastMonthStat[0].profitPace-n.summary[0].twoLastMonthStat[0].profitPace)/n.summary[0].twoLastMonthStat[0].profitPace*100),0!=n.summary[0].prevSelectedStat[0].profitPace&&(u=(n.summary[0].selectedStat[0].profitPace-n.summary[0].prevSelectedStat[0].profitPace)/n.summary[0].prevSelectedStat[0].profitPace*100),n.summary[0].summaryMetrics[0].percentPace=o,n.summary[0].lastMonthStat[0].percentPace=s,n.summary[0].selectedStat[0].percentPace=u,n.summary[0].selectedStat[0].selectedStartDate=t,n.summary[0].selectedStat[0].selectedEndDate=r,i.summary=n.summary,i));case 8:return a.prev=8,a.t0=a.catch(0),a.abrupt("return",a.t0);case 11:case"end":return a.stop()}}),a,this,[[0,8]])})))}},{key:"getChartMetrics",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i,o,s,u,c,h,p,g,f,b,d,m,v,y,S,D,w,F,W,P,x,M,V,C,O,k,R,_,T;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.lyonService.getAllStats(r,a).toPromise();case 3:n=t.sent,i=e((this.loadingIndicator=!1,this.allChart=n,this.allChart.map((function(e){e.publisher="No Publisher",e.tagname="No Tag"})),this.tagList));try{for(i.s();!(o=i.n()).done;)if("lyons"==(s=o.value).tag.advertiser){u=e(s.tag.subids);try{for(u.s();!(c=u.n()).done;)"Contains"==(h=c.value).filterTag?this.allChart.map((function(e){e.subid.includes(h.subid)&&(e.publisher=s.user.length?s.user[0].fullname:"No Publisher",e.tagname=s.tag.name)})):"StartsWith"==h.filterTag?this.allChart.map((function(e){e.subid.startsWith(h.subid)&&(e.publisher=s.user.length?s.user[0].fullname:"No Publisher",e.tagname=s.tag.name)})):"EndsWith"==h.filterTag?this.allChart.map((function(e){e.subid.endsWith(h.subid)&&(e.publisher=s.user.length?s.user[0].fullname:"No Publisher",e.tagname=s.tag.name)})):"ExactValue"==h.filterTag&&this.allChart.map((function(e){e.subid==h.subid&&(e.publisher=s.user.length?s.user[0].fullname:"No Publisher",e.tagname=s.tag.name)}))}catch(I){u.e(I)}finally{u.f()}}}catch(I){i.e(I)}finally{i.f()}for(b in p=l.chain(this.allChart).sortBy((function(e){return e.date})).sortBy((function(e){return e.publisher})).value(),g=function e(t,r){if(!r.length)return t;var a=r[0],n=r.slice(1);return l.mapValues(l.groupBy(t,a),(function(t){return e(t,n)}))}(p,["date","publisher"]),f=[],g)if(g.hasOwnProperty(b))for(d in g[b])m={date:g[b][d][0].date,publisher:g[b][d][0].publisher,revenue:l.reduce(g[b][d],(function(e,t){return e+t.revenue}),0)},f.push(m);for(v=[],y=0,S=f;y<S.length;y++)D=S[y],v.push(D.publisher);w=v.filter((function(e,t,r){return t===r.indexOf(e)})),this.allChart=this.allChart.slice().sort((function(e,t){return e.date-t.date})),F={},W=this.allChart.reduce((function(e,t){var r=t.date;return F[r]?F[r].searches+=parseInt(t.searches):(F[r]=Object.assign({},t),e.push(F[r])),e}),[]),P=[],x=[],M={},V=e(W);try{for(V.s();!(C=V.n()).done;)O=C.value,P.push(O.date),x.push(O.searches)}catch(I){V.e(I)}finally{V.f()}k=[],R=e(w);try{for(T=function(){var t,r=_.value,a=[],n=e(P);try{var i=function(){var e=t.value,n=f.filter((function(t){return t.date==e&&t.publisher==r}));a.push(n.length>0?n[0].revenue:0)};for(n.s();!(t=n.n()).done;)i()}catch(I){n.e(I)}finally{n.f()}var o={};o[r]=a,k.push(o)},R.s();!(_=R.n()).done;)T()}catch(I){R.e(I)}finally{R.f()}return t.abrupt("return",(M.revenuePerDay=k,M.datesOfRevenue=P,M.searchesPerDay=x,M.publisherName=w,M));case 22:return t.prev=22,t.t0=t.catch(0),t.abrupt("return",t.t0);case 25:case"end":return t.stop()}}),t,this,[[0,22]])})))}},{key:"groupDateForPublisher",value:function(t){var r,a={},n=this.allstat.filter((function(e){return e.publisher===t.publisher})).reduce((function(e,t){var r=t.date;return a[r]?(a[r].clicks+=parseFloat(t.clicks),a[r].biddedCtr+=parseFloat(t.biddedCtr?t.biddedCtr:0),a[r].biddedSearches+=parseFloat(t.biddedSearches?t.biddedSearches:0),a[r].searches+=parseFloat(t.searches?t.searches:0),a[r].revenue+=parseFloat(t.revenue),a[r].profit+=parseFloat(t.profit),a[r].publisherNet+=parseFloat(t.publisherNet),a[r].split+=parseFloat(t.split),a[r].counter++):(a[r]=Object.assign({},t),a[r].counter=1,e.push(a[r])),e}),[]),i=e(n);try{for(i.s();!(r=i.n()).done;)(t=r.value).split=t.split/t.counter,t.biddedCtr=t.biddedCtr/t.counter,t.ctr=t.clicks/t.searches,t.cpc=t.revenue/t.clicks}catch(o){i.e(o)}finally{i.f()}return n}},{key:"groupDateForSubid",value:function(t){var r,a={},n=this.allstat.filter((function(e){return e.subid===t.subid})).reduce((function(e,t){var r=t.date;return a[r]?(a[r].clicks+=parseFloat(t.clicks),a[r].cpc+=parseFloat(t.cpc?t.cpc:0),a[r].ctr+=parseFloat(t.ctr?t.ctr:0),a[r].biddedCtr+=parseFloat(t.biddedCtr?t.biddedCtr:0),a[r].biddedSearches+=parseFloat(t.biddedSearches?t.biddedSearches:0),a[r].searches+=parseFloat(t.searches?t.searches:0),a[r].revenue+=parseFloat(t.revenue),a[r].profit+=parseFloat(t.profit),a[r].publisherNet+=parseFloat(t.publisherNet),a[r].split+=parseFloat(t.split),a[r].counter++):(a[r]=Object.assign({},t),a[r].counter=1,e.push(a[r])),e}),[]),i=e(n);try{for(i.s();!(r=i.n()).done;)(t=r.value).split=t.split/t.counter,t.biddedCtr=t.biddedCtr/t.counter,t.ctr=t.clicks/t.searches,t.cpc=t.revenue/t.clicks}catch(o){i.e(o)}finally{i.f()}return n}},{key:"groupHandle",value:function(e){this.groupType=e.value,"date"==e.value?this.groupDate():"publisher"==e.value?this.groupProvider():"subid"==e.value?this.groupSubid():this.backGroup()}},{key:"remove_element",value:function(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return void e.splice(r,1)}},{key:"combineSummaryMetrics",value:function(e){var t=this;e.summary.keys.forEach((function(e){t.summary.revenue+=e.revenue,t.summary.profit+=e.revenue*(.01*(100-e.split))}))}}]),t}()).\u0275fac=function(e){return new(e||Ha)(h.Qb(ra.a),h.Qb(h.i),h.Qb(p.a),h.Qb(f.a))},Ha.\u0275cmp=h.Kb({type:Ha,selectors:[["app-lyons"]],viewQuery:function(e,t){var r;1&e&&h.Tc(aa,!0),2&e&&h.zc(r=h.ic())&&(t.table=r.first)},decls:43,vars:24,consts:[[3,"onDatesPicked"],[3,"chartData",4,"ngIf"],[3,"summaryMetricsData",4,"ngIf"],[1,"row"],[1,"col-xl-4"],["appearance","fill"],[3,"ngModel","selectionChange","ngModelChange"],["value","date"],["value","publisher"],["value","subid"],["value","reset"],[1,"material","fullscreen","expandable",2,"top","10px","height","500px",3,"columnMode","headerHeight","footerHeight","rowHeight","scrollbarV","rows","loadingIndicator"],["expandableTable",""],[3,"rowHeight","toggle"],["ngx-datatable-row-detail-template",""],[3,"width","resizeable","sortable","draggable","canAutoResize"],["ngx-datatable-cell-template",""],["name","date",4,"ngIf"],["name","subid",4,"ngIf"],["name","publisher",4,"ngIf"],["name","searches",4,"ngIf"],["name","biddedSearches",4,"ngIf"],["name","clicks",4,"ngIf"],["name","biddedCtr",4,"ngIf"],["name","ctr",4,"ngIf"],["name","publisherNet"],["ngx-datatable-header-template",""],["name","profit"],["name","revenue"],["name","split"],[3,"chartData"],[3,"summaryMetricsData"],["class","table-responsive","style","padding-left: 36px;",4,"ngIf"],["style","padding-left: 35px",4,"ngIf"],[1,"table-responsive",2,"padding-left","36px"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[2,"padding-left","35px"],["href","javascript:void(0)","title","Expand/Collapse Row",3,"click"],["name","date"],["name","subid"],["name","publisher"],["name","searches"],["name","biddedSearches"],["name","clicks"],["name","biddedCtr"],["name","ctr"]],template:function(e,t){1&e&&(h.Wb(0,"app-reporting-filtering",0),h.hc("onDatesPicked",(function(e){return t.updateReportingFiltering(e)})),h.Vb(),h.Mc(1,na,1,1,"app-reporting-revenue-chart",1),h.Mc(2,ia,1,1,"app-summary-metrics",2),h.Wb(3,"div",3),h.Wb(4,"div",4),h.Wb(5,"mat-form-field",5),h.Wb(6,"mat-label"),h.Oc(7,"Choose an Group By"),h.Vb(),h.Wb(8,"mat-select",6),h.hc("selectionChange",(function(e){return t.groupHandle(e)}))("ngModelChange",(function(e){return t.groupType=e})),h.Wb(9,"mat-option",7),h.Oc(10,"Date"),h.Vb(),h.Wb(11,"mat-option",8),h.Oc(12,"Publisher"),h.Vb(),h.Wb(13,"mat-option",9),h.Oc(14,"Subid"),h.Vb(),h.Wb(15,"mat-option",10),h.Oc(16,"Reset"),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(17,"ngx-datatable",11,12),h.Wb(19,"ngx-datatable-row-detail",13),h.hc("toggle",(function(e){return t.onDetailToggle(e)})),h.Mc(20,ca,2,2,"ng-template",14),h.Vb(),h.Wb(21,"ngx-datatable-column",15),h.Mc(22,la,1,4,"ng-template",16),h.Vb(),h.Mc(23,ga,3,0,"ngx-datatable-column",17),h.Mc(24,da,3,0,"ngx-datatable-column",18),h.Mc(25,ya,3,0,"ngx-datatable-column",19),h.Mc(26,wa,3,0,"ngx-datatable-column",20),h.Mc(27,Pa,3,0,"ngx-datatable-column",21),h.Mc(28,Va,3,0,"ngx-datatable-column",22),h.Mc(29,ka,3,0,"ngx-datatable-column",23),h.Mc(30,Ta,3,0,"ngx-datatable-column",24),h.Wb(31,"ngx-datatable-column",25),h.Mc(32,Ia,1,0,"ng-template",26),h.Mc(33,Na,3,4,"ng-template",16),h.Vb(),h.Wb(34,"ngx-datatable-column",27),h.Mc(35,ja,1,0,"ng-template",26),h.Mc(36,Aa,3,4,"ng-template",16),h.Vb(),h.Wb(37,"ngx-datatable-column",28),h.Mc(38,Ea,1,0,"ng-template",26),h.Mc(39,za,3,4,"ng-template",16),h.Vb(),h.Wb(40,"ngx-datatable-column",29),h.Mc(41,La,1,0,"ng-template",26),h.Mc(42,Ua,4,6,"ng-template",16),h.Vb(),h.Vb()),2&e&&(h.Db(1),h.rc("ngIf",t.chartData),h.Db(1),h.rc("ngIf",t.summaryMetricsData),h.Db(6),h.rc("ngModel",t.groupType),h.Db(9),h.rc("columnMode","force")("headerHeight",50)("footerHeight",0)("rowHeight",50)("scrollbarV",!0)("rows",t.rows)("loadingIndicator",t.loadingIndicator),h.Db(2),h.rc("rowHeight","publisher"===t.groupType||"subid"===t.groupType?t.getDetailRowHeight:130),h.Db(2),h.rc("width",30)("resizeable",!1)("sortable",!1)("draggable",!1)("canAutoResize",!1),h.Db(2),h.rc("ngIf",!t.groupPublishFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag),h.Db(1),h.rc("ngIf",!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag))},directives:[b.a,s.p,d.c,d.g,m.a,v.q,v.t,y.p,S.d,S.e,S.f,S.b,S.a,S.c,F,V,s.o],pipes:[s.f,s.g,s.w,s.d],styles:[""]}),Ha),Ba=i("Wxo5"),Qa=["expandableTable"];function Ga(e,t){if(1&e&&h.Rb(0,"app-reporting-revenue-chart",27),2&e){var r=h.lc();h.rc("chartData",r.chartData)}}function qa(e,t){if(1&e&&h.Rb(0,"app-summary-metrics",28),2&e){var r=h.lc();h.rc("summaryMetricsData",r.summaryMetrics)}}function $a(e,t){if(1&e&&(h.Wb(0,"tr"),h.Wb(1,"td"),h.Oc(2),h.mc(3,"date"),h.Vb(),h.Wb(4,"td"),h.Oc(5),h.mc(6,"number"),h.Vb(),h.Wb(7,"td"),h.Oc(8),h.mc(9,"number"),h.Vb(),h.Wb(10,"td"),h.Oc(11),h.mc(12,"percent"),h.mc(13,"percent"),h.Vb(),h.Wb(14,"td"),h.Oc(15),h.mc(16,"currency"),h.mc(17,"currency"),h.Vb(),h.Wb(18,"td"),h.Oc(19),h.mc(20,"currency"),h.Vb(),h.Wb(21,"td"),h.Oc(22),h.mc(23,"currency"),h.Vb(),h.Wb(24,"td"),h.Oc(25),h.mc(26,"currency"),h.Vb(),h.Vb()),2&e){var r=t.$implicit;h.Db(2),h.Pc(h.nc(3,8,r.date)),h.Db(3),h.Pc(h.nc(6,10,r.searches)),h.Db(3),h.Pc(h.nc(9,12,r.clicks)),h.Db(3),h.Pc(h.oc(12,14,r.ctr,"2.2-2")||h.oc(13,17,0,"2.2-2")),h.Db(4),h.Pc(h.oc(16,20,r.cpc,"USD")||h.oc(17,23,0,"USD")),h.Db(4),h.Pc(h.oc(20,26,r.publisherNet,"USD")),h.Db(3),h.Pc(h.oc(23,29,r.profit,"USD")),h.Db(3),h.Pc(h.oc(26,32,r.revenue,"USD"))}}function Ka(e,t){if(1&e&&(h.Wb(0,"div",31),h.Wb(1,"table",32),h.Wb(2,"thead"),h.Wb(3,"tr"),h.Wb(4,"th"),h.Oc(5,"Date"),h.Vb(),h.Wb(6,"th"),h.Oc(7,"Searches"),h.Vb(),h.Wb(8,"th"),h.Oc(9,"Clicks"),h.Vb(),h.Wb(10,"th"),h.Oc(11,"CTR"),h.Vb(),h.Wb(12,"th"),h.Oc(13,"CPC"),h.Vb(),h.Wb(14,"th"),h.Oc(15,"Publisher Net"),h.Vb(),h.Wb(16,"th"),h.Oc(17,"Profit"),h.Vb(),h.Wb(18,"th"),h.Oc(19,"Revenue"),h.Vb(),h.Vb(),h.Vb(),h.Wb(20,"tbody"),h.Mc(21,$a,27,35,"tr",33),h.Vb(),h.Vb(),h.Vb()),2&e){var r=h.lc().row;h.Db(21),h.rc("ngForOf",r.subReportingForDate)}}function Xa(e,t){1&e&&(h.Wb(0,"div",34),h.Wb(1,"div"),h.Wb(2,"strong"),h.Oc(3,"Address"),h.Vb(),h.Vb(),h.Wb(4,"div"),h.Oc(5,"Test"),h.Vb(),h.Vb())}function Za(e,t){if(1&e&&(h.Mc(0,Ka,22,1,"div",29),h.Mc(1,Xa,6,0,"div",30)),2&e){var r=h.lc();h.rc("ngIf","publisher"===r.groupType||"subid"===r.groupType),h.Db(1),h.rc("ngIf","publisher"!==r.groupType&&"subid"!==r.groupType)}}function Ja(e,t){if(1&e){var r=h.Xb();h.Wb(0,"a",35),h.hc("click",(function(){h.Dc(r);var e=t.row;return h.lc().toggleExpandRow(e)})),h.Vb()}if(2&e){var a=t.expanded;h.Ib("datatable-icon-right",!a)("datatable-icon-down",a)}}function en(e,t){1&e&&h.Oc(0," Date ")}function tn(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"date"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function rn(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",36),h.Mc(1,en,1,0,"ng-template",23),h.Mc(2,tn,3,3,"ng-template",16),h.Vb()),2&e&&h.rc("minWidth",100)}function an(e,t){1&e&&h.Oc(0," Subid ")}function nn(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function on(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",37),h.Mc(1,an,1,0,"ng-template",23),h.Mc(2,nn,2,1,"ng-template",16),h.Vb())}function sn(e,t){1&e&&h.Oc(0," Publisher ")}function un(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function cn(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",38),h.Mc(1,sn,1,0,"ng-template",23),h.Mc(2,un,2,1,"ng-template",16),h.Vb()),2&e&&h.rc("minWidth",100)}function ln(e,t){1&e&&h.Oc(0," Searches ")}function hn(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function pn(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",39),h.Mc(1,ln,1,0,"ng-template",23),h.Mc(2,hn,3,3,"ng-template",16),h.Vb())}function gn(e,t){1&e&&h.Oc(0," Clicks ")}function fn(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function bn(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",40),h.Mc(1,gn,1,0,"ng-template",23),h.Mc(2,fn,3,3,"ng-template",16),h.Vb())}function dn(e,t){1&e&&h.Oc(0," Split ")}function mn(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.mc(3,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r)||h.oc(3,3,0,"1.0-0"))}}function vn(e,t){1&e&&h.Oc(0," Publisher Net ")}function yn(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}function Sn(e,t){1&e&&h.Oc(0," Profit ")}function Dn(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}function wn(e,t){1&e&&h.Oc(0," Revenue ")}function Fn(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}var Wn,Pn=((Wn=function(){function t(e,a,n,i){r(this,t),this.cdr=e,this.userService=a,this.rubiService=n,this.tagService=i,this.range={startDate:"",endDate:""},this.loadingIndicator=!0,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.expanded={},this.tagList=[],this.groupType="",this.selectedCompany=this.getSelectedCompanyStored()}return n(t,[{key:"ngAfterViewInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCompanyTags(this.selectedCompany);case 2:return this.tagList=e.sent,this.rows=[],e.next=6,this.getAllRubiStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 6:return this.rows=e.sent,e.next=9,this.getChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 9:return this.chartData=e.sent,e.next=12,this.getSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 12:this.summaryMetrics=e.sent,this.refreshTable();case 14:case"end":return e.stop()}}),e,this)})))}},{key:"updateReportingFiltering",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.range=e,t.next=3,this.getAllRubiStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 3:return this.rows=t.sent,t.next=6,this.getChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 6:return this.chartData=t.sent,t.next=9,this.getSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 9:this.summaryMetrics=t.sent,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.groupType="",this.refreshTable();case 15:case"end":return t.stop()}}),t,this)})))}},{key:"getSelectedCompanyStored",value:function(){return this.userService.getSelectedCompanyFromLocalStorage()}},{key:"toggleExpandRow",value:function(e){console.log("Toggled Expand Row!",e),this.table.rowDetail.toggleExpandRow(e)}},{key:"onDetailToggle",value:function(e){console.log("Detail Toggled",e)}},{key:"refreshTable",value:function(){this.cdr.markForCheck()}},{key:"getAllRubiStats",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,s,u,c,l,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.rubiService.getRubiStats(t,r,a).toPromise();case 2:i=n.sent,o=e((this.loadingIndicator=!1,this.allStats=i.stats,this.allStats.map((function(e){e.publisher="No Publisher",e.tagname="No Tag"})),this.tagList));try{for(o.s();!(s=o.n()).done;)if("rubi"==(u=s.value).tag.advertiser){c=e(u.tag.subids);try{for(c.s();!(l=c.n()).done;)"Contains"==(h=l.value).filterTag?this.allStats.map((function(e){e.subid.includes(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"StartsWith"==h.filterTag?this.allStats.map((function(e){e.subid.startsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"EndsWith"==h.filterTag?this.allStats.map((function(e){e.subid.endsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"ExactValue"==h.filterTag&&this.allStats.map((function(e){e.subid==h.subid&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)}))}catch(p){c.e(p)}finally{c.f()}}}catch(p){o.e(p)}finally{o.f()}return n.abrupt("return",this.allStats);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"getDetailRowHeight",value:function(e,t){var r;return e&&(r=e.detailHeight),r}},{key:"groupDate",value:function(){var t,r={},a=this.allStats.reduce((function(e,t){var a=t.date;return r[a]?(r[a].clicks+=parseFloat(t.clicks),r[a].searches+=parseFloat(t.searches?t.searches:0),r[a].monetized_searches+=parseFloat(t.monetized_searches?t.monetized_searches:0),r[a].revenue+=parseFloat(t.revenue),r[a].split+=parseFloat(t.split),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!1,this.groupDateShowFlag=!0,this.groupSubidShowFlag=!1,this.cdr.markForCheck()}},{key:"groupSubid",value:function(){var t,r={},a=this.allStats.reduce((function(e,t){var a=t.subid;return r[a]?(r[a].clicks+=parseFloat(t.clicks),r[a].searches+=parseFloat(t.searches?t.searches:0),r[a].monetized_searches+=parseFloat(t.monetized_searches?t.monetized_searches:0),r[a].revenue+=parseFloat(t.revenue),r[a].split+=parseFloat(t.split),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.ctr=i.ctr/i.counter,i.cpc=i.revenue/i.clicks,i.subReportingForDate=this.groupDateForSubid(i),i.detailHeight=50*(i.subReportingForDate.length+1)}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!0,this.cdr.markForCheck()}},{key:"groupProvider",value:function(){var t,r={},a=this.allStats.reduce((function(e,t){var a=t.publisher;return r[a]?(r[a].clicks+=parseFloat(t.clicks),r[a].searches+=parseFloat(t.searches?t.searches:0),r[a].monetized_searches+=parseFloat(t.monetized_searches?t.monetized_searches:0),r[a].revenue+=parseFloat(t.revenue),r[a].split+=parseFloat(t.split),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.cpc=i.revenue/i.clicks,i.subReportingForDate=this.groupDateForPublisher(i),i.detailHeight=50*(i.subReportingForDate.length+1)}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!0,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.cdr.markForCheck()}},{key:"backGroup",value:function(){this.rows=this.allStats,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.cdr.markForCheck()}},{key:"groupDateForPublisher",value:function(t){var r,a={},n=this.allStats.filter((function(e){return e.publisher===t.publisher})).reduce((function(e,t){var r=t.date;return a[r]?(a[r].clicks+=parseFloat(t.clicks),a[r].searches+=parseFloat(t.searches?t.searches:0),a[r].monetized_searches+=parseFloat(t.monetized_searches?t.monetized_searches:0),a[r].revenue+=parseFloat(t.revenue),a[r].split+=parseFloat(t.split),a[r].profit+=parseFloat(t.profit),a[r].publisherNet+=parseFloat(t.publisherNet),a[r].counter++):(a[r]=Object.assign({},t),a[r].counter=1,e.push(a[r])),e}),[]),i=e(n);try{for(i.s();!(r=i.n()).done;)(t=r.value).split=t.split/t.counter,t.ctr=t.clicks/t.searches,t.cpc=t.revenue/t.clicks}catch(o){i.e(o)}finally{i.f()}return n}},{key:"groupDateForSubid",value:function(t){var r,a={},n=this.allStats.filter((function(e){return e.subid===t.subid})).reduce((function(e,t){var r=t.date;return a[r]?(a[r].clicks+=parseFloat(t.clicks),a[r].searches+=parseFloat(t.searches?t.searches:0),a[r].monetized_searches+=parseFloat(t.monetized_searches?t.monetized_searches:0),a[r].revenue+=parseFloat(t.revenue),a[r].split+=parseFloat(t.split),a[r].profit+=parseFloat(t.profit),a[r].publisherNet+=parseFloat(t.publisherNet),a[r].counter++):(a[r]=Object.assign({},t),a[r].counter=1,e.push(a[r])),e}),[]),i=e(n);try{for(i.s();!(r=i.n()).done;)(t=r.value).split=t.split/t.counter,t.cpc=t.revenue/t.clicks,t.ctr=t.clicks/t.searches}catch(o){i.e(o)}finally{i.f()}return n}},{key:"getChartMetrics",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,s,u,c,h,p,g,f,b,d,m,v,y,S,D,w,F,W,P,x,M,V,C,O,k,R,_,T,I;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.rubiService.getRubiStats(t,r,a).toPromise();case 3:i=n.sent,o=e((this.loadingIndicator=!1,this.allChartStat=i.stats,this.allChartStat.map((function(e){e.publisher="No Publisher",e.tagname="No Tag"})),this.tagList));try{for(o.s();!(s=o.n()).done;)if("rubi"==(u=s.value).tag.advertiser){c=e(u.tag.subids);try{for(c.s();!(h=c.n()).done;)"Contains"==(p=h.value).filterTag?this.allChartStat.map((function(e){e.subid.includes(p.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"StartsWith"==p.filterTag?this.allChartStat.map((function(e){e.subid.startsWith(p.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"EndsWith"==p.filterTag?this.allChartStat.map((function(e){e.subid.endsWith(p.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"ExactValue"==p.filterTag&&this.allChartStat.map((function(e){e.subid==p.subid&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)}))}catch(N){c.e(N)}finally{c.f()}}}catch(N){o.e(N)}finally{o.f()}for(d in g=l.chain(this.allChartStat).sortBy((function(e){return e.date})).sortBy((function(e){return e.publisher})).value(),f=function e(t,r){if(!r.length)return t;var a=r[0],n=r.slice(1);return l.mapValues(l.groupBy(t,a),(function(t){return e(t,n)}))}(g,["date","publisher"]),b=[],f)if(f.hasOwnProperty(d))for(m in f[d])v={date:f[d][m][0].date,publisher:f[d][m][0].publisher,revenue:l.reduce(f[d][m],(function(e,t){return e+t.revenue}),0)},b.push(v);for(y=[],S=0,D=b;S<D.length;S++)w=D[S],y.push(w.publisher);F=y.filter((function(e,t,r){return t===r.indexOf(e)})),this.allChartStat=this.allChartStat.slice().sort((function(e,t){return e.date-t.date})),W={},P=this.allChartStat.reduce((function(e,t){var r=t.date;return W[r]?W[r].searches+=parseInt(t.searches):(W[r]=Object.assign({},t),e.push(W[r])),e}),[]),x=[],M=[],V={},C=e(P);try{for(C.s();!(O=C.n()).done;)k=O.value,x.push(k.date),M.push(k.searches)}catch(N){C.e(N)}finally{C.f()}R=[],_=e(F);try{for(I=function(){var t,r=T.value,a=[],n=e(x);try{var i=function(){var e=t.value,n=b.filter((function(t){return t.date==e&&t.publisher==r}));a.push(n.length>0?n[0].revenue:0)};for(n.s();!(t=n.n()).done;)i()}catch(N){n.e(N)}finally{n.f()}var o={};o[r]=a,R.push(o)},_.s();!(T=_.n()).done;)I()}catch(N){_.e(N)}finally{_.f()}return n.abrupt("return",(V.revenuePerDay=R,V.datesOfRevenue=x,V.searchesPerDay=M,V.publisherName=F,V));case 22:return n.prev=22,n.t0=n.catch(0),n.abrupt("return",n.t0);case 25:case"end":return n.stop()}}),n,this,[[0,22]])})))}},{key:"groupHandle",value:function(e){this.groupType=e.value,"date"==e.value?this.groupDate():"publisher"==e.value?this.groupProvider():"subid"==e.value?this.groupSubid():this.backGroup()}},{key:"remove_element",value:function(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return void e.splice(r,1)}},{key:"getSummaryMetrics",value:function(e,t,r){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var n,i,o,s,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.rubiService.getSummaryMetrics(e,t,r).toPromise();case 2:return n=a.sent,i={},o=0,s=0,u=0,a.abrupt("return",(0!=n.summary[0].lastMonthStat[0].profitPace&&(o=(n.summary[0].summaryMetrics[0].profitPace-n.summary[0].lastMonthStat[0].profitPace)/n.summary[0].lastMonthStat[0].profitPace*100),0!=n.summary[0].twoLastMonthStat[0].profitPace&&(s=(n.summary[0].lastMonthStat[0].profitPace-n.summary[0].twoLastMonthStat[0].profitPace)/n.summary[0].twoLastMonthStat[0].profitPace*100),0!=n.summary[0].prevSelectedStat[0].profitPace&&(u=(n.summary[0].selectedStat[0].profitPace-n.summary[0].prevSelectedStat[0].profitPace)/n.summary[0].prevSelectedStat[0].profitPace*100),n.summary[0].summaryMetrics[0].percentPace=o,n.summary[0].lastMonthStat[0].percentPace=s,n.summary[0].selectedStat[0].percentPace=u,n.summary[0].selectedStat[0].selectedStartDate=t,n.summary[0].selectedStat[0].selectedEndDate=r,i.summary=n.summary,i));case 5:case"end":return a.stop()}}),a,this)})))}},{key:"getCompanyTags",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.split("/")[1],t.prev=1,t.next=4,this.tagService.getCompanyTags(r).toPromise();case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))}}]),t}()).\u0275fac=function(e){return new(e||Wn)(h.Qb(h.i),h.Qb(p.a),h.Qb(Ba.a),h.Qb(f.a))},Wn.\u0275cmp=h.Kb({type:Wn,selectors:[["app-rubi"]],viewQuery:function(e,t){var r;1&e&&h.Tc(Qa,!0),2&e&&h.zc(r=h.ic())&&(t.table=r.first)},decls:40,vars:22,consts:[[3,"onDatesPicked"],[3,"chartData",4,"ngIf"],[3,"summaryMetricsData",4,"ngIf"],[1,"row"],[1,"col-xl-4"],["appearance","fill"],[3,"ngModel","selectionChange","ngModelChange"],["value","date"],["value","publisher"],["value","subid"],["value","reset"],[1,"material","fullscreen","expandable",2,"top","10px","height","500px",3,"columnMode","headerHeight","footerHeight","rowHeight","scrollbarV","rows","loadingIndicator"],["expandableTable",""],[3,"rowHeight","toggle"],["ngx-datatable-row-detail-template",""],[3,"width","resizeable","sortable","draggable","canAutoResize"],["ngx-datatable-cell-template",""],["name","date",3,"minWidth",4,"ngIf"],["name","subid",4,"ngIf"],["name","publisher",3,"minWidth",4,"ngIf"],["name","searches",4,"ngIf"],["name","clicks",4,"ngIf"],["name","split",3,"minWidth"],["ngx-datatable-header-template",""],["name","publisherNet"],["name","profit"],["name","revenue"],[3,"chartData"],[3,"summaryMetricsData"],["class","table-responsive","style","padding-left: 36px;",4,"ngIf"],["style","padding-left: 35px",4,"ngIf"],[1,"table-responsive",2,"padding-left","36px"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[2,"padding-left","35px"],["href","javascript:void(0)","title","Expand/Collapse Row",3,"click"],["name","date",3,"minWidth"],["name","subid"],["name","publisher",3,"minWidth"],["name","searches"],["name","clicks"]],template:function(e,t){1&e&&(h.Wb(0,"app-reporting-filtering",0),h.hc("onDatesPicked",(function(e){return t.updateReportingFiltering(e)})),h.Vb(),h.Mc(1,Ga,1,1,"app-reporting-revenue-chart",1),h.Mc(2,qa,1,1,"app-summary-metrics",2),h.Wb(3,"div",3),h.Wb(4,"div",4),h.Wb(5,"mat-form-field",5),h.Wb(6,"mat-label"),h.Oc(7,"Choose an Group By"),h.Vb(),h.Wb(8,"mat-select",6),h.hc("selectionChange",(function(e){return t.groupHandle(e)}))("ngModelChange",(function(e){return t.groupType=e})),h.Wb(9,"mat-option",7),h.Oc(10,"Date"),h.Vb(),h.Wb(11,"mat-option",8),h.Oc(12,"Publisher"),h.Vb(),h.Wb(13,"mat-option",9),h.Oc(14,"Subid"),h.Vb(),h.Wb(15,"mat-option",10),h.Oc(16,"Reset"),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(17,"ngx-datatable",11,12),h.Wb(19,"ngx-datatable-row-detail",13),h.hc("toggle",(function(e){return t.onDetailToggle(e)})),h.Mc(20,Za,2,2,"ng-template",14),h.Vb(),h.Wb(21,"ngx-datatable-column",15),h.Mc(22,Ja,1,4,"ng-template",16),h.Vb(),h.Mc(23,rn,3,1,"ngx-datatable-column",17),h.Mc(24,on,3,0,"ngx-datatable-column",18),h.Mc(25,cn,3,1,"ngx-datatable-column",19),h.Mc(26,pn,3,0,"ngx-datatable-column",20),h.Mc(27,bn,3,0,"ngx-datatable-column",21),h.Wb(28,"ngx-datatable-column",22),h.Mc(29,dn,1,0,"ng-template",23),h.Mc(30,mn,4,6,"ng-template",16),h.Vb(),h.Wb(31,"ngx-datatable-column",24),h.Mc(32,vn,1,0,"ng-template",23),h.Mc(33,yn,3,4,"ng-template",16),h.Vb(),h.Wb(34,"ngx-datatable-column",25),h.Mc(35,Sn,1,0,"ng-template",23),h.Mc(36,Dn,3,4,"ng-template",16),h.Vb(),h.Wb(37,"ngx-datatable-column",26),h.Mc(38,wn,1,0,"ng-template",23),h.Mc(39,Fn,3,4,"ng-template",16),h.Vb(),h.Vb()),2&e&&(h.Db(1),h.rc("ngIf",t.chartData),h.Db(1),h.rc("ngIf",t.summaryMetrics),h.Db(6),h.rc("ngModel",t.groupType),h.Db(9),h.rc("columnMode","force")("headerHeight",50)("footerHeight",0)("rowHeight",50)("scrollbarV",!0)("rows",t.rows)("loadingIndicator",t.loadingIndicator),h.Db(2),h.rc("rowHeight","publisher"===t.groupType||"subid"===t.groupType?t.getDetailRowHeight:130),h.Db(2),h.rc("width",30)("resizeable",!1)("sortable",!1)("draggable",!1)("canAutoResize",!1),h.Db(2),h.rc("ngIf",!t.groupPublishFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag),h.Db(1),h.rc("ngIf",!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("minWidth",35))},directives:[b.a,s.p,d.c,d.g,m.a,v.q,v.t,y.p,S.d,S.e,S.f,S.b,S.a,S.c,F,V,s.o],pipes:[s.f,s.g,s.w,s.d],styles:[""]}),Wn),xn=i("uJD8"),Mn=["expandableTable"];function Vn(e,t){if(1&e&&h.Rb(0,"app-reporting-revenue-chart",34),2&e){var r=h.lc();h.rc("chartData",r.chartData)}}function Cn(e,t){if(1&e&&h.Rb(0,"app-summary-metrics",35),2&e){var r=h.lc();h.rc("summaryMetricsData",r.summaryMetrics)}}function On(e,t){if(1&e&&(h.Wb(0,"tr"),h.Wb(1,"td"),h.Oc(2),h.mc(3,"date"),h.Vb(),h.Wb(4,"td"),h.Oc(5),h.mc(6,"number"),h.Vb(),h.Wb(7,"td"),h.Oc(8),h.mc(9,"number"),h.Vb(),h.Wb(10,"td"),h.Oc(11),h.mc(12,"percent"),h.Vb(),h.Wb(13,"td"),h.Oc(14),h.mc(15,"currency"),h.Vb(),h.Wb(16,"td"),h.Oc(17),h.mc(18,"currency"),h.Vb(),h.Wb(19,"td"),h.Oc(20),h.mc(21,"currency"),h.Vb(),h.Wb(22,"td"),h.Oc(23),h.mc(24,"currency"),h.Vb(),h.Vb()),2&e){var r=t.$implicit;h.Db(2),h.Pc(h.nc(3,8,r.date)),h.Db(3),h.Pc(h.nc(6,10,r.searches)),h.Db(3),h.Pc(h.nc(9,12,r.clicks)),h.Db(3),h.Pc(h.oc(12,14,r.ctr||0,"2.2-2")),h.Db(3),h.Pc(h.oc(15,17,r.cpc||0,"USD")),h.Db(3),h.Pc(h.oc(18,20,r.publisherNet,"USD")),h.Db(3),h.Pc(h.oc(21,23,r.profit,"USD")),h.Db(3),h.Pc(h.oc(24,26,r.revenue,"USD"))}}function kn(e,t){if(1&e&&(h.Wb(0,"div",38),h.Wb(1,"table",39),h.Wb(2,"thead"),h.Wb(3,"tr"),h.Wb(4,"th"),h.Oc(5,"Date"),h.Vb(),h.Wb(6,"th"),h.Oc(7,"Searches"),h.Vb(),h.Wb(8,"th"),h.Oc(9,"Clicks"),h.Vb(),h.Wb(10,"th"),h.Oc(11,"CTR"),h.Vb(),h.Wb(12,"th"),h.Oc(13,"CPC"),h.Vb(),h.Wb(14,"th"),h.Oc(15,"Publisher Net"),h.Vb(),h.Wb(16,"th"),h.Oc(17,"Profit"),h.Vb(),h.Wb(18,"th"),h.Oc(19,"Revenue"),h.Vb(),h.Vb(),h.Vb(),h.Wb(20,"tbody"),h.Mc(21,On,25,29,"tr",40),h.Vb(),h.Vb(),h.Vb()),2&e){var r=h.lc().row;h.Db(21),h.rc("ngForOf",r.subReportingForDate)}}function Rn(e,t){1&e&&(h.Wb(0,"div",41),h.Wb(1,"div"),h.Wb(2,"strong"),h.Oc(3,"Address"),h.Vb(),h.Vb(),h.Wb(4,"div"),h.Oc(5,"Test"),h.Vb(),h.Vb())}function _n(e,t){if(1&e&&(h.Mc(0,kn,22,1,"div",36),h.Mc(1,Rn,6,0,"div",37)),2&e){var r=h.lc();h.rc("ngIf","publisher"===r.groupType||"subid"===r.groupType),h.Db(1),h.rc("ngIf","publisher"!==r.groupType&&"subid"!==r.groupType)}}function Tn(e,t){if(1&e){var r=h.Xb();h.Wb(0,"a",42),h.hc("click",(function(){h.Dc(r);var e=t.row;return h.lc().toggleExpandRow(e)})),h.Vb()}if(2&e){var a=t.expanded;h.Ib("datatable-icon-right",!a)("datatable-icon-down",a)}}function In(e,t){1&e&&h.Oc(0," Date ")}function Nn(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"date"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function jn(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",43),h.Mc(1,In,1,0,"ng-template",30),h.Mc(2,Nn,3,3,"ng-template",16),h.Vb()),2&e&&h.rc("minWidth",100)}function An(e,t){1&e&&h.Oc(0," Subid ")}function En(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function zn(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",44),h.Mc(1,An,1,0,"ng-template",30),h.Mc(2,En,2,1,"ng-template",16),h.Vb())}function Ln(e,t){1&e&&h.Oc(0," Publisher ")}function Un(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function Hn(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",45),h.Mc(1,Ln,1,0,"ng-template",30),h.Mc(2,Un,2,1,"ng-template",16),h.Vb()),2&e&&h.rc("minWidth",100)}function Yn(e,t){1&e&&h.Oc(0," Searches ")}function Bn(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function Qn(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",46),h.Mc(1,Yn,1,0,"ng-template",30),h.Mc(2,Bn,3,3,"ng-template",16),h.Vb())}function Gn(e,t){1&e&&h.Oc(0," Bid Searches ")}function qn(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function $n(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",47),h.Mc(1,Gn,1,0,"ng-template",30),h.Mc(2,qn,3,3,"ng-template",16),h.Vb())}function Kn(e,t){1&e&&h.Oc(0," Bid Searches Result ")}function Xn(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function Zn(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",48),h.Mc(1,Kn,1,0,"ng-template",30),h.Mc(2,Xn,3,3,"ng-template",16),h.Vb())}function Jn(e,t){1&e&&h.Oc(0," Clicks ")}function ei(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function ti(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",49),h.Mc(1,Jn,1,0,"ng-template",30),h.Mc(2,ei,3,3,"ng-template",16),h.Vb())}function ri(e,t){1&e&&h.Oc(0," Coverage ")}function ai(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function ni(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",50),h.Mc(1,ri,1,0,"ng-template",30),h.Mc(2,ai,3,3,"ng-template",16),h.Vb())}function ii(e,t){1&e&&h.Oc(0," CTR ")}function oi(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"percent"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r||0,"2.2-2"))}}function si(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",51),h.Mc(1,ii,1,0,"ng-template",30),h.Mc(2,oi,3,4,"ng-template",16),h.Vb())}function ui(e,t){1&e&&h.Oc(0," CPC ")}function ci(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r||0,"USD"))}}function li(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",52),h.Mc(1,ui,1,0,"ng-template",30),h.Mc(2,ci,3,4,"ng-template",16),h.Vb())}function hi(e,t){1&e&&h.Oc(0," RN ")}function pi(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function gi(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",53),h.Mc(1,hi,1,0,"ng-template",30),h.Mc(2,pi,3,3,"ng-template",16),h.Vb())}function fi(e,t){1&e&&h.Oc(0," TQ ")}function bi(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function di(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",54),h.Mc(1,fi,1,0,"ng-template",30),h.Mc(2,bi,3,3,"ng-template",16),h.Vb())}function mi(e,t){1&e&&h.Oc(0," Publisher Net ")}function vi(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}function yi(e,t){1&e&&h.Oc(0," Profit ")}function Si(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}function Di(e,t){1&e&&h.Oc(0," Revenue ")}function wi(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}function Fi(e,t){1&e&&h.Oc(0," Split ")}function Wi(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.mc(3,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r)||h.oc(3,3,0,"1.0-0"))}}var Pi,xi=((Pi=function(){function t(e,a,n,i){r(this,t),this.verizonService=e,this.cdr=a,this.userService=n,this.tagService=i,this.range={startDate:"",endDate:""},this.loadingIndicator=!0,this.tagList=[],this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.groupType="",this.selectedCompany=this.getSelectedCompanyFromLocalStorage()}return n(t,[{key:"ngAfterViewInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCompanyTags(this.selectedCompany);case 2:return this.tagList=e.sent,this.rows=[],e.next=6,this.getAllVerizonStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 6:return this.rows=e.sent,e.next=9,this.getChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 9:return this.chartData=e.sent,e.next=12,this.getSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 12:this.summaryMetrics=e.sent,this.refreshTable();case 14:case"end":return e.stop()}}),e,this)})))}},{key:"getCompanyTags",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.split("/")[1],t.prev=1,t.next=4,this.tagService.getCompanyTags(r).toPromise();case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))}},{key:"getDetailRowHeight",value:function(e,t){var r;return e&&(r=e.detailHeight),r}},{key:"getSelectedCompanyFromLocalStorage",value:function(){return this.userService.getSelectedCompanyFromLocalStorage()}},{key:"updateReportingFiltering",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.range=e,t.next=3,this.getAllVerizonStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 3:return this.rows=t.sent,t.next=6,this.getChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 6:return this.chartData=t.sent,t.next=9,this.getSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 9:this.summaryMetrics=t.sent,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.groupType="",this.refreshTable();case 15:case"end":return t.stop()}}),t,this)})))}},{key:"refreshTable",value:function(){this.cdr.markForCheck()}},{key:"groupDate",value:function(){var t,r={},a=this.allStats.reduce((function(e,t){var a=t.date;return r[a]?(r[a].clicks+=parseFloat(t.clicks),r[a].ctr+=parseFloat(t.ctr?t.ctr:0),r[a].rn+=parseFloat(t.rn?t.rn:0),r[a].coverage+=parseFloat(t.coverage?t.coverage:0),r[a].searches+=parseFloat(t.searches?t.searches:0),r[a].biddedSearches+=parseFloat(t.biddedSearches?t.biddedSearches:0),r[a].biddedResults+=parseFloat(t.biddedResults?t.biddedResults:0),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].revenue+=parseFloat(t.revenue),r[a].split+=parseFloat(t.split),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.ctr=i.ctr/i.counter,i.cpc=i.revenue/i.clicks}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!1,this.groupDateShowFlag=!0,this.groupSubidShowFlag=!1,this.cdr.markForCheck()}},{key:"groupSubid",value:function(){var t,r={},a=this.allStats.reduce((function(e,t){var a=t.subid;return r[a]?(r[a].clicks+=parseFloat(t.clicks),r[a].ctr+=parseFloat(t.ctr?t.ctr:0),r[a].rn+=parseFloat(t.rn?t.rn:0),r[a].coverage+=parseFloat(t.coverage?t.coverage:0),r[a].searches+=parseFloat(t.searches?t.searches:0),r[a].biddedSearches+=parseFloat(t.biddedSearches?t.biddedSearches:0),r[a].biddedResults+=parseFloat(t.biddedResults?t.biddedResults:0),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].revenue+=parseFloat(t.revenue),r[a].split+=parseFloat(t.split),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.ctr=i.ctr/i.counter,i.cpc=i.revenue/i.clicks,i.subReportingForDate=this.groupDateForSubid(i),i.detailHeight=50*(i.subReportingForDate.length+1)}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!0,this.cdr.markForCheck()}},{key:"groupProvider",value:function(){var t,r={},a=this.allStats.reduce((function(e,t){var a=t.publisher;return r[a]?(r[a].clicks+=parseFloat(t.clicks),r[a].ctr+=parseFloat(t.ctr?t.ctr:0),r[a].rn+=parseFloat(t.rn?t.rn:0),r[a].coverage+=parseFloat(t.coverage?t.coverage:0),r[a].searches+=parseFloat(t.searches?t.searches:0),r[a].biddedSearches+=parseFloat(t.biddedSearches?t.biddedSearches:0),r[a].biddedResults+=parseFloat(t.biddedResults?t.biddedResults:0),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].revenue+=parseFloat(t.revenue),r[a].split+=parseFloat(t.split),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.ctr=i.ctr/i.counter,i.cpc=i.revenue/i.clicks,i.subReportingForDate=this.groupDateForPublisher(i),i.detailHeight=50*(i.subReportingForDate.length+1)}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!0,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.cdr.markForCheck()}},{key:"groupDateForPublisher",value:function(t){var r,a={},n=this.allStats.filter((function(e){return e.publisher===t.publisher})).reduce((function(e,t){var r=t.date;return a[r]?(a[r].clicks+=parseFloat(t.clicks),a[r].rn+=parseFloat(t.rn?t.rn:0),a[r].coverage+=parseFloat(t.coverage?t.coverage:0),a[r].searches+=parseFloat(t.searches?t.searches:0),a[r].biddedSearches+=parseFloat(t.biddedSearches?t.biddedSearches:0),a[r].biddedResults+=parseFloat(t.biddedResults?t.biddedResults:0),a[r].profit+=parseFloat(t.profit),a[r].publisherNet+=parseFloat(t.publisherNet),a[r].revenue+=parseFloat(t.revenue),a[r].split+=parseFloat(t.split),a[r].counter++):(a[r]=Object.assign({},t),a[r].counter=1,e.push(a[r])),e}),[]),i=e(n);try{for(i.s();!(r=i.n()).done;)(t=r.value).split=t.split/t.counter,t.ctr=t.clicks/t.searches,t.cpc=t.revenue/t.clicks}catch(o){i.e(o)}finally{i.f()}return n}},{key:"groupDateForSubid",value:function(t){var r,a={},n=this.allStats.filter((function(e){return e.subid===t.subid})).reduce((function(e,t){var r=t.date;return a[r]?(a[r].clicks+=parseFloat(t.clicks),a[r].rn+=parseFloat(t.rn?t.rn:0),a[r].coverage+=parseFloat(t.coverage?t.coverage:0),a[r].searches+=parseFloat(t.searches?t.searches:0),a[r].biddedSearches+=parseFloat(t.biddedSearches?t.biddedSearches:0),a[r].biddedResults+=parseFloat(t.biddedResults?t.biddedResults:0),a[r].profit+=parseFloat(t.profit),a[r].publisherNet+=parseFloat(t.publisherNet),a[r].revenue+=parseFloat(t.revenue),a[r].split+=parseFloat(t.split),a[r].counter++):(a[r]=Object.assign({},t),a[r].counter=1,e.push(a[r])),e}),[]),i=e(n);try{for(i.s();!(r=i.n()).done;)(t=r.value).split=t.split/t.counter,t.cpc=t.revenue/t.clicks,t.ctr=t.clicks/t.searches}catch(o){i.e(o)}finally{i.f()}return n}},{key:"backGroup",value:function(){this.rows=this.allStats,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.cdr.markForCheck()}},{key:"toggleExpandRow",value:function(e){this.table.rowDetail.toggleExpandRow(e)}},{key:"onDetailToggle",value:function(e){}},{key:"remove_element",value:function(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return void e.splice(r,1)}},{key:"groupHandle",value:function(e){this.groupType=e.value,"date"==e.value?this.groupDate():"publisher"==e.value?this.groupProvider():"subid"==e.value?this.groupSubid():this.backGroup()}},{key:"getChartMetrics",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r,a,n,i,o,s,u,c,h,p,g,f,b,d,m,v,y,S,D,w,F,W,P,x,M,V,C,O,k;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,r=e((this.allChartStat=this.allStats,this.tagList));try{for(r.s();!(a=r.n()).done;)if("verizon-direct"==(n=a.value).tag.advertiser){i=e(n.tag.subids);try{for(i.s();!(o=i.n()).done;)"Contains"==(s=o.value).filterTag?this.allChartStat.map((function(e){e.subid.includes(s.subid)&&(e.publisher=n.user.length?n.user[0].fullname:"No Publisher",e.tagname=n.tag.name)})):"StartsWith"==s.filterTag?this.allChartStat.map((function(e){e.subid.startsWith(s.subid)&&(e.publisher=n.user.length?n.user[0].fullname:"No Publisher",e.tagname=n.tag.name)})):"EndsWith"==s.filterTag?this.allChartStat.map((function(e){e.subid.endsWith(s.subid)&&(e.publisher=n.user.length?n.user[0].fullname:"No Publisher",e.tagname=n.tag.name)})):"ExactValue"==s.filterTag&&this.allChartStat.map((function(e){e.subid==s.subid&&(e.publisher=n.user.length?n.user[0].fullname:"No Publisher",e.tagname=n.tag.name)}))}catch(R){i.e(R)}finally{i.f()}}}catch(R){r.e(R)}finally{r.f()}for(p in u=l.chain(this.allChartStat).sortBy((function(e){return e.date})).sortBy((function(e){return e.publisher})).value(),c=function e(t,r){if(!r.length)return t;var a=r[0],n=r.slice(1);return l.mapValues(l.groupBy(t,a),(function(t){return e(t,n)}))}(u,["date","publisher"]),h=[],c)if(c.hasOwnProperty(p))for(g in c[p])f={date:c[p][g][0].date,publisher:c[p][g][0].publisher,revenue:l.reduce(c[p][g],(function(e,t){return e+t.revenue}),0)},h.push(f);for(b=[],d=0,m=h;d<m.length;d++)v=m[d],b.push(v.publisher);y=b.filter((function(e,t,r){return t===r.indexOf(e)})),this.allChartStat=this.allChartStat.slice().sort((function(e,t){return e.date-t.date})),S={},D=this.allChartStat.reduce((function(e,t){var r=t.date;return S[r]?(S[r].searches+=parseInt(t.searches),t.revenue&&(S[r].revenue+=t.revenue)):(S[r]=Object.assign({},t),e.push(S[r])),e}),[]),w=[],F=[],W={},P=e(D);try{for(P.s();!(x=P.n()).done;)M=x.value,w.push(M.date),F.push(M.searches)}catch(R){P.e(R)}finally{P.f()}V=[],C=e(y);try{for(k=function(){var t,r=O.value,a=[],n=e(w);try{var i=function(){var e=t.value,n=h.filter((function(t){return t.date==e&&t.publisher==r}));a.push(n.length>0?n[0].revenue:0)};for(n.s();!(t=n.n()).done;)i()}catch(R){n.e(R)}finally{n.f()}var o={};o[r]=a,V.push(o)},C.s();!(O=C.n()).done;)k()}catch(R){C.e(R)}finally{C.f()}return t.abrupt("return",(W.revenuePerDay=V,W.datesOfRevenue=w,W.searchesPerDay=F,W.publisherName=y,W));case 19:return t.prev=19,t.t0=t.catch(0),t.abrupt("return",t.t0);case 22:case"end":return t.stop()}}),t,this,[[0,19]])})))}},{key:"getAllVerizonStats",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,s,u,c,l,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.verizonService.getAllVerizonStats(t,r,a).toPromise();case 2:i=n.sent,o=e((this.loadingIndicator=!1,this.allStats=i.stats,this.allStats.map((function(e){e.publisher="No Publisher",e.tagname="No Tag"})),this.tagList));try{for(o.s();!(s=o.n()).done;)if("verizon-direct"==(u=s.value).tag.advertiser){c=e(u.tag.subids);try{for(c.s();!(l=c.n()).done;)"Contains"==(h=l.value).filterTag?this.allStats.map((function(e){e.subid.includes(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"StartsWith"==h.filterTag?this.allStats.map((function(e){e.subid.startsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"EndsWith"==h.filterTag?this.allStats.map((function(e){e.subid.endsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"ExactValue"==h.filterTag&&this.allStats.map((function(e){e.subid==h.subid&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)}))}catch(p){c.e(p)}finally{c.f()}}}catch(p){o.e(p)}finally{o.f()}return n.abrupt("return",this.allStats);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"getSummaryMetrics",value:function(e,t,r){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var n,i,o,s,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.verizonService.getSummaryMetrics(e,t,r).toPromise();case 2:return n=a.sent,i={},o=0,s=0,u=0,a.abrupt("return",(0!=n.summary[0].lastMonthStat[0].profitPace&&(o=(n.summary[0].summaryMetrics[0].profitPace-n.summary[0].lastMonthStat[0].profitPace)/n.summary[0].lastMonthStat[0].profitPace*100),0!=n.summary[0].twoLastMonthStat[0].profitPace&&(s=(n.summary[0].lastMonthStat[0].profitPace-n.summary[0].twoLastMonthStat[0].profitPace)/n.summary[0].twoLastMonthStat[0].profitPace*100),0!=n.summary[0].prevSelectedStat[0].profitPace&&(u=(n.summary[0].selectedStat[0].profitPace-n.summary[0].prevSelectedStat[0].profitPace)/n.summary[0].prevSelectedStat[0].profitPace*100),n.summary[0].summaryMetrics[0].percentPace=o,n.summary[0].lastMonthStat[0].percentPace=s,n.summary[0].selectedStat[0].percentPace=u,n.summary[0].selectedStat[0].selectedStartDate=t,n.summary[0].selectedStat[0].selectedEndDate=r,i.summary=n.summary,i));case 5:case"end":return a.stop()}}),a,this)})))}}]),t}()).\u0275fac=function(e){return new(e||Pi)(h.Qb(xn.a),h.Qb(h.i),h.Qb(p.a),h.Qb(f.a))},Pi.\u0275cmp=h.Kb({type:Pi,selectors:[["app-verizon-direct"]],viewQuery:function(e,t){var r;1&e&&h.Tc(Mn,!0),2&e&&h.zc(r=h.ic())&&(t.table=r.first)},decls:47,vars:29,consts:[[3,"onDatesPicked"],[3,"chartData",4,"ngIf"],[3,"summaryMetricsData",4,"ngIf"],[1,"row"],[1,"col-xl-4"],["appearance","fill"],[3,"ngModel","selectionChange","ngModelChange"],["value","date"],["value","publisher"],["value","subid"],["value","reset"],[1,"material","fullscreen","expandable",2,"top","10px","height","500px",3,"columnMode","headerHeight","footerHeight","rowHeight","scrollbarV","rows","loadingIndicator"],["expandableTable",""],[3,"rowHeight","toggle"],["ngx-datatable-row-detail-template",""],[3,"width","resizeable","sortable","draggable","canAutoResize"],["ngx-datatable-cell-template",""],["name","date",3,"minWidth",4,"ngIf"],["name","subid",4,"ngIf"],["name","publisher",3,"minWidth",4,"ngIf"],["name","searches",4,"ngIf"],["name","biddedSearches",4,"ngIf"],["name","biddedResults",4,"ngIf"],["name","clicks",4,"ngIf"],["name","coverage",4,"ngIf"],["name","ctr",4,"ngIf"],["name","cpc",4,"ngIf"],["name","rn",4,"ngIf"],["name","tqScore",4,"ngIf"],["name","publisherNet"],["ngx-datatable-header-template",""],["name","profit"],["name","revenue"],["name","split",3,"minWidth"],[3,"chartData"],[3,"summaryMetricsData"],["class","table-responsive","style","padding-left: 36px;",4,"ngIf"],["style","padding-left: 35px",4,"ngIf"],[1,"table-responsive",2,"padding-left","36px"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[2,"padding-left","35px"],["href","javascript:void(0)","title","Expand/Collapse Row",3,"click"],["name","date",3,"minWidth"],["name","subid"],["name","publisher",3,"minWidth"],["name","searches"],["name","biddedSearches"],["name","biddedResults"],["name","clicks"],["name","coverage"],["name","ctr"],["name","cpc"],["name","rn"],["name","tqScore"]],template:function(e,t){1&e&&(h.Wb(0,"app-reporting-filtering",0),h.hc("onDatesPicked",(function(e){return t.updateReportingFiltering(e)})),h.Vb(),h.Mc(1,Vn,1,1,"app-reporting-revenue-chart",1),h.Mc(2,Cn,1,1,"app-summary-metrics",2),h.Wb(3,"div",3),h.Wb(4,"div",4),h.Wb(5,"mat-form-field",5),h.Wb(6,"mat-label"),h.Oc(7,"Choose an Group By"),h.Vb(),h.Wb(8,"mat-select",6),h.hc("selectionChange",(function(e){return t.groupHandle(e)}))("ngModelChange",(function(e){return t.groupType=e})),h.Wb(9,"mat-option",7),h.Oc(10,"Date"),h.Vb(),h.Wb(11,"mat-option",8),h.Oc(12,"Publisher"),h.Vb(),h.Wb(13,"mat-option",9),h.Oc(14,"Subid"),h.Vb(),h.Wb(15,"mat-option",10),h.Oc(16,"Reset"),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(17,"ngx-datatable",11,12),h.Wb(19,"ngx-datatable-row-detail",13),h.hc("toggle",(function(e){return t.onDetailToggle(e)})),h.Mc(20,_n,2,2,"ng-template",14),h.Vb(),h.Wb(21,"ngx-datatable-column",15),h.Mc(22,Tn,1,4,"ng-template",16),h.Vb(),h.Mc(23,jn,3,1,"ngx-datatable-column",17),h.Mc(24,zn,3,0,"ngx-datatable-column",18),h.Mc(25,Hn,3,1,"ngx-datatable-column",19),h.Mc(26,Qn,3,0,"ngx-datatable-column",20),h.Mc(27,$n,3,0,"ngx-datatable-column",21),h.Mc(28,Zn,3,0,"ngx-datatable-column",22),h.Mc(29,ti,3,0,"ngx-datatable-column",23),h.Mc(30,ni,3,0,"ngx-datatable-column",24),h.Mc(31,si,3,0,"ngx-datatable-column",25),h.Mc(32,li,3,0,"ngx-datatable-column",26),h.Mc(33,gi,3,0,"ngx-datatable-column",27),h.Mc(34,di,3,0,"ngx-datatable-column",28),h.Wb(35,"ngx-datatable-column",29),h.Mc(36,mi,1,0,"ng-template",30),h.Mc(37,vi,3,4,"ng-template",16),h.Vb(),h.Wb(38,"ngx-datatable-column",31),h.Mc(39,yi,1,0,"ng-template",30),h.Mc(40,Si,3,4,"ng-template",16),h.Vb(),h.Wb(41,"ngx-datatable-column",32),h.Mc(42,Di,1,0,"ng-template",30),h.Mc(43,wi,3,4,"ng-template",16),h.Vb(),h.Wb(44,"ngx-datatable-column",33),h.Mc(45,Fi,1,0,"ng-template",30),h.Mc(46,Wi,4,6,"ng-template",16),h.Vb(),h.Vb()),2&e&&(h.Db(1),h.rc("ngIf",t.chartData),h.Db(1),h.rc("ngIf",t.summaryMetrics),h.Db(6),h.rc("ngModel",t.groupType),h.Db(9),h.rc("columnMode","force")("headerHeight",50)("footerHeight",0)("rowHeight",50)("scrollbarV",!0)("rows",t.rows)("loadingIndicator",t.loadingIndicator),h.Db(2),h.rc("rowHeight","publisher"===t.groupType||"subid"===t.groupType?t.getDetailRowHeight:130),h.Db(2),h.rc("width",30)("resizeable",!1)("sortable",!1)("draggable",!1)("canAutoResize",!1),h.Db(2),h.rc("ngIf",!t.groupPublishFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag),h.Db(1),h.rc("ngIf",!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(10),h.rc("minWidth",35))},directives:[b.a,s.p,d.c,d.g,m.a,v.q,v.t,y.p,S.d,S.e,S.f,S.b,S.a,S.c,F,V,s.o],pipes:[s.f,s.g,s.w,s.d],styles:[""]}),Pi),Mi=i("m5p0"),Vi=["expandableTable"];function Ci(e,t){if(1&e&&h.Rb(0,"app-reporting-revenue-chart",28),2&e){var r=h.lc();h.rc("chartData",r.chartData)}}function Oi(e,t){if(1&e&&h.Rb(0,"app-summary-metrics",29),2&e){var r=h.lc();h.rc("summaryMetricsData",r.summaryMetrics)}}function ki(e,t){if(1&e&&(h.Wb(0,"tr"),h.Wb(1,"td"),h.Oc(2),h.mc(3,"date"),h.Vb(),h.Wb(4,"td"),h.Oc(5),h.mc(6,"number"),h.Vb(),h.Wb(7,"td"),h.Oc(8),h.mc(9,"number"),h.Vb(),h.Wb(10,"td"),h.Oc(11),h.mc(12,"percent"),h.Vb(),h.Wb(13,"td"),h.Oc(14),h.mc(15,"currency"),h.Vb(),h.Wb(16,"td"),h.Oc(17),h.mc(18,"currency"),h.Vb(),h.Wb(19,"td"),h.Oc(20),h.mc(21,"currency"),h.Vb(),h.Wb(22,"td"),h.Oc(23),h.mc(24,"currency"),h.Vb(),h.Vb()),2&e){var r=t.$implicit;h.Db(2),h.Pc(h.nc(3,8,r.date)),h.Db(3),h.Pc(h.nc(6,10,r.searches)),h.Db(3),h.Pc(h.nc(9,12,r.clicks)),h.Db(3),h.Pc(h.oc(12,14,r.ctr||0,"2.2-2")),h.Db(3),h.Pc(h.oc(15,17,r.cpc||0,"USD")),h.Db(3),h.Pc(h.oc(18,20,r.publisherNet,"USD")),h.Db(3),h.Pc(h.oc(21,23,r.profit,"USD")),h.Db(3),h.Pc(h.oc(24,26,r.revenue,"USD"))}}function Ri(e,t){if(1&e&&(h.Wb(0,"div",32),h.Wb(1,"table",33),h.Wb(2,"thead"),h.Wb(3,"tr"),h.Wb(4,"th"),h.Oc(5,"Date"),h.Vb(),h.Wb(6,"th"),h.Oc(7,"Searches"),h.Vb(),h.Wb(8,"th"),h.Oc(9,"Clicks"),h.Vb(),h.Wb(10,"th"),h.Oc(11,"CTR"),h.Vb(),h.Wb(12,"th"),h.Oc(13,"CPC"),h.Vb(),h.Wb(14,"th"),h.Oc(15,"Publisher Net"),h.Vb(),h.Wb(16,"th"),h.Oc(17,"Profit"),h.Vb(),h.Wb(18,"th"),h.Oc(19,"Revenue"),h.Vb(),h.Vb(),h.Vb(),h.Wb(20,"tbody"),h.Mc(21,ki,25,29,"tr",34),h.Vb(),h.Vb(),h.Vb()),2&e){var r=h.lc().row;h.Db(21),h.rc("ngForOf",r.subReportingForDate)}}function _i(e,t){1&e&&(h.Wb(0,"div",35),h.Wb(1,"div"),h.Wb(2,"strong"),h.Oc(3,"Address"),h.Vb(),h.Vb(),h.Wb(4,"div"),h.Oc(5,"Test"),h.Vb(),h.Vb())}function Ti(e,t){if(1&e&&(h.Mc(0,Ri,22,1,"div",30),h.Mc(1,_i,6,0,"div",31)),2&e){var r=h.lc();h.rc("ngIf","publisher"===r.groupType||"subid"===r.groupType),h.Db(1),h.rc("ngIf","publisher"!==r.groupType&&"subid"!==r.groupType)}}function Ii(e,t){if(1&e){var r=h.Xb();h.Wb(0,"a",36),h.hc("click",(function(){h.Dc(r);var e=t.row;return h.lc().toggleExpandRow(e)})),h.Vb()}if(2&e){var a=t.expanded;h.Ib("datatable-icon-right",!a)("datatable-icon-down",a)}}function Ni(e,t){1&e&&h.Oc(0," Date ")}function ji(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"date"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function Ai(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",37),h.Mc(1,Ni,1,0,"ng-template",24),h.Mc(2,ji,3,3,"ng-template",16),h.Vb()),2&e&&h.rc("minWidth",100)}function Ei(e,t){1&e&&h.Oc(0," Subid ")}function zi(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function Li(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",38),h.Mc(1,Ei,1,0,"ng-template",24),h.Mc(2,zi,2,1,"ng-template",16),h.Vb())}function Ui(e,t){1&e&&h.Oc(0," Publisher ")}function Hi(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function Yi(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",39),h.Mc(1,Ui,1,0,"ng-template",24),h.Mc(2,Hi,2,1,"ng-template",16),h.Vb()),2&e&&h.rc("minWidth",100)}function Bi(e,t){1&e&&h.Oc(0," Device ")}function Qi(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function Gi(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",40),h.Mc(1,Bi,1,0,"ng-template",24),h.Mc(2,Qi,2,1,"ng-template",16),h.Vb()),2&e&&h.rc("minWidth",100)}function qi(e,t){1&e&&h.Oc(0," Searches ")}function $i(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function Ki(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",41),h.Mc(1,qi,1,0,"ng-template",24),h.Mc(2,$i,3,3,"ng-template",16),h.Vb())}function Xi(e,t){1&e&&h.Oc(0," Clicks ")}function Zi(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function Ji(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",42),h.Mc(1,Xi,1,0,"ng-template",24),h.Mc(2,Zi,3,3,"ng-template",16),h.Vb())}function eo(e,t){1&e&&h.Oc(0," Split ")}function to(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.mc(3,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r)||h.oc(3,3,0,"1.0-0"))}}function ro(e,t){1&e&&h.Oc(0," Publisher Net ")}function ao(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}function no(e,t){1&e&&h.Oc(0," Profit ")}function io(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}function oo(e,t){1&e&&h.Oc(0," Revenue ")}function so(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}var uo,co,lo=((uo=function(){function t(e,a,n,i){r(this,t),this.cdr=e,this.userService=a,this.system1Service=n,this.tagService=i,this.range={startDate:"",endDate:""},this.loadingIndicator=!0,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.expanded={},this.tagList=[],this.groupType="",this.selectedCompany=this.getSelectedCompanyFromLocalStorage()}return n(t,[{key:"ngAfterViewInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCompanyTags(this.selectedCompany);case 2:return this.tagList=e.sent,this.rows=[],e.next=6,this.getAllSystem1Stats(this.selectedCompany,this.range.startDate,this.range.endDate);case 6:return this.rows=e.sent,e.next=9,this.getChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 9:return this.chartData=e.sent,e.next=12,this.getSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 12:this.summaryMetrics=e.sent,this.refreshTable();case 14:case"end":return e.stop()}}),e,this)})))}},{key:"updateReportingFiltering",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.range=e,t.next=3,this.getAllSystem1Stats(this.selectedCompany,this.range.startDate,this.range.endDate);case 3:return this.rows=t.sent,t.next=6,this.getChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 6:return this.chartData=t.sent,t.next=9,this.getSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 9:this.summaryMetrics=t.sent,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.groupType="",this.refreshTable();case 15:case"end":return t.stop()}}),t,this)})))}},{key:"getChartMetrics",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,s,u,c,h,p,g,f,b,d,m,v,y,S,D,w,F,W,P,x,M,V,C,O,k,R,_,T,I;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.system1Service.getAllSystem1Stats(t,r,a).toPromise();case 3:i=n.sent,o=e((this.loadingIndicator=!1,this.allChartStat=i.stats,this.allChartStat.map((function(e){e.publisher="No Publisher",e.tagname="No Tag"})),this.tagList));try{for(o.s();!(s=o.n()).done;)if("system1"==(u=s.value).tag.advertiser){c=e(u.tag.subids);try{for(c.s();!(h=c.n()).done;)"Contains"==(p=h.value).filterTag?this.allChartStat.map((function(e){e.subid.includes(p.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"StartsWith"==p.filterTag?this.allChartStat.map((function(e){e.subid.startsWith(p.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"EndsWith"==p.filterTag?this.allChartStat.map((function(e){e.subid.endsWith(p.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"ExactValue"==p.filterTag&&this.allChartStat.map((function(e){e.subid==p.subid&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)}))}catch(N){c.e(N)}finally{c.f()}}}catch(N){o.e(N)}finally{o.f()}for(d in g=l.chain(this.allChartStat).sortBy((function(e){return e.date})).sortBy((function(e){return e.publisher})).value(),f=function e(t,r){if(!r.length)return t;var a=r[0],n=r.slice(1);return l.mapValues(l.groupBy(t,a),(function(t){return e(t,n)}))}(g,["date","publisher"]),b=[],f)if(f.hasOwnProperty(d))for(m in f[d])v={date:f[d][m][0].date,publisher:f[d][m][0].publisher,revenue:l.reduce(f[d][m],(function(e,t){return e+t.revenue}),0)},b.push(v);for(y=[],S=0,D=b;S<D.length;S++)w=D[S],y.push(w.publisher);F=y.filter((function(e,t,r){return t===r.indexOf(e)})),this.allChartStat=this.allChartStat.slice().sort((function(e,t){return e.date-t.date})),W={},P=this.allChartStat.reduce((function(e,t){var r=t.date;return W[r]?W[r].searches+=parseInt(t.searches):(W[r]=Object.assign({},t),e.push(W[r])),e}),[]),x=[],M=[],V={},C=e(P);try{for(C.s();!(O=C.n()).done;)k=O.value,x.push(k.date),M.push(k.searches)}catch(N){C.e(N)}finally{C.f()}R=[],_=e(F);try{for(I=function(){var t,r=T.value,a=[],n=e(x);try{var i=function(){var e=t.value,n=b.filter((function(t){return t.date==e&&t.publisher==r}));a.push(n.length>0?n[0].revenue:0)};for(n.s();!(t=n.n()).done;)i()}catch(N){n.e(N)}finally{n.f()}var o={};o[r]=a,R.push(o)},_.s();!(T=_.n()).done;)I()}catch(N){_.e(N)}finally{_.f()}return n.abrupt("return",(V.revenuePerDay=R,V.datesOfRevenue=x,V.searchesPerDay=M,V.publisherName=F,V));case 22:return n.prev=22,n.t0=n.catch(0),n.abrupt("return",n.t0);case 25:case"end":return n.stop()}}),n,this,[[0,22]])})))}},{key:"getAllSystem1Stats",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,s,u,c,l,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.system1Service.getAllSystem1Stats(t,r,a).toPromise();case 2:i=n.sent,o=e((this.loadingIndicator=!1,this.allStats=i.stats,this.allStats.map((function(e){e.publisher="No Publisher",e.tagname="No Tag"})),this.tagList));try{for(o.s();!(s=o.n()).done;)if("system1"==(u=s.value).tag.advertiser){c=e(u.tag.subids);try{for(c.s();!(l=c.n()).done;)"Contains"==(h=l.value).filterTag?this.allStats.map((function(e){e.subid.includes(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"StartsWith"==h.filterTag?this.allStats.map((function(e){e.subid.startsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"EndsWith"==h.filterTag?this.allStats.map((function(e){e.subid.endsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"ExactValue"==h.filterTag&&this.allStats.map((function(e){e.subid==h.subid&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)}))}catch(p){c.e(p)}finally{c.f()}}}catch(p){o.e(p)}finally{o.f()}return n.abrupt("return",this.allStats);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"getSummaryMetrics",value:function(e,t,r){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var n,i,o,s,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.system1Service.getSummaryMetrics(e,t,r).toPromise();case 2:return n=a.sent,i={},o=0,s=0,u=0,a.abrupt("return",(0!=n.summary[0].lastMonthStat[0].profitPace&&(o=(n.summary[0].summaryMetrics[0].profitPace-n.summary[0].lastMonthStat[0].profitPace)/n.summary[0].lastMonthStat[0].profitPace*100),0!=n.summary[0].twoLastMonthStat[0].profitPace&&(s=(n.summary[0].lastMonthStat[0].profitPace-n.summary[0].twoLastMonthStat[0].profitPace)/n.summary[0].twoLastMonthStat[0].profitPace*100),0!=n.summary[0].prevSelectedStat[0].profitPace&&(u=(n.summary[0].selectedStat[0].profitPace-n.summary[0].prevSelectedStat[0].profitPace)/n.summary[0].prevSelectedStat[0].profitPace*100),n.summary[0].summaryMetrics[0].percentPace=o,n.summary[0].lastMonthStat[0].percentPace=s,n.summary[0].selectedStat[0].percentPace=u,n.summary[0].selectedStat[0].selectedStartDate=t,n.summary[0].selectedStat[0].selectedEndDate=r,i.summary=n.summary,i));case 5:case"end":return a.stop()}}),a,this)})))}},{key:"groupHandle",value:function(e){this.groupType=e.value,"date"==e.value?this.groupDate():"publisher"==e.value?this.groupProvider():"subid"==e.value?this.groupSubid():this.backGroup()}},{key:"backGroup",value:function(){this.rows=this.allStats,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.cdr.markForCheck()}},{key:"groupDate",value:function(){var t,r={},a=this.allStats.reduce((function(e,t){var a=t.date;return r[a]?(r[a].clicks+=t.clicks?parseFloat(t.clicks):0,r[a].searches+=t.searches?parseFloat(t.searches):0,r[a].ctr+=t.ctr?parseFloat(t.ctr):0,r[a].revenue+=t.revenue?parseFloat(t.revenue):0,r[a].split+=parseFloat(t.split),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.ctr=i.ctr/i.counter,i.cpc=i.revenue/i.clicks}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!1,this.groupDateShowFlag=!0,this.groupSubidShowFlag=!1,this.cdr.markForCheck()}},{key:"groupSubid",value:function(){var t,r={},a=this.allStats.reduce((function(e,t){var a=t.subid;return r[a]?(r[a].clicks+=t.clicks?parseFloat(t.clicks):0,r[a].searches+=t.searches?parseFloat(t.searches):0,r[a].ctr+=t.ctr?parseFloat(t.ctr):0,r[a].revenue+=t.revenue?parseFloat(t.revenue):0,r[a].split+=parseFloat(t.split),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.ctr=i.ctr/i.counter,i.cpc=i.revenue/i.clicks,i.subReportingForDate=this.groupDateForSubid(i),i.detailHeight=50*(i.subReportingForDate.length+1)}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!0,this.cdr.markForCheck()}},{key:"groupProvider",value:function(){var t,r={},a=this.allStats.reduce((function(e,t){var a=t.publisher;return r[a]?(r[a].clicks+=t.clicks?parseFloat(t.clicks):0,r[a].searches+=t.searches?parseFloat(t.searches):0,r[a].revenue+=t.revenue?parseFloat(t.revenue):0,r[a].split+=parseFloat(t.split),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.ctr=i.ctr/i.counter,i.cpc=i.revenue/i.clicks,i.subReportingForDate=this.groupDateForPublisher(i.publisher),i.detailHeight=50*(i.subReportingForDate.length+1)}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!0,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.cdr.markForCheck()}},{key:"getDetailRowHeight",value:function(e,t){var r;return e&&(r=e.detailHeight),r}},{key:"groupDateForPublisher",value:function(t){var r,a={},n=this.allStats.filter((function(e){return e.publisher===t})).reduce((function(e,t){var r=t.date;return a[r]?(a[r].clicks+=t.clicks?parseFloat(t.clicks):0,a[r].searches+=t.searches?parseFloat(t.searches):0,a[r].revenue+=t.revenue?parseFloat(t.revenue):0,a[r].split+=parseFloat(t.split),a[r].profit+=parseFloat(t.profit),a[r].publisherNet+=parseFloat(t.publisherNet),a[r].counter++):(a[r]=Object.assign({},t),a[r].counter=1,e.push(a[r])),e}),[]),i=e(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.split=o.split/o.counter,o.ctr=o.clicks/o.searches,o.cpc=o.revenue/o.clicks}}catch(s){i.e(s)}finally{i.f()}return n}},{key:"groupDateForSubid",value:function(t){var r,a={},n=this.allStats.filter((function(e){return e.subid===t.subid})).reduce((function(e,t){var r=t.date;return a[r]?(a[r].clicks+=t.clicks?parseFloat(t.clicks):0,a[r].searches+=t.searches?parseFloat(t.searches):0,a[r].revenue+=parseFloat(t.revenue),a[r].split+=parseFloat(t.split),a[r].profit+=parseFloat(t.profit),a[r].publisherNet+=parseFloat(t.publisherNet),a[r].counter++):(a[r]=Object.assign({},t),a[r].counter=1,e.push(a[r])),e}),[]),i=e(n);try{for(i.s();!(r=i.n()).done;)(t=r.value).split=t.split/t.counter,t.ctr=t.clicks/t.searches,t.cpc=t.revenue/t.clicks}catch(o){i.e(o)}finally{i.f()}return n}},{key:"toggleExpandRow",value:function(e){console.log("Toggled Expand Row!",e),this.table.rowDetail.toggleExpandRow(e)}},{key:"onDetailToggle",value:function(e){console.log("Detail Toggled",e)}},{key:"refreshTable",value:function(){this.cdr.detectChanges()}},{key:"getSelectedCompanyFromLocalStorage",value:function(){return this.userService.getSelectedCompanyFromLocalStorage()}},{key:"getCompanyTags",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.split("/")[1],t.prev=1,t.next=4,this.tagService.getCompanyTags(r).toPromise();case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))}}]),t}()).\u0275fac=function(e){return new(e||uo)(h.Qb(h.i),h.Qb(p.a),h.Qb(Mi.a),h.Qb(f.a))},uo.\u0275cmp=h.Kb({type:uo,selectors:[["app-system1"]],viewQuery:function(e,t){var r;1&e&&h.Tc(Vi,!0),2&e&&h.zc(r=h.ic())&&(t.table=r.first)},decls:41,vars:23,consts:[[3,"onDatesPicked"],[3,"chartData",4,"ngIf"],[3,"summaryMetricsData",4,"ngIf"],[1,"row"],[1,"col-xl-4"],["appearance","fill"],[3,"ngModel","selectionChange","ngModelChange"],["value","date"],["value","publisher"],["value","subid"],["value","reset"],[1,"material","fullscreen","expandable",2,"top","30px","height","500px",3,"columnMode","headerHeight","footerHeight","rowHeight","scrollbarV","rows","loadingIndicator"],["expandableTable",""],[3,"rowHeight","toggle"],["ngx-datatable-row-detail-template",""],[3,"width","resizeable","sortable","draggable","canAutoResize"],["ngx-datatable-cell-template",""],["name","date",3,"minWidth",4,"ngIf"],["name","subid",4,"ngIf"],["name","publisher",3,"minWidth",4,"ngIf"],["name","device",3,"minWidth",4,"ngIf"],["name","Searches",4,"ngIf"],["name","clicks",4,"ngIf"],["name","split",3,"minWidth"],["ngx-datatable-header-template",""],["name","publisherNet"],["name","profit"],["name","revenue"],[3,"chartData"],[3,"summaryMetricsData"],["class","table-responsive","style","padding-left: 36px;",4,"ngIf"],["style","padding-left: 35px",4,"ngIf"],[1,"table-responsive",2,"padding-left","36px"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[2,"padding-left","35px"],["href","javascript:void(0)","title","Expand/Collapse Row",3,"click"],["name","date",3,"minWidth"],["name","subid"],["name","publisher",3,"minWidth"],["name","device",3,"minWidth"],["name","Searches"],["name","clicks"]],template:function(e,t){1&e&&(h.Wb(0,"app-reporting-filtering",0),h.hc("onDatesPicked",(function(e){return t.updateReportingFiltering(e)})),h.Vb(),h.Mc(1,Ci,1,1,"app-reporting-revenue-chart",1),h.Mc(2,Oi,1,1,"app-summary-metrics",2),h.Wb(3,"div",3),h.Wb(4,"div",4),h.Wb(5,"mat-form-field",5),h.Wb(6,"mat-label"),h.Oc(7,"Choose an Group By"),h.Vb(),h.Wb(8,"mat-select",6),h.hc("selectionChange",(function(e){return t.groupHandle(e)}))("ngModelChange",(function(e){return t.groupType=e})),h.Wb(9,"mat-option",7),h.Oc(10,"Date"),h.Vb(),h.Wb(11,"mat-option",8),h.Oc(12,"Publisher"),h.Vb(),h.Wb(13,"mat-option",9),h.Oc(14,"Subid"),h.Vb(),h.Wb(15,"mat-option",10),h.Oc(16,"Reset"),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(17,"ngx-datatable",11,12),h.Wb(19,"ngx-datatable-row-detail",13),h.hc("toggle",(function(e){return t.onDetailToggle(e)})),h.Mc(20,Ti,2,2,"ng-template",14),h.Vb(),h.Wb(21,"ngx-datatable-column",15),h.Mc(22,Ii,1,4,"ng-template",16),h.Vb(),h.Mc(23,Ai,3,1,"ngx-datatable-column",17),h.Mc(24,Li,3,0,"ngx-datatable-column",18),h.Mc(25,Yi,3,1,"ngx-datatable-column",19),h.Mc(26,Gi,3,1,"ngx-datatable-column",20),h.Mc(27,Ki,3,0,"ngx-datatable-column",21),h.Mc(28,Ji,3,0,"ngx-datatable-column",22),h.Wb(29,"ngx-datatable-column",23),h.Mc(30,eo,1,0,"ng-template",24),h.Mc(31,to,4,6,"ng-template",16),h.Vb(),h.Wb(32,"ngx-datatable-column",25),h.Mc(33,ro,1,0,"ng-template",24),h.Mc(34,ao,3,4,"ng-template",16),h.Vb(),h.Wb(35,"ngx-datatable-column",26),h.Mc(36,no,1,0,"ng-template",24),h.Mc(37,io,3,4,"ng-template",16),h.Vb(),h.Wb(38,"ngx-datatable-column",27),h.Mc(39,oo,1,0,"ng-template",24),h.Mc(40,so,3,4,"ng-template",16),h.Vb(),h.Vb()),2&e&&(h.Db(1),h.rc("ngIf",t.chartData),h.Db(1),h.rc("ngIf",t.summaryMetrics),h.Db(6),h.rc("ngModel",t.groupType),h.Db(9),h.rc("columnMode","force")("headerHeight",50)("footerHeight",0)("rowHeight",50)("scrollbarV",!0)("rows",t.rows)("loadingIndicator",t.loadingIndicator),h.Db(2),h.rc("rowHeight","publisher"===t.groupType||"subid"===t.groupType?t.getDetailRowHeight:130),h.Db(2),h.rc("width",30)("resizeable",!1)("sortable",!1)("draggable",!1)("canAutoResize",!1),h.Db(2),h.rc("ngIf",!t.groupPublishFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag),h.Db(1),h.rc("ngIf",!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("minWidth",35))},directives:[b.a,s.p,d.c,d.g,m.a,v.q,v.t,y.p,S.d,S.e,S.f,S.b,S.a,S.c,F,V,s.o],pipes:[s.f,s.g,s.w,s.d],styles:[""]}),uo),ho=i("AytR"),po=i("tk/3"),go=ho.a.apiUrl+"/stats/admin/manual-update",fo=((co=function(){function e(t){r(this,e),this.http=t}return n(e,[{key:"updateManualStats",value:function(e){var t=e.company,r=e.reportType,a=e.startDate,n=e.endDate,i={company:t,reportType:r,startDate:w(a).format("YYYY-MM-DD"),endDate:w(n).format("YYYY-MM-DD")};return this.http.put(go+"/stat-update",i)}},{key:"updateManualSplit",value:function(e){var t=e.company,r=e.reportType,a=e.tag,n=e.startDate,i=e.endDate;return this.http.put(go+"/split-update",{company:t,reportType:r,tag:a,startDate:n,endDate:i})}}]),e}()).\u0275fac=function(e){return new(e||co)(h.ec(po.c))},co.\u0275prov=h.Mb({token:co,factory:co.\u0275fac,providedIn:"root"}),co),bo=i("9xcm"),mo=i("+BVi"),vo=i("soTd"),yo=i("iadO"),So=i("bTqV");function Do(e,t){if(1&e&&(h.Wb(0,"mat-option",18),h.Oc(1),h.Vb()),2&e){var r=t.$implicit;h.rc("value",r.value),h.Db(1),h.Qc(" ",r.viewValue," ")}}function wo(e,t){1&e&&(h.Wb(0,"mat-error"),h.Oc(1,"Invalid start date "),h.Vb())}function Fo(e,t){1&e&&(h.Wb(0,"mat-error"),h.Oc(1,"Invalid end date"),h.Vb())}function Wo(e,t){1&e&&(h.Wb(0,"mat-error"),h.Oc(1,"Start Date Required"),h.Vb())}function Po(e,t){1&e&&(h.Wb(0,"mat-error"),h.Oc(1,"End Date Required"),h.Vb())}function xo(e,t){if(1&e&&(h.Wb(0,"mat-option",18),h.Oc(1),h.Vb()),2&e){var r=t.$implicit;h.rc("value",r.value),h.Db(1),h.Qc(" ",r.viewValue," ")}}var Mo,Vo=((Mo=function(){function e(t,a,n,i,o,s){r(this,e),this.manualUpdateService=t,this.fb=a,this.companyService=n,this.authService=i,this.userService=o,this.notification=s,this.reportUpdateTitle="Report Stat Update",this.reportTypeData=[],this.message=null,this.currentUser=this.authService.currentUserValue,this.companySelected=this.getSelectedCompanyLocalStorage()}return n(e,[{key:"ngOnInit",value:function(){this.getReportingProviderList(),this.manaulUpFG=this.fb.group({reportType:new v.g("",v.z.required),preSelectValue:new v.g("",v.z.required),startDate:new v.g("",v.z.required),endDate:new v.g("",v.z.required)}),this.preSetDateRanges=this.getDateRanges(),this.range=new v.j({startDate:new v.g("",v.z.required),endDate:new v.g("",v.z.required)}),this.selectedRange={startDate:"",endDate:""},this.preSelectValue="last7days",this.preSelectDates=this.getPreSetDateRange(this.preSelectValue),this.updateDatePickerRange(this.preSelectDates.startDate,this.preSelectDates.endDate)}},{key:"getReportingProviderList",value:function(){var e=this;this.companySelected&&this.companyService.getOneCompany(this.companySelected.split("/")[1]).subscribe((function(t){t.reportingProviders.map((function(t){e.reportTypeData.push({value:t.reportingProvider,viewValue:t.reportingProvider})}))}))}},{key:"getSelectedCompanyLocalStorage",value:function(){return this.userService.getSelectedCompanyFromLocalStorage()}},{key:"onReportSubmit",value:function(){var e=this;if(this.manaulUpFG.valid){this.manaulUpFG.addControl("company",new v.g("",v.z.required)),this.manaulUpFG.patchValue({company:this.companySelected});var t=this.manaulUpFG.value.reportType;this.manualUpdateService.updateManualStats(this.manaulUpFG.value).subscribe((function(r){e.isObjectEmpty(r)?e.notification.showWarning(t+" data not existed!",""):"ok"==r.stats?e.notification.showSuccess(t+" data stats successfully updated!",""):"warn"==r.stats&&e.notification.showWarning(t+" data not existed!","")}))}}},{key:"isObjectEmpty",value:function(e){return 0===Object.keys(e).length}},{key:"getDateRanges",value:function(){return[{value:"today",viewValue:"Today"},{value:"yesterday",viewValue:"Yesterday"},{value:"last7days",viewValue:"Last 7 Days"},{value:"last30days",viewValue:"Last 30 Days"},{value:"monthToDate",viewValue:"Month to Date"},{value:"lastMonth",viewValue:"Last Month"},{value:"custom",viewValue:"Custom"}]}},{key:"changeDatePicker",value:function(){this.range.valid&&(this.selectedRange.startDate=this.range.value.startDate,this.selectedRange.endDate=this.range.value.endDate,this.manaulUpFG.patchValue({startDate:w(this.range.value.startDate,"MM-DD-YYYY").toDate(),endDate:w(this.range.value.endDate,"MM-DD-YYYY").toDate()}),this.preSelectValue="custom")}},{key:"onPreSetRangeSelectChange",value:function(e){"custom"!==e.value&&(this.preSelectValue=e.value,this.preSelectDates=this.getPreSetDateRange(this.preSelectValue),this.updateDatePickerRange(this.preSelectDates.startDate,this.preSelectDates.endDate))}},{key:"updateDatePickerRange",value:function(e,t){this.manaulUpFG.patchValue({startDate:w(e,"MM-DD-YYYY").toDate(),endDate:w(t,"MM-DD-YYYY").toDate()}),this.range.patchValue({startDate:w(e,"MM-DD-YYYY").toDate(),endDate:w(t,"MM-DD-YYYY").toDate()})}},{key:"getPreSetDateRange",value:function(e){switch(e){case"today":return{startDate:w().utc().startOf("day").format("MM-DD-YYYY"),endDate:w().utc().endOf("day").format("MM-DD-YYYY")};case"yesterday":return{startDate:w().subtract(1,"days").utc().startOf("day").format("MM-DD-YYYY"),endDate:w().subtract(1,"days").utc().endOf("day").format("MM-DD-YYYY")};case"last7days":return{startDate:w().subtract(7,"days").utc().startOf("day").format("MM-DD-YYYY"),endDate:w().utc().endOf("day").format("MM-DD-YYYY")};case"last30days":return{startDate:w().subtract(30,"days").utc().startOf("day").format("MM-DD-YYYY"),endDate:w().utc().endOf("day").format("MM-DD-YYYY")};case"monthToDate":return{startDate:w().startOf("month").utc().startOf("day").format("MM-DD-YYYY"),endDate:w().utc().endOf("day").format("MM-DD-YYYY")};case"lastMonth":return{startDate:w().subtract(1,"months").startOf("month").utc().startOf("day").format("MM-DD-YYYY"),endDate:w().utc().subtract(1,"months").endOf("month").format("MM-DD-YYYY")}}}},{key:"handleReport",value:function(e){if(e.value.length>0){var t=e.value.toLowerCase().replace(/\b[a-z]/g,(function(e){return e.toUpperCase()}));this.reportUpdateTitle=t+" Stat Update"}}}]),e}()).\u0275fac=function(e){return new(e||Mo)(h.Qb(fo),h.Qb(v.f),h.Qb(bo.a),h.Qb(mo.a),h.Qb(p.a),h.Qb(vo.a))},Mo.\u0275cmp=h.Kb({type:Mo,selectors:[["app-manual-update"]],decls:36,vars:12,consts:[["id","manaulUpForm",1,"example-container",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xl-6"],[1,"card","card-custom","example","example-compact","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"card-body"],["matNativeControl","","placeholder","Select Report","formControlName","reportType",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"rangePicker","formGroup","dateChange"],["matStartDate","","formControlName","startDate","placeholder","Start date","required",""],["matEndDate","","formControlName","endDate","placeholder","End date","required","",3,"dateChange"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],["formControlName","preSelectValue",3,"ngModel","ngModelChange","selectionChange"],["mat-raised-button","","color","primary","type","submit"],[3,"value"]],template:function(e,t){if(1&e&&(h.Wb(0,"form",0),h.hc("ngSubmit",(function(){return t.onReportSubmit()})),h.Wb(1,"div",1),h.Wb(2,"div",2),h.Wb(3,"div",3),h.Wb(4,"div",4),h.Wb(5,"div",5),h.Wb(6,"h3",6),h.Oc(7),h.Vb(),h.Vb(),h.Vb(),h.Wb(8,"div",7),h.Wb(9,"mat-form-field"),h.Wb(10,"mat-label"),h.Oc(11,"Report Type"),h.Vb(),h.Wb(12,"mat-select",8),h.hc("selectionChange",(function(e){return t.handleReport(e)})),h.Mc(13,Do,2,2,"mat-option",9),h.Vb(),h.Vb(),h.Wb(14,"mat-form-field"),h.Wb(15,"mat-label"),h.Oc(16,"Enter a custom date range"),h.Vb(),h.Wb(17,"mat-date-range-input",10),h.hc("dateChange",(function(){return t.changeDatePicker()})),h.Rb(18,"input",11),h.Wb(19,"input",12),h.hc("dateChange",(function(){return t.changeDatePicker()})),h.Vb(),h.Vb(),h.Rb(20,"mat-datepicker-toggle",13),h.Rb(21,"mat-date-range-picker",null,14),h.Mc(23,wo,2,0,"mat-error",15),h.Mc(24,Fo,2,0,"mat-error",15),h.Mc(25,Wo,2,0,"mat-error",15),h.Mc(26,Po,2,0,"mat-error",15),h.Vb(),h.Wb(27,"mat-form-field"),h.Wb(28,"mat-label"),h.Oc(29,"Preset Date Range"),h.Vb(),h.Wb(30,"mat-select",16),h.hc("ngModelChange",(function(e){return t.preSelectValue=e}))("selectionChange",(function(e){return t.onPreSetRangeSelectChange(e)})),h.Mc(31,xo,2,2,"mat-option",9),h.Vb(),h.Vb(),h.Wb(32,"div",1),h.Wb(33,"div",2),h.Wb(34,"button",17),h.Oc(35,"Update Stats"),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb()),2&e){var r=h.Ac(22);h.rc("formGroup",t.manaulUpFG),h.Db(7),h.Pc(t.reportUpdateTitle),h.Db(6),h.rc("ngForOf",t.reportTypeData),h.Db(4),h.rc("rangePicker",r)("formGroup",t.range),h.Db(3),h.rc("for",r),h.Db(3),h.rc("ngIf",t.manaulUpFG.controls.startDate.hasError("matStartDateInvalid")),h.Db(1),h.rc("ngIf",t.manaulUpFG.controls.endDate.hasError("matEndDateInvalid")),h.Db(1),h.rc("ngIf",null==t.manaulUpFG.controls.startDate.errors?null:t.manaulUpFG.controls.startDate.errors.required),h.Db(1),h.rc("ngIf",null==t.manaulUpFG.controls.endDate.errors?null:t.manaulUpFG.controls.endDate.errors.required),h.Db(4),h.rc("ngModel",t.preSelectValue),h.Db(1),h.rc("ngForOf",t.preSetDateRanges)}},directives:[v.B,v.r,v.k,d.c,d.g,m.a,v.q,v.i,s.o,yo.a,yo.h,v.d,v.x,yo.g,yo.f,d.j,yo.b,s.p,So.b,y.p,d.b],styles:[""]}),Mo);function Co(e,t){if(1&e&&(h.Wb(0,"mat-option",19),h.Oc(1),h.Vb()),2&e){var r=t.$implicit;h.rc("value",r.value),h.Db(1),h.Qc(" ",r.viewValue," ")}}function Oo(e,t){if(1&e&&(h.Wb(0,"mat-option",19),h.Oc(1),h.Vb()),2&e){var r=t.$implicit;h.rc("value",r.value),h.Db(1),h.Qc(" ",r.viewValue," ")}}function ko(e,t){1&e&&(h.Wb(0,"mat-error"),h.Oc(1,"Invalid start date "),h.Vb())}function Ro(e,t){1&e&&(h.Wb(0,"mat-error"),h.Oc(1,"Invalid end date"),h.Vb())}function _o(e,t){1&e&&(h.Wb(0,"mat-error"),h.Oc(1,"Start Date Required"),h.Vb())}function To(e,t){1&e&&(h.Wb(0,"mat-error"),h.Oc(1,"End Date Required"),h.Vb())}function Io(e,t){if(1&e&&(h.Wb(0,"mat-option",19),h.Oc(1),h.Vb()),2&e){var r=t.$implicit;h.rc("value",r.value),h.Db(1),h.Qc(" ",r.viewValue," ")}}var No,jo=((No=function(){function e(t,a,n,i,o,s,u,c){r(this,e),this.manualUpdateService=t,this.fb=a,this.companyService=n,this.authService=i,this.userService=o,this.notification=s,this.tagService=u,this.cdr=c,this.reportProviderData=[],this.tagData=[],this.selectedTagData=[],this.reportUpdateTitle="Report Split Update",this.selectedTagName="",this.currentUser=this.authService.currentUserValue,this.companySelected=this.getSelectedCompanyLocalStorage()}return n(e,[{key:"ngOnInit",value:function(){this.getReportingProviderList(),this.getAllTags(),this.manaulUpFG=this.fb.group({reportType:new v.g("",v.z.required),tag:new v.g("",v.z.required),preSelectValue:new v.g("",v.z.required),startDate:new v.g("",v.z.required),endDate:new v.g("",v.z.required)}),this.preSetDateRanges=this.getDateRanges(),this.range=new v.j({startDate:new v.g("",v.z.required),endDate:new v.g("",v.z.required)}),this.selectedRange={startDate:"",endDate:""},this.preSelectValue="last7days",this.preSelectDates=this.getPreSetDateRange(this.preSelectValue),this.updateDatePickerRange(this.preSelectDates.startDate,this.preSelectDates.endDate)}},{key:"getSelectedCompanyLocalStorage",value:function(){return this.userService.getSelectedCompanyFromLocalStorage()}},{key:"getAllTags",value:function(){var e=this;this.tagService.getAllTags().subscribe((function(t){var r=[];e.companySelected&&(r=t.filter((function(t){return t.company[0]._id==e.companySelected}))),r.map((function(t){e.tagData.push({value:t._id,viewValue:t.name,advertiser:t.advertiser})})),e.selectedTagData=e.tagData,e.cdr.detectChanges()}))}},{key:"handleTag",value:function(e){this.selectedTagName="updateAll"===e.value?"All":this.tagData.filter((function(t){return t.value==e.value}))[0].viewValue}},{key:"getReportingProviderList",value:function(){var e=this;this.companySelected&&this.companyService.getOneCompany(this.companySelected.split("/")[1]).subscribe((function(t){t.reportingProviders.map((function(t){e.reportProviderData.push({value:t.reportingProvider,viewValue:t.reportingProvider})}))}))}},{key:"updateDatePickerRange",value:function(e,t){this.manaulUpFG.patchValue({startDate:w(e,"MM-DD-YYYY").toDate(),endDate:w(t,"MM-DD-YYYY").toDate()}),this.range.patchValue({startDate:w(e,"MM-DD-YYYY").toDate(),endDate:w(t,"MM-DD-YYYY").toDate()})}},{key:"getDateRanges",value:function(){return[{value:"today",viewValue:"Today"},{value:"yesterday",viewValue:"Yesterday"},{value:"last7days",viewValue:"Last 7 Days"},{value:"last30days",viewValue:"Last 30 Days"},{value:"monthToDate",viewValue:"Month to Date"},{value:"lastMonth",viewValue:"Last Month"},{value:"custom",viewValue:"Custom"}]}},{key:"onPreSetRangeSelectChange",value:function(e){"custom"!==e.value&&(this.preSelectValue=e.value,this.preSelectDates=this.getPreSetDateRange(this.preSelectValue),this.updateDatePickerRange(this.preSelectDates.startDate,this.preSelectDates.endDate))}},{key:"getPreSetDateRange",value:function(e){switch(e){case"today":return{startDate:w().utc().startOf("day").format("MM-DD-YYYY"),endDate:w().utc().endOf("day").format("MM-DD-YYYY")};case"yesterday":return{startDate:w().subtract(1,"days").utc().startOf("day").format("MM-DD-YYYY"),endDate:w().subtract(1,"days").utc().endOf("day").format("MM-DD-YYYY")};case"last7days":return{startDate:w().subtract(7,"days").utc().startOf("day").format("MM-DD-YYYY"),endDate:w().utc().endOf("day").format("MM-DD-YYYY")};case"last30days":return{startDate:w().subtract(30,"days").utc().startOf("day").format("MM-DD-YYYY"),endDate:w().utc().endOf("day").format("MM-DD-YYYY")};case"monthToDate":return{startDate:w().startOf("month").utc().startOf("day").format("MM-DD-YYYY"),endDate:w().utc().endOf("day").format("MM-DD-YYYY")};case"lastMonth":return{startDate:w().subtract(1,"months").startOf("month").utc().startOf("day").format("MM-DD-YYYY"),endDate:w().utc().subtract(1,"months").endOf("month").format("MM-DD-YYYY")}}}},{key:"handleReport",value:function(e){if(e.value.length>0){var t=e.value.toLowerCase().replace(/\b[a-z]/g,(function(e){return e.toUpperCase()}));this.reportUpdateTitle=t+" Split Update",this.selectedTagData=[];var r=[];r.push({value:"updateAll",viewValue:"update all",advertiser:e.value}),console.log(this.selectedTagData);var a=this.tagData.filter((function(t){return t.advertiser==e.value}));this.selectedTagData=r.concat(a),console.log(this.selectedTagData),this.cdr.detectChanges()}}},{key:"onReportSubmit",value:function(){var e=this;this.manaulUpFG.valid&&(this.manaulUpFG.addControl("company",new v.g("",v.z.required)),this.manaulUpFG.patchValue({company:this.companySelected}),this.manualUpdateService.updateManualSplit(this.manaulUpFG.value).subscribe((function(t){e.isObjectEmpty(t)?e.notification.showWarning(e.selectedTagName+" data not existed!",""):e.notification.showSuccess(e.selectedTagName+" data splits  successfully updated!","")})))}},{key:"isObjectEmpty",value:function(e){return 0===Object.keys(e).length}},{key:"changeDatePicker",value:function(){this.range.valid&&(this.selectedRange.startDate=this.range.value.startDate,this.selectedRange.endDate=this.range.value.endDate,this.manaulUpFG.patchValue({startDate:w(this.range.value.startDate,"MM-DD-YYYY").toDate(),endDate:w(this.range.value.endDate,"MM-DD-YYYY").toDate()}),this.preSelectValue="custom")}}]),e}()).\u0275fac=function(e){return new(e||No)(h.Qb(fo),h.Qb(v.f),h.Qb(bo.a),h.Qb(mo.a),h.Qb(p.a),h.Qb(vo.a),h.Qb(f.a),h.Qb(h.i))},No.\u0275cmp=h.Kb({type:No,selectors:[["app-manual-split-update"]],decls:41,vars:13,consts:[["id","manaulUpForm",1,"example-container",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xl-6"],[1,"card","card-custom","example","example-compact","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"card-body"],["matNativeControl","","placeholder","Select Provider","formControlName","reportType",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matNativeControl","","placeholder","Select Report","formControlName","tag",3,"selectionChange"],[3,"rangePicker","formGroup","dateChange"],["matStartDate","","formControlName","startDate","placeholder","Start date","required",""],["matEndDate","","formControlName","endDate","placeholder","End date","required","",3,"dateChange"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],["formControlName","preSelectValue",3,"ngModel","ngModelChange","selectionChange"],["mat-raised-button","","color","primary","type","submit"],[3,"value"]],template:function(e,t){if(1&e&&(h.Wb(0,"form",0),h.hc("ngSubmit",(function(){return t.onReportSubmit()})),h.Wb(1,"div",1),h.Wb(2,"div",2),h.Wb(3,"div",3),h.Wb(4,"div",4),h.Wb(5,"div",5),h.Wb(6,"h3",6),h.Oc(7),h.Vb(),h.Vb(),h.Vb(),h.Wb(8,"div",7),h.Wb(9,"mat-form-field"),h.Wb(10,"mat-label"),h.Oc(11,"Provider"),h.Vb(),h.Wb(12,"mat-select",8),h.hc("selectionChange",(function(e){return t.handleReport(e)})),h.Mc(13,Co,2,2,"mat-option",9),h.Vb(),h.Vb(),h.Wb(14,"mat-form-field"),h.Wb(15,"mat-label"),h.Oc(16,"Tag"),h.Vb(),h.Wb(17,"mat-select",10),h.hc("selectionChange",(function(e){return t.handleTag(e)})),h.Mc(18,Oo,2,2,"mat-option",9),h.Vb(),h.Vb(),h.Wb(19,"mat-form-field"),h.Wb(20,"mat-label"),h.Oc(21,"Enter a custom date range"),h.Vb(),h.Wb(22,"mat-date-range-input",11),h.hc("dateChange",(function(){return t.changeDatePicker()})),h.Rb(23,"input",12),h.Wb(24,"input",13),h.hc("dateChange",(function(){return t.changeDatePicker()})),h.Vb(),h.Vb(),h.Rb(25,"mat-datepicker-toggle",14),h.Rb(26,"mat-date-range-picker",null,15),h.Mc(28,ko,2,0,"mat-error",16),h.Mc(29,Ro,2,0,"mat-error",16),h.Mc(30,_o,2,0,"mat-error",16),h.Mc(31,To,2,0,"mat-error",16),h.Vb(),h.Wb(32,"mat-form-field"),h.Wb(33,"mat-label"),h.Oc(34,"Preset Date Range"),h.Vb(),h.Wb(35,"mat-select",17),h.hc("ngModelChange",(function(e){return t.preSelectValue=e}))("selectionChange",(function(e){return t.onPreSetRangeSelectChange(e)})),h.Mc(36,Io,2,2,"mat-option",9),h.Vb(),h.Vb(),h.Wb(37,"div",1),h.Wb(38,"div",2),h.Wb(39,"button",18),h.Oc(40,"Update Splits"),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb()),2&e){var r=h.Ac(27);h.rc("formGroup",t.manaulUpFG),h.Db(7),h.Pc(t.reportUpdateTitle),h.Db(6),h.rc("ngForOf",t.reportProviderData),h.Db(5),h.rc("ngForOf",t.selectedTagData),h.Db(4),h.rc("rangePicker",r)("formGroup",t.range),h.Db(3),h.rc("for",r),h.Db(3),h.rc("ngIf",t.manaulUpFG.controls.startDate.hasError("matStartDateInvalid")),h.Db(1),h.rc("ngIf",t.manaulUpFG.controls.endDate.hasError("matEndDateInvalid")),h.Db(1),h.rc("ngIf",null==t.manaulUpFG.controls.startDate.errors?null:t.manaulUpFG.controls.startDate.errors.required),h.Db(1),h.rc("ngIf",null==t.manaulUpFG.controls.endDate.errors?null:t.manaulUpFG.controls.endDate.errors.required),h.Db(4),h.rc("ngModel",t.preSelectValue),h.Db(1),h.rc("ngForOf",t.preSetDateRanges)}},directives:[v.B,v.r,v.k,d.c,d.g,m.a,v.q,v.i,s.o,yo.a,yo.h,v.d,v.x,yo.g,yo.f,d.j,yo.b,s.p,So.b,y.p,d.b],styles:[""]}),No),Ao=i("mPAa"),Eo=["expandableTable"];function zo(e,t){if(1&e&&h.Rb(0,"app-reporting-revenue-chart",27),2&e){var r=h.lc();h.rc("chartData",r.chartData)}}function Lo(e,t){if(1&e&&h.Rb(0,"app-summary-metrics",28),2&e){var r=h.lc();h.rc("summaryMetricsData",r.summaryMetrics)}}function Uo(e,t){if(1&e&&(h.Wb(0,"tr"),h.Wb(1,"td"),h.Oc(2),h.mc(3,"date"),h.Vb(),h.Wb(4,"td"),h.Oc(5),h.mc(6,"number"),h.Vb(),h.Wb(7,"td"),h.Oc(8),h.mc(9,"number"),h.Vb(),h.Wb(10,"td"),h.Oc(11),h.mc(12,"percent"),h.mc(13,"percent"),h.Vb(),h.Wb(14,"td"),h.Oc(15),h.mc(16,"currency"),h.mc(17,"currency"),h.Vb(),h.Wb(18,"td"),h.Oc(19),h.mc(20,"currency"),h.Vb(),h.Wb(21,"td"),h.Oc(22),h.mc(23,"currency"),h.Vb(),h.Wb(24,"td"),h.Oc(25),h.mc(26,"currency"),h.Vb(),h.Vb()),2&e){var r=t.$implicit;h.Db(2),h.Pc(h.nc(3,8,r.date)),h.Db(3),h.Pc(h.nc(6,10,r.searches)),h.Db(3),h.Pc(h.nc(9,12,r.clicks)),h.Db(3),h.Pc(h.oc(12,14,r.ctr,"2.2-2")||h.oc(13,17,0,"2.2-2")),h.Db(4),h.Pc(h.oc(16,20,r.cpc,"USD")||h.oc(17,23,0,"USD")),h.Db(4),h.Pc(h.oc(20,26,r.publisherNet,"USD")),h.Db(3),h.Pc(h.oc(23,29,r.profit,"USD")),h.Db(3),h.Pc(h.oc(26,32,r.revenue,"USD"))}}function Ho(e,t){if(1&e&&(h.Wb(0,"div",31),h.Wb(1,"table",32),h.Wb(2,"thead"),h.Wb(3,"tr"),h.Wb(4,"th"),h.Oc(5,"Date"),h.Vb(),h.Wb(6,"th"),h.Oc(7,"Searches"),h.Vb(),h.Wb(8,"th"),h.Oc(9,"Clicks"),h.Vb(),h.Wb(10,"th"),h.Oc(11,"CTR"),h.Vb(),h.Wb(12,"th"),h.Oc(13,"CPC"),h.Vb(),h.Wb(14,"th"),h.Oc(15,"Publisher Net"),h.Vb(),h.Wb(16,"th"),h.Oc(17,"Profit"),h.Vb(),h.Wb(18,"th"),h.Oc(19,"Revenue"),h.Vb(),h.Vb(),h.Vb(),h.Wb(20,"tbody"),h.Mc(21,Uo,27,35,"tr",33),h.Vb(),h.Vb(),h.Vb()),2&e){var r=h.lc().row;h.Db(21),h.rc("ngForOf",r.subReportingForDate)}}function Yo(e,t){1&e&&(h.Wb(0,"div",34),h.Wb(1,"div"),h.Wb(2,"strong"),h.Oc(3,"Address"),h.Vb(),h.Vb(),h.Wb(4,"div"),h.Oc(5,"Test"),h.Vb(),h.Vb())}function Bo(e,t){if(1&e&&(h.Mc(0,Ho,22,1,"div",29),h.Mc(1,Yo,6,0,"div",30)),2&e){var r=h.lc();h.rc("ngIf","publisher"===r.groupType||"subid"===r.groupType),h.Db(1),h.rc("ngIf","publisher"!==r.groupType&&"subid"!==r.groupType)}}function Qo(e,t){if(1&e){var r=h.Xb();h.Wb(0,"a",35),h.hc("click",(function(){h.Dc(r);var e=t.row;return h.lc().toggleExpandRow(e)})),h.Vb()}if(2&e){var a=t.expanded;h.Ib("datatable-icon-right",!a)("datatable-icon-down",a)}}function Go(e,t){1&e&&h.Oc(0," Date ")}function qo(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"date"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function $o(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",36),h.Mc(1,Go,1,0,"ng-template",23),h.Mc(2,qo,3,3,"ng-template",16),h.Vb()),2&e&&h.rc("minWidth",100)}function Ko(e,t){1&e&&h.Oc(0," Subid ")}function Xo(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function Zo(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",37),h.Mc(1,Ko,1,0,"ng-template",23),h.Mc(2,Xo,2,1,"ng-template",16),h.Vb())}function Jo(e,t){1&e&&h.Oc(0," Publisher ")}function es(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function ts(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",38),h.Mc(1,Jo,1,0,"ng-template",23),h.Mc(2,es,2,1,"ng-template",16),h.Vb()),2&e&&h.rc("minWidth",100)}function rs(e,t){1&e&&h.Oc(0," Searches ")}function as(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function ns(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",39),h.Mc(1,rs,1,0,"ng-template",23),h.Mc(2,as,3,3,"ng-template",16),h.Vb())}function is(e,t){1&e&&h.Oc(0," Clicks ")}function os(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function ss(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",40),h.Mc(1,is,1,0,"ng-template",23),h.Mc(2,os,3,3,"ng-template",16),h.Vb())}function us(e,t){1&e&&h.Oc(0," Split ")}function cs(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.mc(3,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r)||h.oc(3,3,0,"1.0-0"))}}function ls(e,t){1&e&&h.Oc(0," Publisher Net ")}function hs(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}function ps(e,t){1&e&&h.Oc(0," Profit ")}function gs(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}function fs(e,t){1&e&&h.Oc(0," Revenue ")}function bs(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}var ds,ms,vs=((ds=function(){function t(e,a,n,i){r(this,t),this.cdr=e,this.userService=a,this.solexBCService=n,this.tagService=i,this.range={startDate:"",endDate:""},this.loadingIndicator=!0,this.expanded={},this.tagList=[],this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.groupType="",this.selectedCompany=this.getSelectedCompanyStored()}return n(t,[{key:"ngAfterViewInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCompanyTags(this.selectedCompany);case 2:return this.tagList=e.sent,this.rows=[],e.next=6,this.getAllSolexBCStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 6:return this.rows=e.sent,e.next=9,this.getChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 9:return this.chartData=e.sent,e.next=12,this.getSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 12:this.summaryMetrics=e.sent,this.refreshTable();case 14:case"end":return e.stop()}}),e,this)})))}},{key:"updateReportingFiltering",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.range=e,t.next=3,this.getAllSolexBCStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 3:return this.rows=t.sent,t.next=6,this.getChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 6:return this.chartData=t.sent,t.next=9,this.getSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 9:this.summaryMetrics=t.sent,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.groupType="",this.refreshTable();case 15:case"end":return t.stop()}}),t,this)})))}},{key:"getSelectedCompanyStored",value:function(){return this.userService.getSelectedCompanyFromLocalStorage()}},{key:"toggleExpandRow",value:function(e){console.log("Toggled Expand Row!",e),this.table.rowDetail.toggleExpandRow(e)}},{key:"getDetailRowHeight",value:function(e,t){var r;return e&&(r=e.detailHeight),r}},{key:"onDetailToggle",value:function(e){console.log("Detail Toggled",e)}},{key:"refreshTable",value:function(){this.cdr.markForCheck()}},{key:"getAllSolexBCStats",value:function(t,r,a){var n=this;return this.solexBCService.getSolexBCStats(t,r,a).toPromise().then((function(t){var r,a=e((n.loadingIndicator=!1,n.allStats=t.stats,n.allStats.map((function(e){e.publisher="No Publisher",e.tagname="No Tag"})),n.tagList));try{for(a.s();!(r=a.n()).done;){var i=r.value;if("solex-bc"==i.tag.advertiser){var o,s=e(i.tag.subids);try{for(s.s();!(o=s.n()).done;){var u=o.value;"Contains"==u.filterTag?n.allStats.map((function(e){e.subid.includes(u.subid)&&(e.publisher=i.user.length?i.user[0].fullname:"No Publisher",e.tagname=i.tag.name)})):"StartsWith"==u.filterTag?n.allStats.map((function(e){e.subid.startsWith(u.subid)&&(e.publisher=i.user.length?i.user[0].fullname:"No Publisher",e.tagname=i.tag.name)})):"EndsWith"==u.filterTag?n.allStats.map((function(e){e.subid.endsWith(u.subid)&&(e.publisher=i.user.length?i.user[0].fullname:"No Publisher",e.tagname=i.tag.name)})):"ExactValue"==u.filterTag&&n.allStats.map((function(e){e.subid==u.subid&&(e.publisher=i.user.length?i.user[0].fullname:"No Publisher",e.tagname=i.tag.name)}))}}catch(c){s.e(c)}finally{s.f()}}}}catch(c){a.e(c)}finally{a.f()}return n.allStats}))}},{key:"groupSubid",value:function(){var t,r={},a=this.allStats.reduce((function(e,t){var a=t.subid;return r[a]?(r[a].clicks+=parseFloat(t.clicks),r[a].searches+=parseFloat(t.searches?t.searches:0),r[a].revenue+=parseFloat(t.revenue),r[a].split+=parseFloat(t.split),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.ctr=i.ctr/i.counter,i.cpc=i.revenue/i.clicks,i.subReportingForDate=this.groupDateForSubid(i),i.detailHeight=50*(i.subReportingForDate.length+1)}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!0,this.cdr.markForCheck()}},{key:"groupDate",value:function(){var t,r={},a=this.allStats.reduce((function(e,t){var a=t.date;return r[a]?(r[a].clicks+=parseFloat(t.clicks),r[a].searches+=parseFloat(t.searches?t.searches:0),r[a].revenue+=parseFloat(t.revenue),r[a].split+=parseFloat(t.split),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.cpc=i.revenue/i.clicks}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!1,this.groupDateShowFlag=!0,this.groupSubidShowFlag=!1,this.cdr.markForCheck()}},{key:"groupProvider",value:function(){var t,r={},a=this.allStats.reduce((function(e,t){var a=t.publisher;return r[a]?(r[a].clicks+=parseFloat(t.clicks),r[a].searches+=parseFloat(t.searches?t.searches:0),r[a].revenue+=parseFloat(t.revenue),r[a].split+=parseFloat(t.split),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.cpc=i.revenue/i.clicks,i.subReportingForDate=this.groupDateForPublisher(i),i.detailHeight=50*(i.subReportingForDate.length+1)}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!0,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.cdr.markForCheck()}},{key:"backGroup",value:function(){this.rows=this.allStats,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.cdr.markForCheck()}},{key:"groupDateForPublisher",value:function(t){var r,a={},n=this.allStats.filter((function(e){return e.publisher===t.publisher})).reduce((function(e,t){var r=t.date;return a[r]?(a[r].clicks+=parseFloat(t.clicks),a[r].searches+=parseFloat(t.searches?t.searches:0),a[r].revenue+=parseFloat(t.revenue),a[r].split+=parseFloat(t.split),a[r].profit+=parseFloat(t.profit),a[r].publisherNet+=parseFloat(t.publisherNet),a[r].counter++):(a[r]=Object.assign({},t),a[r].counter=1,e.push(a[r])),e}),[]),i=e(n);try{for(i.s();!(r=i.n()).done;)(t=r.value).split=t.split/t.counter,t.ctr=t.clicks/t.searches,t.cpc=t.revenue/t.clicks}catch(o){i.e(o)}finally{i.f()}return n}},{key:"groupDateForSubid",value:function(t){var r,a={},n=this.allStats.filter((function(e){return e.subid===t.subid})).reduce((function(e,t){var r=t.date;return a[r]?(a[r].clicks+=parseFloat(t.clicks),a[r].searches+=parseFloat(t.searches?t.searches:0),a[r].revenue+=parseFloat(t.revenue),a[r].split+=parseFloat(t.split),a[r].profit+=parseFloat(t.profit),a[r].publisherNet+=parseFloat(t.publisherNet),a[r].counter++):(a[r]=Object.assign({},t),a[r].counter=1,e.push(a[r])),e}),[]),i=e(n);try{for(i.s();!(r=i.n()).done;)(t=r.value).split=t.split/t.counter,t.cpc=t.revenue/t.clicks,t.ctr=t.clicks/t.searches}catch(o){i.e(o)}finally{i.f()}return n}},{key:"groupHandle",value:function(e){this.groupType=e.value,"date"==e.value?this.groupDate():"publisher"==e.value?this.groupProvider():"subid"==e.value?this.groupSubid():this.backGroup()}},{key:"remove_element",value:function(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return void e.splice(r,1)}},{key:"getChartMetrics",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,s,u,c,h,p,g,f,b,d,m,v,y,S,D,w,F,W,P,x,M,V,C,O,k,R,_,T,I;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.solexBCService.getSolexBCStats(t,r,a).toPromise();case 3:i=n.sent,o=e((this.allChartStat=i.stats,this.allChartStat.map((function(e){e.publisher="No Publisher",e.tagname="No Tag"})),this.tagList));try{for(o.s();!(s=o.n()).done;)if("solex-bc"==(u=s.value).tag.advertiser){c=e(u.tag.subids);try{for(c.s();!(h=c.n()).done;)"Contains"==(p=h.value).filterTag?this.allChartStat.map((function(e){e.subid.includes(p.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"StartsWith"==p.filterTag?this.allChartStat.map((function(e){e.subid.startsWith(p.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"EndsWith"==p.filterTag?this.allChartStat.map((function(e){e.subid.endsWith(p.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"ExactValue"==p.filterTag&&this.allChartStat.map((function(e){e.subid==p.subid&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)}))}catch(N){c.e(N)}finally{c.f()}}}catch(N){o.e(N)}finally{o.f()}for(d in g=l.chain(this.allChartStat).sortBy((function(e){return e.date})).sortBy((function(e){return e.publisher})).value(),f=function e(t,r){if(!r.length)return t;var a=r[0],n=r.slice(1);return l.mapValues(l.groupBy(t,a),(function(t){return e(t,n)}))}(g,["date","publisher"]),b=[],f)if(f.hasOwnProperty(d))for(m in f[d])v={date:f[d][m][0].date,publisher:f[d][m][0].publisher,revenue:l.reduce(f[d][m],(function(e,t){return e+t.revenue}),0)},b.push(v);for(y=[],S=0,D=b;S<D.length;S++)w=D[S],y.push(w.publisher);F=y.filter((function(e,t,r){return t===r.indexOf(e)})),this.allChartStat=this.allChartStat.slice().sort((function(e,t){return e.date-t.date})),W={},P=this.allChartStat.reduce((function(e,t){var r=t.date;return W[r]?W[r].searches+=parseInt(t.searches):(W[r]=Object.assign({},t),e.push(W[r])),e}),[]),x=[],M=[],V={},C=e(P);try{for(C.s();!(O=C.n()).done;)k=O.value,x.push(k.date),M.push(k.searches)}catch(N){C.e(N)}finally{C.f()}R=[],_=e(F);try{for(I=function(){var t,r=T.value,a=[],n=e(x);try{var i=function(){var e=t.value,n=b.filter((function(t){return t.date==e&&t.publisher==r}));a.push(n.length>0?n[0].revenue:0)};for(n.s();!(t=n.n()).done;)i()}catch(N){n.e(N)}finally{n.f()}var o={};o[r]=a,R.push(o)},_.s();!(T=_.n()).done;)I()}catch(N){_.e(N)}finally{_.f()}return n.abrupt("return",(V.revenuePerDay=R,V.datesOfRevenue=x,V.searchesPerDay=M,V.publisherName=F,V));case 22:return n.prev=22,n.t0=n.catch(0),n.abrupt("return",n.t0);case 25:case"end":return n.stop()}}),n,this,[[0,22]])})))}},{key:"getSummaryMetrics",value:function(e,t,r){return this.solexBCService.getSummaryMetrics(e,t,r).toPromise().then((function(e){var a={},n=0,i=0,o=0;return 0!=e.summary[0].lastMonthStat[0].profitPace&&(n=(e.summary[0].summaryMetrics[0].profitPace-e.summary[0].lastMonthStat[0].profitPace)/e.summary[0].lastMonthStat[0].profitPace*100),0!=e.summary[0].twoLastMonthStat[0].profitPace&&(i=(e.summary[0].lastMonthStat[0].profitPace-e.summary[0].twoLastMonthStat[0].profitPace)/e.summary[0].twoLastMonthStat[0].profitPace*100),0!=e.summary[0].prevSelectedStat[0].profitPace&&(o=(e.summary[0].selectedStat[0].profitPace-e.summary[0].prevSelectedStat[0].profitPace)/e.summary[0].prevSelectedStat[0].profitPace*100),e.summary[0].summaryMetrics[0].percentPace=n,e.summary[0].lastMonthStat[0].percentPace=i,e.summary[0].selectedStat[0].percentPace=o,e.summary[0].selectedStat[0].selectedStartDate=t,e.summary[0].selectedStat[0].selectedEndDate=r,a.summary=e.summary,a}))}},{key:"getCompanyTags",value:function(e){var t=e.split("/")[1];return this.tagService.getCompanyTags(t).toPromise().then((function(e){return e})).catch((function(e){return e}))}}]),t}()).\u0275fac=function(e){return new(e||ds)(h.Qb(h.i),h.Qb(p.a),h.Qb(Ao.a),h.Qb(f.a))},ds.\u0275cmp=h.Kb({type:ds,selectors:[["app-solex-bc"]],viewQuery:function(e,t){var r;1&e&&h.Tc(Eo,!0),2&e&&h.zc(r=h.ic())&&(t.table=r.first)},decls:40,vars:22,consts:[[3,"onDatesPicked"],[3,"chartData",4,"ngIf"],[3,"summaryMetricsData",4,"ngIf"],[1,"row"],[1,"col-xl-4"],["appearance","fill"],[3,"ngModel","selectionChange","ngModelChange"],["value","date"],["value","publisher"],["value","subid"],["value","reset"],[1,"material","fullscreen","expandable",2,"top","10px","height","500px",3,"columnMode","headerHeight","footerHeight","rowHeight","scrollbarV","rows","loadingIndicator"],["expandableTable",""],[3,"rowHeight","toggle"],["ngx-datatable-row-detail-template",""],[3,"width","resizeable","sortable","draggable","canAutoResize"],["ngx-datatable-cell-template",""],["name","date",3,"minWidth",4,"ngIf"],["name","subid",4,"ngIf"],["name","publisher",3,"minWidth",4,"ngIf"],["name","searches",4,"ngIf"],["name","clicks",4,"ngIf"],["name","split",3,"minWidth"],["ngx-datatable-header-template",""],["name","publisherNet"],["name","profit"],["name","revenue"],[3,"chartData"],[3,"summaryMetricsData"],["class","table-responsive","style","padding-left: 36px;",4,"ngIf"],["style","padding-left: 35px",4,"ngIf"],[1,"table-responsive",2,"padding-left","36px"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[2,"padding-left","35px"],["href","javascript:void(0)","title","Expand/Collapse Row",3,"click"],["name","date",3,"minWidth"],["name","subid"],["name","publisher",3,"minWidth"],["name","searches"],["name","clicks"]],template:function(e,t){1&e&&(h.Wb(0,"app-reporting-filtering",0),h.hc("onDatesPicked",(function(e){return t.updateReportingFiltering(e)})),h.Vb(),h.Mc(1,zo,1,1,"app-reporting-revenue-chart",1),h.Mc(2,Lo,1,1,"app-summary-metrics",2),h.Wb(3,"div",3),h.Wb(4,"div",4),h.Wb(5,"mat-form-field",5),h.Wb(6,"mat-label"),h.Oc(7,"Choose an Group By"),h.Vb(),h.Wb(8,"mat-select",6),h.hc("selectionChange",(function(e){return t.groupHandle(e)}))("ngModelChange",(function(e){return t.groupType=e})),h.Wb(9,"mat-option",7),h.Oc(10,"Date"),h.Vb(),h.Wb(11,"mat-option",8),h.Oc(12,"Publisher"),h.Vb(),h.Wb(13,"mat-option",9),h.Oc(14,"Subid"),h.Vb(),h.Wb(15,"mat-option",10),h.Oc(16,"Reset"),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(17,"ngx-datatable",11,12),h.Wb(19,"ngx-datatable-row-detail",13),h.hc("toggle",(function(e){return t.onDetailToggle(e)})),h.Mc(20,Bo,2,2,"ng-template",14),h.Vb(),h.Wb(21,"ngx-datatable-column",15),h.Mc(22,Qo,1,4,"ng-template",16),h.Vb(),h.Mc(23,$o,3,1,"ngx-datatable-column",17),h.Mc(24,Zo,3,0,"ngx-datatable-column",18),h.Mc(25,ts,3,1,"ngx-datatable-column",19),h.Mc(26,ns,3,0,"ngx-datatable-column",20),h.Mc(27,ss,3,0,"ngx-datatable-column",21),h.Wb(28,"ngx-datatable-column",22),h.Mc(29,us,1,0,"ng-template",23),h.Mc(30,cs,4,6,"ng-template",16),h.Vb(),h.Wb(31,"ngx-datatable-column",24),h.Mc(32,ls,1,0,"ng-template",23),h.Mc(33,hs,3,4,"ng-template",16),h.Vb(),h.Wb(34,"ngx-datatable-column",25),h.Mc(35,ps,1,0,"ng-template",23),h.Mc(36,gs,3,4,"ng-template",16),h.Vb(),h.Wb(37,"ngx-datatable-column",26),h.Mc(38,fs,1,0,"ng-template",23),h.Mc(39,bs,3,4,"ng-template",16),h.Vb(),h.Vb()),2&e&&(h.Db(1),h.rc("ngIf",t.chartData),h.Db(1),h.rc("ngIf",t.summaryMetrics),h.Db(6),h.rc("ngModel",t.groupType),h.Db(9),h.rc("columnMode","force")("headerHeight",50)("footerHeight",0)("rowHeight",50)("scrollbarV",!0)("rows",t.rows)("loadingIndicator",t.loadingIndicator),h.Db(2),h.rc("rowHeight","publisher"===t.groupType||"subid"===t.groupType?t.getDetailRowHeight:130),h.Db(2),h.rc("width",30)("resizeable",!1)("sortable",!1)("draggable",!1)("canAutoResize",!1),h.Db(2),h.rc("ngIf",!t.groupPublishFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag),h.Db(1),h.rc("ngIf",!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("minWidth",35))},directives:[b.a,s.p,d.c,d.g,m.a,v.q,v.t,y.p,S.d,S.e,S.f,S.b,S.a,S.c,F,V,s.o],pipes:[s.f,s.g,s.w,s.d],styles:[""]}),ds),ys=ho.a.apiUrl+"/stats/admin/accounting",Ss=((ms=function(){function e(t){r(this,e),this.http=t}return n(e,[{key:"getRubiStats",value:function(e,t,r){return this.http.get(ys+"/rubi",{params:{company:e,startDate:t,endDate:r}})}},{key:"getPerionStats",value:function(e,t,r){return this.http.get(ys+"/perion",{params:{company:e,startDate:t,endDate:r}})}},{key:"getLyonStats",value:function(e,t,r){return this.http.get(ys+"/lyons",{params:{company:e,startDate:t,endDate:r}})}},{key:"getApptitudeStats",value:function(e,t,r){return this.http.get(ys+"/apptitude",{params:{company:e,startDate:t,endDate:r}})}},{key:"getSolexBCStats",value:function(e,t,r){return this.http.get(ys+"/solex-bc",{params:{company:e,startDate:t,endDate:r}})}},{key:"getVerizonDirectStats",value:function(e,t,r){return this.http.get(ys+"/verizon-direct",{params:{company:e,startDate:t,endDate:r}})}},{key:"getSystem1Stats",value:function(e,t,r){return this.http.get(ys+"/system1",{params:{company:e,startDate:t,endDate:r}})}}]),e}()).\u0275fac=function(e){return new(e||ms)(h.ec(po.c))},ms.\u0275prov=h.Mb({token:ms,factory:ms.\u0275fac,providedIn:"root"}),ms),Ds=["expandableTable"];function ws(e,t){if(1&e&&(h.Wb(0,"div"),h.Wb(1,"div",12),h.Wb(2,"div",13),h.Wb(3,"span"),h.Oc(4),h.Vb(),h.Vb(),h.Wb(5,"div",15),h.Wb(6,"span"),h.Oc(7),h.mc(8,"currency"),h.Vb(),h.Vb(),h.Vb(),h.Vb()),2&e){var r=t.$implicit,a=t.index,n=h.lc().row;h.Db(4),h.Qc("",r," : "),h.Db(3),h.Pc(h.oc(8,2,n.everyrevenue[a],"USD"))}}function Fs(e,t){if(1&e&&(h.Wb(0,"div",9),h.Mc(1,ws,9,5,"div",10),h.Vb(),h.Wb(2,"div",11),h.Wb(3,"div",12),h.Wb(4,"div",13),h.Wb(5,"strong",14),h.Oc(6,"Total : "),h.Vb(),h.Vb(),h.Wb(7,"div",15),h.Wb(8,"strong",14),h.Oc(9),h.mc(10,"currency"),h.Vb(),h.Vb(),h.Vb(),h.Vb()),2&e){var r=t.row;h.Db(1),h.rc("ngForOf",r.reporting),h.Db(8),h.Pc(h.oc(10,2,r.total,"USD"))}}function Ws(e,t){if(1&e){var r=h.Xb();h.Wb(0,"a",16),h.hc("click",(function(){h.Dc(r);var e=t.row;return h.lc().toggleExpandRow(e)})),h.Vb()}if(2&e){var a=t.expanded;h.Ib("datatable-icon-right",!a)("datatable-icon-down",a)}}function Ps(e,t){1&e&&h.Oc(0," Publisher Name ")}function xs(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}var Ms,Vs=((Ms=function(){function t(e,a,n,i,o){r(this,t),this.cdr=e,this.userService=a,this.accountingService=n,this.tagService=i,this.companyService=o,this.rows=[],this.loadingIndicator=!0,this.range={startDate:"",endDate:""},this.allRubiStats=[],this.allLyonStats=[],this.allPerionStats=[],this.allSystem1Stats=[],this.allVerizonStats=[],this.allSolexBCStats=[],this.allApptitudeStats=[],this.tagList=[],this.tempStatData=[],this.tempUpdateStatData=[],this.reportTypeData=[],this.selectedCompany=this.getSelectedCompanyStored()}return n(t,[{key:"ngAfterViewInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCompanyTags(this.selectedCompany);case 2:return this.tagList=e.sent,e.next=5,this.getReportingProviderList();case 5:if(this.reportTypeData=e.sent,this.rows=[],this.tempStatData=[],e.t0=this.reportTypeData.includes("perion"),!e.t0){e.next=14;break}return e.next=12,this.getPerionStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 12:this.PerionData=e.sent,this.tempStatData=this.tempStatData.concat(this.PerionData);case 14:if(e.t1=this.reportTypeData.includes("lyons"),!e.t1){e.next=20;break}return e.next=18,this.getLyonStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 18:this.LyonData=e.sent,this.tempStatData=this.tempStatData.concat(this.LyonData);case 20:if(e.t2=this.reportTypeData.includes("rubi"),!e.t2){e.next=26;break}return e.next=24,this.getRubiStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 24:this.RubiData=e.sent,this.tempStatData=this.tempStatData.concat(this.RubiData);case 26:if(e.t3=this.reportTypeData.includes("apptitude"),!e.t3){e.next=32;break}return e.next=30,this.getApptitudeStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 30:this.ApptitudeData=e.sent,this.tempStatData=this.tempStatData.concat(this.ApptitudeData);case 32:if(e.t4=this.reportTypeData.includes("solex-bc"),!e.t4){e.next=38;break}return e.next=36,this.getSolexBCStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 36:this.SolexBCData=e.sent,this.tempStatData=this.tempStatData.concat(this.SolexBCData);case 38:if(e.t5=this.reportTypeData.includes("verizon-direct"),!e.t5){e.next=44;break}return e.next=42,this.getVerizonDirectStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 42:this.VerizonData=e.sent,this.tempStatData=this.tempStatData.concat(this.VerizonData);case 44:if(e.t6=this.reportTypeData.includes("system1"),!e.t6){e.next=50;break}return e.next=48,this.getSystem1Stats(this.selectedCompany,this.range.startDate,this.range.endDate);case 48:this.System1Data=e.sent,this.tempStatData=this.tempStatData.concat(this.System1Data);case 50:for(t=[],r=0,this.tempStatData.forEach((function(e){var r=t.filter((function(t){return t.publisher==e.publisher}));if(r.length){var a=t.indexOf(r[0]);t[a].reporting=t[a].reporting.concat(e.reporting),t[a].everyrevenue=t[a].everyrevenue.concat(String(e.revenue)),t[a].total=t[a].total+e.revenue}else"string"==typeof e.reporting&&(e.reporting=[e.reporting]),"number"==typeof e.revenue&&(e.everyrevenue=[String(e.revenue)],e.total=e.revenue),t.push(e)})),a=t;r<a.length;r++)(n=a[r]).detailHeight=30*(n.reporting.length+1);this.rows=t,this.loadingIndicator=!1,this.cdr.detectChanges();case 53:case"end":return e.stop()}}),e,this)})))}},{key:"getSelectedCompanyStored",value:function(){return this.userService.getSelectedCompanyFromLocalStorage()}},{key:"updateReportingFiltering",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r,a,n,i,o,s,u,c,l,h,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.loadingIndicator=!0,this.range=e,this.rows=[],this.tempUpdateStatData=[],r=[],a=[],n=[],i=[],o=[],s=[],u=[],t.t0=this.reportTypeData.includes("perion"),!t.t0){t.next=8;break}return t.next=6,this.getPerionStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 6:r=t.sent,this.tempUpdateStatData=this.tempUpdateStatData.concat(r);case 8:if(t.t1=this.reportTypeData.includes("lyons"),!t.t1){t.next=14;break}return t.next=12,this.getLyonStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 12:a=t.sent,this.tempUpdateStatData=this.tempUpdateStatData.concat(a);case 14:if(t.t2=this.reportTypeData.includes("rubi"),!t.t2){t.next=20;break}return t.next=18,this.getRubiStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 18:n=t.sent,this.tempUpdateStatData=this.tempUpdateStatData.concat(n);case 20:if(t.t3=this.reportTypeData.includes("apptitude"),!t.t3){t.next=26;break}return t.next=24,this.getApptitudeStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 24:i=t.sent,this.tempUpdateStatData=this.tempUpdateStatData.concat(i);case 26:if(t.t4=this.reportTypeData.includes("solex-bc"),!t.t4){t.next=32;break}return t.next=30,this.getSolexBCStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 30:o=t.sent,this.tempUpdateStatData=this.tempUpdateStatData.concat(o);case 32:if(t.t5=this.reportTypeData.includes("verizon-direct"),!t.t5){t.next=38;break}return t.next=36,this.getVerizonDirectStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 36:s=t.sent,this.tempUpdateStatData=this.tempUpdateStatData.concat(s);case 38:if(t.t6=this.reportTypeData.includes("system1"),!t.t6){t.next=44;break}return t.next=42,this.getSystem1Stats(this.selectedCompany,this.range.startDate,this.range.endDate);case 42:u=t.sent,this.tempUpdateStatData=this.tempUpdateStatData.concat(u);case 44:for(c=[],l=0,this.tempUpdateStatData.forEach((function(e){var t=c.filter((function(t){return t.publisher==e.publisher}));if(t.length){var r=c.indexOf(t[0]);c[r].reporting=c[r].reporting.concat(e.reporting),c[r].everyrevenue=c[r].everyrevenue.concat(String(e.revenue)),c[r].total=c[r].total+e.revenue}else"string"==typeof e.reporting&&(e.reporting=[e.reporting]),"number"==typeof e.revenue&&(e.everyrevenue=[String(e.revenue)],e.total=e.revenue),c.push(e)})),h=c;l<h.length;l++)(p=h[l]).detailHeight=30*(p.reporting.length+1);this.rows=c,this.loadingIndicator=!1,this.cdr.detectChanges();case 47:case"end":return t.stop()}}),t,this)})))}},{key:"getReportingProviderList",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.selectedCompany){e.next=12;break}return e.prev=1,e.next=4,this.companyService.getReportCompany(this.selectedCompany.split("/")[1]).toPromise();case 4:return t=e.sent,r=[],e.abrupt("return",(t.reportingProviders.map((function(e){r.push(e.reportingProvider)})),r));case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})))}},{key:"getRubiStats",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,s,u,c,l,h,p,g;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.accountingService.getRubiStats(t,r,a).toPromise();case 2:i=n.sent,o=e((this.allRubiStats=i.stats,this.tagList));try{for(o.s();!(s=o.n()).done;)if("rubi"==(u=s.value).tag.advertiser){c=e(u.tag.subids);try{for(c.s();!(l=c.n()).done;)"Contains"==(h=l.value).filterTag?this.allRubiStats.map((function(e){e.subid.includes(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Rubi")})):"StartsWith"==h.filterTag?this.allRubiStats.map((function(e){e.subid.startsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Rubi")})):"EndsWith"==h.filterTag?this.allRubiStats.map((function(e){e.subid.endsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Rubi")})):"ExactValue"==h.filterTag&&this.allRubiStats.map((function(e){e.subid==h.subid&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Rubi")}))}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return p=[],g={},n.abrupt("return",(this.allRubiStats.length>0&&this.allRubiStats.reduce((function(e,t){var r=t.publisher;return g[r]?g[r].revenue+=parseFloat(t.revenue):(g[r]=Object.assign({},t),e.push(g[r])),e}),[]).map((function(e){p.push({publisher:e.publisher?e.publisher:"No Publisher",reporting:e.reporting?e.reporting:"No Reporting",revenue:e.revenue})})),p));case 7:case"end":return n.stop()}}),n,this)})))}},{key:"getSolexBCStats",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,s,u,c,l,h,p,g;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.accountingService.getSolexBCStats(t,r,a).toPromise();case 2:i=n.sent,o=e((this.allSolexBCStats=i.stats,this.tagList));try{for(o.s();!(s=o.n()).done;)if("solex-bc"==(u=s.value).tag.advertiser){c=e(u.tag.subids);try{for(c.s();!(l=c.n()).done;)"Contains"==(h=l.value).filterTag?this.allSolexBCStats.map((function(e){e.subid.includes(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Solex BC")})):"StartsWith"==h.filterTag?this.allSolexBCStats.map((function(e){e.subid.startsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Solex BC")})):"EndsWith"==h.filterTag?this.allSolexBCStats.map((function(e){e.subid.endsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Solex BC")})):"ExactValue"==h.filterTag&&this.allSolexBCStats.map((function(e){e.subid==h.subid&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Solex BC")}))}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return p=[],g={},n.abrupt("return",(this.allSolexBCStats.length>0&&this.allSolexBCStats.reduce((function(e,t){var r=t.publisher;return g[r]?g[r].revenue+=parseFloat(t.revenue):(g[r]=Object.assign({},t),e.push(g[r])),e}),[]).map((function(e){p.push({publisher:e.publisher?e.publisher:"No Publisher",reporting:e.reporting?e.reporting:"No Reporting",revenue:e.revenue})})),p));case 7:case"end":return n.stop()}}),n,this)})))}},{key:"getVerizonDirectStats",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,s,u,c,l,h,p,g;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.accountingService.getVerizonDirectStats(t,r,a).toPromise();case 2:i=n.sent,o=e((this.allVerizonStats=i.stats,this.tagList));try{for(o.s();!(s=o.n()).done;)if("verizon-direct"==(u=s.value).tag.advertiser){c=e(u.tag.subids);try{for(c.s();!(l=c.n()).done;)"Contains"==(h=l.value).filterTag?this.allVerizonStats.map((function(e){e.subid.includes(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Verizon Direct")})):"StartsWith"==h.filterTag?this.allVerizonStats.map((function(e){e.subid.startsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Verizon Direct")})):"EndsWith"==h.filterTag?this.allVerizonStats.map((function(e){e.subid.endsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Verizon Direct")})):"ExactValue"==h.filterTag&&this.allVerizonStats.map((function(e){e.subid==h.subid&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Verizon Direct")}))}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return p=[],g={},n.abrupt("return",(this.allVerizonStats.length>0&&this.allVerizonStats.reduce((function(e,t){var r=t.publisher;return g[r]?g[r].revenue+=parseFloat(t.revenue):(g[r]=Object.assign({},t),e.push(g[r])),e}),[]).map((function(e){p.push({publisher:e.publisher?e.publisher:"No Publisher",reporting:e.reporting?e.reporting:"No Reporting",revenue:e.revenue})})),p));case 7:case"end":return n.stop()}}),n,this)})))}},{key:"getLyonStats",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,s,u,c,l,h,p,g;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.accountingService.getLyonStats(t,r,a).toPromise();case 2:i=n.sent,o=e((this.allLyonStats=i.stats,this.tagList));try{for(o.s();!(s=o.n()).done;)if("lyons"==(u=s.value).tag.advertiser){c=e(u.tag.subids);try{for(c.s();!(l=c.n()).done;)"Contains"==(h=l.value).filterTag?this.allLyonStats.map((function(e){e.subid.includes(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Lyons")})):"StartsWith"==h.filterTag?this.allLyonStats.map((function(e){e.subid.startsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Lyons")})):"EndsWith"==h.filterTag?this.allLyonStats.map((function(e){e.subid.endsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Lyons")})):"ExactValue"==h.filterTag&&this.allLyonStats.map((function(e){e.subid==h.subid&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Lyons")}))}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return p=[],g={},n.abrupt("return",(this.allLyonStats.length>0&&this.allLyonStats.reduce((function(e,t){var r=t.publisher;return g[r]?g[r].revenue+=parseFloat(t.revenue):(g[r]=Object.assign({},t),e.push(g[r])),e}),[]).map((function(e){p.push({publisher:e.publisher?e.publisher:"No Publisher",reporting:e.reporting?e.reporting:"No Reporting",revenue:e.revenue})})),p));case 7:case"end":return n.stop()}}),n,this)})))}},{key:"getPerionStats",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,s,u,c,l,h,p,g;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.accountingService.getPerionStats(t,r,a).toPromise();case 2:i=n.sent,o=e((this.allPerionStats=i.stats,this.tagList));try{for(o.s();!(s=o.n()).done;)if("perion"==(u=s.value).tag.advertiser){c=e(u.tag.subids);try{for(c.s();!(l=c.n()).done;)"Contains"==(h=l.value).filterTag?this.allPerionStats.map((function(e){e.subid.includes(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Perion")})):"StartsWith"==h.filterTag?this.allPerionStats.map((function(e){e.subid.startsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Perion")})):"EndsWith"==h.filterTag?this.allPerionStats.map((function(e){e.subid.endsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Perion")})):"ExactValue"==h.filterTag&&this.allPerionStats.map((function(e){e.subid==h.subid&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Perion")}))}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return p=[],g={},n.abrupt("return",(this.allPerionStats.length>0&&this.allPerionStats.reduce((function(e,t){var r=t.publisher;return g[r]?g[r].revenue+=parseFloat(t.revenue):(g[r]=Object.assign({},t),e.push(g[r])),e}),[]).map((function(e){p.push({publisher:e.publisher?e.publisher:"No Publisher",reporting:e.reporting?e.reporting:"No Reporting",revenue:e.revenue})})),p));case 7:case"end":return n.stop()}}),n,this)})))}},{key:"getApptitudeStats",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,s,u,c,l,h,p,g;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.accountingService.getApptitudeStats(t,r,a).toPromise();case 2:i=n.sent,o=e((this.allApptitudeStats=i.stats,this.tagList));try{for(o.s();!(s=o.n()).done;)if("apptitude"==(u=s.value).tag.advertiser){c=e(u.tag.subids);try{for(c.s();!(l=c.n()).done;)"Contains"==(h=l.value).filterTag?this.allApptitudeStats.map((function(e){e.subid.includes(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Apptitude")})):"StartsWith"==h.filterTag?this.allApptitudeStats.map((function(e){e.subid.startsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Apptitude")})):"EndsWith"==h.filterTag?this.allApptitudeStats.map((function(e){e.subid.endsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Apptitude")})):"ExactValue"==h.filterTag&&this.allApptitudeStats.map((function(e){e.subid==h.subid&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="Apptitude")}))}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return p=[],g={},n.abrupt("return",(this.allApptitudeStats.length>0&&this.allApptitudeStats.reduce((function(e,t){var r=t.publisher;return g[r]?g[r].revenue+=parseFloat(t.revenue):(g[r]=Object.assign({},t),e.push(g[r])),e}),[]).map((function(e){p.push({publisher:e.publisher?e.publisher:"No Publisher",reporting:e.reporting?e.reporting:"No Reporting",revenue:e.revenue})})),p));case 7:case"end":return n.stop()}}),n,this)})))}},{key:"getSystem1Stats",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,s,u,c,l,h,p,g;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.accountingService.getSystem1Stats(t,r,a).toPromise();case 2:i=n.sent,o=e((this.allSystem1Stats=i.stats,this.tagList));try{for(o.s();!(s=o.n()).done;)if("system1"==(u=s.value).tag.advertiser){c=e(u.tag.subids);try{for(c.s();!(l=c.n()).done;)"Contains"==(h=l.value).filterTag?this.allSystem1Stats.map((function(e){e.subid.includes(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="System1")})):"StartsWith"==h.filterTag?this.allSystem1Stats.map((function(e){e.subid.startsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="System1")})):"EndsWith"==h.filterTag?this.allSystem1Stats.map((function(e){e.subid.endsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="System1")})):"ExactValue"==h.filterTag&&this.allSystem1Stats.map((function(e){e.subid==h.subid&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.reporting="System1")}))}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return p=[],g={},n.abrupt("return",(this.allSystem1Stats.length>0&&this.allSystem1Stats.reduce((function(e,t){var r=t.publisher;return g[r]?g[r].revenue+=parseFloat(t.revenue):(g[r]=Object.assign({},t),e.push(g[r])),e}),[]).map((function(e){p.push({publisher:e.publisher?e.publisher:"No Publisher",reporting:e.reporting?e.reporting:"No Reporting",revenue:e.revenue})})),p));case 7:case"end":return n.stop()}}),n,this)})))}},{key:"getCompanyTags",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.split("/")[1],t.prev=1,t.next=4,this.tagService.getCompanyTags(r).toPromise();case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))}},{key:"toggleExpandRow",value:function(e){console.log("Toggled Expand Row!",e),this.table.rowDetail.toggleExpandRow(e)}},{key:"onDetailToggle",value:function(e){console.log("Detail Toggled",e)}},{key:"getDetailRowHeight",value:function(e,t){var r;return e&&(r=e.detailHeight),r}}]),t}()).\u0275fac=function(e){return new(e||Ms)(h.Qb(h.i),h.Qb(p.a),h.Qb(Ss),h.Qb(f.a),h.Qb(bo.a))},Ms.\u0275cmp=h.Kb({type:Ms,selectors:[["app-accounting"]],viewQuery:function(e,t){var r;1&e&&h.Tc(Ds,!0),2&e&&h.zc(r=h.ic())&&(t.table=r.first)},decls:10,vars:14,consts:[[3,"onDatesPicked"],[1,"material","fullscreen","expandable",2,"top","30px","height","500px",3,"columnMode","headerHeight","footerHeight","rowHeight","scrollbarV","rows","loadingIndicator"],["expandableTable",""],[3,"rowHeight","toggle"],["ngx-datatable-row-detail-template",""],[3,"width","resizeable","sortable","draggable","canAutoResize"],["ngx-datatable-cell-template",""],["name","publisher",3,"minWidth"],["ngx-datatable-header-template",""],[2,"padding-left","36px"],[4,"ngFor","ngForOf"],[2,"padding-left","36px","margin-top","5px"],[2,"display","flex"],[2,"min-width","20%"],[2,"font-size","14px"],[2,"min-width","80%"],["href","javascript:void(0)","title","Expand/Collapse Row",3,"click"]],template:function(e,t){1&e&&(h.Wb(0,"app-reporting-filtering",0),h.hc("onDatesPicked",(function(e){return t.updateReportingFiltering(e)})),h.Vb(),h.Wb(1,"ngx-datatable",1,2),h.Wb(3,"ngx-datatable-row-detail",3),h.hc("toggle",(function(e){return t.onDetailToggle(e)})),h.Mc(4,Fs,11,5,"ng-template",4),h.Vb(),h.Wb(5,"ngx-datatable-column",5),h.Mc(6,Ws,1,4,"ng-template",6),h.Vb(),h.Wb(7,"ngx-datatable-column",7),h.Mc(8,Ps,1,0,"ng-template",8),h.Mc(9,xs,2,1,"ng-template",6),h.Vb(),h.Vb()),2&e&&(h.Db(1),h.rc("columnMode","force")("headerHeight",50)("footerHeight",0)("rowHeight",50)("scrollbarV",!0)("rows",t.rows)("loadingIndicator",t.loadingIndicator),h.Db(2),h.rc("rowHeight",t.getDetailRowHeight),h.Db(2),h.rc("width",30)("resizeable",!1)("sortable",!1)("draggable",!1)("canAutoResize",!1),h.Db(2),h.rc("minWidth",100))},directives:[b.a,S.d,S.e,S.f,S.b,S.a,S.c,s.o],pipes:[s.d],styles:[".ngx-datatable[_ngcontent-%COMP%]   .datatable-body[_ngcontent-%COMP%]   .datatable-row-detail[_ngcontent-%COMP%]{overflow-y:hidden;overflow-x:hidden!important}.ngx-datatable.material[_ngcontent-%COMP%]   .datatable-body[_ngcontent-%COMP%]   .datatable-row-detail[_ngcontent-%COMP%]{border-top:1px solid #222!important}"]}),Ms),Cs=i("2Q/2"),Os=["expandableTable"];function ks(e,t){if(1&e&&h.Rb(0,"app-reporting-revenue-chart",34),2&e){var r=h.lc();h.rc("chartData",r.chartData)}}function Rs(e,t){if(1&e&&h.Rb(0,"app-summary-metrics",35),2&e){var r=h.lc();h.rc("summaryMetricsData",r.summaryMetrics)}}function _s(e,t){if(1&e&&(h.Wb(0,"tr"),h.Wb(1,"td"),h.Oc(2),h.mc(3,"date"),h.Vb(),h.Wb(4,"td"),h.Oc(5),h.mc(6,"number"),h.Vb(),h.Wb(7,"td"),h.Oc(8),h.mc(9,"number"),h.Vb(),h.Wb(10,"td"),h.Oc(11),h.mc(12,"percent"),h.Vb(),h.Wb(13,"td"),h.Oc(14),h.mc(15,"currency"),h.Vb(),h.Wb(16,"td"),h.Oc(17),h.mc(18,"currency"),h.Vb(),h.Wb(19,"td"),h.Oc(20),h.mc(21,"currency"),h.Vb(),h.Wb(22,"td"),h.Oc(23),h.mc(24,"currency"),h.Vb(),h.Vb()),2&e){var r=t.$implicit;h.Db(2),h.Pc(h.nc(3,8,r.date)),h.Db(3),h.Pc(h.nc(6,10,r.searches)),h.Db(3),h.Pc(h.nc(9,12,r.clicks)),h.Db(3),h.Pc(h.oc(12,14,r.ctr||0,"2.2-2")),h.Db(3),h.Pc(h.oc(15,17,r.cpc||0,"USD")),h.Db(3),h.Pc(h.oc(18,20,r.publisherNet,"USD")),h.Db(3),h.Pc(h.oc(21,23,r.profit,"USD")),h.Db(3),h.Pc(h.oc(24,26,r.revenue,"USD"))}}function Ts(e,t){if(1&e&&(h.Wb(0,"div",38),h.Wb(1,"table",39),h.Wb(2,"thead"),h.Wb(3,"tr"),h.Wb(4,"th"),h.Oc(5,"Date"),h.Vb(),h.Wb(6,"th"),h.Oc(7,"Searches"),h.Vb(),h.Wb(8,"th"),h.Oc(9,"Clicks"),h.Vb(),h.Wb(10,"th"),h.Oc(11,"CTR"),h.Vb(),h.Wb(12,"th"),h.Oc(13,"CPC"),h.Vb(),h.Wb(14,"th"),h.Oc(15,"Publisher Net"),h.Vb(),h.Wb(16,"th"),h.Oc(17,"Profit"),h.Vb(),h.Wb(18,"th"),h.Oc(19,"Revenue"),h.Vb(),h.Vb(),h.Vb(),h.Wb(20,"tbody"),h.Mc(21,_s,25,29,"tr",40),h.Vb(),h.Vb(),h.Vb()),2&e){var r=h.lc().row;h.Db(21),h.rc("ngForOf",r.subReportingForDate)}}function Is(e,t){1&e&&(h.Wb(0,"div",41),h.Wb(1,"div"),h.Wb(2,"strong"),h.Oc(3,"Address"),h.Vb(),h.Vb(),h.Wb(4,"div"),h.Oc(5,"Test"),h.Vb(),h.Vb())}function Ns(e,t){if(1&e&&(h.Mc(0,Ts,22,1,"div",36),h.Mc(1,Is,6,0,"div",37)),2&e){var r=h.lc();h.rc("ngIf","publisher"===r.groupType||"subid"===r.groupType),h.Db(1),h.rc("ngIf","publisher"!==r.groupType&&"subid"!==r.groupType)}}function js(e,t){if(1&e){var r=h.Xb();h.Wb(0,"a",42),h.hc("click",(function(){h.Dc(r);var e=t.row;return h.lc().toggleExpandRow(e)})),h.Vb()}if(2&e){var a=t.expanded;h.Ib("datatable-icon-right",!a)("datatable-icon-down",a)}}function As(e,t){1&e&&h.Oc(0," Date ")}function Es(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"date"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function zs(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",43),h.Mc(1,As,1,0,"ng-template",30),h.Mc(2,Es,3,3,"ng-template",16),h.Vb()),2&e&&h.rc("minWidth",100)}function Ls(e,t){1&e&&h.Oc(0," Subid ")}function Us(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function Hs(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",44),h.Mc(1,Ls,1,0,"ng-template",30),h.Mc(2,Us,2,1,"ng-template",16),h.Vb())}function Ys(e,t){1&e&&h.Oc(0," Publisher ")}function Bs(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(r)}}function Qs(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",45),h.Mc(1,Ys,1,0,"ng-template",30),h.Mc(2,Bs,2,1,"ng-template",16),h.Vb()),2&e&&h.rc("minWidth",100)}function Gs(e,t){1&e&&h.Oc(0," Searches ")}function qs(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function $s(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",46),h.Mc(1,Gs,1,0,"ng-template",30),h.Mc(2,qs,3,3,"ng-template",16),h.Vb())}function Ks(e,t){1&e&&h.Oc(0," Bid Searches ")}function Xs(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function Zs(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",47),h.Mc(1,Ks,1,0,"ng-template",30),h.Mc(2,Xs,3,3,"ng-template",16),h.Vb())}function Js(e,t){1&e&&h.Oc(0," Bid Searches Result ")}function eu(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function tu(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",48),h.Mc(1,Js,1,0,"ng-template",30),h.Mc(2,eu,3,3,"ng-template",16),h.Vb())}function ru(e,t){1&e&&h.Oc(0," Clicks ")}function au(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function nu(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",49),h.Mc(1,ru,1,0,"ng-template",30),h.Mc(2,au,3,3,"ng-template",16),h.Vb())}function iu(e,t){1&e&&h.Oc(0," Coverage ")}function ou(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function su(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",50),h.Mc(1,iu,1,0,"ng-template",30),h.Mc(2,ou,3,3,"ng-template",16),h.Vb())}function uu(e,t){1&e&&h.Oc(0," CTR ")}function cu(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"percent"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r||0,"2.2-2"))}}function lu(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",51),h.Mc(1,uu,1,0,"ng-template",30),h.Mc(2,cu,3,4,"ng-template",16),h.Vb())}function hu(e,t){1&e&&h.Oc(0," CPC ")}function pu(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r||0,"USD"))}}function gu(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",52),h.Mc(1,hu,1,0,"ng-template",30),h.Mc(2,pu,3,4,"ng-template",16),h.Vb())}function fu(e,t){1&e&&h.Oc(0," RN ")}function bu(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function du(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",53),h.Mc(1,fu,1,0,"ng-template",30),h.Mc(2,bu,3,3,"ng-template",16),h.Vb())}function mu(e,t){1&e&&h.Oc(0," TQ ")}function vu(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r))}}function yu(e,t){1&e&&(h.Wb(0,"ngx-datatable-column",54),h.Mc(1,mu,1,0,"ng-template",30),h.Mc(2,vu,3,3,"ng-template",16),h.Vb())}function Su(e,t){1&e&&h.Oc(0," Publisher Net ")}function Du(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}function wu(e,t){1&e&&h.Oc(0," Profit ")}function Fu(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}function Wu(e,t){1&e&&h.Oc(0," Revenue ")}function Pu(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"currency"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.oc(2,1,r,"USD"))}}function xu(e,t){1&e&&h.Oc(0," Split ")}function Mu(e,t){if(1&e&&(h.Wb(0,"strong"),h.Oc(1),h.mc(2,"number"),h.mc(3,"number"),h.Vb()),2&e){var r=t.value;h.Db(1),h.Pc(h.nc(2,1,r)||h.oc(3,3,0,"1.0-0"))}}var Vu,Cu,Ou,ku=[{path:"",component:Tr,children:[{path:"accounting",component:Vs},{path:"perion",component:_r},{path:"image-advantage",component:Pt},{path:"hopkins",component:at},{path:"apptitude",component:ve},{path:"media-net",component:xt},{path:"bing-direct",component:ta},{path:"lyons",component:Ya},{path:"rubi",component:Pn},{path:"system1",component:lo},{path:"verizon-direct",component:xi},{path:"verizon-direct-arb",component:(Vu=function(){function t(e,a,n,i){r(this,t),this.verizonarbService=e,this.cdr=a,this.userService=n,this.tagService=i,this.range={startDate:"",endDate:""},this.loadingIndicator=!0,this.tagList=[],this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.groupType="",this.selectedCompany=this.getSelectedCompanyFromLocalStorage()}return n(t,[{key:"ngAfterViewInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCompanyTags(this.selectedCompany);case 2:return this.tagList=e.sent,this.rows=[],e.next=6,this.getAllVerizonStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 6:return this.rows=e.sent,e.next=9,this.getChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 9:return this.chartData=e.sent,e.next=12,this.getSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 12:this.summaryMetrics=e.sent,this.refreshTable();case 14:case"end":return e.stop()}}),e,this)})))}},{key:"getCompanyTags",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.split("/")[1],t.prev=1,t.next=4,this.tagService.getCompanyTags(r).toPromise();case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))}},{key:"getDetailRowHeight",value:function(e,t){var r;return e&&(r=e.detailHeight),r}},{key:"getSelectedCompanyFromLocalStorage",value:function(){return this.userService.getSelectedCompanyFromLocalStorage()}},{key:"updateReportingFiltering",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.range=e,t.next=3,this.getAllVerizonStats(this.selectedCompany,this.range.startDate,this.range.endDate);case 3:return this.rows=t.sent,t.next=6,this.getChartMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 6:return this.chartData=t.sent,t.next=9,this.getSummaryMetrics(this.selectedCompany,this.range.startDate,this.range.endDate);case 9:this.summaryMetrics=t.sent,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.groupType="",this.refreshTable();case 15:case"end":return t.stop()}}),t,this)})))}},{key:"refreshTable",value:function(){this.cdr.markForCheck()}},{key:"groupDate",value:function(){var t,r={},a=this.allStats.reduce((function(e,t){var a=t.date;return r[a]?(r[a].clicks+=parseFloat(t.clicks),r[a].ctr+=parseFloat(t.ctr?t.ctr:0),r[a].rn+=parseFloat(t.rn?t.rn:0),r[a].coverage+=parseFloat(t.coverage?t.coverage:0),r[a].searches+=parseFloat(t.searches?t.searches:0),r[a].biddedSearches+=parseFloat(t.biddedSearches?t.biddedSearches:0),r[a].biddedResults+=parseFloat(t.biddedResults?t.biddedResults:0),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].revenue+=parseFloat(t.revenue),r[a].split+=parseFloat(t.split),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.ctr=i.ctr/i.counter,i.cpc=i.revenue/i.clicks}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!1,this.groupDateShowFlag=!0,this.groupSubidShowFlag=!1,this.cdr.markForCheck()}},{key:"groupSubid",value:function(){var t,r={},a=this.allStats.reduce((function(e,t){var a=t.subid;return r[a]?(r[a].clicks+=parseFloat(t.clicks),r[a].ctr+=parseFloat(t.ctr?t.ctr:0),r[a].rn+=parseFloat(t.rn?t.rn:0),r[a].coverage+=parseFloat(t.coverage?t.coverage:0),r[a].searches+=parseFloat(t.searches?t.searches:0),r[a].biddedSearches+=parseFloat(t.biddedSearches?t.biddedSearches:0),r[a].biddedResults+=parseFloat(t.biddedResults?t.biddedResults:0),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].revenue+=parseFloat(t.revenue),r[a].split+=parseFloat(t.split),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.ctr=i.ctr/i.counter,i.cpc=i.revenue/i.clicks,i.subReportingForDate=this.groupDateForSubid(i),i.detailHeight=50*(i.subReportingForDate.length+1)}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!0,this.cdr.markForCheck()}},{key:"groupProvider",value:function(){var t,r={},a=this.allStats.reduce((function(e,t){var a=t.publisher;return r[a]?(r[a].clicks+=parseFloat(t.clicks),r[a].ctr+=parseFloat(t.ctr?t.ctr:0),r[a].rn+=parseFloat(t.rn?t.rn:0),r[a].coverage+=parseFloat(t.coverage?t.coverage:0),r[a].searches+=parseFloat(t.searches?t.searches:0),r[a].biddedSearches+=parseFloat(t.biddedSearches?t.biddedSearches:0),r[a].biddedResults+=parseFloat(t.biddedResults?t.biddedResults:0),r[a].profit+=parseFloat(t.profit),r[a].publisherNet+=parseFloat(t.publisherNet),r[a].revenue+=parseFloat(t.revenue),r[a].split+=parseFloat(t.split),r[a].counter++):(r[a]=Object.assign({},t),r[a].counter=1,e.push(r[a])),e}),[]),n=e(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.split=i.split/i.counter,i.ctr=i.ctr/i.counter,i.cpc=i.revenue/i.clicks,i.subReportingForDate=this.groupDateForPublisher(i),i.detailHeight=50*(i.subReportingForDate.length+1)}}catch(o){n.e(o)}finally{n.f()}this.rows=a,this.groupPublishFlag=!0,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.cdr.markForCheck()}},{key:"groupDateForPublisher",value:function(t){var r,a={},n=this.allStats.filter((function(e){return e.publisher===t.publisher})).reduce((function(e,t){var r=t.date;return a[r]?(a[r].clicks+=parseFloat(t.clicks),a[r].rn+=parseFloat(t.rn?t.rn:0),a[r].coverage+=parseFloat(t.coverage?t.coverage:0),a[r].searches+=parseFloat(t.searches?t.searches:0),a[r].biddedSearches+=parseFloat(t.biddedSearches?t.biddedSearches:0),a[r].biddedResults+=parseFloat(t.biddedResults?t.biddedResults:0),a[r].profit+=parseFloat(t.profit),a[r].publisherNet+=parseFloat(t.publisherNet),a[r].revenue+=parseFloat(t.revenue),a[r].split+=parseFloat(t.split),a[r].counter++):(a[r]=Object.assign({},t),a[r].counter=1,e.push(a[r])),e}),[]),i=e(n);try{for(i.s();!(r=i.n()).done;)(t=r.value).split=t.split/t.counter,t.ctr=t.clicks/t.searches,t.cpc=t.revenue/t.clicks}catch(o){i.e(o)}finally{i.f()}return n}},{key:"groupDateForSubid",value:function(t){var r,a={},n=this.allStats.filter((function(e){return e.subid===t.subid})).reduce((function(e,t){var r=t.date;return a[r]?(a[r].clicks+=parseFloat(t.clicks),a[r].rn+=parseFloat(t.rn?t.rn:0),a[r].coverage+=parseFloat(t.coverage?t.coverage:0),a[r].searches+=parseFloat(t.searches?t.searches:0),a[r].biddedSearches+=parseFloat(t.biddedSearches?t.biddedSearches:0),a[r].biddedResults+=parseFloat(t.biddedResults?t.biddedResults:0),a[r].profit+=parseFloat(t.profit),a[r].publisherNet+=parseFloat(t.publisherNet),a[r].revenue+=parseFloat(t.revenue),a[r].split+=parseFloat(t.split),a[r].counter++):(a[r]=Object.assign({},t),a[r].counter=1,e.push(a[r])),e}),[]),i=e(n);try{for(i.s();!(r=i.n()).done;)(t=r.value).split=t.split/t.counter,t.cpc=t.revenue/t.clicks,t.ctr=t.clicks/t.searches}catch(o){i.e(o)}finally{i.f()}return n}},{key:"backGroup",value:function(){this.rows=this.allStats,this.groupPublishFlag=!1,this.groupDateShowFlag=!1,this.groupSubidShowFlag=!1,this.cdr.markForCheck()}},{key:"toggleExpandRow",value:function(e){console.log("Toggled Expand Row!",e),this.table.rowDetail.toggleExpandRow(e)}},{key:"onDetailToggle",value:function(e){console.log("Detail Toggled",e)}},{key:"remove_element",value:function(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return void e.splice(r,1)}},{key:"groupHandle",value:function(e){this.groupType=e.value,"date"==e.value?this.groupDate():"publisher"==e.value?this.groupProvider():"subid"==e.value?this.groupSubid():this.backGroup()}},{key:"getChartMetrics",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r,a,n,i,o,s,u,c,h,p,g,f,b,d,m,v,y,S,D,w,F,W,P,x,M,V,C,O,k;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,r=e((this.allChartStat=this.allStats,this.tagList));try{for(r.s();!(a=r.n()).done;)if("verizon-direct-arb"==(n=a.value).tag.advertiser){i=e(n.tag.subids);try{for(i.s();!(o=i.n()).done;)"Contains"==(s=o.value).filterTag?this.allChartStat.map((function(e){e.subid.includes(s.subid)&&(e.publisher=n.user.length?n.user[0].fullname:"No Publisher",e.tagname=n.tag.name)})):"StartsWith"==s.filterTag?this.allChartStat.map((function(e){e.subid.startsWith(s.subid)&&(e.publisher=n.user.length?n.user[0].fullname:"No Publisher",e.tagname=n.tag.name)})):"EndsWith"==s.filterTag?this.allChartStat.map((function(e){e.subid.endsWith(s.subid)&&(e.publisher=n.user.length?n.user[0].fullname:"No Publisher",e.tagname=n.tag.name)})):"ExactValue"==s.filterTag&&this.allChartStat.map((function(e){e.subid==s.subid&&(e.publisher=n.user.length?n.user[0].fullname:"No Publisher",e.tagname=n.tag.name)}))}catch(R){i.e(R)}finally{i.f()}}}catch(R){r.e(R)}finally{r.f()}for(p in u=l.chain(this.allChartStat).sortBy((function(e){return e.date})).sortBy((function(e){return e.publisher})).value(),c=function e(t,r){if(!r.length)return t;var a=r[0],n=r.slice(1);return l.mapValues(l.groupBy(t,a),(function(t){return e(t,n)}))}(u,["date","publisher"]),h=[],c)if(c.hasOwnProperty(p))for(g in c[p])f={date:c[p][g][0].date,publisher:c[p][g][0].publisher,revenue:l.reduce(c[p][g],(function(e,t){return e+t.revenue}),0)},h.push(f);for(b=[],d=0,m=h;d<m.length;d++)v=m[d],b.push(v.publisher);y=b.filter((function(e,t,r){return t===r.indexOf(e)})),this.allChartStat=this.allChartStat.slice().sort((function(e,t){return e.date-t.date})),S={},D=this.allChartStat.reduce((function(e,t){var r=t.date;return S[r]?(S[r].searches+=parseInt(t.searches),t.revenue&&(S[r].revenue+=t.revenue)):(S[r]=Object.assign({},t),e.push(S[r])),e}),[]),w=[],F=[],W={},P=e(D);try{for(P.s();!(x=P.n()).done;)M=x.value,w.push(M.date),F.push(M.searches)}catch(R){P.e(R)}finally{P.f()}V=[],C=e(y);try{for(k=function(){var t,r=O.value,a=[],n=e(w);try{var i=function(){var e=t.value,n=h.filter((function(t){return t.date==e&&t.publisher==r}));a.push(n.length>0?n[0].revenue:0)};for(n.s();!(t=n.n()).done;)i()}catch(R){n.e(R)}finally{n.f()}var o={};o[r]=a,V.push(o)},C.s();!(O=C.n()).done;)k()}catch(R){C.e(R)}finally{C.f()}return t.abrupt("return",(W.revenuePerDay=V,W.datesOfRevenue=w,W.searchesPerDay=F,W.publisherName=y,W));case 19:return t.prev=19,t.t0=t.catch(0),t.abrupt("return",t.t0);case 22:case"end":return t.stop()}}),t,this,[[0,19]])})))}},{key:"getAllVerizonStats",value:function(t,r,a){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,s,u,c,l,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.verizonarbService.getAllVerizonArbStats(t,r,a).toPromise();case 2:i=n.sent,o=e((this.loadingIndicator=!1,this.allStats=i.stats,this.allStats.map((function(e){e.publisher="No Publisher",e.tagname="No Tag"})),this.tagList));try{for(o.s();!(s=o.n()).done;)if("verizon-direct-arb"==(u=s.value).tag.advertiser){c=e(u.tag.subids);try{for(c.s();!(l=c.n()).done;)"Contains"==(h=l.value).filterTag?this.allStats.map((function(e){e.subid.includes(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"StartsWith"==h.filterTag?this.allStats.map((function(e){e.subid.startsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"EndsWith"==h.filterTag?this.allStats.map((function(e){e.subid.endsWith(h.subid)&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)})):"ExactValue"==h.filterTag&&this.allStats.map((function(e){e.subid==h.subid&&(e.publisher=u.user.length?u.user[0].fullname:"No Publisher",e.tagname=u.tag.name)}))}catch(p){c.e(p)}finally{c.f()}}}catch(p){o.e(p)}finally{o.f()}return n.abrupt("return",this.allStats);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"getSummaryMetrics",value:function(e,t,r){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var n,i,o,s,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.verizonarbService.getSummaryMetrics(e,t,r).toPromise();case 2:return n=a.sent,i={},o=0,s=0,u=0,a.abrupt("return",(0!=n.summary[0].lastMonthStat[0].profitPace&&(o=(n.summary[0].summaryMetrics[0].profitPace-n.summary[0].lastMonthStat[0].profitPace)/n.summary[0].lastMonthStat[0].profitPace*100),0!=n.summary[0].twoLastMonthStat[0].profitPace&&(s=(n.summary[0].lastMonthStat[0].profitPace-n.summary[0].twoLastMonthStat[0].profitPace)/n.summary[0].twoLastMonthStat[0].profitPace*100),0!=n.summary[0].prevSelectedStat[0].profitPace&&(u=(n.summary[0].selectedStat[0].profitPace-n.summary[0].prevSelectedStat[0].profitPace)/n.summary[0].prevSelectedStat[0].profitPace*100),n.summary[0].summaryMetrics[0].percentPace=o,n.summary[0].lastMonthStat[0].percentPace=s,n.summary[0].selectedStat[0].percentPace=u,n.summary[0].selectedStat[0].selectedStartDate=t,n.summary[0].selectedStat[0].selectedEndDate=r,i.summary=n.summary,i));case 5:case"end":return a.stop()}}),a,this)})))}}]),t}(),Vu.\u0275fac=function(e){return new(e||Vu)(h.Qb(Cs.a),h.Qb(h.i),h.Qb(p.a),h.Qb(f.a))},Vu.\u0275cmp=h.Kb({type:Vu,selectors:[["app-verizon-direct-arb"]],viewQuery:function(e,t){var r;1&e&&h.Tc(Os,!0),2&e&&h.zc(r=h.ic())&&(t.table=r.first)},decls:47,vars:29,consts:[[3,"onDatesPicked"],[3,"chartData",4,"ngIf"],[3,"summaryMetricsData",4,"ngIf"],[1,"row"],[1,"col-xl-4"],["appearance","fill"],[3,"ngModel","selectionChange","ngModelChange"],["value","date"],["value","publisher"],["value","subid"],["value","reset"],[1,"material","fullscreen","expandable",2,"top","10px","height","500px",3,"columnMode","headerHeight","footerHeight","rowHeight","scrollbarV","rows","loadingIndicator"],["expandableTable",""],[3,"rowHeight","toggle"],["ngx-datatable-row-detail-template",""],[3,"width","resizeable","sortable","draggable","canAutoResize"],["ngx-datatable-cell-template",""],["name","date",3,"minWidth",4,"ngIf"],["name","subid",4,"ngIf"],["name","publisher",3,"minWidth",4,"ngIf"],["name","searches",4,"ngIf"],["name","biddedSearches",4,"ngIf"],["name","biddedResults",4,"ngIf"],["name","clicks",4,"ngIf"],["name","coverage",4,"ngIf"],["name","ctr",4,"ngIf"],["name","cpc",4,"ngIf"],["name","rn",4,"ngIf"],["name","tqScore",4,"ngIf"],["name","publisherNet"],["ngx-datatable-header-template",""],["name","profit"],["name","revenue"],["name","split",3,"minWidth"],[3,"chartData"],[3,"summaryMetricsData"],["class","table-responsive","style","padding-left: 36px;",4,"ngIf"],["style","padding-left: 35px",4,"ngIf"],[1,"table-responsive",2,"padding-left","36px"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[2,"padding-left","35px"],["href","javascript:void(0)","title","Expand/Collapse Row",3,"click"],["name","date",3,"minWidth"],["name","subid"],["name","publisher",3,"minWidth"],["name","searches"],["name","biddedSearches"],["name","biddedResults"],["name","clicks"],["name","coverage"],["name","ctr"],["name","cpc"],["name","rn"],["name","tqScore"]],template:function(e,t){1&e&&(h.Wb(0,"app-reporting-filtering",0),h.hc("onDatesPicked",(function(e){return t.updateReportingFiltering(e)})),h.Vb(),h.Mc(1,ks,1,1,"app-reporting-revenue-chart",1),h.Mc(2,Rs,1,1,"app-summary-metrics",2),h.Wb(3,"div",3),h.Wb(4,"div",4),h.Wb(5,"mat-form-field",5),h.Wb(6,"mat-label"),h.Oc(7,"Choose an Group By"),h.Vb(),h.Wb(8,"mat-select",6),h.hc("selectionChange",(function(e){return t.groupHandle(e)}))("ngModelChange",(function(e){return t.groupType=e})),h.Wb(9,"mat-option",7),h.Oc(10,"Date"),h.Vb(),h.Wb(11,"mat-option",8),h.Oc(12,"Publisher"),h.Vb(),h.Wb(13,"mat-option",9),h.Oc(14,"Subid"),h.Vb(),h.Wb(15,"mat-option",10),h.Oc(16,"Reset"),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(17,"ngx-datatable",11,12),h.Wb(19,"ngx-datatable-row-detail",13),h.hc("toggle",(function(e){return t.onDetailToggle(e)})),h.Mc(20,Ns,2,2,"ng-template",14),h.Vb(),h.Wb(21,"ngx-datatable-column",15),h.Mc(22,js,1,4,"ng-template",16),h.Vb(),h.Mc(23,zs,3,1,"ngx-datatable-column",17),h.Mc(24,Hs,3,0,"ngx-datatable-column",18),h.Mc(25,Qs,3,1,"ngx-datatable-column",19),h.Mc(26,$s,3,0,"ngx-datatable-column",20),h.Mc(27,Zs,3,0,"ngx-datatable-column",21),h.Mc(28,tu,3,0,"ngx-datatable-column",22),h.Mc(29,nu,3,0,"ngx-datatable-column",23),h.Mc(30,su,3,0,"ngx-datatable-column",24),h.Mc(31,lu,3,0,"ngx-datatable-column",25),h.Mc(32,gu,3,0,"ngx-datatable-column",26),h.Mc(33,du,3,0,"ngx-datatable-column",27),h.Mc(34,yu,3,0,"ngx-datatable-column",28),h.Wb(35,"ngx-datatable-column",29),h.Mc(36,Su,1,0,"ng-template",30),h.Mc(37,Du,3,4,"ng-template",16),h.Vb(),h.Wb(38,"ngx-datatable-column",31),h.Mc(39,wu,1,0,"ng-template",30),h.Mc(40,Fu,3,4,"ng-template",16),h.Vb(),h.Wb(41,"ngx-datatable-column",32),h.Mc(42,Wu,1,0,"ng-template",30),h.Mc(43,Pu,3,4,"ng-template",16),h.Vb(),h.Wb(44,"ngx-datatable-column",33),h.Mc(45,xu,1,0,"ng-template",30),h.Mc(46,Mu,4,6,"ng-template",16),h.Vb(),h.Vb()),2&e&&(h.Db(1),h.rc("ngIf",t.chartData),h.Db(1),h.rc("ngIf",t.summaryMetrics),h.Db(6),h.rc("ngModel",t.groupType),h.Db(9),h.rc("columnMode","force")("headerHeight",50)("footerHeight",0)("rowHeight",50)("scrollbarV",!0)("rows",t.rows)("loadingIndicator",t.loadingIndicator),h.Db(2),h.rc("rowHeight","publisher"===t.groupType||"subid"===t.groupType?t.getDetailRowHeight:130),h.Db(2),h.rc("width",30)("resizeable",!1)("sortable",!1)("draggable",!1)("canAutoResize",!1),h.Db(2),h.rc("ngIf",!t.groupPublishFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag),h.Db(1),h.rc("ngIf",!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(1),h.rc("ngIf",!t.groupPublishFlag&&!t.groupDateShowFlag&&!t.groupSubidShowFlag),h.Db(10),h.rc("minWidth",35))},directives:[b.a,s.p,d.c,d.g,m.a,v.q,v.t,y.p,S.d,S.e,S.f,S.b,S.a,S.c,F,V,s.o],pipes:[s.f,s.g,s.w,s.d],styles:[""]}),Vu)},{path:"third-party",component:ea},{path:"solex-bc",component:vs},{path:"manual-stat-update",component:Vo},{path:"manual-split-update",component:jo},{path:"",redirectTo:"",pathMatch:"full"},{path:"**",redirectTo:"",pathMatch:"full"}]}],Ru=((Cu=function e(){r(this,e)}).\u0275mod=h.Ob({type:Cu}),Cu.\u0275inj=h.Nb({factory:function(e){return new(e||Cu)},imports:[[u.k.forChild(ku)],u.k]}),Cu),_u=i("UKGz"),Tu=i("e8Ap"),Iu=((Ou=function e(){r(this,e)}).\u0275mod=h.Ob({type:Ou}),Ou.\u0275inj=h.Nb({factory:function(e){return new(e||Ou)},providers:[s.f,s.w,s.d],imports:[[u.k,s.c,Ru,S.g,v.w,v.m,W.d,yo.e,d.e,y.n,m.b,_u.a,y.q,Ct.c,So.c,Tu.b]]}),Ou)}}])}();