!function(){function e(e,a){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,a){if(!e)return;if("string"==typeof e)return t(e,a);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,a)}(e))||a&&e&&"number"==typeof e.length){n&&(e=n);var r=0,c=function(){};return{s:c,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"/X+5":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var c=n("fXoL"),i=n("3Pt+"),o=n("wd/R"),s=n("kmnG"),u=n("iadO"),l=n("ofXK"),d=n("d3UM"),b=n("FKr1");function f(e,t){1&e&&(c.Wb(0,"mat-error"),c.Oc(1,"Invalid start date"),c.Vb())}function g(e,t){1&e&&(c.Wb(0,"mat-error"),c.Oc(1,"Invalid end date"),c.Vb())}function h(e,t){if(1&e&&(c.Wb(0,"mat-option",15),c.Oc(1),c.Vb()),2&e){var a=t.$implicit;c.rc("value",a.value),c.Db(1),c.Qc(" ",a.viewValue," ")}}var m=function(){var e=function(){function e(){a(this,e),this.onDatesPicked=new c.p}return r(e,[{key:"ngOnInit",value:function(){this.preSetDateRanges=this.getDateRanges(),this.range=new i.j({startDate:new i.g,endDate:new i.g}),this.selectedRange={startDate:"",endDate:""},this.preSelectValue="last7days",this.preSelectDates=this.getPreSetDateRange(this.preSelectValue),this.updateDatePickerRange(this.preSelectDates.startDate,this.preSelectDates.endDate),this.emitSelectedRange()}},{key:"getDateRanges",value:function(){return[{value:"today",viewValue:"Today"},{value:"yesterday",viewValue:"Yesterday"},{value:"last7days",viewValue:"Last 7 Days"},{value:"last30days",viewValue:"Last 30 Days"},{value:"monthToDate",viewValue:"Month to Date"},{value:"lastMonth",viewValue:"Last Month"},{value:"custom",viewValue:"Custom"}]}},{key:"getPreSetDateRange",value:function(e){switch(e){case"today":return{startDate:o().utc().startOf("day").format("MM-DD-YYYY"),endDate:o().utc().endOf("day").format("MM-DD-YYYY")};case"yesterday":return{startDate:o().subtract(1,"days").utc().startOf("day").format("MM-DD-YYYY"),endDate:o().subtract(1,"days").utc().endOf("day").format("MM-DD-YYYY")};case"last7days":return{startDate:o().subtract(7,"days").utc().startOf("day").format("MM-DD-YYYY"),endDate:o().utc().endOf("day").format("MM-DD-YYYY")};case"last30days":return{startDate:o().subtract(30,"days").utc().startOf("day").format("MM-DD-YYYY"),endDate:o().utc().endOf("day").format("MM-DD-YYYY")};case"monthToDate":return{startDate:o().startOf("month").utc().startOf("day").format("MM-DD-YYYY"),endDate:o().utc().endOf("day").format("MM-DD-YYYY")};case"lastMonth":return{startDate:o().subtract(1,"months").startOf("month").utc().startOf("day").format("MM-DD-YYYY"),endDate:o().utc().subtract(1,"months").endOf("month").format("MM-DD-YYYY")}}}},{key:"onPreSetRangeSelectChange",value:function(e){"custom"!==e.value&&(this.preSelectValue=e.value,this.preSelectDates=this.getPreSetDateRange(this.preSelectValue),this.updateDatePickerRange(this.preSelectDates.startDate,this.preSelectDates.endDate),this.emitSelectedRange())}},{key:"updateDatePickerRange",value:function(e,t){this.range.patchValue({startDate:o(e,"MM-DD-YYYY").toDate(),endDate:o(t,"MM-DD-YYYY").toDate()})}},{key:"changeDatePicker",value:function(){this.range.valid&&(this.selectedRange.startDate=this.range.value.startDate,this.selectedRange.endDate=this.range.value.endDate,this.preSelectValue="custom",this.emitSelectedRange())}},{key:"emitSelectedRange",value:function(){if(this.range.valid){this.selectedRange.startDate=this.range.value.startDate,this.selectedRange.endDate=this.range.value.endDate;var e=this.selectedRange;e.startDate=o(this.selectedRange.startDate).startOf("day").format("MM-DD-YYYY"),e.endDate=o(this.selectedRange.endDate).endOf("day").format("MM-DD-YYYY"),this.onDatesPicked.emit(e)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Kb({type:e,selectors:[["app-reporting-filtering"]],outputs:{onDatesPicked:"onDatesPicked"},decls:24,vars:7,consts:[[1,"row"],[1,"col-xl-6"],[1,"card","card-custom","example","example-compact","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"card-body"],[3,"formGroup","rangePicker","dateChange"],["matStartDate","","formControlName","startDate","placeholder","Start date","required",""],["matEndDate","","formControlName","endDate","placeholder","End date","required","",3,"dateChange"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){if(1&e&&(c.Wb(0,"div",0),c.Wb(1,"div",1),c.Wb(2,"div",2),c.Wb(3,"div",3),c.Wb(4,"div",4),c.Wb(5,"h2",5),c.Oc(6,"Filter Date Range"),c.Vb(),c.Vb(),c.Vb(),c.Wb(7,"div",6),c.Wb(8,"mat-form-field"),c.Wb(9,"mat-label"),c.Oc(10,"Enter a custom date range"),c.Vb(),c.Wb(11,"mat-date-range-input",7),c.hc("dateChange",(function(){return t.changeDatePicker()})),c.Rb(12,"input",8),c.Wb(13,"input",9),c.hc("dateChange",(function(){return t.changeDatePicker()})),c.Vb(),c.Vb(),c.Rb(14,"mat-datepicker-toggle",10),c.Rb(15,"mat-date-range-picker",null,11),c.Mc(17,f,2,0,"mat-error",12),c.Mc(18,g,2,0,"mat-error",12),c.Vb(),c.Wb(19,"mat-form-field"),c.Wb(20,"mat-label"),c.Oc(21,"Preset Date Range"),c.Vb(),c.Wb(22,"mat-select",13),c.hc("ngModelChange",(function(e){return t.preSelectValue=e}))("selectionChange",(function(e){return t.onPreSetRangeSelectChange(e)})),c.Mc(23,h,2,2,"mat-option",14),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&e){var a=c.Ac(16);c.Db(11),c.rc("formGroup",t.range)("rangePicker",a),c.Db(3),c.rc("for",a),c.Db(3),c.rc("ngIf",t.range.controls.startDate.hasError("matStartDateInvalid")),c.Db(1),c.rc("ngIf",t.range.controls.endDate.hasError("matEndDateInvalid")),c.Db(4),c.rc("ngModel",t.preSelectValue),c.Db(1),c.rc("ngForOf",t.preSetDateRanges)}},directives:[s.c,s.g,u.a,i.r,i.k,u.h,i.d,i.q,i.i,i.x,u.g,u.f,s.j,u.b,l.p,d.a,i.t,l.o,s.b,b.p],styles:[""]}),e}()},UKGz:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("ofXK"),c=n("3Pt+"),i=n("d3UM"),o=n("FKr1"),s=n("iadO"),u=n("MutI"),l=n("kmnG"),d=n("e8Ap"),b=n("fXoL"),f=function(){var e=function e(){a(this,e)};return e.\u0275mod=b.Ob({type:e}),e.\u0275inj=b.Nb({factory:function(t){return new(t||e)},imports:[[r.c,c.w,c.m,l.e,o.n,i.b,o.q,s.e,u.d,d.b]]}),e}()},zDcN:function(t,n,c){"use strict";c.r(n),c.d(n,"QualityReportModule",(function(){return H}));var i,o,s=c("ofXK"),u=c("tyNb"),l=c("fXoL"),d=((i=function(){function e(){a(this,e)}return r(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275cmp=l.Kb({type:i,selectors:[["app-quality-report"]],decls:1,vars:0,template:function(e,t){1&e&&l.Rb(0,"router-outlet")},directives:[u.l],styles:[""]}),i),b=c("mrSG"),f=c("AytR"),g=c("tk/3"),h=f.a.apiUrl+"/latencyTrafik",m=((o=function(){function e(t){a(this,e),this.http=t}return r(e,[{key:"getLatency",value:function(e,t){return this.http.get(""+h,{params:{startDate:e,endDate:t}})}}]),e}()).\u0275fac=function(e){return new(e||o)(l.ec(g.c))},o.\u0275prov=l.Mb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),p=c("/X+5"),D=c("lDzL"),v=["expandableTable"];function y(e,t){if(1&e&&(l.Wb(0,"tr"),l.Wb(1,"td"),l.Oc(2),l.mc(3,"date"),l.Vb(),l.Wb(4,"td"),l.Oc(5),l.mc(6,"number"),l.Vb(),l.Wb(7,"td"),l.Oc(8),l.mc(9,"number"),l.Vb(),l.Wb(10,"td"),l.Oc(11),l.mc(12,"number"),l.Vb(),l.Vb()),2&e){var a=t.$implicit;l.Db(2),l.Pc(l.nc(3,4,a.date)),l.Db(3),l.Qc("",l.nc(6,6,a.latency)," s"),l.Db(3),l.Qc("",l.nc(9,8,a.averageLatency)," s"),l.Db(3),l.Pc(l.nc(12,10,a.queries))}}function w(e,t){if(1&e&&(l.Wb(0,"div",17),l.Wb(1,"table",18),l.Wb(2,"thead"),l.Wb(3,"tr"),l.Wb(4,"th"),l.Oc(5,"Date"),l.Vb(),l.Wb(6,"th"),l.Oc(7,"Latency"),l.Vb(),l.Wb(8,"th"),l.Oc(9,"Average Latency"),l.Vb(),l.Wb(10,"th"),l.Oc(11,"Queries"),l.Vb(),l.Vb(),l.Vb(),l.Wb(12,"tbody"),l.Mc(13,y,13,12,"tr",19),l.Vb(),l.Vb(),l.Vb()),2&e){var a=l.lc().row;l.Db(13),l.rc("ngForOf",a.subLatencyData)}}function M(e,t){if(1&e&&l.Mc(0,w,14,1,"div",16),2&e){var a=l.lc();l.rc("ngIf",a.refresh)}}function V(e,t){if(1&e){var a=l.Xb();l.Wb(0,"a",20),l.hc("click",(function(){l.Dc(a);var e=t.row;return l.lc().toggleExpandRow(e)})),l.Vb()}if(2&e){var n=t.expanded;l.Ib("datatable-icon-right",!n)("datatable-icon-down",n)}}function Y(e,t){1&e&&l.Oc(0," Date ")}function O(e,t){if(1&e&&(l.Wb(0,"strong"),l.Oc(1),l.mc(2,"date"),l.Vb()),2&e){var a=t.value;l.Db(1),l.Pc(l.nc(2,1,a))}}function W(e,t){1&e&&(l.Wb(0,"ngx-datatable-column",21),l.Mc(1,Y,1,0,"ng-template",12),l.Mc(2,O,3,3,"ng-template",9),l.Vb()),2&e&&l.rc("minWidth",100)}function k(e,t){1&e&&l.Oc(0," Subid ")}function R(e,t){if(1&e&&(l.Wb(0,"strong"),l.Oc(1),l.Vb()),2&e){var a=t.value;l.Db(1),l.Pc(a)}}function S(e,t){1&e&&l.Oc(0," Latency ")}function x(e,t){if(1&e&&(l.Wb(0,"strong"),l.Oc(1),l.mc(2,"number"),l.Vb()),2&e){var a=t.value;l.Db(1),l.Qc("",l.nc(2,1,a)," s")}}function P(e,t){1&e&&l.Oc(0," Average Latency ")}function I(e,t){if(1&e&&(l.Wb(0,"strong"),l.Oc(1),l.mc(2,"number"),l.Vb()),2&e){var a=t.value;l.Db(1),l.Qc("",l.nc(2,1,a)," s")}}function L(e,t){1&e&&l.Oc(0," Queries ")}function C(e,t){if(1&e&&(l.Wb(0,"strong"),l.Oc(1),l.mc(2,"number"),l.Vb()),2&e){var a=t.value;l.Db(1),l.Pc(l.nc(2,1,a))}}var T,j,A,q=[{path:"",component:d,children:[{path:"latency",component:(T=function(){function t(e,n){a(this,t),this.cdr=e,this.latencyTrafikService=n,this.loadingIndicator=!0,this.range={startDate:"",endDate:""},this.refresh=!1}return r(t,[{key:"ngAfterViewInit",value:function(){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLatency(this.range.startDate,this.range.endDate);case 2:this.latencyData=e.sent,this.rows=this.latencyData,this.cdr.detectChanges();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"getLatency",value:function(e,t){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,this.latencyTrafikService.getLatency(e,t).toPromise();case 3:return n=a.sent,a.abrupt("return",(this.loadingIndicator=!1,n));case 7:return a.prev=7,a.t0=a.catch(0),a.abrupt("return",a.t0);case 10:case"end":return a.stop()}}),a,this,[[0,7]])})))}},{key:"updateReportingFiltering",value:function(e){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loadingIndicator=!0,this.range=e,t.next=4,this.getLatency(this.range.startDate,this.range.endDate);case 4:this.latencyData=t.sent,this.rows=this.latencyData,this.loadingIndicator=!1,this.cdr.detectChanges();case 8:case"end":return t.stop()}}),t,this)})))}},{key:"toggleExpandRow",value:function(e){console.log("Toggled Expand Row!",e),this.table.rowDetail.toggleExpandRow(e)}},{key:"onDetailToggle",value:function(e){console.log("Detail Toggled",e)}},{key:"getDetailRowHeight",value:function(e,t){var a;return e&&(a=e.detailHeight),a}},{key:"refreshLatency",value:function(t){var a,n={},r=this.latencyData.reduce((function(e,t){var a=t.subid;return n[a]?(n[a].latency+=t.latency,n[a].queries+=t.queries):(n[a]=Object.assign({},t),e.push(n[a])),e}),[]),c=e(r);try{for(c.s();!(a=c.n()).done;){var i=a.value;i.averageLatency=i.latency/i.queries,i.subLatencyData=this.groupDateForSubid(i),i.detailHeight=50*(i.subLatencyData.length+1)}}catch(o){c.e(o)}finally{c.f()}this.rows=r,this.refresh=!0,this.cdr.detectChanges()}},{key:"groupDateForSubid",value:function(t){var a,n={},r=this.latencyData.filter((function(e){return e.subid===t.subid})).reduce((function(e,t){var a=t.date;return n[a]?(n[a].latency+=t.latency,n[a].queries+=t.queries):(n[a]=Object.assign({},t),e.push(n[a])),e}),[]),c=e(r);try{for(c.s();!(a=c.n()).done;)(t=a.value).averageLatency=t.latency/t.queries}catch(i){c.e(i)}finally{c.f()}return r}}]),t}(),T.\u0275fac=function(e){return new(e||T)(l.Qb(l.i),l.Qb(m))},T.\u0275cmp=l.Kb({type:T,selectors:[["app-latency"]],viewQuery:function(e,t){var a;1&e&&l.Tc(v,!0),2&e&&l.zc(a=l.ic())&&(t.table=a.first)},decls:24,vars:17,consts:[[3,"onDatesPicked"],[1,"row"],[1,"col-xl-12"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"material","fullscreen","expandable",2,"top","30px","height","500px",3,"columnMode","headerHeight","footerHeight","rowHeight","scrollbarV","rows","loadingIndicator"],["expandableTable",""],[3,"rowHeight","toggle"],["ngx-datatable-row-detail-template",""],[3,"width","resizeable","sortable","draggable","canAutoResize"],["ngx-datatable-cell-template",""],["name","date",3,"minWidth",4,"ngIf"],["name","subid"],["ngx-datatable-header-template",""],["name","latency",3,"minWidth"],["name","averageLatency",3,"minWidth"],["name","queries",3,"minWidth"],["class","table-responsive","style","padding-left: 36px;",4,"ngIf"],[1,"table-responsive",2,"padding-left","36px"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],["href","javascript:void(0)","title","Expand/Collapse Row",3,"click"],["name","date",3,"minWidth"]],template:function(e,t){1&e&&(l.Wb(0,"app-reporting-filtering",0),l.hc("onDatesPicked",(function(e){return t.updateReportingFiltering(e)})),l.Vb(),l.Wb(1,"div",1),l.Wb(2,"div",2),l.Wb(3,"button",3),l.hc("click",(function(e){return t.refreshLatency(e)})),l.Oc(4," Refresh "),l.Vb(),l.Vb(),l.Vb(),l.Wb(5,"ngx-datatable",4,5),l.Wb(7,"ngx-datatable-row-detail",6),l.hc("toggle",(function(e){return t.onDetailToggle(e)})),l.Mc(8,M,1,1,"ng-template",7),l.Vb(),l.Wb(9,"ngx-datatable-column",8),l.Mc(10,V,1,4,"ng-template",9),l.Vb(),l.Mc(11,W,3,1,"ngx-datatable-column",10),l.Wb(12,"ngx-datatable-column",11),l.Mc(13,k,1,0,"ng-template",12),l.Mc(14,R,2,1,"ng-template",9),l.Vb(),l.Wb(15,"ngx-datatable-column",13),l.Mc(16,S,1,0,"ng-template",12),l.Mc(17,x,3,3,"ng-template",9),l.Vb(),l.Wb(18,"ngx-datatable-column",14),l.Mc(19,P,1,0,"ng-template",12),l.Mc(20,I,3,3,"ng-template",9),l.Vb(),l.Wb(21,"ngx-datatable-column",15),l.Mc(22,L,1,0,"ng-template",12),l.Mc(23,C,3,3,"ng-template",9),l.Vb(),l.Vb()),2&e&&(l.Db(5),l.rc("columnMode","force")("headerHeight",50)("footerHeight",0)("rowHeight",50)("scrollbarV",!0)("rows",t.rows)("loadingIndicator",t.loadingIndicator),l.Db(2),l.rc("rowHeight",t.refresh?t.getDetailRowHeight:100),l.Db(2),l.rc("width",30)("resizeable",!1)("sortable",!1)("draggable",!1)("canAutoResize",!1),l.Db(2),l.rc("ngIf",!t.refresh),l.Db(4),l.rc("minWidth",35),l.Db(3),l.rc("minWidth",35),l.Db(3),l.rc("minWidth",35))},directives:[p.a,D.d,D.e,D.f,D.b,D.a,s.p,D.c,s.o],pipes:[s.f,s.g],styles:[".datatable-row-detail[_ngcontent-%COMP%]{padding:0!important}"]}),T),pathMatch:"full"},{path:"",redirectTo:"",pathMatch:"full"},{path:"**",redirectTo:"",pathMatch:"full"}]}],E=((j=function e(){a(this,e)}).\u0275mod=l.Ob({type:j}),j.\u0275inj=l.Nb({factory:function(e){return new(e||j)},imports:[[u.k.forChild(q)],u.k]}),j),F=c("UKGz"),H=((A=function e(){a(this,e)}).\u0275mod=l.Ob({type:A}),A.\u0275inj=l.Nb({factory:function(e){return new(e||A)},imports:[[s.c,E,D.g,F.a]]}),A)}}])}();